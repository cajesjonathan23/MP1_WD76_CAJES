/*! For license information please see widget-f5399e684790b9387e54.js.LICENSE.txt */
(function(){var __webpack_modules__={22338:function(e){e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{anonymizeUser:()=>r,getAmplitudeInstance:()=>n,setProperties:()=>i});var n=function(){var e={init:function(){},logEvent:function(){},getUserId:function(){return null},setUserId:function(){},regenerateDeviceId:function(){},setUserProperties:function(){}};return window.amplitude&&(e=window.amplitude.getInstance()),e},r=function(){n().setUserId(null),n().regenerateDeviceId()},i=function(e){n().setUserProperties(e)};return t})()},37254:function(e){e.exports=(()=>{"use strict";var e,t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{default:()=>r}),function(e){e.Apple="apple",e.Email="email",e.Facebook="facebook",e.Google="google",e.GoogleOneTap="google one tap"}(e||(e={}));const r=e;return n})()},71721:function(e){e.exports=(()=>{"use strict";var e={91999:(e,t,n)=>{n.d(t,{getAmplitudeInstance:()=>r});var r=function(){var e={init:function(){},logEvent:function(){},getUserId:function(){return null},setUserId:function(){},regenerateDeviceId:function(){},setUserProperties:function(){}};return window.amplitude&&(e=window.amplitude.getInstance()),e}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{default:()=>t});var e=n(91999);const t=function(t,n){var r=t.authentication_type,i=t.failure_type;(0,e.getAmplitudeInstance)().logEvent("log in failed",{"login type":r,"failure type":i},n)}})(),r})()},26466:function(e){e.exports=(()=>{"use strict";var e={91999:(e,t,n)=>{n.d(t,{getAmplitudeInstance:()=>r});var r=function(){var e={init:function(){},logEvent:function(){},getUserId:function(){return null},setUserId:function(){},regenerateDeviceId:function(){},setUserProperties:function(){}};return window.amplitude&&(e=window.amplitude.getInstance()),e}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{default:()=>t});var e=n(91999);const t=function(t,n){var r=t.authentication_type,i=t.deferred_deep_link_type;(0,e.getAmplitudeInstance)().logEvent("log in succeeded",{"login type":r,"deferred deep link type":i},n)}})(),r})()},7905:function(e){e.exports=(()=>{"use strict";var e={91999:(e,t,n)=>{n.d(t,{getAmplitudeInstance:()=>r});var r=function(){var e={init:function(){},logEvent:function(){},getUserId:function(){return null},setUserId:function(){},regenerateDeviceId:function(){},setUserProperties:function(){}};return window.amplitude&&(e=window.amplitude.getInstance()),e}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{default:()=>t});var e=n(91999);const t=function(t){(0,e.getAmplitudeInstance)().logEvent("one tap displayed",{},t)}})(),r})()},47562:function(e){e.exports=(()=>{"use strict";var e={91999:(e,t,n)=>{n.d(t,{getAmplitudeInstance:()=>r});var r=function(){var e={init:function(){},logEvent:function(){},getUserId:function(){return null},setUserId:function(){},regenerateDeviceId:function(){},setUserProperties:function(){}};return window.amplitude&&(e=window.amplitude.getInstance()),e}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{default:()=>t});var e=n(91999);const t=function(t,n){var r=t.authentication_type,i=t.failure_type;(0,e.getAmplitudeInstance)().logEvent("sign up failed",{"signup type":r,"failure type":i},n)}})(),r})()},22302:function(e){e.exports=(()=>{"use strict";var e={91999:(e,t,n)=>{n.d(t,{getAmplitudeInstance:()=>r});var r=function(){var e={init:function(){},logEvent:function(){},getUserId:function(){return null},setUserId:function(){},regenerateDeviceId:function(){},setUserProperties:function(){}};return window.amplitude&&(e=window.amplitude.getInstance()),e}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{default:()=>t});var e=n(91999);const t=function(t,n){var r=t.authentication_type,i=t.deferred_deep_link_type;(0,e.getAmplitudeInstance)().logEvent("sign up succeeded",{"signup type":r,"deferred deep link type":i},n)}})(),r})()},81342:function(e,t,n){var r,i;e.exports=(r=n(67294),i=n(21038),(()=>{var e={7320:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},1837:(e,t,n)=>{"use strict";n(7320);var r=n(8156),i=60103;if("function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}},2322:(e,t,n)=>{"use strict";e.exports=n(1837)},7134:function(e,t,n){var r;e.exports=(r=n(9767),(()=>{"use strict";var e={19767:e=>{e.exports=r}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{n.r(i);var e=n(19767),t={};for(const n in e)"default"!==n&&(t[n]=()=>e[n]);n.d(i,t)})(),i})())},8156:e=>{"use strict";e.exports=r},9767:e=>{"use strict";e.exports=i}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";n.r(o),n.d(o,{additionalStyleCardConfigs:()=>i,baseStyleCardConfigs:()=>r});var e=n(2322),t=n(7134),r={alltrailsOutdoorsV2:{displayName:"AllTrails",key:"alltrailsOutdoorsV2",terrainEnabled:!0,keyboardShortcut:"F",testId:"AllTrails"},alltrailsSatellite:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"RnYLTT",defaultMessage:"Satellite"}),key:"alltrailsSatellite",terrainEnabled:!0,keyboardShortcut:"S",testId:"Satellite"},googleSatellite:{displayName:"Google Satellite",aclVisible:["admin","notMobile"],key:"googleSatellite",keyboardShortcut:"A",testId:"Google satellite"},adminBasemap:{displayName:"Custom basemap",aclVisible:["admin","notMobile"],key:"adminBasemap",keyboardShortcut:"B",testId:"Custom basemap"},opencycle:{displayName:"OCM",key:"opencycle",keyboardShortcut:"Q",testId:"OCM"},openstreet:{displayName:"OSM",key:"openstreet",keyboardShortcut:"E",testId:"OSM"},roadmap:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"bEzgqy",defaultMessage:"Road"}),key:"roadmap",keyboardShortcut:"R",testId:"Road"},topo:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"U2K71y",defaultMessage:"USGS topo (US only)"}),key:"topo",keyboardShortcut:"T",testId:"USGS topo (US only)"},worldparks:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"3P8xOP",defaultMessage:"World parks"}),key:"worldparks",keyboardShortcut:"W",testId:"World parks"},worldtopo:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"AZkKD4",defaultMessage:"Terrain"}),key:"worldtopo",keyboardShortcut:"D",testId:"Terrain"}},i={after:{displayName:"Last 60 days",aclVisible:["admin"],key:"after",testId:"Last 60 days"},airQuality:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"WuS71h",defaultMessage:"Air Quality"}),aclEnabled:["pro"],key:"airQuality",terrainDisabled:!1,testId:"Air Quality"},clusterTrails:{displayName:"Cluster trails",aclVisible:["admin"],hasHeatmap:!0,key:"clusterTrails",refreshOnPan:!0,terrainDisabled:!0,testId:"Cluster trails"},clusterTrailsHeatmap:{aclEnabled:["clusterTrailsEnabled"],aclVisible:["admin"],isAdminHeatmap:!0,key:"clusterTrailsHeatmap"},contribs:{displayName:"Contrib VRs",aclVisible:["admin"],aclEnabled:["contributeTrail"],key:"contribs",terrainDisabled:!0,testId:"Contrib VRs"},distanceMarkers:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"WgaZA1",defaultMessage:"Distance markers"}),aclEnabled:["exploreMap"],key:"distanceMarkers",terrainDisabled:!1,testId:"Distance markers"},heatmap:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"WEDRDw",defaultMessage:"Heatmap"}),aclEnabled:["pro"],filterable:!0,terrainDisabled:!1,key:"heatmap",keyboardShortcut:"P",testId:"Heatmap"},lightPollution:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"RupB0w",defaultMessage:"Light pollution"}),aclEnabled:["pro"],key:"lightPollution",terrainDisabled:!1,testId:"Light pollution"},limit:{displayName:"Most Recent 50",aclVisible:["admin"],key:"limit",terrainDisabled:!0,testId:"Most Recent 50"},mapsAll:{displayName:"Maps all",aclVisible:["admin"],hasHeatmap:!0,key:"mapsAll",refreshOnPan:!0,filterable:!0,terrainDisabled:!0,testId:"Maps all"},mapsAllHeatmap:{aclEnabled:["mapsAllEnabled"],aclVisible:["admin"],isAdminHeatmap:!0,key:"mapsAllHeatmap"},nearbyTrails:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"hyQnCi",defaultMessage:"Nearby trails"}),aclEnabled:["nearbyTrails"],hasHeatmap:!0,refreshOnPan:!0,terrainDisabled:!1,key:"nearbyTrails",keyboardShortcut:"O",testId:"Nearby trails"},nearbyTrailsHeatmap:{aclEnabled:["nearbyTrailsEnabled"],aclVisible:["admin"],isAdminHeatmap:!0,key:"nearbyTrailsHeatmap"},pendingTrails:{displayName:"Pending trails",aclVisible:["admin"],hasHeatmap:!0,key:"pendingTrails",refreshOnPan:!0,testId:"Pending trails"},pendingTrailsHeatmap:{aclEnabled:["pendingTrailsEnabled"],aclVisible:["admin"],isAdminHeatmap:!0,key:"pendingTrailsHeatmap"},photos:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"9khnVR",defaultMessage:"Photos"}),aclEnabled:["attachedToTrail","exploreMap"],key:"photos",terrainDisabled:!1,testId:"Photos"},pollen:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"zhpVzF",defaultMessage:"Pollen"}),aclEnabled:["pro"],key:"pollen",terrainDisabled:!1,testId:"Pollen"},recordingsAll:{displayName:"Rec. all",aclVisible:["admin"],hasHeatmap:!0,refreshOnPan:!0,filterable:!0,key:"recordingsAll",keyboardShortcut:"L",testId:"Rec. all"},recordingsAllHeatmap:{aclEnabled:["recordingsAllEnabled"],aclVisible:["admin"],isAdminHeatmap:!0,key:"recordingsAllHeatmap"},recordingsPop:{displayName:"Rec. popular",aclVisible:["admin"],hasHeatmap:!0,refreshOnPan:!0,filterable:!0,key:"recordingsPop",keyboardShortcut:"K",testId:"Rec. popular"},recordingsPopHeatmap:{aclEnabled:["recordingsPopEnabled"],aclVisible:["admin"],isAdminHeatmap:!0,key:"recordingsPopHeatmap"},adminOverlay:{displayName:"Custom overlay",aclVisible:["admin"],key:"adminOverlay",keyboardShortcut:"Y",testId:"Custom overlay"},waymarkedCycling:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"cdG19O",defaultMessage:"Waymarked cycling"}),aclVisible:["gpsies"],key:"waymarkedCycling",terrainDisabled:!0,testId:"Waymarked cycling"},waymarkedHiking:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"EmWg+k",defaultMessage:"Waymarked hiking"}),aclVisible:["gpsies"],key:"waymarkedHiking",terrainDisabled:!0,testId:"Waymarked hiking"},waymarkedMTB:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"ih+DAR",defaultMessage:"Waymarked MTB"}),aclVisible:["gpsies"],key:"waymarkedMTB",terrainDisabled:!0,testId:"Waymarked MTB"},waypoints:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"+cSeJ2",defaultMessage:"Waypoints"}),aclEnabled:["attachedToTrail","exploreMap"],key:"waypoints",terrainDisabled:!1,testId:"Waypoints"},weather:{displayName:(0,e.jsx)(t.FormattedMessage,{id:"O2sqh9",defaultMessage:"Weather"}),aclEnabled:["pro"],key:"weather",terrainDisabled:!1,testId:"Weather"}}})(),o})())},66031:function(e){e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t){var n=new Array(3).fill(0).map((function(t,n){return["at",n,["to-rgba",e]]}));return["rgba",n[0],n[1],n[2],t]}return e.r(t),e.d(t,{colorWithOpacityExpression:()=>n}),t})()},2754:function(e){var t;t=()=>(()=>{"use strict";var e={9991:(e,t,n)=>{n.d(t,{default:()=>i});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};const i=function(e,t,n,i){var o;return{sources:(o={},o[e]=r({id:e,type:"raster",tiles:[t]},n),o),layers:[r({id:e,source:e,type:"raster"},i)],glyphs:"mapbox://fonts/alltrails/{fontstack}/{range}.pbf",version:8}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{default:()=>t});var e=n(9991);function t(t){var n=t.mapboxAccessToken,r=t.styleId,i=(new Date).getTime(),o=9e5,a=new Date(Math.floor(i/o)*o).getTime()/1e3,s=new Date(Math.ceil(i/o)*o).getTime()/1e3;return{adminBasemap:"",adminOverlay:"",googleSatellite:"",alltrailsOutdoorsV2:"https://api.mapbox.com/styles/v1/alltrails/ck6ihzq4v0e801ipws9d40r9m?access_token=".concat(n),alltrailsSatellite:"https://api.mapbox.com/styles/v1/alltrails/cjp90np3z44xz2rofjvdakfbh?access_token=".concat(n),roadmap:"https://api.mapbox.com/styles/v1/mapbox/streets-v10?access_token=".concat(n),worldparks:"https://api.mapbox.com/styles/v1/alltrails/cjpbskuvg2f622smu19gk59y7?access_token=".concat(n),airQuality:(0,e.default)("airQuality","https://air-quality.alltrails.com/{z}/{x}/{y}",{attribution:"<a target='_blank' href='https://breezometer.com'>BreezoMeter</a>",maxzoom:16,tileSize:256},{paint:{"raster-opacity":.8}}),lightPollution:(0,e.default)("lightPollution","https://api.mapbox.com/styles/v1/alltrails/cjvzvxr4f1oa41ct09tqtsjvp/tiles/512/{z}/{x}/{y}@2x?access_token=".concat(n),{attribution:"<a target='_blank' href='https://www.ngdc.noaa.gov'>NOAA</a>",tileSize:512},{paint:{"raster-opacity":.5}}),opencycle:(0,e.default)("opencycle","https://tiles-ocm.alltrails.com/{z}/{x}/{y}.png",{attribution:'\xa9 <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors',tileSize:256,maxzoom:19,minzoom:4}),openstreet:(0,e.default)("openstreet","https://tiles-osm.alltrails.com/{z}/{x}/{y}.png",{attribution:'\xa9 <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors',tileSize:256,maxzoom:19,minzoom:4}),pollen:(0,e.default)("pollen","https://pollen-daily.alltrails.com/{z}/{x}/{y}",{attribution:"<a target='_blank' href='https://breezometer.com'>BreezoMeter</a>",maxzoom:16,tileSize:256},{paint:{"raster-opacity":.8}}),topo:(0,e.default)("topo","https://us-topo.alltrails.com/{z}/{x}/{y}.png",{attribution:"\xa9 2020 AllTrails",tileSize:256,maxzoom:16,minzoom:4}),waymarkedCycling:(0,e.default)("waymarkedCycling","https://waymarked-cycling.alltrails.com/{z}/{x}/{y}",{attribution:"<a target='_blank' href='https://http://www.waymarkedtrails.org/'>Waymarked Trails</a>",tileSize:256,maxzoom:16},{paint:{"raster-opacity":.8}}),waymarkedHiking:(0,e.default)("waymarkedHiking","https://waymarked-hiking.alltrails.com/{z}/{x}/{y}",{attribution:"<a target='_blank' href='https://www.waymarkedtrails.org/'>Waymarked Trails</a>",tileSize:256,maxzoom:16},{paint:{"raster-opacity":.8}}),waymarkedMTB:(0,e.default)("waymarkedMTB","https://waymarked-mtb.alltrails.com/{z}/{x}/{y}",{attribution:"<a target='_blank' href='https://www.waymarkedtrails.org/'>Waymarked Trails</a>",tileSize:256,maxzoom:16},{paint:{"raster-opacity":.8}}),weather:(0,e.default)("weather","https://weather-radar.alltrails.com?ts=".concat(a,"&fts=").concat(s,"&xyz={x}:{y}:{z}"),{attribution:"<a target='_blank' href='https://www.weather.com/'>Weather.com</a>",tileSize:256},{paint:{"raster-opacity":.5}}),worldtopo:(0,e.default)("worldtopo","https://tiles-wtopo.alltrails.com/{z}/{y}/{x}.png",{attribution:"Copyright \xa9 2013 ESRI",tileSize:256,maxzoom:19})}[r]}})(),r})(),e.exports=t()},76129:function(e){var t;t=()=>(()=>{var e={7808:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function a(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=l(e,(0|e)<0?-1:0,!0),a&&(o[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=l(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function s(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=f)return w}else{if(e<=-p)return E;if(e+1>=p)return x}return e<0?s(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=a,n.fromNumber=s,n.fromBits=l;var u=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var i=s(u(n,8)),o=g,a=0;a<e.length;a+=8){var l=Math.min(8,e.length-a),d=parseInt(e.substring(a,a+l),n);if(l<8){var h=s(u(n,l));o=o.mul(h).add(s(d))}else o=(o=o.mul(i)).add(s(d))}return o.unsigned=t,o}function d(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?c(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=d;var h=4294967296,f=h*h,p=f/2,m=a(1<<24),g=a(0);n.ZERO=g;var y=a(0,!0);n.UZERO=y;var v=a(1);n.ONE=v;var _=a(1,!0);n.UONE=_;var b=a(-1);n.NEG_ONE=b;var x=l(-1,2147483647,!1);n.MAX_VALUE=x;var w=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var E=l(0,-2147483648,!1);n.MIN_VALUE=E;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=s(u(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),c=(o.sub(l.mul(i)).toInt()>>>0).toString(e);if((o=l).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(v)},S.neg=S.negate,S.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,u=e.low>>>16,c=0,h=0,f=0,p=0;return f+=(p+=o+(65535&e.low))>>>16,h+=(f+=i+u)>>>16,c+=(h+=n+s)>>>16,c+=t+a,l((f&=65535)<<16|(p&=65535),(c&=65535)<<16|(h&=65535),this.unsigned)},S.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=d(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(E))return e.isOdd()?E:g;if(e.eq(E))return this.isOdd()?E:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,u=e.high>>>16,c=65535&e.high,h=e.low>>>16,f=65535&e.low,p=0,y=0,v=0,_=0;return v+=(_+=a*f)>>>16,y+=(v+=o*f)>>>16,v&=65535,y+=(v+=a*h)>>>16,p+=(y+=i*f)>>>16,y&=65535,p+=(y+=o*h)>>>16,y&=65535,p+=(y+=a*c)>>>16,p+=n*f+i*h+o*c+a*u,l((v&=65535)<<16|(_&=65535),(p&=65535)<<16|(y&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,i,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return _;o=y}else{if(this.eq(E))return e.eq(v)||e.eq(b)?E:e.eq(E)?v:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:b:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(E))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),c=a<=48?1:u(2,a-48),h=s(n),f=h.mul(e);f.isNegative()||f.gt(i);)f=(h=s(n-=c,this.unsigned)).mul(e);h.isZero()&&(h=v),o=o.add(h),i=i.sub(f)}return o},S.div=S.divide,S.modulo=function(e){return r(e)||(e=d(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return l(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},755:(e,t,n)=>{"use strict";function r(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function i(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(e[0])||!s(e[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:e},t,n)}function o(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function a(e,t,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:e},t,n)}function s(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}n.d(t,{_R:()=>a,uf:()=>o,xm:()=>i})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{atMapsToGeojson:()=>p,decodeSegmentLatLng:()=>h,decodeSegmentLngLat:()=>f,decodedObjectsFromPolyline:()=>c,getLineColor:()=>a,getLines:()=>l,getSegments:()=>u,lineOrSegSort:()=>s,pointItemToLngLat:()=>m,pointItemsToGeojson:()=>g,reverseCoord:()=>d});var e=n(755),t=n(7808),i=n.n(t),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},a=function(e){return e&&e.lineDisplayProperty?e.lineDisplayProperty.color:"#ff0000"},s=function(e,t){return e.sequence_num&&t.sequence_num?e.sequence_num-t.sequence_num:e.sequenceNum&&t.sequenceNum?e.sequenceNum-t.sequenceNum:e.id-t.id},l=function(e){if(!e)return[];var t=e.routes,n=e.tracks,r=t&&t.length>0?t:n;return r?r.sort(s):[]},u=function(e){if(!e)return[];var t=e.lineSegments,n=e.lineTimedSegments,r=t&&t.length>0?t:n;return r?r.sort(s):[]},c=function(e,t){for(var n=e.length,r=t.length,o=0,a=0,s=i().ZERO,l=i().ZERO,u=[r*n,0],c=0;o<n;){l=i().ZERO;for(var d=0;d<r;d+=1){s=i().ZERO,a=0;do{if(o>=n)break;l=i().fromNumber(e.charCodeAt(o)-63),o+=1,s=s.or(l.and(31)*Math.pow(2,a)),a+=5}while(l>=32);var h=0!==s.and(1).toNumber()?s.shiftRight(1).not():s.shiftRight(1),f=0===c?0:u[(c-1)*r+d];u[c*r+d]=Math.round((f+Math.pow(10,-t[d])*h)*Math.pow(10,t[d]))/Math.pow(10,t[d])}c+=1}for(var p=[],m=0,g=u.length;m<g;m+=r)p.push(u.slice(m,m+r));return p},d=function(e){return[e[1],e[0]]},h=function(e){if(!e||!e.polyline)return[];var t=e.polyline.pointsData;return t&&""!==t?function(e){return c(e,[5,5])}(t):[]},f=function(e){return h(e).map((function(e){return d(e)}))},p=function(t,n){void 0===n&&(n=!1);var r=[];return t.forEach((function(t){var i;t&&(n&&(i=function(e){var t=e.ID,n=e.id,r=e.created_at,i=e.metadata,o=e.name,a=e.presentationType,s=e.slug,l=e.trail_id,u=e.trailId,c=e.type;return{ID:t||n,created_at:i?i.created:r,isVerifiedMap:"AtVerifiedMap"===c,name:o,slug:s,trailId:u||l,type:a||"track"}}(t)),l(t).forEach((function(t){var n=[],s=a(t),l=t.id;u(t).forEach((function(e){var t=f(e);t.length>0&&n.push(t)})),n.length>0&&r.push((0,e._R)(n,o(o({},i),{color:s,lineId:l})))})))})),(0,e.uf)(r)},m=function(e){var t;if(!e)return null;if(e._geoloc)t=[(n=e._geoloc).lng,n.lat];else if(e.location){var n;t=[(n=e.location).longitude,n.latitude]}else e.latitude&&e.longitude?t=[e.longitude,e.latitude]:e.lngLat&&(t=e.lngLat);return!t||!t[0]&&0!==t[0]||!t[1]&&0!==t[1]||0===t[0]&&0===t[1]?null:t},g=function(t){var n=[];return t.forEach((function(t){var r=function(t){var n=m(t);if(n){var r=t.id,i=t.ID;return(0,e.xm)(n,t,{id:r||i})}return null}(t);r&&n.push(r)})),(0,e.uf)(n)}})(),r})(),e.exports=t()},12103:function(e){var t;t=()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>r});var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};const r=function(e,t,r,i){var o;return{sources:(o={},o[e]=n({id:e,type:"raster",tiles:[t]},r),o),layers:[n({id:e,source:e,type:"raster"},i)],glyphs:"mapbox://fonts/alltrails/{fontstack}/{range}.pbf",version:8}};return t})(),e.exports=t()},26490:function(e){var t;t=()=>(()=>{"use strict";var e={33343:(e,t,n)=>{n.d(t,{isDevelopment:()=>r});var r=function(){return!1}},60957:(e,t,n)=>{function r(e){var t;return null===(t=n.g.__AllTrailsStorage__)||void 0===t?void 0:t[e]}n.d(t,{cacheGet:()=>r})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{ApiError:()=>u,X_AT_KEY:()=>d,api:()=>h,community:()=>E,communityDelete:()=>b,communityGet:()=>x,communityPost:()=>_,communityPut:()=>w,destroy:()=>f,get:()=>p,getBaseUrl:()=>y,post:()=>m,put:()=>g});var e,t=n(33343),i=n(60957),o=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},u=function(e){function t(t,n){var r=this.constructor,i=e.call(this,t.statusText)||this;return Object.setPrototypeOf(i,r.prototype),i.headers=t.headers,i.url=t.url,i.status=t.status,i.statusText=t.statusText,i.data=n,i}return o(t,e),t.initialize=function(e){var n;return s(this,void 0,void 0,(function(){var r,i,o;return l(this,(function(a){switch(a.label){case 0:return r=null===(n=e.headers)||void 0===n?void 0:n.get("content-type"),204===e.status?[2,new t(e,void 0)]:r&&-1!==r.indexOf("application/json")?[4,e.json()]:[3,2];case 1:return i=a.sent(),[2,new t(e,i)];case 2:return[4,e.text()];case 3:o=a.sent();try{return[2,new t(e,JSON.parse(o))]}catch(n){return[2,new t(e,o)]}return[2]}}))}))},t}(Error),c=function(e){return null==e?"":"string"==typeof e?e:JSON.stringify(e)},d="3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i";function h(e,r){var o;return s(this,void 0,void 0,(function(){var s,c,h,f;return l(this,(function(l){switch(l.label){case 0:return s=document.querySelector('meta[name="csrf-token"]'),c=(0,i.cacheGet)("shared.api.fetch.headers"),h=a(a({},(null==r?void 0:r.body)&&{"content-type":"application/json"}),{"X-AT-KEY":d,"X-CSRF-TOKEN":null==s?void 0:s.content,"X-Language-Locale":(null===(o=null===n.g||void 0===n.g?void 0:n.g.__AT_DATA__)||void 0===o?void 0:o.languageRegionCode)||"en-US"}),[4,fetch(e,a(a({credentials:(0,t.isDevelopment)()?"include":void 0},r),{headers:a(a(a({},h),c),null==r?void 0:r.headers)}))];case 1:return(f=l.sent()).ok?[3,3]:[4,u.initialize(f)];case 2:throw l.sent();case 3:return[4,f.text().then((function(e){return e?JSON.parse(e):{}}))];case 4:return[2,l.sent()]}}))}))}function f(e){return s(this,void 0,void 0,(function(){return l(this,(function(t){return[2,h(e,{method:"delete"})]}))}))}function p(e,t){return s(this,void 0,void 0,(function(){var n,r,i;return l(this,(function(o){return r=(n=t||{}).params,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(n,["params"]),[2,h("".concat(e).concat(r?"?".concat(new URLSearchParams(r).toString()):""),a({},i))]}))}))}function m(e,t,n){return s(this,void 0,void 0,(function(){var r;return l(this,(function(i){return r=c(t),[2,h("".concat(e).concat((null==n?void 0:n.params)?"?".concat(new URLSearchParams(n.params).toString()):""),a(a({},r&&{body:r}),{method:"post"}))]}))}))}function g(e,t,n){return s(this,void 0,void 0,(function(){var r;return l(this,(function(i){return r=c(t),[2,h("".concat(e).concat((null==n?void 0:n.params)?"?".concat(new URLSearchParams(n.params).toString()):""),a(a({},r&&{body:r}),{method:"put",headers:(null==n?void 0:n.headers)?a({},n.headers):{}}))]}))}))}var y=function(){return(0,t.isDevelopment)()?"https://alpha.alltrails.com":""},v=function(e){return void 0===e&&(e=""),"".concat(y()).concat(e)};function _(e,t){return s(this,void 0,void 0,(function(){return l(this,(function(n){return[2,m(v(e),t)]}))}))}function b(e){return s(this,void 0,void 0,(function(){return l(this,(function(t){return[2,f(v(e))]}))}))}function x(e){return s(this,void 0,void 0,(function(){return l(this,(function(t){return[2,p(v(e))]}))}))}function w(e,t){return s(this,void 0,void 0,(function(){return l(this,(function(n){return[2,g(v(e),t)]}))}))}function E(e,t){return s(this,void 0,void 0,(function(){return l(this,(function(n){return[2,h(v(e),t)]}))}))}})(),r})(),e.exports=t()},67142:function(e,t,n){var r;r=(e,t,n,r)=>(()=>{var i={72779:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},31814:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={container:"AUxnvEMKUpKbQqeQ+9Di6g=="}},37320:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},11837:(e,t,n)=>{"use strict";n(37320);var r=n(8156),i=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},52322:(e,t,n)=>{"use strict";e.exports=n(11837)},70408:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(52322),i=n(72779),o=n.n(i);const a={container:"gxT3Zc1Gp7dW6rif5GvCzw==",sm:"_97pFfg115fuRuZVwLYmVfQ==",lg:"jJf9ZRAJNn++9licv1HAqA=="};var s=n(1560),l=n(19312),u=n(58743),c=n(96073),d=n(92753),h=n(58911),f=n(7768),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)};const m=function(e){var t=e.isSelected,n=e.onClick,i=e.onWhiteBackground,m=void 0!==i&&i,g=e.className,y=void 0===g?"":g,v=e.size,_=(0,s.default)(l.Z).formattedDefaultMessages,b=_.REMOVE_FROM_LIST,x=_.ADD_TO_LIST,w=t?b:x;return(0,r.jsx)("button",p({"aria-label":w,className:o()(a.container,v&&a[v],y),onClick:n,title:w,type:"button"},{children:t?m?(0,r.jsx)(d.default,{color:u.COLOR_UI_HIGHLIGHT,size:v}):(0,r.jsx)(f.default,{color:u.COLOR_UI_HIGHLIGHT,size:v}):m?(0,r.jsx)(c.default,{size:v}):(0,r.jsx)(h.default,{size:v})}))}},37006:(e,t,n)=>{"use strict";n(52322),n(56128)},19807:(e,t,n)=>{"use strict";n(37006);var r=n(56128);n.o(r,"Link")&&n.d(t,{Link:function(){return r.Link}})},23382:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(52322),i=n(8156);const o=function(e){var t=e.src,n=e.className,o=e.loading,a=(0,i.useState)(),s=a[0],l=a[1];return(0,i.useEffect)((function(){l(!1)}),[t]),!t||s?(0,r.jsx)("div",{className:n}):(0,r.jsx)("img",{className:n,src:t,alt:"",onError:function(){l(!0)},loading:o})}},24081:(e,t,n)=>{"use strict";n.d(t,{default:()=>Pe});var r=n(52322),i=n(8156);function o(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function a(e={},t={}){Object.keys(t).forEach((n=>{void 0===e[n]?e[n]=t[n]:o(t[n])&&o(e[n])&&Object.keys(t[n]).length>0&&a(e[n],t[n])}))}const s={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function l(){const e="undefined"!=typeof document?document:{};return a(e,s),e}const u={document:s,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function c(){const e="undefined"!=typeof window?window:{};return a(e,u),e}class d extends Array{constructor(e){"number"==typeof e?super(e):(super(...e||[]),function(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get:()=>t,set(e){t.__proto__=e}})}(this))}}function h(e=[]){const t=[];return e.forEach((e=>{Array.isArray(e)?t.push(...h(e)):t.push(e)})),t}function f(e,t){return Array.prototype.filter.call(e,t)}function p(e,t){const n=c(),r=l();let i=[];if(!t&&e instanceof d)return e;if(!e)return new d(i);if("string"==typeof e){const n=e.trim();if(n.indexOf("<")>=0&&n.indexOf(">")>=0){let e="div";0===n.indexOf("<li")&&(e="ul"),0===n.indexOf("<tr")&&(e="tbody"),0!==n.indexOf("<td")&&0!==n.indexOf("<th")||(e="tr"),0===n.indexOf("<tbody")&&(e="table"),0===n.indexOf("<option")&&(e="select");const t=r.createElement(e);t.innerHTML=n;for(let n=0;n<t.childNodes.length;n+=1)i.push(t.childNodes[n])}else i=function(e,t){if("string"!=typeof e)return[e];const n=[],r=t.querySelectorAll(e);for(let i=0;i<r.length;i+=1)n.push(r[i]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)i.push(e);else if(Array.isArray(e)){if(e instanceof d)return e;i=e}return new d(function(e){const t=[];for(let n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(i))}p.fn=d.prototype;const m="resize scroll".split(" ");function g(e){return function(...t){if(void 0===t[0]){for(let t=0;t<this.length;t+=1)m.indexOf(e)<0&&(e in this[t]?this[t][e]():p(this[t]).trigger(e));return this}return this.on(e,...t)}}g("click"),g("blur"),g("focus"),g("focusin"),g("focusout"),g("keyup"),g("keydown"),g("keypress"),g("submit"),g("change"),g("mousedown"),g("mousemove"),g("mouseup"),g("mouseenter"),g("mouseleave"),g("mouseout"),g("mouseover"),g("touchstart"),g("touchend"),g("touchmove"),g("resize"),g("scroll");const y={addClass:function(...e){const t=h(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.add(...t)})),this},removeClass:function(...e){const t=h(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.remove(...t)})),this},hasClass:function(...e){const t=h(e.map((e=>e.split(" "))));return f(this,(e=>t.filter((t=>e.classList.contains(t))).length>0)).length>0},toggleClass:function(...e){const t=h(e.map((e=>e.split(" "))));this.forEach((e=>{t.forEach((t=>{e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(let n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(const t in e)this[n][t]=e[t],this[n].setAttribute(t,e[t]);return this},removeAttr:function(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?`${e}ms`:e;return this},on:function(...e){let[t,n,r,i]=e;function o(e){const t=e.target;if(!t)return;const i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),p(t).is(n))r.apply(t,i);else{const e=p(t).parents();for(let t=0;t<e.length;t+=1)p(e[t]).is(n)&&r.apply(e[t],i)}}function a(e){const t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),r.apply(this,t)}"function"==typeof e[1]&&([t,r,i]=e,n=void 0),i||(i=!1);const s=t.split(" ");let l;for(let u=0;u<this.length;u+=1){const e=this[u];if(n)for(l=0;l<s.length;l+=1){const t=s[l];e.dom7LiveListeners||(e.dom7LiveListeners={}),e.dom7LiveListeners[t]||(e.dom7LiveListeners[t]=[]),e.dom7LiveListeners[t].push({listener:r,proxyListener:o}),e.addEventListener(t,o,i)}else for(l=0;l<s.length;l+=1){const t=s[l];e.dom7Listeners||(e.dom7Listeners={}),e.dom7Listeners[t]||(e.dom7Listeners[t]=[]),e.dom7Listeners[t].push({listener:r,proxyListener:a}),e.addEventListener(t,a,i)}}return this},off:function(...e){let[t,n,r,i]=e;"function"==typeof e[1]&&([t,r,i]=e,n=void 0),i||(i=!1);const o=t.split(" ");for(let a=0;a<o.length;a+=1){const e=o[a];for(let t=0;t<this.length;t+=1){const o=this[t];let a;if(!n&&o.dom7Listeners?a=o.dom7Listeners[e]:n&&o.dom7LiveListeners&&(a=o.dom7LiveListeners[e]),a&&a.length)for(let t=a.length-1;t>=0;t-=1){const n=a[t];r&&n.listener===r||r&&n.listener&&n.listener.dom7proxy&&n.listener.dom7proxy===r?(o.removeEventListener(e,n.proxyListener,i),a.splice(t,1)):r||(o.removeEventListener(e,n.proxyListener,i),a.splice(t,1))}}}return this},trigger:function(...e){const t=c(),n=e[0].split(" "),r=e[1];for(let i=0;i<n.length;i+=1){const o=n[i];for(let n=0;n<this.length;n+=1){const i=this[n];if(t.CustomEvent){const n=new t.CustomEvent(o,{detail:r,bubbles:!0,cancelable:!0});i.dom7EventData=e.filter(((e,t)=>t>0)),i.dispatchEvent(n),i.dom7EventData=[],delete i.dom7EventData}}}return this},transitionEnd:function(e){const t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){const e=c();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){const e=c(),t=l(),n=this[0],r=n.getBoundingClientRect(),i=t.body,o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,s=n===e?e.scrollY:n.scrollTop,u=n===e?e.scrollX:n.scrollLeft;return{top:r.top+s-o,left:r.left+u-a}}return null},css:function(e,t){const n=c();let r;if(1===arguments.length){if("string"!=typeof e){for(r=0;r<this.length;r+=1)for(const t in e)this[r].style[t]=e[t];return this}if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(r=0;r<this.length;r+=1)this[r].style[e]=t;return this}return this},each:function(e){return e?(this.forEach(((t,n)=>{e.apply(t,[t,n])})),this):this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){const t=c(),n=l(),r=this[0];let i,o;if(!r||void 0===e)return!1;if("string"==typeof e){if(r.matches)return r.matches(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);for(i=p(e),o=0;o<i.length;o+=1)if(i[o]===r)return!0;return!1}if(e===n)return r===n;if(e===t)return r===t;if(e.nodeType||e instanceof d){for(i=e.nodeType?[e]:e,o=0;o<i.length;o+=1)if(i[o]===r)return!0;return!1}return!1},index:function(){let e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;const t=this.length;if(e>t-1)return p([]);if(e<0){const n=t+e;return p(n<0?[]:[this[n]])}return p([this[e]])},append:function(...e){let t;const n=l();for(let r=0;r<e.length;r+=1){t=e[r];for(let e=0;e<this.length;e+=1)if("string"==typeof t){const r=n.createElement("div");for(r.innerHTML=t;r.firstChild;)this[e].appendChild(r.firstChild)}else if(t instanceof d)for(let n=0;n<t.length;n+=1)this[e].appendChild(t[n]);else this[e].appendChild(t)}return this},prepend:function(e){const t=l();let n,r;for(n=0;n<this.length;n+=1)if("string"==typeof e){const i=t.createElement("div");for(i.innerHTML=e,r=i.childNodes.length-1;r>=0;r-=1)this[n].insertBefore(i.childNodes[r],this[n].childNodes[0])}else if(e instanceof d)for(r=0;r<e.length;r+=1)this[n].insertBefore(e[r],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&p(this[0].nextElementSibling).is(e)?p([this[0].nextElementSibling]):p([]):this[0].nextElementSibling?p([this[0].nextElementSibling]):p([]):p([])},nextAll:function(e){const t=[];let n=this[0];if(!n)return p([]);for(;n.nextElementSibling;){const r=n.nextElementSibling;e?p(r).is(e)&&t.push(r):t.push(r),n=r}return p(t)},prev:function(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&p(t.previousElementSibling).is(e)?p([t.previousElementSibling]):p([]):t.previousElementSibling?p([t.previousElementSibling]):p([])}return p([])},prevAll:function(e){const t=[];let n=this[0];if(!n)return p([]);for(;n.previousElementSibling;){const r=n.previousElementSibling;e?p(r).is(e)&&t.push(r):t.push(r),n=r}return p(t)},parent:function(e){const t=[];for(let n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?p(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return p(t)},parents:function(e){const t=[];for(let n=0;n<this.length;n+=1){let r=this[n].parentNode;for(;r;)e?p(r).is(e)&&t.push(r):t.push(r),r=r.parentNode}return p(t)},closest:function(e){let t=this;return void 0===e?p([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].querySelectorAll(e);for(let e=0;e<r.length;e+=1)t.push(r[e])}return p(t)},children:function(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].children;for(let n=0;n<r.length;n+=1)e&&!p(r[n]).is(e)||t.push(r[n])}return p(t)},filter:function(e){return p(f(this,e))},remove:function(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(y).forEach((e=>{Object.defineProperty(p.fn,e,{value:y[e],writable:!0})}));const v=p;function _(e,t=0){return setTimeout(e,t)}function b(){return Date.now()}function x(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function w(...e){const t=Object(e[0]),n=["__proto__","constructor","prototype"];for(let i=1;i<e.length;i+=1){const o=e[i];if(null!=o&&(r=o,!("undefined"!=typeof window&&void 0!==window.HTMLElement?r instanceof HTMLElement:r&&(1===r.nodeType||11===r.nodeType)))){const e=Object.keys(Object(o)).filter((e=>n.indexOf(e)<0));for(let n=0,r=e.length;n<r;n+=1){const r=e[n],i=Object.getOwnPropertyDescriptor(o,r);void 0!==i&&i.enumerable&&(x(t[r])&&x(o[r])?o[r].__swiper__?t[r]=o[r]:w(t[r],o[r]):!x(t[r])&&x(o[r])?(t[r]={},o[r].__swiper__?t[r]=o[r]:w(t[r],o[r])):t[r]=o[r])}}}var r;return t}function E(e,t,n){e.style.setProperty(t,n)}function S({swiper:e,targetPosition:t,side:n}){const r=c(),i=-e.translate;let o,a=null;const s=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const l=t>i?"next":"prev",u=(e,t)=>"next"===l&&e>=t||"prev"===l&&e<=t,d=()=>{o=(new Date).getTime(),null===a&&(a=o);const l=Math.max(Math.min((o-a)/s,1),0),c=.5-Math.cos(l*Math.PI)/2;let h=i+c*(t-i);if(u(h,t)&&(h=t),e.wrapperEl.scrollTo({[n]:h}),u(h,t))return e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout((()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:h})})),void r.cancelAnimationFrame(e.cssModeFrameID);e.cssModeFrameID=r.requestAnimationFrame(d)};d()}let T,M,k;function C(){return T||(T=function(){const e=c(),t=l();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let t=!1;try{const n=Object.defineProperty({},"passive",{get(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),T}const P={on(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!=typeof t)return r;const i=n?"unshift":"push";return e.split(" ").forEach((e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!=typeof t)return r;function i(...n){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy,t.apply(r,n)}return i.__emitterProxy=t,r.on(e,i,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof e)return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((e=>{void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach(((r,i)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsListeners)return t;let n,r,i;return"string"==typeof e[0]||Array.isArray(e[0])?(n=e[0],r=e.slice(1,e.length),i=t):(n=e[0].events,r=e[0].data,i=e[0].context||t),r.unshift(i),(Array.isArray(n)?n:n.split(" ")).forEach((e=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach((t=>{t.apply(i,[e,...r])})),t.eventsListeners&&t.eventsListeners[e]&&t.eventsListeners[e].forEach((e=>{e.apply(i,r)}))})),t}},A={updateSize:function(){const e=this;let t,n;const r=e.$el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:r[0].clientWidth,n=void 0!==e.params.height&&null!==e.params.height?e.params.height:r[0].clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),n=n-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}const r=e.params,{$wrapperEl:i,size:o,rtlTranslate:a,wrongRTL:s}=e,l=e.virtual&&r.virtual.enabled,u=l?e.virtual.slides.length:e.slides.length,c=i.children(`.${e.params.slideClass}`),d=l?e.virtual.slides.length:c.length;let h=[];const f=[],p=[];let m=r.slidesOffsetBefore;"function"==typeof m&&(m=r.slidesOffsetBefore.call(e));let g=r.slidesOffsetAfter;"function"==typeof g&&(g=r.slidesOffsetAfter.call(e));const y=e.snapGrid.length,v=e.slidesGrid.length;let _=r.spaceBetween,b=-m,x=0,w=0;if(void 0===o)return;"string"==typeof _&&_.indexOf("%")>=0&&(_=parseFloat(_.replace("%",""))/100*o),e.virtualSize=-_,a?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),r.centeredSlides&&r.cssMode&&(E(e.wrapperEl,"--swiper-centered-offset-before",""),E(e.wrapperEl,"--swiper-centered-offset-after",""));const S=r.grid&&r.grid.rows>1&&e.grid;let T;S&&e.grid.initSlides(d);const M="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter((e=>void 0!==r.breakpoints[e].slidesPerView)).length>0;for(let E=0;E<d;E+=1){T=0;const i=c.eq(E);if(S&&e.grid.updateSlide(E,i,d,t),"none"!==i.css("display")){if("auto"===r.slidesPerView){M&&(c[E].style[t("width")]="");const o=getComputedStyle(i[0]),a=i[0].style.transform,s=i[0].style.webkitTransform;if(a&&(i[0].style.transform="none"),s&&(i[0].style.webkitTransform="none"),r.roundLengths)T=e.isHorizontal()?i.outerWidth(!0):i.outerHeight(!0);else{const e=n(o,"width"),t=n(o,"padding-left"),r=n(o,"padding-right"),a=n(o,"margin-left"),s=n(o,"margin-right"),l=o.getPropertyValue("box-sizing");if(l&&"border-box"===l)T=e+a+s;else{const{clientWidth:n,offsetWidth:o}=i[0];T=e+t+r+a+s+(o-n)}}a&&(i[0].style.transform=a),s&&(i[0].style.webkitTransform=s),r.roundLengths&&(T=Math.floor(T))}else T=(o-(r.slidesPerView-1)*_)/r.slidesPerView,r.roundLengths&&(T=Math.floor(T)),c[E]&&(c[E].style[t("width")]=`${T}px`);c[E]&&(c[E].swiperSlideSize=T),p.push(T),r.centeredSlides?(b=b+T/2+x/2+_,0===x&&0!==E&&(b=b-o/2-_),0===E&&(b=b-o/2-_),Math.abs(b)<.001&&(b=0),r.roundLengths&&(b=Math.floor(b)),w%r.slidesPerGroup==0&&h.push(b),f.push(b)):(r.roundLengths&&(b=Math.floor(b)),(w-Math.min(e.params.slidesPerGroupSkip,w))%e.params.slidesPerGroup==0&&h.push(b),f.push(b),b=b+T+_),e.virtualSize+=T+_,x=T,w+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+g,a&&s&&("slide"===r.effect||"coverflow"===r.effect)&&i.css({width:`${e.virtualSize+r.spaceBetween}px`}),r.setWrapperSize&&i.css({[t("width")]:`${e.virtualSize+r.spaceBetween}px`}),S&&e.grid.updateWrapperSize(T,h,t),!r.centeredSlides){const t=[];for(let n=0;n<h.length;n+=1){let i=h[n];r.roundLengths&&(i=Math.floor(i)),h[n]<=e.virtualSize-o&&t.push(i)}h=t,Math.floor(e.virtualSize-o)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-o)}if(0===h.length&&(h=[0]),0!==r.spaceBetween){const n=e.isHorizontal()&&a?"marginLeft":t("marginRight");c.filter(((e,t)=>!r.cssMode||t!==c.length-1)).css({[n]:`${_}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let e=0;p.forEach((t=>{e+=t+(r.spaceBetween?r.spaceBetween:0)})),e-=r.spaceBetween;const t=e-o;h=h.map((e=>e<0?-m:e>t?t+g:e))}if(r.centerInsufficientSlides){let e=0;if(p.forEach((t=>{e+=t+(r.spaceBetween?r.spaceBetween:0)})),e-=r.spaceBetween,e<o){const t=(o-e)/2;h.forEach(((e,n)=>{h[n]=e-t})),f.forEach(((e,n)=>{f[n]=e+t}))}}if(Object.assign(e,{slides:c,snapGrid:h,slidesGrid:f,slidesSizesGrid:p}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){E(e.wrapperEl,"--swiper-centered-offset-before",-h[0]+"px"),E(e.wrapperEl,"--swiper-centered-offset-after",e.size/2-p[p.length-1]/2+"px");const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+n))}if(d!==u&&e.emit("slidesLengthChange"),h.length!==y&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==v&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!(l||r.cssMode||"slide"!==r.effect&&"fade"!==r.effect)){const t=`${r.containerModifierClass}backface-hidden`,n=e.$el.hasClass(t);d<=r.maxBackfaceHiddenSlides?n||e.$el.addClass(t):n&&e.$el.removeClass(t)}},updateAutoHeight:function(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let i,o=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const a=e=>r?t.slides.filter((t=>parseInt(t.getAttribute("data-swiper-slide-index"),10)===e))[0]:t.slides.eq(e)[0];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||v([])).each((e=>{n.push(e)}));else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const e=t.activeIndex+i;if(e>t.slides.length&&!r)break;n.push(a(e))}else n.push(a(t.activeIndex));for(i=0;i<n.length;i+=1)if(void 0!==n[i]){const e=n[i].offsetHeight;o=e>o?e:o}(o||0===o)&&t.$wrapperEl.css("height",`${o}px`)},updateSlidesOffset:function(){const e=this,t=e.slides;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=e.isHorizontal()?t[n].offsetLeft:t[n].offsetTop},updateSlidesProgress:function(e=this&&this.translate||0){const t=this,n=t.params,{slides:r,rtlTranslate:i,snapGrid:o}=t;if(0===r.length)return;void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();let a=-e;i&&(a=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let s=0;s<r.length;s+=1){const e=r[s];let l=e.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);const u=(a+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+n.spaceBetween),c=(a-o[0]+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+n.spaceBetween),d=-(a-l),h=d+t.slidesSizesGrid[s];(d>=0&&d<t.size-1||h>1&&h<=t.size||d<=0&&h>=t.size)&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(s),r.eq(s).addClass(n.slideVisibleClass)),e.progress=i?-u:u,e.originalProgress=i?-c:c}t.visibleSlides=v(t.visibleSlides)},updateProgress:function(e){const t=this;if(void 0===e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:o,isEnd:a}=t;const s=o,l=a;0===r?(i=0,o=!0,a=!0):(i=(e-t.minTranslate())/r,o=i<=0,a=i>=1),Object.assign(t,{progress:i,isBeginning:o,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),o&&!s&&t.emit("reachBeginning toEdge"),a&&!l&&t.emit("reachEnd toEdge"),(s&&!o||l&&!a)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,$wrapperEl:r,activeIndex:i,realIndex:o}=e,a=e.virtual&&n.virtual.enabled;let s;t.removeClass(`${n.slideActiveClass} ${n.slideNextClass} ${n.slidePrevClass} ${n.slideDuplicateActiveClass} ${n.slideDuplicateNextClass} ${n.slideDuplicatePrevClass}`),s=a?e.$wrapperEl.find(`.${n.slideClass}[data-swiper-slide-index="${i}"]`):t.eq(i),s.addClass(n.slideActiveClass),n.loop&&(s.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${o}"]`).addClass(n.slideDuplicateActiveClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${o}"]`).addClass(n.slideDuplicateActiveClass));let l=s.nextAll(`.${n.slideClass}`).eq(0).addClass(n.slideNextClass);n.loop&&0===l.length&&(l=t.eq(0),l.addClass(n.slideNextClass));let u=s.prevAll(`.${n.slideClass}`).eq(0).addClass(n.slidePrevClass);n.loop&&0===u.length&&(u=t.eq(-1),u.addClass(n.slidePrevClass)),n.loop&&(l.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass),u.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass)),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:r,snapGrid:i,params:o,activeIndex:a,realIndex:s,snapIndex:l}=t;let u,c=e;if(void 0===c){for(let e=0;e<r.length;e+=1)void 0!==r[e+1]?n>=r[e]&&n<r[e+1]-(r[e+1]-r[e])/2?c=e:n>=r[e]&&n<r[e+1]&&(c=e+1):n>=r[e]&&(c=e);o.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(i.indexOf(n)>=0)u=i.indexOf(n);else{const e=Math.min(o.slidesPerGroupSkip,c);u=e+Math.floor((c-e)/o.slidesPerGroup)}if(u>=i.length&&(u=i.length-1),c===a)return void(u!==l&&(t.snapIndex=u,t.emit("snapIndexChange")));const d=parseInt(t.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(t,{snapIndex:u,realIndex:d,previousIndex:a,activeIndex:c}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),s!==d&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")},updateClickedSlide:function(e){const t=this,n=t.params,r=v(e).closest(`.${n.slideClass}`)[0];let i,o=!1;if(r)for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===r){o=!0,i=a;break}if(!r||!o)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(v(r).attr("data-swiper-slide-index"),10):t.clickedIndex=i,n.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}};function O({swiper:e,runCallbacks:t,direction:n,step:r}){const{activeIndex:i,previousIndex:o}=e;let a=n;if(a||(a=i>o?"next":i<o?"prev":"reset"),e.emit(`transition${r}`),t&&i!==o){if("reset"===a)return void e.emit(`slideResetTransition${r}`);e.emit(`slideChangeTransition${r}`),"next"===a?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}const I={slideTo:function(e=0,t=this.params.speed,n=!0,r,i){if("number"!=typeof e&&"string"!=typeof e)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const o=this;let a=e;a<0&&(a=0);const{params:s,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:p}=o;if(o.animating&&s.preventInteractionOnTransition||!p&&!r&&!i)return!1;const m=Math.min(o.params.slidesPerGroupSkip,a);let g=m+Math.floor((a-m)/o.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const y=-l[g];if(s.normalizeSlideIndex)for(let _=0;_<u.length;_+=1){const e=-Math.floor(100*y),t=Math.floor(100*u[_]),n=Math.floor(100*u[_+1]);void 0!==u[_+1]?e>=t&&e<n-(n-t)/2?a=_:e>=t&&e<n&&(a=_+1):e>=t&&(a=_)}if(o.initialized&&a!==d){if(!o.allowSlideNext&&y<o.translate&&y<o.minTranslate())return!1;if(!o.allowSlidePrev&&y>o.translate&&y>o.maxTranslate()&&(d||0)!==a)return!1}let v;if(a!==(c||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(y),v=a>d?"next":a<d?"prev":"reset",h&&-y===o.translate||!h&&y===o.translate)return o.updateActiveIndex(a),s.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==s.effect&&o.setTranslate(y),"reset"!==v&&(o.transitionStart(n,v),o.transitionEnd(n,v)),!1;if(s.cssMode){const e=o.isHorizontal(),n=h?y:-y;if(0===t){const t=o.virtual&&o.params.virtual.enabled;t&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),f[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame((()=>{o.wrapperEl.style.scrollSnapType="",o._swiperImmediateVirtual=!1}))}else{if(!o.support.smoothScroll)return S({swiper:o,targetPosition:n,side:e?"left":"top"}),!0;f.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return o.setTransition(t),o.setTranslate(y),o.updateActiveIndex(a),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,r),o.transitionStart(n,v),0===t?o.transitionEnd(n,v):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,v))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e=0,t=this.params.speed,n=!0,r){if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const i=this;let o=e;return i.params.loop&&(o+=i.loopedSlides),i.slideTo(o,t,n,r)},slideNext:function(e=this.params.speed,t=!0,n){const r=this,{animating:i,enabled:o,params:a}=r;if(!o)return r;let s=a.slidesPerGroup;"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(s=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<a.slidesPerGroupSkip?1:s;if(a.loop){if(i&&a.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return a.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+l,e,t,n)},slidePrev:function(e=this.params.speed,t=!0,n){const r=this,{params:i,animating:o,snapGrid:a,slidesGrid:s,rtlTranslate:l,enabled:u}=r;if(!u)return r;if(i.loop){if(o&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const d=c(l?r.translate:-r.translate),h=a.map((e=>c(e)));let f=a[h.indexOf(d)-1];if(void 0===f&&i.cssMode){let e;a.forEach(((t,n)=>{d>=t&&(e=n)})),void 0!==e&&(f=a[e>0?e-1:e])}let p=0;if(void 0!==f&&(p=s.indexOf(f),p<0&&(p=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(p=p-r.slidesPerViewDynamic("previous",!0)+1,p=Math.max(p,0))),i.rewind&&r.isBeginning){const i=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(i,e,t,n)}return r.slideTo(p,e,t,n)},slideReset:function(e=this.params.speed,t=!0,n){return this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e=this.params.speed,t=!0,n,r=.5){const i=this;let o=i.activeIndex;const a=Math.min(i.params.slidesPerGroupSkip,o),s=a+Math.floor((o-a)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[s]){const e=i.snapGrid[s];l-e>(i.snapGrid[s+1]-e)*r&&(o+=i.params.slidesPerGroup)}else{const e=i.snapGrid[s-1];l-e<=(i.snapGrid[s]-e)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,e,t,n)},slideToClickedSlide:function(){const e=this,{params:t,$wrapperEl:n}=e,r="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let i,o=e.clickedIndex;if(t.loop){if(e.animating)return;i=parseInt(v(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?o<e.loopedSlides-r/2||o>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),o=n.children(`.${t.slideClass}[data-swiper-slide-index="${i}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),_((()=>{e.slideTo(o)}))):e.slideTo(o):o>e.slides.length-r?(e.loopFix(),o=n.children(`.${t.slideClass}[data-swiper-slide-index="${i}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),_((()=>{e.slideTo(o)}))):e.slideTo(o)}else e.slideTo(o)}};function L(e){const t=this,n=l(),r=c(),i=t.touchEventsData,{params:o,touches:a,enabled:s}=t;if(!s)return;if(t.animating&&o.preventInteractionOnTransition)return;!t.animating&&o.cssMode&&o.loop&&t.loopFix();let u=e;u.originalEvent&&(u=u.originalEvent);let d=v(u.target);if("wrapper"===o.touchEventsTarget&&!d.closest(t.wrapperEl).length)return;if(i.isTouchEvent="touchstart"===u.type,!i.isTouchEvent&&"which"in u&&3===u.which)return;if(!i.isTouchEvent&&"button"in u&&u.button>0)return;if(i.isTouched&&i.isMoved)return;const h=!!o.noSwipingClass&&""!==o.noSwipingClass,f=e.composedPath?e.composedPath():e.path;h&&u.target&&u.target.shadowRoot&&f&&(d=v(f[0]));const p=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,m=!(!u.target||!u.target.shadowRoot);if(o.noSwiping&&(m?function(e,t=this){return function t(n){if(!n||n===l()||n===c())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(e);return r||n.getRootNode?r||t(n.getRootNode().host):null}(t)}(p,d[0]):d.closest(p)[0]))return void(t.allowClick=!0);if(o.swipeHandler&&!d.closest(o.swipeHandler)[0])return;a.currentX="touchstart"===u.type?u.targetTouches[0].pageX:u.pageX,a.currentY="touchstart"===u.type?u.targetTouches[0].pageY:u.pageY;const g=a.currentX,y=a.currentY,_=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,x=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(_&&(g<=x||g>=r.innerWidth-x)){if("prevent"!==_)return;e.preventDefault()}if(Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=g,a.startY=y,i.touchStartTime=b(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(i.allowThresholdMove=!1),"touchstart"!==u.type){let e=!0;d.is(i.focusableElements)&&(e=!1,"SELECT"===d[0].nodeName&&(i.isTouched=!1)),n.activeElement&&v(n.activeElement).is(i.focusableElements)&&n.activeElement!==d[0]&&n.activeElement.blur();const r=e&&t.allowTouchMove&&o.touchStartPreventDefault;!o.touchStartForcePreventDefault&&!r||d[0].isContentEditable||u.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!o.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",u)}function D(e){const t=l(),n=this,r=n.touchEventsData,{params:i,touches:o,rtlTranslate:a,enabled:s}=n;if(!s)return;let u=e;if(u.originalEvent&&(u=u.originalEvent),!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",u));if(r.isTouchEvent&&"touchmove"!==u.type)return;const c="touchmove"===u.type&&u.targetTouches&&(u.targetTouches[0]||u.changedTouches[0]),d="touchmove"===u.type?c.pageX:u.pageX,h="touchmove"===u.type?c.pageY:u.pageY;if(u.preventedByNestedSwiper)return o.startX=d,void(o.startY=h);if(!n.allowTouchMove)return v(u.target).is(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(o,{startX:d,startY:h,currentX:d,currentY:h}),r.touchStartTime=b()));if(r.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(h<o.startY&&n.translate<=n.maxTranslate()||h>o.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(d<o.startX&&n.translate<=n.maxTranslate()||d>o.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&u.target===t.activeElement&&v(u.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",u),u.targetTouches&&u.targetTouches.length>1)return;o.currentX=d,o.currentY=h;const f=o.currentX-o.startX,p=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(f**2+p**2)<n.params.threshold)return;if(void 0===r.isScrolling){let e;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:f*f+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(f))/Math.PI,r.isScrolling=n.isHorizontal()?e>i.touchAngle:90-e>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",u),void 0===r.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(r.startMoving=!0)),r.isScrolling)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&u.cancelable&&u.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&u.stopPropagation(),r.isMoved||(i.loop&&!i.cssMode&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",u)),n.emit("sliderMove",u),r.isMoved=!0;let m=n.isHorizontal()?f:p;o.diff=m,m*=i.touchRatio,a&&(m=-m),n.swipeDirection=m>0?"prev":"next",r.currentTranslate=m+r.startTranslate;let g=!0,y=i.resistanceRatio;if(i.touchReleaseOnEdges&&(y=0),m>0&&r.currentTranslate>n.minTranslate()?(g=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+m)**y)):m<0&&r.currentTranslate<n.maxTranslate()&&(g=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-m)**y)),g&&(u.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(m)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,void(o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function R(e){const t=this,n=t.touchEventsData,{params:r,touches:i,rtlTranslate:o,slidesGrid:a,enabled:s}=t;if(!s)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const u=b(),c=u-n.touchStartTime;if(t.allowClick){const e=l.path||l.composedPath&&l.composedPath();t.updateClickedSlide(e&&e[0]||l.target),t.emit("tap click",l),c<300&&u-n.lastClickTime<300&&t.emit("doubleTap doubleClick",l)}if(n.lastClickTime=b(),_((()=>{t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===i.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let d;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,d=r.followFinger?o?t.translate:-t.translate:-n.currentTranslate,r.cssMode)return;if(t.params.freeMode&&r.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:d});let h=0,f=t.slidesSizesGrid[0];for(let v=0;v<a.length;v+=v<r.slidesPerGroupSkip?1:r.slidesPerGroup){const e=v<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==a[v+e]?d>=a[v]&&d<a[v+e]&&(h=v,f=a[v+e]-a[v]):d>=a[v]&&(h=v,f=a[a.length-1]-a[a.length-2])}let p=null,m=null;r.rewind&&(t.isBeginning?m=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(p=0));const g=(d-a[h])/f,y=h<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(c>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(g>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?p:h+y):t.slideTo(h)),"prev"===t.swipeDirection&&(g>1-r.longSwipesRatio?t.slideTo(h+y):null!==m&&g<0&&Math.abs(g)>r.longSwipesRatio?t.slideTo(m):t.slideTo(h))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);!t.navigation||l.target!==t.navigation.nextEl&&l.target!==t.navigation.prevEl?("next"===t.swipeDirection&&t.slideTo(null!==p?p:h+y),"prev"===t.swipeDirection&&t.slideTo(null!==m?m:h)):l.target===t.navigation.nextEl?t.slideTo(h+y):t.slideTo(h)}}function N(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:o}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}function z(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function j(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;let i;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const o=e.maxTranslate()-e.minTranslate();i=0===o?0:(e.translate-e.minTranslate())/o,i!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let B=!1;function F(){}const U=(e,t)=>{const n=l(),{params:r,touchEvents:i,el:o,wrapperEl:a,device:s,support:u}=e,c=!!r.nested,d="on"===t?"addEventListener":"removeEventListener",h=t;if(u.touch){const t=!("touchstart"!==i.start||!u.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};o[d](i.start,e.onTouchStart,t),o[d](i.move,e.onTouchMove,u.passiveListener?{passive:!1,capture:c}:c),o[d](i.end,e.onTouchEnd,t),i.cancel&&o[d](i.cancel,e.onTouchEnd,t)}else o[d](i.start,e.onTouchStart,!1),n[d](i.move,e.onTouchMove,c),n[d](i.end,e.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&o[d]("click",e.onClick,!0),r.cssMode&&a[d]("scroll",e.onScroll),r.updateOnWindowResize?e[h](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",N,!0):e[h]("observerUpdate",N,!0)},G={attachEvents:function(){const e=this,t=l(),{params:n,support:r}=e;e.onTouchStart=L.bind(e),e.onTouchMove=D.bind(e),e.onTouchEnd=R.bind(e),n.cssMode&&(e.onScroll=j.bind(e)),e.onClick=z.bind(e),r.touch&&!B&&(t.addEventListener("touchstart",F),B=!0),U(e,"on")},detachEvents:function(){U(this,"off")}},H=(e,t)=>e.grid&&t.grid&&t.grid.rows>1,V={addClasses:function(){const e=this,{classNames:t,params:n,rtl:r,$el:i,device:o,support:a}=e,s=function(e,t){const n=[];return e.forEach((e=>{"object"==typeof e?Object.keys(e).forEach((r=>{e[r]&&n.push(t+r)})):"string"==typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"pointer-events":!a.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...s),i.addClass([...t].join(" ")),e.emitContainerClasses()},removeClasses:function(){const{$el:e,classNames:t}=this;e.removeClass(t.join(" ")),this.emitContainerClasses()}},q={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function $(e,t){return function(n={}){const r=Object.keys(n)[0],i=n[r];"object"==typeof i&&null!==i?(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===e[r]&&(e[r]={auto:!0}),r in e&&"enabled"in i?(!0===e[r]&&(e[r]={enabled:!0}),"object"!=typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),w(t,n)):w(t,n)):w(t,n)}}const W={eventsEmitter:P,update:A,translate:{getTranslate:function(e=(this.isHorizontal()?"x":"y")){const{params:t,rtlTranslate:n,translate:r,$wrapperEl:i}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let o=function(e,t="x"){const n=c();let r,i,o;const a=function(e){const t=c();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map((e=>e.replace(",","."))).join(", ")),o=new n.WebKitCSSMatrix("none"===i?"":i)):(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=o.toString().split(",")),"x"===t&&(i=n.WebKitCSSMatrix?o.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(i=n.WebKitCSSMatrix?o.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),i||0}(i[0],e);return n&&(o=-o),o||0},setTranslate:function(e,t){const n=this,{rtlTranslate:r,params:i,$wrapperEl:o,wrapperEl:a,progress:s}=n;let l,u=0,c=0;n.isHorizontal()?u=r?-e:e:c=e,i.roundLengths&&(u=Math.floor(u),c=Math.floor(c)),i.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-c:i.virtualTranslate||o.transform(`translate3d(${u}px, ${c}px, 0px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:c;const d=n.maxTranslate()-n.minTranslate();l=0===d?0:(e-n.minTranslate())/d,l!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e=0,t=this.params.speed,n=!0,r=!0,i){const o=this,{params:a,wrapperEl:s}=o;if(o.animating&&a.preventInteractionOnTransition)return!1;const l=o.minTranslate(),u=o.maxTranslate();let c;if(c=r&&e>l?l:r&&e<u?u:e,o.updateProgress(c),a.cssMode){const e=o.isHorizontal();if(0===t)s[e?"scrollLeft":"scrollTop"]=-c;else{if(!o.support.smoothScroll)return S({swiper:o,targetPosition:-c,side:e?"left":"top"}),!0;s.scrollTo({[e?"left":"top"]:-c,behavior:"smooth"})}return!0}return 0===t?(o.setTransition(0),o.setTranslate(c),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(c),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.$wrapperEl[0].addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){const n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e=!0,t){const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),O({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e=!0,t){const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),O({swiper:n,runCallbacks:e,direction:t,step:"End"}))}},slide:I,loop:{loopCreate:function(){const e=this,t=l(),{params:n,$wrapperEl:r}=e,i=r.children().length>0?v(r.children()[0].parentNode):r;i.children(`.${n.slideClass}.${n.slideDuplicateClass}`).remove();let o=i.children(`.${n.slideClass}`);if(n.loopFillGroupWithBlank){const e=n.slidesPerGroup-o.length%n.slidesPerGroup;if(e!==n.slidesPerGroup){for(let r=0;r<e;r+=1){const e=v(t.createElement("div")).addClass(`${n.slideClass} ${n.slideBlankClass}`);i.append(e)}o=i.children(`.${n.slideClass}`)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=o.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>o.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=o.length);const a=[],s=[];o.each(((e,t)=>{v(e).attr("data-swiper-slide-index",t)}));for(let l=0;l<e.loopedSlides;l+=1){const e=l-Math.floor(l/o.length)*o.length;s.push(o.eq(e)[0]),a.unshift(o.eq(o.length-e-1)[0])}for(let l=0;l<s.length;l+=1)i.append(v(s[l].cloneNode(!0)).addClass(n.slideDuplicateClass));for(let l=a.length-1;l>=0;l-=1)i.prepend(v(a[l].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:n,loopedSlides:r,allowSlidePrev:i,allowSlideNext:o,snapGrid:a,rtlTranslate:s}=e;let l;e.allowSlidePrev=!0,e.allowSlideNext=!0;const u=-a[t]-e.getTranslate();t<r?(l=n.length-3*r+t,l+=r,e.slideTo(l,0,!1,!0)&&0!==u&&e.setTranslate((s?-e.translate:e.translate)-u)):t>=n.length-r&&(l=-n.length+t+r,l+=r,e.slideTo(l,0,!1,!0)&&0!==u&&e.setTranslate((s?-e.translate:e.translate)-u)),e.allowSlidePrev=i,e.allowSlideNext=o,e.emit("loopFix")},loopDestroy:function(){const{$wrapperEl:e,params:t,slides:n}=this;e.children(`.${t.slideClass}.${t.slideDuplicateClass},.${t.slideClass}.${t.slideBlankClass}`).remove(),n.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"},unsetGrabCursor:function(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:G,breakpoints:{setBreakpoint:function(){const e=this,{activeIndex:t,initialized:n,loopedSlides:r=0,params:i,$el:o}=e,a=i.breakpoints;if(!a||a&&0===Object.keys(a).length)return;const s=e.getBreakpoint(a,e.params.breakpointsBase,e.el);if(!s||e.currentBreakpoint===s)return;const l=(s in a?a[s]:void 0)||e.originalParams,u=H(e,i),c=H(e,l),d=i.enabled;u&&!c?(o.removeClass(`${i.containerModifierClass}grid ${i.containerModifierClass}grid-column`),e.emitContainerClasses()):!u&&c&&(o.addClass(`${i.containerModifierClass}grid`),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===i.grid.fill)&&o.addClass(`${i.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((t=>{const n=i[t]&&i[t].enabled,r=l[t]&&l[t].enabled;n&&!r&&e[t].disable(),!n&&r&&e[t].enable()}));const h=l.direction&&l.direction!==i.direction,f=i.loop&&(l.slidesPerView!==i.slidesPerView||h);h&&n&&e.changeDirection(),w(e.params,l);const p=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),d&&!p?e.disable():!d&&p&&e.enable(),e.currentBreakpoint=s,e.emit("_beforeBreakpoint",l),f&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-r+e.loopedSlides,0,!1)),e.emit("breakpoint",l)},getBreakpoint:function(e,t="window",n){if(!e||"container"===t&&!n)return;let r=!1;const i=c(),o="window"===t?i.innerHeight:n.clientHeight,a=Object.keys(e).map((e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:o*t,point:e}}return{value:e,point:e}}));a.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let s=0;s<a.length;s+=1){const{point:e,value:o}=a[s];"window"===t?i.matchMedia(`(min-width: ${o}px)`).matches&&(r=e):o<=n.clientWidth&&(r=e)}return r||"max"}},checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*r;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:V,images:{loadImage:function(e,t,n,r,i,o){const a=c();let s;function l(){o&&o()}v(e).parent("picture")[0]||e.complete&&i?l():t?(s=new a.Image,s.onload=l,s.onerror=l,r&&(s.sizes=r),n&&(s.srcset=n),t&&(s.src=t)):l()},preloadImages:function(){const e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(let n=0;n<e.imagesToLoad.length;n+=1){const r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}}},Z={};class X{constructor(...e){let t,n;if(1===e.length&&e[0].constructor&&"Object"===Object.prototype.toString.call(e[0]).slice(8,-1)?n=e[0]:[t,n]=e,n||(n={}),n=w({},n),t&&!n.el&&(n.el=t),n.el&&v(n.el).length>1){const e=[];return v(n.el).each((t=>{const r=w({},n,{el:t});e.push(new X(r))})),e}const r=this;r.__swiper__=!0,r.support=C(),r.device=function(e={}){return M||(M=function({userAgent:e}={}){const t=C(),n=c(),r=n.navigator.platform,i=e||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,s=n.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/);let u=i.match(/(iPad).*OS\s([\d_]+)/);const d=i.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===r;let p="MacIntel"===r;return!u&&p&&t.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${a}x${s}`)>=0&&(u=i.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),p=!1),l&&!f&&(o.os="android",o.android=!0),(u||h||d)&&(o.os="ios",o.ios=!0),o}(e)),M}({userAgent:n.userAgent}),r.browser=(k||(k=function(){const e=c();return{isSafari:function(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),k),r.eventsListeners={},r.eventsAnyListeners=[],r.modules=[...r.__modules__],n.modules&&Array.isArray(n.modules)&&r.modules.push(...n.modules);const i={};r.modules.forEach((e=>{e({swiper:r,extendParams:$(n,i),on:r.on.bind(r),once:r.once.bind(r),off:r.off.bind(r),emit:r.emit.bind(r)})}));const o=w({},q,i);return r.params=w({},o,Z,n),r.originalParams=w({},r.params),r.passedParams=w({},n),r.params&&r.params.on&&Object.keys(r.params.on).forEach((e=>{r.on(e,r.params.on[e])})),r.params&&r.params.onAny&&r.onAny(r.params.onAny),r.$=v,Object.assign(r,{enabled:r.params.enabled,el:t,classNames:[],slides:v(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===r.params.direction,isVertical:()=>"vertical"===r.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev,touchEvents:function(){const e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return r.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},r.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},r.support.touch||!r.params.simulateTouch?r.touchEventsTouch:r.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:r.params.focusableElements,lastClickTime:b(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:r.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),r.emit("_swiper"),r.params.init&&r.init(),r}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.each((n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e="current",t=!1){const{params:n,slides:r,slidesGrid:i,slidesSizesGrid:o,size:a,activeIndex:s}=this;let l=1;if(n.centeredSlides){let e,t=r[s].swiperSlideSize;for(let n=s+1;n<r.length;n+=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>a&&(e=!0));for(let n=s-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>a&&(e=!0))}else if("current"===e)for(let u=s+1;u<r.length;u+=1)(t?i[u]+o[u]-i[s]<a:i[u]-i[s]<a)&&(l+=1);else for(let u=s-1;u>=0;u-=1)i[s]-i[u]<a&&(l+=1);return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function r(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let i;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(r(),e.params.autoHeight&&e.updateAutoHeight()):(i=("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),i||r()),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t=!0){const n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass(`${n.params.containerModifierClass}${r}`).addClass(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.each((t=>{"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.$el.addClass(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.$el.removeClass(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;const n=v(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let i=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const t=v(e.shadowRoot.querySelector(r()));return t.children=e=>n.children(e),t}return n.children?n.children(r()):v(n).children(r())})();if(0===i.length&&t.params.createElements){const e=l().createElement("div");i=v(e),e.className=t.params.wrapperClass,n.append(e),n.children(`.${t.params.slideClass}`).each((e=>{i.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:i,wrapperEl:i[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===i.css("display")}),!0}init(e){const t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}destroy(e=!0,t=!0){const n=this,{params:r,$el:i,$wrapperEl:o,slides:a}=n;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttr("style"),o.removeAttr("style"),a&&a.length&&a.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((e=>{n.off(e)})),!1!==e&&(n.$el[0].swiper=null,function(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}(n)),n.destroyed=!0),null}static extendDefaults(e){w(Z,e)}static get extendedDefaults(){return Z}static get defaults(){return q}static installModule(e){X.prototype.__modules__||(X.prototype.__modules__=[]);const t=X.prototype.__modules__;"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>X.installModule(e))),X):(X.installModule(e),X)}}Object.keys(W).forEach((e=>{Object.keys(W[e]).forEach((t=>{X.prototype[t]=W[e][t]}))})),X.use([function({swiper:e,on:t,emit:n}){const r=c();let i=null,o=null;const a=()=>{e&&!e.destroyed&&e.initialized&&(n("beforeResize"),n("resize"))},s=()=>{e&&!e.destroyed&&e.initialized&&n("orientationchange")};t("init",(()=>{e.params.resizeObserver&&void 0!==r.ResizeObserver?e&&!e.destroyed&&e.initialized&&(i=new ResizeObserver((t=>{o=r.requestAnimationFrame((()=>{const{width:n,height:r}=e;let i=n,o=r;t.forEach((({contentBoxSize:t,contentRect:n,target:r})=>{r&&r!==e.el||(i=n?n.width:(t[0]||t).inlineSize,o=n?n.height:(t[0]||t).blockSize)})),i===n&&o===r||a()}))})),i.observe(e.el)):(r.addEventListener("resize",a),r.addEventListener("orientationchange",s))})),t("destroy",(()=>{o&&r.cancelAnimationFrame(o),i&&i.unobserve&&e.el&&(i.unobserve(e.el),i=null),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",s)}))},function({swiper:e,extendParams:t,on:n,emit:r}){const i=[],o=c(),a=(e,t={})=>{const n=new(o.MutationObserver||o.WebkitMutationObserver)((e=>{if(1===e.length)return void r("observerUpdate",e[0]);const t=function(){r("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)}));n.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),i.push(n)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",(()=>{if(e.params.observer){if(e.params.observeParents){const t=e.$el.parents();for(let e=0;e<t.length;e+=1)a(t[e])}a(e.$el[0],{childList:e.params.observeSlideChildren}),a(e.$wrapperEl[0],{attributes:!1})}})),n("destroy",(()=>{i.forEach((e=>{e.disconnect()})),i.splice(0,i.length)}))}]);const Y=X;function K(e=""){return`.${e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function J({swiper:e,extendParams:t,on:n,emit:r}){const i="swiper-pagination";let o;t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),e.pagination={el:null,$el:null,bullets:[]};let a=0;function s(){return!e.params.pagination.el||!e.pagination.el||!e.pagination.$el||0===e.pagination.$el.length}function u(t,n){const{bulletActiveClass:r}=e.params.pagination;t[n]().addClass(`${r}-${n}`)[n]().addClass(`${r}-${n}-${n}`)}function c(){const t=e.rtl,n=e.params.pagination;if(s())return;const i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,l=e.pagination.$el;let c;const d=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(c=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup),c>i-1-2*e.loopedSlides&&(c-=i-2*e.loopedSlides),c>d-1&&(c-=d),c<0&&"bullets"!==e.params.paginationType&&(c=d+c)):c=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===n.type&&e.pagination.bullets&&e.pagination.bullets.length>0){const r=e.pagination.bullets;let i,s,d;if(n.dynamicBullets&&(o=r.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),l.css(e.isHorizontal()?"width":"height",o*(n.dynamicMainBullets+4)+"px"),n.dynamicMainBullets>1&&void 0!==e.previousIndex&&(a+=c-(e.previousIndex-e.loopedSlides||0),a>n.dynamicMainBullets-1?a=n.dynamicMainBullets-1:a<0&&(a=0)),i=Math.max(c-a,0),s=i+(Math.min(r.length,n.dynamicMainBullets)-1),d=(s+i)/2),r.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map((e=>`${n.bulletActiveClass}${e}`)).join(" ")),l.length>1)r.each((e=>{const t=v(e),r=t.index();r===c&&t.addClass(n.bulletActiveClass),n.dynamicBullets&&(r>=i&&r<=s&&t.addClass(`${n.bulletActiveClass}-main`),r===i&&u(t,"prev"),r===s&&u(t,"next"))}));else{const t=r.eq(c),o=t.index();if(t.addClass(n.bulletActiveClass),n.dynamicBullets){const t=r.eq(i),a=r.eq(s);for(let e=i;e<=s;e+=1)r.eq(e).addClass(`${n.bulletActiveClass}-main`);if(e.params.loop)if(o>=r.length){for(let e=n.dynamicMainBullets;e>=0;e-=1)r.eq(r.length-e).addClass(`${n.bulletActiveClass}-main`);r.eq(r.length-n.dynamicMainBullets-1).addClass(`${n.bulletActiveClass}-prev`)}else u(t,"prev"),u(a,"next");else u(t,"prev"),u(a,"next")}}if(n.dynamicBullets){const i=Math.min(r.length,n.dynamicMainBullets+4),a=(o*i-o)/2-d*o,s=t?"right":"left";r.css(e.isHorizontal()?s:"top",`${a}px`)}}if("fraction"===n.type&&(l.find(K(n.currentClass)).text(n.formatFractionCurrent(c+1)),l.find(K(n.totalClass)).text(n.formatFractionTotal(d))),"progressbar"===n.type){let t;t=n.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";const r=(c+1)/d;let i=1,o=1;"horizontal"===t?i=r:o=r,l.find(K(n.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${i}) scaleY(${o})`).transition(e.params.speed)}"custom"===n.type&&n.renderCustom?(l.html(n.renderCustom(e,c+1,d)),r("paginationRender",l[0])):r("paginationUpdate",l[0]),e.params.watchOverflow&&e.enabled&&l[e.isLocked?"addClass":"removeClass"](n.lockClass)}function d(){const t=e.params.pagination;if(s())return;const n=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,i=e.pagination.$el;let o="";if("bullets"===t.type){let r=e.params.loop?Math.ceil((n-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&!e.params.loop&&r>n&&(r=n);for(let n=0;n<r;n+=1)t.renderBullet?o+=t.renderBullet.call(e,n,t.bulletClass):o+=`<${t.bulletElement} class="${t.bulletClass}"></${t.bulletElement}>`;i.html(o),e.pagination.bullets=i.find(K(t.bulletClass))}"fraction"===t.type&&(o=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`,i.html(o)),"progressbar"===t.type&&(o=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):`<span class="${t.progressbarFillClass}"></span>`,i.html(o)),"custom"!==t.type&&r("paginationRender",e.pagination.$el[0])}function h(){e.params.pagination=function(e,t,n,r){const i=l();return e.params.createElements&&Object.keys(r).forEach((o=>{if(!n[o]&&!0===n.auto){let a=e.$el.children(`.${r[o]}`)[0];a||(a=i.createElement("div"),a.className=r[o],e.$el.append(a)),n[o]=a,t[o]=a}})),n}(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const t=e.params.pagination;if(!t.el)return;let n=v(t.el);0!==n.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&n.length>1&&(n=e.$el.find(t.el),n.length>1&&(n=n.filter((t=>v(t).parents(".swiper")[0]===e.el)))),"bullets"===t.type&&t.clickable&&n.addClass(t.clickableClass),n.addClass(t.modifierClass+t.type),n.addClass(e.isHorizontal()?t.horizontalClass:t.verticalClass),"bullets"===t.type&&t.dynamicBullets&&(n.addClass(`${t.modifierClass}${t.type}-dynamic`),a=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&n.addClass(t.progressbarOppositeClass),t.clickable&&n.on("click",K(t.bulletClass),(function(t){t.preventDefault();let n=v(this).index()*e.params.slidesPerGroup;e.params.loop&&(n+=e.loopedSlides),e.slideTo(n)})),Object.assign(e.pagination,{$el:n,el:n[0]}),e.enabled||n.addClass(t.lockClass))}function f(){const t=e.params.pagination;if(s())return;const n=e.pagination.$el;n.removeClass(t.hiddenClass),n.removeClass(t.modifierClass+t.type),n.removeClass(e.isHorizontal()?t.horizontalClass:t.verticalClass),e.pagination.bullets&&e.pagination.bullets.removeClass&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&n.off("click",K(t.bulletClass))}n("init",(()=>{!1===e.params.pagination.enabled?p():(h(),d(),c())})),n("activeIndexChange",(()=>{(e.params.loop||void 0===e.snapIndex)&&c()})),n("snapIndexChange",(()=>{e.params.loop||c()})),n("slidesLengthChange",(()=>{e.params.loop&&(d(),c())})),n("snapGridLengthChange",(()=>{e.params.loop||(d(),c())})),n("destroy",(()=>{f()})),n("enable disable",(()=>{const{$el:t}=e.pagination;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)})),n("lock unlock",(()=>{c()})),n("click",((t,n)=>{const i=n.target,{$el:o}=e.pagination;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&o&&o.length>0&&!v(i).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&i===e.navigation.nextEl||e.navigation.prevEl&&i===e.navigation.prevEl))return;const t=o.hasClass(e.params.pagination.hiddenClass);r(!0===t?"paginationShow":"paginationHide"),o.toggleClass(e.params.pagination.hiddenClass)}}));const p=()=>{e.$el.addClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.addClass(e.params.pagination.paginationDisabledClass),f()};Object.assign(e.pagination,{enable:()=>{e.$el.removeClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.removeClass(e.params.pagination.paginationDisabledClass),h(),d(),c()},disable:p,render:d,update:c,init:h,destroy:f})}function Q({swiper:e,extendParams:t,emit:n,once:r}){t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(e,{freeMode:{onTouchStart:function(){const t=e.getTranslate();e.setTranslate(t),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})},onTouchMove:function(){const{touchEventsData:t,touches:n}=e;0===t.velocities.length&&t.velocities.push({position:n[e.isHorizontal()?"startX":"startY"],time:t.touchStartTime}),t.velocities.push({position:n[e.isHorizontal()?"currentX":"currentY"],time:b()})},onTouchEnd:function({currentPos:t}){const{params:i,$wrapperEl:o,rtlTranslate:a,snapGrid:s,touchEventsData:l}=e,u=b()-l.touchStartTime;if(t<-e.minTranslate())e.slideTo(e.activeIndex);else if(t>-e.maxTranslate())e.slides.length<s.length?e.slideTo(s.length-1):e.slideTo(e.slides.length-1);else{if(i.freeMode.momentum){if(l.velocities.length>1){const t=l.velocities.pop(),n=l.velocities.pop(),r=t.position-n.position,o=t.time-n.time;e.velocity=r/o,e.velocity/=2,Math.abs(e.velocity)<i.freeMode.minimumVelocity&&(e.velocity=0),(o>150||b()-t.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=i.freeMode.momentumVelocityRatio,l.velocities.length=0;let t=1e3*i.freeMode.momentumRatio;const u=e.velocity*t;let c=e.translate+u;a&&(c=-c);let d,h=!1;const f=20*Math.abs(e.velocity)*i.freeMode.momentumBounceRatio;let p;if(c<e.maxTranslate())i.freeMode.momentumBounce?(c+e.maxTranslate()<-f&&(c=e.maxTranslate()-f),d=e.maxTranslate(),h=!0,l.allowMomentumBounce=!0):c=e.maxTranslate(),i.loop&&i.centeredSlides&&(p=!0);else if(c>e.minTranslate())i.freeMode.momentumBounce?(c-e.minTranslate()>f&&(c=e.minTranslate()+f),d=e.minTranslate(),h=!0,l.allowMomentumBounce=!0):c=e.minTranslate(),i.loop&&i.centeredSlides&&(p=!0);else if(i.freeMode.sticky){let t;for(let e=0;e<s.length;e+=1)if(s[e]>-c){t=e;break}c=Math.abs(s[t]-c)<Math.abs(s[t-1]-c)||"next"===e.swipeDirection?s[t]:s[t-1],c=-c}if(p&&r("transitionEnd",(()=>{e.loopFix()})),0!==e.velocity){if(t=a?Math.abs((-c-e.translate)/e.velocity):Math.abs((c-e.translate)/e.velocity),i.freeMode.sticky){const n=Math.abs((a?-c:c)-e.translate),r=e.slidesSizesGrid[e.activeIndex];t=n<r?i.speed:n<2*r?1.5*i.speed:2.5*i.speed}}else if(i.freeMode.sticky)return void e.slideToClosest();i.freeMode.momentumBounce&&h?(e.updateProgress(d),e.setTransition(t),e.setTranslate(c),e.transitionStart(!0,e.swipeDirection),e.animating=!0,o.transitionEnd((()=>{e&&!e.destroyed&&l.allowMomentumBounce&&(n("momentumBounce"),e.setTransition(i.speed),setTimeout((()=>{e.setTranslate(d),o.transitionEnd((()=>{e&&!e.destroyed&&e.transitionEnd()}))}),0))}))):e.velocity?(n("_freeModeNoMomentumRelease"),e.updateProgress(c),e.setTransition(t),e.setTranslate(c),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,o.transitionEnd((()=>{e&&!e.destroyed&&e.transitionEnd()})))):e.updateProgress(c),e.updateActiveIndex(),e.updateSlidesClasses()}else{if(i.freeMode.sticky)return void e.slideToClosest();i.freeMode&&n("_freeModeNoMomentumRelease")}(!i.freeMode.momentum||u>=i.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}}}})}function ee(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function te(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>n.indexOf(e)<0)).forEach((n=>{void 0===e[n]?e[n]=t[n]:ee(t[n])&&ee(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:te(e[n],t[n]):e[n]=t[n]}))}function ne(e={}){return e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function re(e={}){return e.pagination&&void 0===e.pagination.el}function ie(e={}){return e.scrollbar&&void 0===e.scrollbar.el}function oe(e=""){const t=e.split(" ").map((e=>e.trim())).filter((e=>!!e)),n=[];return t.forEach((e=>{n.indexOf(e)<0&&n.push(e)})),n.join(" ")}const ae=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"],se=(e,t)=>{let n=t.slidesPerView;if(t.breakpoints){const e=Y.prototype.getBreakpoint(t.breakpoints),r=e in t.breakpoints?t.breakpoints[e]:void 0;r&&r.slidesPerView&&(n=r.slidesPerView)}let r=Math.ceil(parseFloat(t.loopedSlides||n,10));return r+=t.loopAdditionalSlides,r>e.length&&t.loopedSlidesLimit&&(r=e.length),r};function le(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function ue(e){const t=[];return i.Children.toArray(e).forEach((e=>{le(e)?t.push(e):e.props&&e.props.children&&ue(e.props.children).forEach((e=>t.push(e)))})),t}function ce(e){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return i.Children.toArray(e).forEach((e=>{if(le(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){const r=ue(e.props.children);r.length>0?r.forEach((e=>t.push(e))):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function de(e,t){return"undefined"==typeof window?(0,i.useEffect)(e,t):(0,i.useLayoutEffect)(e,t)}const he=(0,i.createContext)(null),fe=(0,i.createContext)(null);function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}const me=(0,i.forwardRef)((function(e,t){let{className:n,tag:r="div",wrapperTag:o="div",children:a,onSwiper:s,...l}=void 0===e?{}:e,u=!1;const[c,d]=(0,i.useState)("swiper"),[h,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1),g=(0,i.useRef)(!1),y=(0,i.useRef)(null),v=(0,i.useRef)(null),_=(0,i.useRef)(null),b=(0,i.useRef)(null),x=(0,i.useRef)(null),w=(0,i.useRef)(null),E=(0,i.useRef)(null),S=(0,i.useRef)(null),{params:T,passedParams:M,rest:k,events:C}=function(e={},t=!0){const n={on:{}},r={},i={};te(n,Y.defaults),te(n,Y.extendedDefaults),n._emitClasses=!0,n.init=!1;const o={},a=ae.map((e=>e.replace(/_/,""))),s=Object.assign({},e);return Object.keys(s).forEach((s=>{void 0!==e[s]&&(a.indexOf(s)>=0?ee(e[s])?(n[s]={},i[s]={},te(n[s],e[s]),te(i[s],e[s])):(n[s]=e[s],i[s]=e[s]):0===s.search(/on[A-Z]/)&&"function"==typeof e[s]?t?r[`${s[2].toLowerCase()}${s.substr(3)}`]=e[s]:n.on[`${s[2].toLowerCase()}${s.substr(3)}`]=e[s]:o[s]=e[s])})),["navigation","pagination","scrollbar"].forEach((e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:i,rest:o,events:r}}(l),{slides:P,slots:A}=ce(a),O=()=>{m(!p)};Object.assign(T.on,{_containerClasses(e,t){d(t)}});const I=()=>{if(Object.assign(T.on,C),u=!0,v.current=new Y(T),v.current.loopCreate=()=>{},v.current.loopDestroy=()=>{},T.loop&&(v.current.loopedSlides=se(P,T)),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=P;const e={cache:!1,slides:P,renderExternal:f,renderExternalUpdate:!1};te(v.current.params.virtual,e),te(v.current.originalParams.virtual,e)}};return y.current||I(),v.current&&v.current.on("_beforeBreakpoint",O),(0,i.useEffect)((()=>()=>{v.current&&v.current.off("_beforeBreakpoint",O)})),(0,i.useEffect)((()=>{!g.current&&v.current&&(v.current.emitSlidesClasses(),g.current=!0)})),de((()=>{if(t&&(t.current=y.current),y.current)return v.current.destroyed&&I(),function({el:e,nextEl:t,prevEl:n,paginationEl:r,scrollbarEl:i,swiper:o},a){ne(a)&&t&&n&&(o.params.navigation.nextEl=t,o.originalParams.navigation.nextEl=t,o.params.navigation.prevEl=n,o.originalParams.navigation.prevEl=n),re(a)&&r&&(o.params.pagination.el=r,o.originalParams.pagination.el=r),ie(a)&&i&&(o.params.scrollbar.el=i,o.originalParams.scrollbar.el=i),o.init(e)}({el:y.current,nextEl:x.current,prevEl:w.current,paginationEl:E.current,scrollbarEl:S.current,swiper:v.current},T),s&&s(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}}),[]),de((()=>{!u&&C&&v.current&&Object.keys(C).forEach((e=>{v.current.on(e,C[e])}));const e=function(e,t,n,r,i){const o=[];if(!t)return o;const a=e=>{o.indexOf(e)<0&&o.push(e)};if(n&&r){const e=r.map(i),t=n.map(i);e.join("")!==t.join("")&&a("children"),r.length!==n.length&&a("children")}return ae.filter((e=>"_"===e[0])).map((e=>e.replace(/_/,""))).forEach((n=>{if(n in e&&n in t)if(ee(e[n])&&ee(t[n])){const r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?a(n):(r.forEach((r=>{e[n][r]!==t[n][r]&&a(n)})),i.forEach((r=>{e[n][r]!==t[n][r]&&a(n)})))}else e[n]!==t[n]&&a(n)})),o}(M,_.current,P,b.current,(e=>e.key));return _.current=M,b.current=P,e.length&&v.current&&!v.current.destroyed&&function({swiper:e,slides:t,passedParams:n,changedParams:r,nextEl:i,prevEl:o,scrollbarEl:a,paginationEl:s}){const l=r.filter((e=>"children"!==e&&"direction"!==e)),{params:u,pagination:c,navigation:d,scrollbar:h,virtual:f,thumbs:p}=e;let m,g,y,v,_;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(m=!0),r.includes("controller")&&n.controller&&n.controller.control&&u.controller&&!u.controller.control&&(g=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||s)&&(u.pagination||!1===u.pagination)&&c&&!c.el&&(y=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(u.scrollbar||!1===u.scrollbar)&&h&&!h.el&&(v=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||o)&&(n.navigation.nextEl||i)&&(u.navigation||!1===u.navigation)&&d&&!d.prevEl&&!d.nextEl&&(_=!0),l.forEach((t=>{if(ee(u[t])&&ee(n[t]))te(u[t],n[t]);else{const i=n[t];!0!==i&&!1!==i||"navigation"!==t&&"pagination"!==t&&"scrollbar"!==t?u[t]=n[t]:!1===i&&e[r=t]&&(e[r].destroy(),"navigation"===r?(u[r].prevEl=void 0,u[r].nextEl=void 0,e[r].prevEl=void 0,e[r].nextEl=void 0):(u[r].el=void 0,e[r].el=void 0))}var r})),l.includes("controller")&&!g&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),r.includes("children")&&t&&f&&u.virtual.enabled?(f.slides=t,f.update(!0)):r.includes("children")&&e.lazy&&e.params.lazy.enabled&&e.lazy.load(),m&&p.init()&&p.update(!0),g&&(e.controller.control=u.controller.control),y&&(s&&(u.pagination.el=s),c.init(),c.render(),c.update()),v&&(a&&(u.scrollbar.el=a),h.init(),h.updateSize(),h.setTranslate()),_&&(i&&(u.navigation.nextEl=i),o&&(u.navigation.prevEl=o),d.init(),d.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&e.changeDirection(n.direction,!1),e.update()}({swiper:v.current,slides:P,passedParams:M,changedParams:e,nextEl:x.current,prevEl:w.current,scrollbarEl:S.current,paginationEl:E.current}),()=>{C&&v.current&&Object.keys(C).forEach((e=>{v.current.off(e,C[e])}))}})),de((()=>{var e;!(e=v.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[h]),i.createElement(r,pe({ref:y,className:oe(`${c}${n?` ${n}`:""}`)},k),i.createElement(fe.Provider,{value:v.current},A["container-start"],i.createElement(o,{className:"swiper-wrapper"},A["wrapper-start"],T.virtual?function(e,t,n){if(!n)return null;const r=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`};return t.filter(((e,t)=>t>=n.from&&t<=n.to)).map((t=>i.cloneElement(t,{swiper:e,style:r})))}(v.current,P,h):!T.loop||v.current&&v.current.destroyed?P.map((e=>i.cloneElement(e,{swiper:v.current}))):function(e,t,n){const r=t.map(((t,n)=>i.cloneElement(t,{swiper:e,"data-swiper-slide-index":n})));function o(e,t,r){return i.cloneElement(e,{key:`${e.key}-duplicate-${t}-${r}`,className:`${e.props.className||""} ${n.slideDuplicateClass}`})}if(n.loopFillGroupWithBlank){const e=n.slidesPerGroup-r.length%n.slidesPerGroup;if(e!==n.slidesPerGroup)for(let t=0;t<e;t+=1){const e=i.createElement("div",{className:`${n.slideClass} ${n.slideBlankClass}`});r.push(e)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length);const a=se(r,n),s=[],l=[];for(let i=0;i<a;i+=1){const e=i-Math.floor(i/r.length)*r.length;l.push(o(r[e],i,"append")),s.unshift(o(r[r.length-e-1],i,"prepend"))}return e&&(e.loopedSlides=a),[...s,...r,...l]}(v.current,P,T),A["wrapper-end"]),ne(T)&&i.createElement(i.Fragment,null,i.createElement("div",{ref:w,className:"swiper-button-prev"}),i.createElement("div",{ref:x,className:"swiper-button-next"})),ie(T)&&i.createElement("div",{ref:S,className:"swiper-scrollbar"}),re(T)&&i.createElement("div",{ref:E,className:"swiper-pagination"}),A["container-end"]))}));function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}me.displayName="Swiper";const ye=(0,i.forwardRef)((function(e,t){let{tag:n="div",children:r,className:o="",swiper:a,zoom:s,virtualIndex:l,...u}=void 0===e?{}:e;const c=(0,i.useRef)(null),[d,h]=(0,i.useState)("swiper-slide");function f(e,t,n){t===c.current&&h(n)}de((()=>{if(t&&(t.current=c.current),c.current&&a){if(!a.destroyed)return a.on("_slideClass",f),()=>{a&&a.off("_slideClass",f)};"swiper-slide"!==d&&h("swiper-slide")}})),de((()=>{a&&c.current&&!a.destroyed&&h(a.getSlideClasses(c.current))}),[a]);const p={isActive:d.indexOf("swiper-slide-active")>=0||d.indexOf("swiper-slide-duplicate-active")>=0,isVisible:d.indexOf("swiper-slide-visible")>=0,isDuplicate:d.indexOf("swiper-slide-duplicate")>=0,isPrev:d.indexOf("swiper-slide-prev")>=0||d.indexOf("swiper-slide-duplicate-prev")>=0,isNext:d.indexOf("swiper-slide-next")>=0||d.indexOf("swiper-slide-duplicate-next")>=0},m=()=>"function"==typeof r?r(p):r;return i.createElement(n,ge({ref:c,className:oe(`${d}${o?` ${o}`:""}`),"data-swiper-slide-index":l},u),i.createElement(he.Provider,{value:p},s?i.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof s?s:void 0},m()):m()))}));ye.displayName="SwiperSlide";var ve=n(72779),_e=n.n(ve);const be={container:"DD8wf1csn-EP+1B8K+ZOrg==",coldStartSwiperContainer:"_3opntNE6r7qE-MbjDYvYAQ==",swiperContainer:"joKw+U8GUbj86xtZ+sPbqA==",showOverflow:"a2VsJQlvKft461G+-An4wQ==",coldStartSwiper:"J9TW6T4Mqi53hHds1t06qQ==",swiper:"J4iZhy4Q8eegLItMzWo31A==",hideSlideOverflow:"db0P52s+7QxLb-3IF1SVeQ==",leftArrow:"_48xFgLZMKPTs8EeYOHBj2g==",rightArrow:"Zo0mJQBvsnhIo6DTuFCIxA==",subtle:"oRFNzA701lACbqwX7KBf3w==",external:"XAxiJuUSMRY85r5a+Y8RcA=="};var xe=n(17500),we=n(33598),Ee=function(e){return function(t){var n=t.className,i=t.onClick,o=t.uniqueId,a=t.title,s=t.variant;return(0,r.jsx)(we.default,{className:_e()(be["".concat(e,"Arrow")],be[s],n),icon:{Component:xe.default,orientation:e},onClick:function(e){null==e||e.preventDefault(),null==e||e.stopPropagation(),i()},tabIndex:-1,title:a,testId:"".concat(o,"_ArrowButton_").concat(e),size:"subtle"===s?"sm":"md",variant:"subtle"===s?"transparent":"elevated"})}},Se=Ee("left"),Te=Ee("right"),Me=n(19312),ke=n(1560),Ce=function(){return Ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ce.apply(this,arguments)};const Pe=function(e){var t=e.uniqueId,n=e.items,o=e.renderItem,a=e.getItemKey,s=e.className,l=e.loop,u=e.showPaginationDots,c=e.showOverflow,d=e.hideSlideOverflow,h=e.scrollMode,f=e.gap,p=void 0===f?0:f,m=e.itemsPerSlide,g=void 0===m?1:m,y=e.onSlideChange,v=e.onFirstTouch,_=e.arrowStyle,b=void 0===_?"standard":_,x=e.isColdStart,w=e.arrowClassName,E=(0,ke.default)(Me.Z).formattedDefaultMessages,S=E.NAVIGATE_PREV,T=E.NAVIGATE_NEXT,M=n.length>g,k=(0,i.useState)(),C=k[0],P=k[1],A=(0,i.useState)(M&&l),O=A[0],I=A[1],L=(0,i.useState)(M),D=L[0],R=L[1],N=(0,i.useState)(!1),z=N[0],j=N[1],B=function(){M&&(h?(I(!1),R(!1)):l?(I(!0),R(!0)):((null==C?void 0:C.activeIndex)||0)<g?(I(!1),R(!0)):((null==C?void 0:C.activeIndex)||0)+g>=n.length?(I(!0),R(!1)):(I(!0),R(!0)))};(0,i.useEffect)(B,[h]),(0,i.useEffect)((function(){C&&(B(),l&&C.slideTo(1,0),v&&C.once("touchStart",(function(){z||(v(),j(!0))})),C.on("slideChangeTransitionEnd",(function(){B(),v&&!z&&(v(),j(!0)),y&&y(C.realIndex)})))}),[C]);var F=function(){null==C||C.slidePrev()},U=function(){null==C||C.slideNext()},G=[h&&Q,M&&J].filter((function(e){return!!e})),H=(0,i.useMemo)((function(){return M&&u?{isClickable:h,dynamicBullets:!0,dynamicMainBullets:1}:{isClickable:h,renderBullet:function(){return""}}}),[h,M,u]);return(0,r.jsxs)("div",Ce({className:be.container},{children:[(0,r.jsx)("div",Ce({className:_e()(x?be.coldStartSwiperContainer:be.swiperContainer,c&&be.showOverflow,s),tabIndex:M?0:-1,onKeyDown:M?function(e){switch(e.key){case"ArrowLeft":F();break;case"ArrowRight":U()}}:void 0},{children:(0,r.jsx)(me,Ce({className:_e()(x?be.coldStartSwiper:be.swiper,d&&be.hideSlideOverflow),onSwiper:P,modules:G.length?G:void 0,pagination:H||void 0,loop:l,spaceBetween:p,freeMode:h,slidesPerView:g,slidesPerGroup:g,preloadImages:!1},{children:n.map((function(e,t){return(0,r.jsx)(ye,{children:o(e,t)},a(e,t))}))}))})),O?(0,r.jsx)(Se,{className:w,onClick:F,uniqueId:t,title:S,variant:b}):null,D?(0,r.jsx)(Te,{className:w,onClick:U,uniqueId:t,title:T,variant:b}):null]}))}},56186:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(52322),i=n(72779),o=n.n(i),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};const s=function(e){var t=e.children,n=e.href,i=e.openInNewTab,s=void 0!==i&&i,l=e.onClick,u=e.isOverlay,c=e.overlayFocusStyle,d=e.preventFocus,h=e.className,f=e.blockNavigation,p=e.testId,m={tabIndex:d?-1:0,className:o()(d&&"sagzIoNG6AYkb6OwpNutOA==",h,u&&"MAeU7STjXOwFXsjoI5meHg==","offset"===c?"E8W6wpmnshxeFElAofUjoA==":"YUdyXKFWY0YDKYzMi-qVJg=="),href:n,onClick:l?function(e){f&&(e.preventDefault(),e.stopPropagation()),l()}:void 0};return s?(0,r.jsx)("a",a({},m,{target:"_blank",rel:"noreferrer","data-testid":p},{children:t})):(0,r.jsx)("a",a({},m,{"data-testid":p},{children:t}))}},60352:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var r=n(52322),i=n(72779),o=n.n(i),a=n(66877),s=n(58743),l=n(1560),u=n(45548),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},d=(0,a.defineMessages)({COMPLETED:{id:"95stPq",defaultMessage:"Completed"},VERIFIED:{id:"Wmu9zK",defaultMessage:"Verified completed"}});const h=function(e){var t=e.isCompleted,n=void 0!==t&&t,i=e.isVerified,a=void 0!==i&&i,h=e.onClick,f=(0,l.default)(d).formattedDefaultMessages,p=f.COMPLETED,m=f.VERIFIED;if(!n&&!a)return(0,r.jsx)("div",{});var g=o()("xlate-none","+vYC8lLIRZm+SogYeqp13Q=="),y=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.default,{size:"sm",color:s.COLOR_NEUTRAL_WHITE}),a?m:p]});return h?(0,r.jsx)("button",c({className:g,onClick:h,type:"button"},{children:y})):(0,r.jsx)("div",c({className:g},{children:y}))}},26227:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(52322),i=n(72779),o=n.n(i),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};const s=function(e){var t=e.className;return(0,r.jsx)("span",a({className:o()("CA5KBrRd2R-qD4j3DMdv4A==",t)},{children:"\u2022"}))}},58671:(e,t,n)=>{"use strict";n.d(t,{default:()=>r.Z});var r=n(26227)},27490:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(52322),i=n(72779),o=n.n(i);const a={container:"iohaujj+kqwp06dfzA7yYg==",wide:"_0WW+pCMvC9UuppsIRfV7Uw==",square:"MBxpuf-7-MLUv6kjwdHjPQ==",zoomPhoto:"gZrg53pY6Tw82bzE6n364A==",image:"Rt-4gJVX5rfa3D2YMUqJGQ=="};var s=n(23382),l=n(24081),u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};const c=function(e){var t=e.uniqueId,n=e.photos,i=e.loadPhotos,c=e.zoomPhoto,d=void 0!==c&&c,h=e.aspectRatio,f=void 0===h?"wide":h,p=e.lazyLoadImages,m=a[f],g=p?"lazy":"eager";return 0===n.length?(0,r.jsx)("div",{className:o()(a.container,m)}):1===n.length?(0,r.jsx)("div",u({className:o()(a.container,m,d&&a.zoomPhoto)},{children:(0,r.jsx)(s.Z,{src:n[0],className:a.image,loading:g})})):(0,r.jsx)(l.default,{className:o()(a.container,m,d&&a.zoomPhoto),uniqueId:t,items:n,renderItem:function(e){return(0,r.jsx)(s.Z,{src:e,className:a.image,loading:g})},getItemKey:function(e,t){return"PhotoCarousel_".concat(t,"_").concat(e)},onFirstTouch:i,arrowStyle:"subtle",loop:!0,showPaginationDots:!0,hideSlideOverflow:!0})}},37346:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(52322),i=n(72779),o=n.n(i),a=n(70408),s=n(56186),l=n(58743),u=n(45548);const c="kKeEC+AyX0Q6jpp5wHcbLg==";var d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const h=function(e){var t=e.isCompleted,n=void 0!==t&&t,i=e.isVerified,o=void 0!==i&&i,a=e.onClick;return n||o?a?(0,r.jsx)("button",d({className:c,onClick:a,type:"button"},{children:(0,r.jsx)(u.default,{size:"sm",color:l.COLOR_INTERACTIVE_DEFAULT})})):(0,r.jsx)("div",d({className:c},{children:(0,r.jsx)(u.default,{size:"sm",color:l.COLOR_INTERACTIVE_DEFAULT})})):(0,r.jsx)("div",{})};var f=n(23382),p=n(20249),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},g=function(e){var t=e.cta;return(0,r.jsx)(p.default,m({onClick:t.onClick,size:"sm"},{children:t.label}))};const y=function(e){var t=e.className,n=e.name,i=e.href,l=e.openInNewTab,u=e.onCardClick,c=e.onCardMouseEnter,d=e.onCardMouseLeave,p=e.metadata,y=e.onFavoriteClick,v=e.isFavorite,_=void 0!==v&&v,b=e.isCompleted,x=void 0!==b&&b,w=e.isVerified,E=void 0!==w&&w,S=e.photo,T=e.footerCTAs,M=e.onCompletionBadgeClick,k=e.blockNavigation,C=e.lazyLoadImages?"lazy":"eager",P=T&&T.length?(0,r.jsx)("div",m({className:"EHJsS7I4qeEyvuaS7en+CA=="},{children:T.map((function(e){return(0,r.jsx)(g,{cta:e},e.label)}))})):null;return(0,r.jsxs)("div",m({className:o()("xlate-none","UztDFFOUINaOcwHzq+lfcA==",t),onMouseEnter:c,onMouseLeave:d,title:n},{children:[(0,r.jsx)(s.default,m({href:i,blockNavigation:k,openInNewTab:l,onClick:u,isOverlay:!0,overlayFocusStyle:"border",testId:"".concat(n,"_OverlayLink")},{children:n})),(0,r.jsxs)("div",m({className:"+SWVVZEhk7oVgcK5+DfAug=="},{children:[(0,r.jsxs)("div",m({className:"IFreTIiYQJ4Ne6RvAPyqVA=="},{children:[(0,r.jsx)("div",m({className:"-JQLKj98hHCxvvcsOWZ2ZA=="},{children:(0,r.jsx)(h,{isCompleted:x,isVerified:E,onClick:M})})),y&&(0,r.jsx)("div",m({className:"uan6cZvHuPTiq-vVNtE8Eg=="},{children:(0,r.jsx)(a.default,{size:"sm",isSelected:_,onClick:y,onWhiteBackground:!0})})),(0,r.jsx)(f.Z,{src:S,className:"_3DMKGUNCrLkaQhXNolA-fA==",loading:C}),(0,r.jsx)("div",m({className:"dwm1TVbQ9R8y5xbkjvrmmQ=="},{children:p}))]})),P]}))]}))}},64812:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(52322),i=n(72779),o=n.n(i),a=n(8156),s=n(70408),l=n(56186),u=n(60352),c=n(27490),d=n(23382),h=n(27616),f=n(58743),p=n(66877),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},g=(0,p.defineMessage)({id:"UMbBzo",defaultMessage:"Move"});const y=function(e){var t=(0,p.useIntl)();return(0,r.jsx)("div",m({},e,{title:t.formatMessage(g),className:o()("Er9ap204Ua+6SM48vAUuSw==","item-move","clickable")},{children:(0,r.jsx)(h.default,{color:f.COLOR_NEUTRAL_WHITE})}))};var v=n(19486),_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_.apply(this,arguments)};const b=function(e){var t=e.className,n=e.name,i=e.href,h=e.openInNewTab,p=e.onCardClick,m=e.onCardMouseEnter,g=e.onCardMouseLeave,b=e.metadata,x=e.onFavoriteClick,w=e.isFavorite,E=void 0!==w&&w,S=e.isCompleted,T=void 0!==S&&S,M=e.isVerified,k=void 0!==M&&M,C=e.dragHandleProps,P=e.deleteButton,A=e.photos,O=e.pinnedPhoto,I=e.loadPhotos,L=e.squarePhoto,D=e.onCompletionBadgeClick,R=e.blockNavigation,N=e.lazyLoadImages,z=!!P,j=(0,a.useState)(!1),B=j[0],F=j[1],U=N?"lazy":"eager",G=(0,a.useMemo)((function(){return C?(0,r.jsx)(y,_({},C)):(0,r.jsx)(u.default,{isCompleted:T,isVerified:k,onClick:D})}),[C,T,k]),H=(0,a.useMemo)((function(){return P?(0,r.jsx)("button",_({className:"MmGOdoTMVv-ZnhfkXRd66w==",onClick:P.onClick,"aria-label":P.title,title:P.title,type:"button"},{children:(0,r.jsx)(v.default,{color:f.COLOR_NEUTRAL_WHITE})})):x?(0,r.jsx)(s.default,{isSelected:E,onClick:x}):null}),[P,E,x]);return(0,r.jsxs)("div",_({className:o()("xlate-none","u0xdvz4b6ogbqwUa8l4H4Q==",t),onMouseEnter:function(){F(!0),m&&m()},onMouseLeave:function(){F(!1),g&&g()}},{children:[(0,r.jsx)(l.default,_({href:i,blockNavigation:R,openInNewTab:h,onClick:p,isOverlay:!0,overlayFocusStyle:"offset",testId:"".concat(n,"_OverlayLink")},{children:n})),(0,r.jsxs)("div",_({className:"N8egiyiTwl3IU72Gf++Cpw=="},{children:[(0,r.jsxs)(l.default,_({href:i,blockNavigation:R,openInNewTab:h,onClick:p,preventFocus:!0},{children:[(0,r.jsx)(c.Z,{photos:z&&A.length?[A[0]]:A,loadPhotos:I,zoomPhoto:!z&&B,uniqueId:n,aspectRatio:L?"square":"wide",lazyLoadImages:N}),O?(0,r.jsx)(d.Z,{src:O,className:"ZukDCKLOK61k2Vvwokp28A==",loading:U}):null]})),z?(0,r.jsx)("div",{className:"nNYSTkMUTiMHwon-ceDBdQ==","data-testid":"StandardCard_Overlay"}):null]})),(0,r.jsxs)("div",_({className:"zKJQtZPqIc3jzqLDPQ2yrw=="},{children:[G,H]})),(0,r.jsx)("div",_({className:"ua-LcjiQC9L-0rciVkPt6Q=="},{children:b}))]}))}},83741:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(52322),i=n(58743),o=n(31814),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s={sm:16,md:24,lg:32},l={up:0,right:90,down:180,left:270};const u=function(e,t,n){return void 0===n&&(n=!1),Object.assign((function(u){var c=u.color,d=void 0===c?i.COLOR_INTERACTIVE_DEFAULT:c,h=u.size,f=void 0===h?"md":h,p=u.orientation,m=void 0===p?0:p,g="".concat(s[f],"px"),y="rotate(".concat("number"==typeof m?m:l[m],"deg)"),v=n?{stroke:d}:{};return(0,r.jsx)("svg",a({className:o.Z.container,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"presentation","aria-hidden":"true",focusable:"false","data-testid":e,style:a({transition:"transform 200ms ease-in-out",transform:y,height:g,width:g,fill:d},v)},{children:t}))}),{iconName:e})}},31522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(52322),i=n(8156),o=n(72779),a=n.n(o);const s={button:"E8Zz5cA6Bp9N81lmDgddbg==",loading:"TnGuRJ+iDxl9eJH1ZCEnUQ==",disabled:"M83WVMOE3d+Ps6ou0xSu0Q==",sm:"xLMgmtaVhNXlRwDvb8sItA==",md:"_61jzXtM9mhmNleWC5EMg8w==",lg:"p3HKVSf0cZwjU9p77YYwAg==",default:"_4gT3K3XQ4s6WMQ8tINtmhA==",elevated:"-8LYHY8sKjZd+CLZxSiOSg==",flat:"VtwHXgCyEQ4qn8ae9mfwHg==",primary:"SiH68RG76eIVBm9yryssRg==",transparent:"zQ+jdpzovsmw7qsY1SM63g=="};var l=n(44450),u=n(45517),c=n(56392),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const h=i.forwardRef((function(e,t){var n=e.className,o=e.disabled,h=e.icon,f=e.linkInfo,p=e.loading,m=e.onBlur,g=e.onClick,y=e.onFocus,v=e.size,_=void 0===v?"md":v,b=e.tabIndex,x=e.testId,w=e.title,E=e.ariaLabel,S=e.type,T=void 0===S?"button":S,M=e.variant,k=void 0===M?"default":M,C=e.stopPropagation,P=void 0!==C&&C,A=(0,i.useMemo)((function(){return function(e){P&&e.stopPropagation(),g&&g(e)}}),[g,P]),O="sm"===_?"sm":"md",I=(0,i.useMemo)((function(){return p&&!o?(0,r.jsx)(c.default,{size:O,testId:"".concat(x,"-loading-spinner")}):(0,r.jsx)(l.default,{icon:h,defaults:{color:"currentColor",size:O}})}),[o,h,O,p,x]),L=a()(n,s.button,s[_],s[k],p&&s.loading,o&&s.disabled);return(0,i.useMemo)((function(){return f?o?(0,r.jsx)("span",d({className:L,title:w,"aria-label":E||w,"data-testid":x,ref:t},{children:I})):(0,r.jsx)(u.default,d({className:L,linkInfo:f,onClick:p?void 0:A,title:w,"aria-label":E||w,testId:x,tabIndex:b,ref:t},{children:I})):(0,r.jsx)("button",d({className:L,onClick:p?void 0:A,onBlur:m,onFocus:y,disabled:o,title:w,"aria-label":E||w,"data-testid":x,type:T,tabIndex:b,ref:t},{children:I}))}),[L,I,o,f,p,m,A,y,t,b,x,w,T])}))},33598:(e,t,n)=>{"use strict";n.d(t,{default:()=>r.Z});var r=n(31522)},44450:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=function(e){var t=e.icon,n=e.defaults;return(0,r.jsx)(t.Component,{color:t.color||n.color,orientation:t.orientation||n.orientation,size:t.size||n.size})}},20249:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var r=n(52322),i=n(72779),o=n.n(i);const a={link:"MbgsHYI4C3t+zgZELSew8Q==",noUnderline:"yMOZ-biRE4fmEWyBLuXyAQ==",sm:"We9bFsEq46k7XAbhKzkONQ==",md:"_2WGfIS7Z0JgCPxX3uhrwlg==",lg:"QRkX-0DBXMbFUbn5SHECDw==",primary:"Jo3L6Dd7RNZhW8n84CYHEw==",secondary:"jSatM+AeiNDAUOwJovEGLg==",inverse:"urHYz-0lyBW8gbsvGMn1kw=="};var s=n(44450),l=n(45517),u=n(26529),c=n(50441),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const h=function(e){var t,n=e.children,i=e.className,h=e.href,f=e.icon,p=e.noUnderline,m=e.onClick,g=e.size,y=e.target,v=e.testId,_=e.variant,b=void 0===_?"primary":_,x=e.rel,w=e.useReactRouter,E=(0,u.default)(),S=o()(i,a.link,g&&a[g],a[b],((t={})[a.noUnderline]=p,t)),T=f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.default,{icon:f,defaults:{color:"currentColor",size:g}}),(0,r.jsx)("span",{children:n})]}):n;if(!h)return(0,r.jsx)("button",d({className:S,onClick:m,"data-testid":v,type:"button"},{children:T}));var M={href:h.startsWith("https://")||h.startsWith("#")||h.startsWith("mailto:")?h:(0,c.wrapUrlSafe)(h,E),target:y,rel:Array.isArray(x)?x:[x],useReactRouter:w};return(0,r.jsx)(l.default,d({className:S,linkInfo:M,onClick:m,testId:v},{children:T}))}},7770:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e,t){var n=e?e.filter((function(e){return!!e})):[];if("_blank"!==t||n.includes("noreferrer")||n.push("noreferrer"),n.length)return n.join(" ")}},45517:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(52322),i=n(8156),o=n(7770),a=n(19807),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};const l=i.forwardRef((function(e,t){var n=e.ariaLabel,i=e.children,l=e.className,u=e.linkInfo,c=e.onBlur,d=e.onClick,h=e.onFocus,f=e.onKeyDown,p=e.role,m=e.tabIndex,g=void 0===m?0:m,y=e.testId,v=e.title,_=u.rel,b=u.target,x=u.href,w=u.useReactRouter,E={className:l,onBlur:c,onClick:d,onFocus:h,onKeyDown:f,role:p,target:b,tabIndex:g,title:v,rel:(0,o.default)(_,b),"aria-label":n};return w?(0,r.jsx)(a.Link,s({to:x,"data-testid":y,ref:t},E,{children:i})):(0,r.jsx)("a",s({href:x,"data-testid":y,ref:t},E,{children:i}))}))},56392:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(52322),i=n(72779),o=n.n(i),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s={sm:16,md:24,lg:32};const l=function(e){var t=e.className,n=e.size,i=void 0===n?"md":n,l=e.testId,u="".concat(s[i],"px");return(0,r.jsxs)("svg",a({className:o()("Yi9ySmWPmUbUfm19jMaQdA==",t),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":"true",focusable:"false","data-testid":l,style:{height:u,width:u,fill:"currentColor"}},{children:[(0,r.jsx)("circle",{opacity:"1",cx:"8",cy:"1.5",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.08",cx:"12.6",cy:"3.4",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.16",cx:"14.5",cy:"8",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.3",cx:"12.6",cy:"12.6",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.44",cx:"8",cy:"14.5",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.58",cx:"3.4",cy:"12.6",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.72",cx:"1.5",cy:"8",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.86",cx:"3.4",cy:"3.4",r:"1.5"})]}))}},58743:(e,t,n)=>{"use strict";n.d(t,{COLOR_INTERACTIVE_DEFAULT:()=>o,COLOR_NEUTRAL_WHITE:()=>r,COLOR_UI_HIGHLIGHT:()=>i});var r="#ffffff",i="#5de372",o="#2b381f"},64187:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8156),i=n(60240);const o=function(e,t,n,o,a){var s=(0,r.useState)([]),l=s[0],u=s[1],c=(0,r.useState)(!1),d=c[0],h=c[1];(0,r.useEffect)((function(){if(o<1)u([]),h(!0);else{var r=(0,i.getCardPhotoUrl)(e,t,0,n,a);if(1===o)u([r]),h(!0);else{var s=Array(o-1).fill("");u(function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([r],s,!0)),h(!1)}}}),[n,o]);var f=(0,r.useCallback)((function(){if(!d){h(!0);var r=l.map((function(r,o){var s=(0,i.getCardPhotoUrl)(e,t,o,n,a);try{(new Image).src=s}catch(e){}return s}));u(r)}}),[a,e,t,l,d,n]);return{photos:l,loadPhotos:f}}},1560:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(66877);const i=function(e){var t=(0,r.useIntl)(),n={};return Object.keys(e).forEach((function(r){var i=e[r].defaultMessage;("string"==typeof i||void 0!==i&&1===i.length)&&(n[r]=t.formatMessage(e[r]))})),{intl:t,formattedDefaultMessages:n,formatMessage:function(n,r,i){return t.formatMessage(e[n],r,i)}}}},88611:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(77880),i=n.n(r);const o=function(e){return i()("(max-width: ".concat(e,"px)"))}},25143:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(46694),i=n(88611);const o=function(){return(0,i.default)(r.Q)}},26529:(e,t,n)=>{"use strict";function r(){var e;return(null===(e=null===n.g||void 0===n.g?void 0:n.g.__AT_DATA__)||void 0===e?void 0:e.languageRegionCode)||"en-US"}n.d(t,{default:()=>r})},40133:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8156),i=n(60240),o=n(64187);const a=function(e,t,n,a,s){var l=(0,o.Z)("maps",e,t,a,s),u=l.photos,c=l.loadPhotos;return(0,r.useMemo)((function(){return{staticMap:(0,i.getStaticMapUrl)(e,n,s),photos:u,loadPhotos:c}}),[s,e,c,n,u])}},17500:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("arrow-sq",(0,r.jsx)("path",{d:"M4.223 10.956a.75.75 0 0 0 1.06 1.061L11.25 6.05v13.71a.75.75 0 0 0 1.5 0V6.05l5.966 5.967a.75.75 0 0 0 1.061-1.06L12.53 3.708a.746.746 0 0 0-1.06 0l-7.247 7.247Z"}))},96073:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 3a1.5 1.5 0 0 0-1.5 1.5V21a.75.75 0 0 0 1.147.636L12 18.134l5.602 3.502A.75.75 0 0 0 18.75 21V4.5a1.5 1.5 0 0 0-1.5-1.5H6.75Zm0 16.647V4.5h10.5v15.147l-4.852-3.033a.75.75 0 0 0-.796 0L6.75 19.647Z"}))},92753:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark-filled",(0,r.jsx)("path",{d:"M17.25 3H6.75a1.5 1.5 0 0 0-1.5 1.5V21a.76.76 0 0 0 .384.656.713.713 0 0 0 .366.094.74.74 0 0 0 .394-.113L12 18.131l5.597 3.506a.779.779 0 0 0 .769.02.76.76 0 0 0 .384-.657V4.5a1.5 1.5 0 0 0-1.5-1.5Z"}))},58911:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark-overlay",(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4Z",fillOpacity:"0.48"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4ZM6 3C5.44772 3 5 3.44772 5 4V21.1958L11.205 17.3176C11.6914 17.0136 12.3086 17.0136 12.795 17.3176L19 21.1958V4C19 3.44772 18.5523 3 18 3H6Z",fill:"white"})]}))},7768:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark-overlay-opaque",(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4ZM6 3C5.44772 3 5 3.44772 5 4V21.1958L11.205 17.3176C11.6914 17.0136 12.3086 17.0136 12.795 17.3176L19 21.1958V4C19 3.44772 18.5523 3 18 3H6Z",fill:"white"})]}))},45548:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("check-filled",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.583 3.893A9.75 9.75 0 0 1 12 2.25 9.769 9.769 0 0 1 21.75 12 9.75 9.75 0 1 1 6.583 3.893Zm10.06 6.4a.75.75 0 0 0-1.036-1.086l-4.985 4.756-2.229-2.13a.75.75 0 1 0-1.036 1.084l2.747 2.625a.75.75 0 0 0 1.036 0l5.503-5.25Z"}))},27616:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("handle",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 8.625a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0Zm6.375 0a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0Zm5.25 1.125a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25ZM6.75 15.375a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0ZM12 16.5a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25Zm7.5-1.125a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0Z"}))},19486:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("remove",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.75 1.5A2.25 2.25 0 0 0 7.5 3.75v.75H3.75a.75.75 0 0 0 0 1.5h.75v13.5A1.5 1.5 0 0 0 6 21h12a1.5 1.5 0 0 0 1.5-1.5V6h.75a.75.75 0 0 0 0-1.5H16.5v-.75a2.25 2.25 0 0 0-2.25-2.25h-4.5Zm5.25 3v-.75a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0-.75.75v.75h6ZM8.25 6H6v13.5h12V6H8.25Zm1.5 3a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-6A.75.75 0 0 1 9.75 9ZM15 15.75v-6a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 1.5 0Z"}))},66877:(e,t,n)=>{"use strict";var r=n(19767);n.o(r,"defineMessage")&&n.d(t,{defineMessage:function(){return r.defineMessage}}),n.o(r,"defineMessages")&&n.d(t,{defineMessages:function(){return r.defineMessages}}),n.o(r,"useIntl")&&n.d(t,{useIntl:function(){return r.useIntl}})},19312:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(19767).defineMessages)({CANCEL:{id:"47FYwb",defaultMessage:"Cancel"},APPLY:{id:"EWw/tK",defaultMessage:"Apply"},CLEAR:{id:"/GCoTA",defaultMessage:"Clear"},SAVE:{id:"jvo0vs",defaultMessage:"Save"},FACEBOOK_SETTINGS:{id:"VZ76LL",defaultMessage:"Facebook settings"},FACEBOOK_LOGIN:{id:"v8vhR2",defaultMessage:"Log in with Facebook"},DISCONNECT_FACEBOOK_LOGIN:{id:"etgsdI",defaultMessage:"Disconnect Log in with Facebook"},USE_FACEBOOK:{id:"aqARlx",defaultMessage:"Use Facebook to log in to AllTrails."},FACEBOOK_FRIENDS:{id:"5W1yLJ",defaultMessage:"Facebook friends"},SYNC_FB_FRIENDS:{id:"j7BVTZ",defaultMessage:"Sync your Facebook friends to connect with AllTrails members you already know."},DISCONNECT:{id:"qj1uhz",defaultMessage:"Disconnect"},DISCONNECT_FACEBOOK:{id:"ao58FP",defaultMessage:"Disconnect Facebook"},ARE_YOU_SURE:{id:"4hDcG5",defaultMessage:"Are you sure you want to disconnect Login with Facebook?"},STOP_SYNC:{id:"kDH5zE",defaultMessage:"Stop syncing friends"},STOP_SYNC_FRIENDS:{id:"HUR7cE",defaultMessage:"Do you also want to stop syncing your Facebook friends?"},REFRESH_FRIENDS_SUBTEXT:{id:"eH9OPQ",defaultMessage:"Refresh your Facebook friends to connect with AllTrails members you already know."},RETRY:{id:"62nsdy",defaultMessage:"Retry"},CLOSE:{id:"rbrahO",defaultMessage:"Close"},NAVIGATE_NEXT:{id:"9wZ+O0",defaultMessage:"Navigate next"},NAVIGATE_PREV:{id:"/u+ovH",defaultMessage:"Navigate previous"},SEE_MORE:{id:"yoLwRW",defaultMessage:"See more"},SEE_LESS:{id:"GZo7vg",defaultMessage:"See less"},CREATE_NEW_LIST:{id:"TLszpS",defaultMessage:"Create new list"},ADD_TO_LIST:{id:"oSGAZt",defaultMessage:"Add to list"},REMOVE_FROM_LIST:{id:"5bOFRX",defaultMessage:"Remove from list"},SEARCH_FOR_A_MEMBER:{id:"cYNAQO",defaultMessage:"Search for a member"},NO_RESULTS:{id:"jHJmjf",defaultMessage:"No results"},AN_APP_FOR_THE_OUTDOORS:{id:"+4Mwvi",defaultMessage:"An app for the outdoors"},LIST_PRIVACY:{id:"ZdcaBc",defaultMessage:"List privacy"},CHOOSE_WHO_CAN_VIEW_THIS_LIST:{id:"0IxcCk",defaultMessage:"Choose who can view this list."},GO_BACK:{id:"orvpWh",defaultMessage:"Go back"}})},22569:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={Danish:"da-DK",Dutch:"nl-NL",English:"en-US",EnglishGB:"en-GB",French:"fr-FR",German:"de-DE",Italian:"it-IT",Norwegian:"nb-NO",Polish:"pl-PL",Portuguese:"pt-PT",PortugueseBrazilian:"pt-BR",Spanish:"es-ES",SpanishLatAm:"es-MX",Swedish:"sv-SE"}},78453:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={Danish:"da-dk",Dutch:"nl-nl",English:"en",EnglishGB:"en-gb",French:"fr",German:"de",Italian:"it-it",Norwegian:"nb-no",Polish:"pl-pl",Portuguese:"pt-pt",PortugueseBrazilian:"pt-br",Spanish:"es",SpanishLatAm:"es-mx",Swedish:"sv-se"}},83840:(e,t,n)=>{"use strict";n.d(t,{PhotoSize:()=>r,staticMapScale:()=>i});var r,i={"512x217":1,"160x160":2,"200x200":2,"320x320":2};!function(e){e.Icon="icon",e.Small="small",e.Medium="medium",e.Large="large",e.ExtraLarge="extra_large",e.SmallSquare="small_square",e.MediumSquare="medium_square",e.LargeSquare="large_square",e.SmallWide="small_wide",e.LargeWide="large_wide",e.LargerWide="larger_wide"}(r||(r={}))},97081:(e,t,n)=>{"use strict";n.d(t,{X_AT_KEY:()=>o});var r,i=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=(function(e){function t(t,n){var r=this.constructor,i=e.call(this,t.statusText)||this;return Object.setPrototypeOf(i,r.prototype),i.headers=t.headers,i.url=t.url,i.status=t.status,i.statusText=t.statusText,i.data=n,i}i(t,e),t.initialize=function(e){var n,r,i,o;return r=this,o=function(){var r,i,o;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(a){switch(a.label){case 0:return r=null===(n=e.headers)||void 0===n?void 0:n.get("content-type"),204===e.status?[2,new t(e,void 0)]:r&&-1!==r.indexOf("application/json")?[4,e.json()]:[3,2];case 1:return i=a.sent(),[2,new t(e,i)];case 2:return[4,e.text()];case 3:o=a.sent();try{return[2,new t(e,JSON.parse(o))]}catch(n){return[2,new t(e,o)]}return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}s((o=o.apply(r,[])).next())}))}}(Error),"3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i")},47831:(e,t,n)=>{"use strict";n.d(t,{getActivityUrl:()=>i,getTrailUrl:()=>o});var r=n(50441),i=function(e,t,n){var i="/explore/recording/".concat(e);return n?"".concat(t||"").concat((0,r.wrapUrlSafe)(i,n)):"".concat(t).concat(i)},o=function(e,t,n){var i="/trail/".concat(e);return n?"".concat(t||"").concat((0,r.wrapUrlSafe)(i,n)):"".concat(t).concat(i)}},46694:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});var r=640},54321:(e,t,n)=>{"use strict";n.d(t,{getLocale:()=>o,getLocalePrefix:()=>a});var r=n(78453),i=n(22569),o=function(e){var t=Object.values(i.default).indexOf(e),n=Object.keys(i.default)[t];return r.default[n]},a=function(e){return e===i.default.English?"":o(e)};i.default.English,i.default.EnglishGB,i.default.Danish,i.default.German,i.default.Spanish,i.default.SpanishLatAm,i.default.French,i.default.Italian,i.default.Dutch,i.default.Norwegian,i.default.Polish,i.default.PortugueseBrazilian,i.default.Portuguese,i.default.Swedish},83751:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={"en-US":{trail:"trail",trails:"trails","trail/new":"trail/new",parks:"parks",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"en-GB":{trail:"trail",trails:"trails","trail/new":"trail/new",parks:"parks",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"da-DK":{trail:"rute",trails:"ruter","trail/new":"rute/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"de-DE":{trail:"route",trails:"route","trail/new":"route/neue",parks:"parks",cities:"staedte",countries:"countries",regions:"regionen",states:"staaten","national-parks":"nationalparks","state-parks":"naturparks","local-parks":"regionale-parks"},"es-ES":{trail:"ruta",trails:"ruta","trail/new":"ruta/nueva",parks:"parques",cities:"ciudades",countries:"countries",regions:"regiones",states:"estados","national-parks":"parques-nacionales","state-parks":"parques-naturales","local-parks":"parques-locales"},"es-MX":{trail:"ruta",trails:"senderos","trail/new":"ruta/nueva",parks:"parques",cities:"ciudades",countries:"countries",regions:"regiones",states:"estados","national-parks":"parques-nacionales","state-parks":"parques-naturales","local-parks":"parques-locales"},"fr-FR":{trail:"randonnee",trails:"randonnee","trail/new":"randonnee/nouvelle",parks:"parcs",cities:"villes",countries:"countries",regions:"regions",states:"etats","national-parks":"parcs-nationaux","state-parks":"parcs-naturels-regionaux","local-parks":"parcs-locaux"},"it-IT":{trail:"sentiero",trails:"sentieri","trail/new":"sentiero/new",parks:"parchi",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"nl-NL":{trail:"wandelpad",trails:"routes","trail/new":"wandelpad/new",parks:"parken",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"nb-NO":{trail:"sti",trails:"stier","trail/new":"sti/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pl-PL":{trail:"szlak",trails:"szlaki","trail/new":"szlak/new",parks:"parki",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pt-BR":{trail:"trilha",trails:"trilhas","trail/new":"trilha/new",parks:"parques",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pt-PT":{trail:"trilho",trails:"trilhos","trail/new":"trilho/new",parks:"parques",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"sv-SE":{trail:"led",trails:"leder","trail/new":"led/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"}}},14328:(e,t,n)=>{"use strict";n.d(t,{metersToFormattedDistance:()=>l,minutesToFormattedTime:()=>u,utcToFormattedDate:()=>c});var r=n(22569),i=function(e,t,n){var i=e===r.default.Spanish?r.default.German:e;return t.toLocaleString(i,{minimumFractionDigits:n,maximumFractionDigits:n})},o=function(e){return 3.28084*e},a=function(e){return 621371e-9*e},s=function(e){return e/1e3},l=function(e,t,n,r,l){switch(r){case"mi":return e.formatMessage({id:"kmXVkv",defaultMessage:"{miles} mi"},{miles:i(t,a(n),l)});case"ft":return e.formatMessage({id:"Y+FADI",defaultMessage:"{feet} ft"},{feet:i(t,o(n),l)});case"km":return e.formatMessage({id:"WopFVb",defaultMessage:"{kilometers} km"},{kilometers:i(t,s(n),l)});default:return e.formatMessage({id:"RiGwgn",defaultMessage:"{meters} m"},{meters:i(t,n,l)})}},u=function(e,t,n){void 0===n&&(n=!1);var r,i=t?Math.floor(t/60):0,o=t?t-60*i:0,a=e.formatMessage({id:"minute.abbreviated",defaultMessage:"m"});return r=i>=12?e.formatMessage({id:"LOLF/M",defaultMessage:"Multi-day"}):0===i&&0===o?"0h 0".concat(a):i>0?"".concat(i,"h ").concat(o).concat(a):"".concat(o).concat(a),n?"".concat(e.formatMessage({id:"owDSk8",defaultMessage:"Est."})," ").concat(r):r},c=function(e,t){return new Date(t).toLocaleDateString(e,{year:"numeric",month:"long",day:"numeric"})}},21273:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(19767),i={backpacking:(0,r.defineMessage)({id:"xXZGmj",defaultMessage:"Backpacking"}),"bike-touring":(0,r.defineMessage)({id:"M5TOMz",defaultMessage:"Bike touring"}),birding:(0,r.defineMessage)({id:"9qzrpX",defaultMessage:"Bird watching"}),camping:(0,r.defineMessage)({id:"XjJcVS",defaultMessage:"Camping"}),"cross-country-skiing":(0,r.defineMessage)({id:"u9HJIU",defaultMessage:"Cross-country skiing"}),fishing:(0,r.defineMessage)({id:"oo+gUt",defaultMessage:"Fishing"}),hiking:(0,r.defineMessage)({id:"yP9SR1",defaultMessage:"Hiking"}),"horseback-riding":(0,r.defineMessage)({id:"t45Jzl",defaultMessage:"Horseback riding"}),"mountain-biking":(0,r.defineMessage)({id:"Mrpw7R",defaultMessage:"Mountain biking"}),"nature-trips":(0,r.defineMessage)({id:"P50G2A",defaultMessage:"Nature trips"}),"off-road-driving":(0,r.defineMessage)({id:"ZU/M7P",defaultMessage:"OHV/Off-road driving"}),"paddle-sports":(0,r.defineMessage)({id:"3bDB/A",defaultMessage:"Paddle sports"}),"road-biking":(0,r.defineMessage)({id:"YvPE7L",defaultMessage:"Road biking"}),"rock-climbing":(0,r.defineMessage)({id:"B2nDRs",defaultMessage:"Rock climbing"}),"scenic-driving":(0,r.defineMessage)({id:"oDo4CB",defaultMessage:"Scenic driving"}),skiing:(0,r.defineMessage)({id:"zMggtP",defaultMessage:"Skiing"}),snowshoeing:(0,r.defineMessage)({id:"WfJM+3",defaultMessage:"Snowshoeing"}),"trail-running":(0,r.defineMessage)({id:"nDyaq/",defaultMessage:"Running"}),"via-ferrata":(0,r.defineMessage)({id:"7WZTTn",defaultMessage:"Via ferrata"}),walking:(0,r.defineMessage)({id:"+8XF1s",defaultMessage:"Walking"})};const o=function(e,t){return Object.keys(i).includes(t)?e.formatMessage(i[t]):""}},50441:(e,t,n)=>{"use strict";n.d(t,{wrapUrlSafe:()=>a});var r=n(54321),i=n(83751),o=n(22569),a=(n(78453),function(e,t){if(t){var n=(0,r.getLocalePrefix)(t);if(n)return function(e,t){var n=i.default[t];if(t===o.default.English||!n)return e;var a=(0,r.getLocale)(t),s=new RegExp("^\\/".concat(a,"\\/(trail\\/new|trail|parks)($|\\/.*|\\?.*)")),l=e.match(s);return l&&n[l[1]]&&!e.match(/\/(print|photos|edit)($|\?.*)/)?"/".concat(a,"/").concat(n[l[1]]).concat(l[2]):e}("/".concat(n).concat(e),t)}return e})},60240:(e,t,n)=>{"use strict";n.d(t,{getCardPhotoUrl:()=>a,getStaticMapUrl:()=>s});var r,i=n(83840),o=n(97081),a=((r={})[i.PhotoSize.Small]={fit:"inside",dimensions:[100,100]},r[i.PhotoSize.Medium]={fit:"inside",dimensions:[200,200]},r[i.PhotoSize.Large]={fit:"inside",dimensions:[500,500]},r[i.PhotoSize.ExtraLarge]={fit:"inside",dimensions:[2048,2048]},r[i.PhotoSize.Icon]={fit:"cover",dimensions:[50,50]},r[i.PhotoSize.SmallSquare]={fit:"cover",dimensions:[80,80]},r[i.PhotoSize.MediumSquare]={fit:"cover",dimensions:[120,120]},r[i.PhotoSize.LargeSquare]={fit:"cover",dimensions:[160,160]},r[i.PhotoSize.SmallWide]={fit:"cover",dimensions:[160,120]},r[i.PhotoSize.LargeWide]={fit:"cover",dimensions:[800,300]},r[i.PhotoSize.LargerWide]={fit:"cover",dimensions:[1080,700]},function(e,t,n,r,a){return void 0===r&&(r=i.PhotoSize.Large),void 0===a&&(a=""),"".concat(a,"/api/alltrails/v2/").concat(e,"/").concat(t,"/photos/").concat(n,"?size=").concat(r,"&key=").concat(o.X_AT_KEY)}),s=function(e,t,n){return void 0===n&&(n=""),"".concat(n,"/api/alltrails/v3/maps/").concat(e,"/static_map?size=").concat(t,"&scale=").concat(i.staticMapScale[t],"&key=").concat(o.X_AT_KEY)}},77880:t=>{"use strict";t.exports=e},8156:e=>{"use strict";e.exports=t},19767:e=>{"use strict";e.exports=n},56128:e=>{"use strict";e.exports=r}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return i[e](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";a.r(s),a.d(s,{default:()=>T});var e=a(52322),t=a(83840),n=a(37346),r=a(64812),i=a(40133),o=a(72779),l=a.n(o),u=a(58671);const c={title:"A0YKyl9ZgStD3dCmq5tVIA==",secondaryInfo:"_0l23U7Db8+ZmUayQGYPwQQ==",standard:"efO0jSZN4gBuMObuvDaIdg==",truncating:"AtELB0U+mvFHQRfXEvWBdw==",feed:"D93haagXQy8vOAPCVzXQQA==",stats:"_3DeCPDipGhAYbjIeBsNFmg==",small:"LsznRGdRrNo3apA6tyjpyw==",label:"PGtNqoGgS5gHLKNsQZ1hHw==",value:"Na3qEklRsN9o8+5NK1MarA==",stat:"YD2bHMyNGEnpRQeCiEqIUg==",statDivider:"tgvVNrzFLSAhIAhssSSosQ==",link:"ImdlcoT53l+P6xxylwRbDw=="};var d=a(1560),h=a(14328),f=a(21273),p=a(20249),m=a(47831),g=a(66877),y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},y.apply(this,arguments)},v=(0,g.defineMessages)({LENGTH:{id:"BACCkG",defaultMessage:"Length"},ELV_GAIN:{id:"1EhWeR",defaultMessage:"Elev. gain"},TIME:{id:"ug01Mk",defaultMessage:"Time"}}),_=function(t){var n=t.label,r=t.value;return(0,e.jsxs)("div",y({className:c.stat},{children:[(0,e.jsx)("span",y({className:c.label},{children:n})),(0,e.jsx)("span",y({className:c.value},{children:r}))]}))},b=function(){return(0,e.jsx)("div",{className:c.statDivider})};const x=function(t){var n=t.variant,r=t.activity,i=t.isFirstParty,o=t.languageRegionCode,a=t.useMetric,s=t.decimalPlaces,g=void 0===s?1:s,x=t.openInNewTab,w=t.baseUrl,E=t.showActivityType,S=r.name,T=r.minutes,M=r.meters,k=r.elevationGain,C=r.createdAt,P=r.activityType,A=r.user,O=r.trail,I=r.locationName,L=(0,d.default)(v),D=L.intl,R=L.formattedDefaultMessages,N=R.LENGTH,z=R.ELV_GAIN,j=R.TIME,B="ActivityCard_".concat(S),F="feed"===n?(0,e.jsxs)(e.Fragment,{children:[O?(0,e.jsx)(p.default,y({className:c.link,size:"sm",variant:"secondary",href:(0,m.getTrailUrl)(O.slug,w),testId:"".concat(B,"_Location_Link"),target:x?"_blank":void 0,rel:x?"noreferrer":void 0},{children:O.name})):null,O&&I?(0,e.jsx)(u.default,{}):null,(0,e.jsx)("span",{children:I})]}):(0,e.jsxs)(e.Fragment,{children:[i||!A?(0,h.utcToFormattedDate)(o,C):A.name,"small"!==n||E?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(u.default,{}),(0,f.default)(D,P)]}):null]});return(0,e.jsxs)("div",y({className:l()(c.container,c[n])},{children:[(0,e.jsx)("div",y({className:l()(c.title,c.truncating),"data-testid":"".concat(B,"_Title")},{children:S})),(0,e.jsx)("div",y({className:l()(c.secondaryInfo,c.truncating),"data-testid":"".concat(B,"_Subtext")},{children:F})),(0,e.jsxs)("div",y({className:c.stats,"data-testid":"".concat(B,"_Stats")},{children:[(0,e.jsx)(_,{label:N,value:(0,h.metersToFormattedDistance)(D,o,M,a?"km":"mi",g)}),(0,e.jsx)(b,{}),(0,e.jsx)(_,{label:z,value:(0,h.metersToFormattedDistance)(D,o,k,a?"m":"ft",0)}),"small"===n?null:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(b,{}),(0,e.jsx)(_,{label:j,value:(0,h.minutesToFormattedTime)(D,T)})]})]}))]}))};var w=a(25143),E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},E.apply(this,arguments)},S=function(e,n){switch(e){case"small":return t.PhotoSize.LargeSquare;case"feed":return n?t.PhotoSize.LargerWide:t.PhotoSize.ExtraLarge;default:return t.PhotoSize.LargerWide}};const T=function(t){var o=t.className,a=t.variant,s=t.activity,l=t.isFirstParty,u=void 0!==l&&l,c=t.languageRegionCode,d=t.onCardClick,h=t.onCardMouseEnter,f=t.onCardMouseLeave,p=t.onFavoriteClick,g=t.isFavorite,y=t.openInNewTab,v=t.useMetric,_=t.decimalPlaces,b=void 0===_?1:_,T=t.maxPhotos,M=void 0===T?6:T,k=t.baseUrl,C=void 0===k?"":k,P=t.dragHandleProps,A=t.deleteButton,O=t.footerCTAs,I=t.showActivityType,L=s.name,D=s.slug,R=s.id,N=s.hasPhotos,z=(0,m.getActivityUrl)(D,C,c),j=(0,w.default)(),B=(0,i.Z)(R,S(a,j),function(e,t){return"small"===e||t?"160x160":"320x320"}(a,N),function(e,t){return"small"===e?1:t}(a,M),C),F=B.staticMap,U=B.photos,G=B.loadPhotos,H={className:o,name:L,href:z,openInNewTab:y,metadata:(0,e.jsx)(x,{variant:a,activity:s,isFirstParty:u,languageRegionCode:c,useMetric:v,decimalPlaces:b,baseUrl:C,openInNewTab:y,showActivityType:I}),onCardClick:d,onCardMouseEnter:function(){G(),h&&h()},onCardMouseLeave:f,onFavoriteClick:p,isFavorite:g};return"small"===a?(0,e.jsx)(n.Z,E({},H,{photo:N?U[0]:F,footerCTAs:O})):(0,e.jsx)(r.Z,E({},H,{photos:N?U:[F],pinnedPhoto:N?F:void 0,loadPhotos:G,squarePhoto:!0,dragHandleProps:P,deleteButton:A}))}})(),s})(),e.exports=r(n(63362),n(67294),n(21038),n(32675))},70919:function(e,t,n){var r;r=(e,t,n)=>(()=>{var r={72779:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},31814:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={container:"AUxnvEMKUpKbQqeQ+9Di6g=="}},37320:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},11837:(e,t,n)=>{"use strict";n(37320);var r=n(8156),i=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},52322:(e,t,n)=>{"use strict";e.exports=n(11837)},70408:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(52322),i=n(72779),o=n.n(i);const a={container:"gxT3Zc1Gp7dW6rif5GvCzw==",sm:"_97pFfg115fuRuZVwLYmVfQ==",lg:"jJf9ZRAJNn++9licv1HAqA=="};var s=n(1560),l=n(19312),u=n(58743),c=n(96073),d=n(92753),h=n(58911),f=n(7768),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)};const m=function(e){var t=e.isSelected,n=e.onClick,i=e.onWhiteBackground,m=void 0!==i&&i,g=e.className,y=void 0===g?"":g,v=e.size,_=(0,s.default)(l.Z).formattedDefaultMessages,b=_.REMOVE_FROM_LIST,x=_.ADD_TO_LIST,w=t?b:x;return(0,r.jsx)("button",p({"aria-label":w,className:o()(a.container,v&&a[v],y),onClick:n,title:w,type:"button"},{children:t?m?(0,r.jsx)(d.default,{color:u.COLOR_UI_HIGHLIGHT,size:v}):(0,r.jsx)(f.default,{color:u.COLOR_UI_HIGHLIGHT,size:v}):m?(0,r.jsx)(c.default,{size:v}):(0,r.jsx)(h.default,{size:v})}))}},37006:(e,t,n)=>{"use strict";n(52322),n(56128)},19807:(e,t,n)=>{"use strict";n(37006);var r=n(56128);n.o(r,"Link")&&n.d(t,{Link:function(){return r.Link}})},23382:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(52322),i=n(8156);const o=function(e){var t=e.src,n=e.className,o=e.loading,a=(0,i.useState)(),s=a[0],l=a[1];return(0,i.useEffect)((function(){l(!1)}),[t]),!t||s?(0,r.jsx)("div",{className:n}):(0,r.jsx)("img",{className:n,src:t,alt:"",onError:function(){l(!0)},loading:o})}},24081:(e,t,n)=>{"use strict";n.d(t,{default:()=>Pe});var r=n(52322),i=n(8156);function o(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function a(e={},t={}){Object.keys(t).forEach((n=>{void 0===e[n]?e[n]=t[n]:o(t[n])&&o(e[n])&&Object.keys(t[n]).length>0&&a(e[n],t[n])}))}const s={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function l(){const e="undefined"!=typeof document?document:{};return a(e,s),e}const u={document:s,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function c(){const e="undefined"!=typeof window?window:{};return a(e,u),e}class d extends Array{constructor(e){"number"==typeof e?super(e):(super(...e||[]),function(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get:()=>t,set(e){t.__proto__=e}})}(this))}}function h(e=[]){const t=[];return e.forEach((e=>{Array.isArray(e)?t.push(...h(e)):t.push(e)})),t}function f(e,t){return Array.prototype.filter.call(e,t)}function p(e,t){const n=c(),r=l();let i=[];if(!t&&e instanceof d)return e;if(!e)return new d(i);if("string"==typeof e){const n=e.trim();if(n.indexOf("<")>=0&&n.indexOf(">")>=0){let e="div";0===n.indexOf("<li")&&(e="ul"),0===n.indexOf("<tr")&&(e="tbody"),0!==n.indexOf("<td")&&0!==n.indexOf("<th")||(e="tr"),0===n.indexOf("<tbody")&&(e="table"),0===n.indexOf("<option")&&(e="select");const t=r.createElement(e);t.innerHTML=n;for(let n=0;n<t.childNodes.length;n+=1)i.push(t.childNodes[n])}else i=function(e,t){if("string"!=typeof e)return[e];const n=[],r=t.querySelectorAll(e);for(let i=0;i<r.length;i+=1)n.push(r[i]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)i.push(e);else if(Array.isArray(e)){if(e instanceof d)return e;i=e}return new d(function(e){const t=[];for(let n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(i))}p.fn=d.prototype;const m="resize scroll".split(" ");function g(e){return function(...t){if(void 0===t[0]){for(let t=0;t<this.length;t+=1)m.indexOf(e)<0&&(e in this[t]?this[t][e]():p(this[t]).trigger(e));return this}return this.on(e,...t)}}g("click"),g("blur"),g("focus"),g("focusin"),g("focusout"),g("keyup"),g("keydown"),g("keypress"),g("submit"),g("change"),g("mousedown"),g("mousemove"),g("mouseup"),g("mouseenter"),g("mouseleave"),g("mouseout"),g("mouseover"),g("touchstart"),g("touchend"),g("touchmove"),g("resize"),g("scroll");const y={addClass:function(...e){const t=h(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.add(...t)})),this},removeClass:function(...e){const t=h(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.remove(...t)})),this},hasClass:function(...e){const t=h(e.map((e=>e.split(" "))));return f(this,(e=>t.filter((t=>e.classList.contains(t))).length>0)).length>0},toggleClass:function(...e){const t=h(e.map((e=>e.split(" "))));this.forEach((e=>{t.forEach((t=>{e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(let n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(const t in e)this[n][t]=e[t],this[n].setAttribute(t,e[t]);return this},removeAttr:function(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?`${e}ms`:e;return this},on:function(...e){let[t,n,r,i]=e;function o(e){const t=e.target;if(!t)return;const i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),p(t).is(n))r.apply(t,i);else{const e=p(t).parents();for(let t=0;t<e.length;t+=1)p(e[t]).is(n)&&r.apply(e[t],i)}}function a(e){const t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),r.apply(this,t)}"function"==typeof e[1]&&([t,r,i]=e,n=void 0),i||(i=!1);const s=t.split(" ");let l;for(let u=0;u<this.length;u+=1){const e=this[u];if(n)for(l=0;l<s.length;l+=1){const t=s[l];e.dom7LiveListeners||(e.dom7LiveListeners={}),e.dom7LiveListeners[t]||(e.dom7LiveListeners[t]=[]),e.dom7LiveListeners[t].push({listener:r,proxyListener:o}),e.addEventListener(t,o,i)}else for(l=0;l<s.length;l+=1){const t=s[l];e.dom7Listeners||(e.dom7Listeners={}),e.dom7Listeners[t]||(e.dom7Listeners[t]=[]),e.dom7Listeners[t].push({listener:r,proxyListener:a}),e.addEventListener(t,a,i)}}return this},off:function(...e){let[t,n,r,i]=e;"function"==typeof e[1]&&([t,r,i]=e,n=void 0),i||(i=!1);const o=t.split(" ");for(let a=0;a<o.length;a+=1){const e=o[a];for(let t=0;t<this.length;t+=1){const o=this[t];let a;if(!n&&o.dom7Listeners?a=o.dom7Listeners[e]:n&&o.dom7LiveListeners&&(a=o.dom7LiveListeners[e]),a&&a.length)for(let t=a.length-1;t>=0;t-=1){const n=a[t];r&&n.listener===r||r&&n.listener&&n.listener.dom7proxy&&n.listener.dom7proxy===r?(o.removeEventListener(e,n.proxyListener,i),a.splice(t,1)):r||(o.removeEventListener(e,n.proxyListener,i),a.splice(t,1))}}}return this},trigger:function(...e){const t=c(),n=e[0].split(" "),r=e[1];for(let i=0;i<n.length;i+=1){const o=n[i];for(let n=0;n<this.length;n+=1){const i=this[n];if(t.CustomEvent){const n=new t.CustomEvent(o,{detail:r,bubbles:!0,cancelable:!0});i.dom7EventData=e.filter(((e,t)=>t>0)),i.dispatchEvent(n),i.dom7EventData=[],delete i.dom7EventData}}}return this},transitionEnd:function(e){const t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){const e=c();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){const e=c(),t=l(),n=this[0],r=n.getBoundingClientRect(),i=t.body,o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,s=n===e?e.scrollY:n.scrollTop,u=n===e?e.scrollX:n.scrollLeft;return{top:r.top+s-o,left:r.left+u-a}}return null},css:function(e,t){const n=c();let r;if(1===arguments.length){if("string"!=typeof e){for(r=0;r<this.length;r+=1)for(const t in e)this[r].style[t]=e[t];return this}if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(r=0;r<this.length;r+=1)this[r].style[e]=t;return this}return this},each:function(e){return e?(this.forEach(((t,n)=>{e.apply(t,[t,n])})),this):this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){const t=c(),n=l(),r=this[0];let i,o;if(!r||void 0===e)return!1;if("string"==typeof e){if(r.matches)return r.matches(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);for(i=p(e),o=0;o<i.length;o+=1)if(i[o]===r)return!0;return!1}if(e===n)return r===n;if(e===t)return r===t;if(e.nodeType||e instanceof d){for(i=e.nodeType?[e]:e,o=0;o<i.length;o+=1)if(i[o]===r)return!0;return!1}return!1},index:function(){let e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;const t=this.length;if(e>t-1)return p([]);if(e<0){const n=t+e;return p(n<0?[]:[this[n]])}return p([this[e]])},append:function(...e){let t;const n=l();for(let r=0;r<e.length;r+=1){t=e[r];for(let e=0;e<this.length;e+=1)if("string"==typeof t){const r=n.createElement("div");for(r.innerHTML=t;r.firstChild;)this[e].appendChild(r.firstChild)}else if(t instanceof d)for(let n=0;n<t.length;n+=1)this[e].appendChild(t[n]);else this[e].appendChild(t)}return this},prepend:function(e){const t=l();let n,r;for(n=0;n<this.length;n+=1)if("string"==typeof e){const i=t.createElement("div");for(i.innerHTML=e,r=i.childNodes.length-1;r>=0;r-=1)this[n].insertBefore(i.childNodes[r],this[n].childNodes[0])}else if(e instanceof d)for(r=0;r<e.length;r+=1)this[n].insertBefore(e[r],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&p(this[0].nextElementSibling).is(e)?p([this[0].nextElementSibling]):p([]):this[0].nextElementSibling?p([this[0].nextElementSibling]):p([]):p([])},nextAll:function(e){const t=[];let n=this[0];if(!n)return p([]);for(;n.nextElementSibling;){const r=n.nextElementSibling;e?p(r).is(e)&&t.push(r):t.push(r),n=r}return p(t)},prev:function(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&p(t.previousElementSibling).is(e)?p([t.previousElementSibling]):p([]):t.previousElementSibling?p([t.previousElementSibling]):p([])}return p([])},prevAll:function(e){const t=[];let n=this[0];if(!n)return p([]);for(;n.previousElementSibling;){const r=n.previousElementSibling;e?p(r).is(e)&&t.push(r):t.push(r),n=r}return p(t)},parent:function(e){const t=[];for(let n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?p(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return p(t)},parents:function(e){const t=[];for(let n=0;n<this.length;n+=1){let r=this[n].parentNode;for(;r;)e?p(r).is(e)&&t.push(r):t.push(r),r=r.parentNode}return p(t)},closest:function(e){let t=this;return void 0===e?p([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].querySelectorAll(e);for(let e=0;e<r.length;e+=1)t.push(r[e])}return p(t)},children:function(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].children;for(let n=0;n<r.length;n+=1)e&&!p(r[n]).is(e)||t.push(r[n])}return p(t)},filter:function(e){return p(f(this,e))},remove:function(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(y).forEach((e=>{Object.defineProperty(p.fn,e,{value:y[e],writable:!0})}));const v=p;function _(e,t=0){return setTimeout(e,t)}function b(){return Date.now()}function x(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function w(...e){const t=Object(e[0]),n=["__proto__","constructor","prototype"];for(let i=1;i<e.length;i+=1){const o=e[i];if(null!=o&&(r=o,!("undefined"!=typeof window&&void 0!==window.HTMLElement?r instanceof HTMLElement:r&&(1===r.nodeType||11===r.nodeType)))){const e=Object.keys(Object(o)).filter((e=>n.indexOf(e)<0));for(let n=0,r=e.length;n<r;n+=1){const r=e[n],i=Object.getOwnPropertyDescriptor(o,r);void 0!==i&&i.enumerable&&(x(t[r])&&x(o[r])?o[r].__swiper__?t[r]=o[r]:w(t[r],o[r]):!x(t[r])&&x(o[r])?(t[r]={},o[r].__swiper__?t[r]=o[r]:w(t[r],o[r])):t[r]=o[r])}}}var r;return t}function E(e,t,n){e.style.setProperty(t,n)}function S({swiper:e,targetPosition:t,side:n}){const r=c(),i=-e.translate;let o,a=null;const s=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const l=t>i?"next":"prev",u=(e,t)=>"next"===l&&e>=t||"prev"===l&&e<=t,d=()=>{o=(new Date).getTime(),null===a&&(a=o);const l=Math.max(Math.min((o-a)/s,1),0),c=.5-Math.cos(l*Math.PI)/2;let h=i+c*(t-i);if(u(h,t)&&(h=t),e.wrapperEl.scrollTo({[n]:h}),u(h,t))return e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout((()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:h})})),void r.cancelAnimationFrame(e.cssModeFrameID);e.cssModeFrameID=r.requestAnimationFrame(d)};d()}let T,M,k;function C(){return T||(T=function(){const e=c(),t=l();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let t=!1;try{const n=Object.defineProperty({},"passive",{get(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),T}const P={on(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!=typeof t)return r;const i=n?"unshift":"push";return e.split(" ").forEach((e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!=typeof t)return r;function i(...n){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy,t.apply(r,n)}return i.__emitterProxy=t,r.on(e,i,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof e)return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((e=>{void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach(((r,i)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsListeners)return t;let n,r,i;return"string"==typeof e[0]||Array.isArray(e[0])?(n=e[0],r=e.slice(1,e.length),i=t):(n=e[0].events,r=e[0].data,i=e[0].context||t),r.unshift(i),(Array.isArray(n)?n:n.split(" ")).forEach((e=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach((t=>{t.apply(i,[e,...r])})),t.eventsListeners&&t.eventsListeners[e]&&t.eventsListeners[e].forEach((e=>{e.apply(i,r)}))})),t}},A={updateSize:function(){const e=this;let t,n;const r=e.$el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:r[0].clientWidth,n=void 0!==e.params.height&&null!==e.params.height?e.params.height:r[0].clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),n=n-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}const r=e.params,{$wrapperEl:i,size:o,rtlTranslate:a,wrongRTL:s}=e,l=e.virtual&&r.virtual.enabled,u=l?e.virtual.slides.length:e.slides.length,c=i.children(`.${e.params.slideClass}`),d=l?e.virtual.slides.length:c.length;let h=[];const f=[],p=[];let m=r.slidesOffsetBefore;"function"==typeof m&&(m=r.slidesOffsetBefore.call(e));let g=r.slidesOffsetAfter;"function"==typeof g&&(g=r.slidesOffsetAfter.call(e));const y=e.snapGrid.length,v=e.slidesGrid.length;let _=r.spaceBetween,b=-m,x=0,w=0;if(void 0===o)return;"string"==typeof _&&_.indexOf("%")>=0&&(_=parseFloat(_.replace("%",""))/100*o),e.virtualSize=-_,a?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),r.centeredSlides&&r.cssMode&&(E(e.wrapperEl,"--swiper-centered-offset-before",""),E(e.wrapperEl,"--swiper-centered-offset-after",""));const S=r.grid&&r.grid.rows>1&&e.grid;let T;S&&e.grid.initSlides(d);const M="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter((e=>void 0!==r.breakpoints[e].slidesPerView)).length>0;for(let E=0;E<d;E+=1){T=0;const i=c.eq(E);if(S&&e.grid.updateSlide(E,i,d,t),"none"!==i.css("display")){if("auto"===r.slidesPerView){M&&(c[E].style[t("width")]="");const o=getComputedStyle(i[0]),a=i[0].style.transform,s=i[0].style.webkitTransform;if(a&&(i[0].style.transform="none"),s&&(i[0].style.webkitTransform="none"),r.roundLengths)T=e.isHorizontal()?i.outerWidth(!0):i.outerHeight(!0);else{const e=n(o,"width"),t=n(o,"padding-left"),r=n(o,"padding-right"),a=n(o,"margin-left"),s=n(o,"margin-right"),l=o.getPropertyValue("box-sizing");if(l&&"border-box"===l)T=e+a+s;else{const{clientWidth:n,offsetWidth:o}=i[0];T=e+t+r+a+s+(o-n)}}a&&(i[0].style.transform=a),s&&(i[0].style.webkitTransform=s),r.roundLengths&&(T=Math.floor(T))}else T=(o-(r.slidesPerView-1)*_)/r.slidesPerView,r.roundLengths&&(T=Math.floor(T)),c[E]&&(c[E].style[t("width")]=`${T}px`);c[E]&&(c[E].swiperSlideSize=T),p.push(T),r.centeredSlides?(b=b+T/2+x/2+_,0===x&&0!==E&&(b=b-o/2-_),0===E&&(b=b-o/2-_),Math.abs(b)<.001&&(b=0),r.roundLengths&&(b=Math.floor(b)),w%r.slidesPerGroup==0&&h.push(b),f.push(b)):(r.roundLengths&&(b=Math.floor(b)),(w-Math.min(e.params.slidesPerGroupSkip,w))%e.params.slidesPerGroup==0&&h.push(b),f.push(b),b=b+T+_),e.virtualSize+=T+_,x=T,w+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+g,a&&s&&("slide"===r.effect||"coverflow"===r.effect)&&i.css({width:`${e.virtualSize+r.spaceBetween}px`}),r.setWrapperSize&&i.css({[t("width")]:`${e.virtualSize+r.spaceBetween}px`}),S&&e.grid.updateWrapperSize(T,h,t),!r.centeredSlides){const t=[];for(let n=0;n<h.length;n+=1){let i=h[n];r.roundLengths&&(i=Math.floor(i)),h[n]<=e.virtualSize-o&&t.push(i)}h=t,Math.floor(e.virtualSize-o)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-o)}if(0===h.length&&(h=[0]),0!==r.spaceBetween){const n=e.isHorizontal()&&a?"marginLeft":t("marginRight");c.filter(((e,t)=>!r.cssMode||t!==c.length-1)).css({[n]:`${_}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let e=0;p.forEach((t=>{e+=t+(r.spaceBetween?r.spaceBetween:0)})),e-=r.spaceBetween;const t=e-o;h=h.map((e=>e<0?-m:e>t?t+g:e))}if(r.centerInsufficientSlides){let e=0;if(p.forEach((t=>{e+=t+(r.spaceBetween?r.spaceBetween:0)})),e-=r.spaceBetween,e<o){const t=(o-e)/2;h.forEach(((e,n)=>{h[n]=e-t})),f.forEach(((e,n)=>{f[n]=e+t}))}}if(Object.assign(e,{slides:c,snapGrid:h,slidesGrid:f,slidesSizesGrid:p}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){E(e.wrapperEl,"--swiper-centered-offset-before",-h[0]+"px"),E(e.wrapperEl,"--swiper-centered-offset-after",e.size/2-p[p.length-1]/2+"px");const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+n))}if(d!==u&&e.emit("slidesLengthChange"),h.length!==y&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==v&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!(l||r.cssMode||"slide"!==r.effect&&"fade"!==r.effect)){const t=`${r.containerModifierClass}backface-hidden`,n=e.$el.hasClass(t);d<=r.maxBackfaceHiddenSlides?n||e.$el.addClass(t):n&&e.$el.removeClass(t)}},updateAutoHeight:function(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let i,o=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const a=e=>r?t.slides.filter((t=>parseInt(t.getAttribute("data-swiper-slide-index"),10)===e))[0]:t.slides.eq(e)[0];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||v([])).each((e=>{n.push(e)}));else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const e=t.activeIndex+i;if(e>t.slides.length&&!r)break;n.push(a(e))}else n.push(a(t.activeIndex));for(i=0;i<n.length;i+=1)if(void 0!==n[i]){const e=n[i].offsetHeight;o=e>o?e:o}(o||0===o)&&t.$wrapperEl.css("height",`${o}px`)},updateSlidesOffset:function(){const e=this,t=e.slides;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=e.isHorizontal()?t[n].offsetLeft:t[n].offsetTop},updateSlidesProgress:function(e=this&&this.translate||0){const t=this,n=t.params,{slides:r,rtlTranslate:i,snapGrid:o}=t;if(0===r.length)return;void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();let a=-e;i&&(a=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let s=0;s<r.length;s+=1){const e=r[s];let l=e.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);const u=(a+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+n.spaceBetween),c=(a-o[0]+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+n.spaceBetween),d=-(a-l),h=d+t.slidesSizesGrid[s];(d>=0&&d<t.size-1||h>1&&h<=t.size||d<=0&&h>=t.size)&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(s),r.eq(s).addClass(n.slideVisibleClass)),e.progress=i?-u:u,e.originalProgress=i?-c:c}t.visibleSlides=v(t.visibleSlides)},updateProgress:function(e){const t=this;if(void 0===e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:o,isEnd:a}=t;const s=o,l=a;0===r?(i=0,o=!0,a=!0):(i=(e-t.minTranslate())/r,o=i<=0,a=i>=1),Object.assign(t,{progress:i,isBeginning:o,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),o&&!s&&t.emit("reachBeginning toEdge"),a&&!l&&t.emit("reachEnd toEdge"),(s&&!o||l&&!a)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,$wrapperEl:r,activeIndex:i,realIndex:o}=e,a=e.virtual&&n.virtual.enabled;let s;t.removeClass(`${n.slideActiveClass} ${n.slideNextClass} ${n.slidePrevClass} ${n.slideDuplicateActiveClass} ${n.slideDuplicateNextClass} ${n.slideDuplicatePrevClass}`),s=a?e.$wrapperEl.find(`.${n.slideClass}[data-swiper-slide-index="${i}"]`):t.eq(i),s.addClass(n.slideActiveClass),n.loop&&(s.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${o}"]`).addClass(n.slideDuplicateActiveClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${o}"]`).addClass(n.slideDuplicateActiveClass));let l=s.nextAll(`.${n.slideClass}`).eq(0).addClass(n.slideNextClass);n.loop&&0===l.length&&(l=t.eq(0),l.addClass(n.slideNextClass));let u=s.prevAll(`.${n.slideClass}`).eq(0).addClass(n.slidePrevClass);n.loop&&0===u.length&&(u=t.eq(-1),u.addClass(n.slidePrevClass)),n.loop&&(l.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass),u.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass)),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:r,snapGrid:i,params:o,activeIndex:a,realIndex:s,snapIndex:l}=t;let u,c=e;if(void 0===c){for(let e=0;e<r.length;e+=1)void 0!==r[e+1]?n>=r[e]&&n<r[e+1]-(r[e+1]-r[e])/2?c=e:n>=r[e]&&n<r[e+1]&&(c=e+1):n>=r[e]&&(c=e);o.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(i.indexOf(n)>=0)u=i.indexOf(n);else{const e=Math.min(o.slidesPerGroupSkip,c);u=e+Math.floor((c-e)/o.slidesPerGroup)}if(u>=i.length&&(u=i.length-1),c===a)return void(u!==l&&(t.snapIndex=u,t.emit("snapIndexChange")));const d=parseInt(t.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(t,{snapIndex:u,realIndex:d,previousIndex:a,activeIndex:c}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),s!==d&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")},updateClickedSlide:function(e){const t=this,n=t.params,r=v(e).closest(`.${n.slideClass}`)[0];let i,o=!1;if(r)for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===r){o=!0,i=a;break}if(!r||!o)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(v(r).attr("data-swiper-slide-index"),10):t.clickedIndex=i,n.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}};function O({swiper:e,runCallbacks:t,direction:n,step:r}){const{activeIndex:i,previousIndex:o}=e;let a=n;if(a||(a=i>o?"next":i<o?"prev":"reset"),e.emit(`transition${r}`),t&&i!==o){if("reset"===a)return void e.emit(`slideResetTransition${r}`);e.emit(`slideChangeTransition${r}`),"next"===a?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}const I={slideTo:function(e=0,t=this.params.speed,n=!0,r,i){if("number"!=typeof e&&"string"!=typeof e)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const o=this;let a=e;a<0&&(a=0);const{params:s,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:p}=o;if(o.animating&&s.preventInteractionOnTransition||!p&&!r&&!i)return!1;const m=Math.min(o.params.slidesPerGroupSkip,a);let g=m+Math.floor((a-m)/o.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const y=-l[g];if(s.normalizeSlideIndex)for(let _=0;_<u.length;_+=1){const e=-Math.floor(100*y),t=Math.floor(100*u[_]),n=Math.floor(100*u[_+1]);void 0!==u[_+1]?e>=t&&e<n-(n-t)/2?a=_:e>=t&&e<n&&(a=_+1):e>=t&&(a=_)}if(o.initialized&&a!==d){if(!o.allowSlideNext&&y<o.translate&&y<o.minTranslate())return!1;if(!o.allowSlidePrev&&y>o.translate&&y>o.maxTranslate()&&(d||0)!==a)return!1}let v;if(a!==(c||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(y),v=a>d?"next":a<d?"prev":"reset",h&&-y===o.translate||!h&&y===o.translate)return o.updateActiveIndex(a),s.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==s.effect&&o.setTranslate(y),"reset"!==v&&(o.transitionStart(n,v),o.transitionEnd(n,v)),!1;if(s.cssMode){const e=o.isHorizontal(),n=h?y:-y;if(0===t){const t=o.virtual&&o.params.virtual.enabled;t&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),f[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame((()=>{o.wrapperEl.style.scrollSnapType="",o._swiperImmediateVirtual=!1}))}else{if(!o.support.smoothScroll)return S({swiper:o,targetPosition:n,side:e?"left":"top"}),!0;f.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return o.setTransition(t),o.setTranslate(y),o.updateActiveIndex(a),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,r),o.transitionStart(n,v),0===t?o.transitionEnd(n,v):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,v))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e=0,t=this.params.speed,n=!0,r){if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const i=this;let o=e;return i.params.loop&&(o+=i.loopedSlides),i.slideTo(o,t,n,r)},slideNext:function(e=this.params.speed,t=!0,n){const r=this,{animating:i,enabled:o,params:a}=r;if(!o)return r;let s=a.slidesPerGroup;"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(s=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<a.slidesPerGroupSkip?1:s;if(a.loop){if(i&&a.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return a.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+l,e,t,n)},slidePrev:function(e=this.params.speed,t=!0,n){const r=this,{params:i,animating:o,snapGrid:a,slidesGrid:s,rtlTranslate:l,enabled:u}=r;if(!u)return r;if(i.loop){if(o&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const d=c(l?r.translate:-r.translate),h=a.map((e=>c(e)));let f=a[h.indexOf(d)-1];if(void 0===f&&i.cssMode){let e;a.forEach(((t,n)=>{d>=t&&(e=n)})),void 0!==e&&(f=a[e>0?e-1:e])}let p=0;if(void 0!==f&&(p=s.indexOf(f),p<0&&(p=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(p=p-r.slidesPerViewDynamic("previous",!0)+1,p=Math.max(p,0))),i.rewind&&r.isBeginning){const i=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(i,e,t,n)}return r.slideTo(p,e,t,n)},slideReset:function(e=this.params.speed,t=!0,n){return this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e=this.params.speed,t=!0,n,r=.5){const i=this;let o=i.activeIndex;const a=Math.min(i.params.slidesPerGroupSkip,o),s=a+Math.floor((o-a)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[s]){const e=i.snapGrid[s];l-e>(i.snapGrid[s+1]-e)*r&&(o+=i.params.slidesPerGroup)}else{const e=i.snapGrid[s-1];l-e<=(i.snapGrid[s]-e)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,e,t,n)},slideToClickedSlide:function(){const e=this,{params:t,$wrapperEl:n}=e,r="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let i,o=e.clickedIndex;if(t.loop){if(e.animating)return;i=parseInt(v(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?o<e.loopedSlides-r/2||o>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),o=n.children(`.${t.slideClass}[data-swiper-slide-index="${i}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),_((()=>{e.slideTo(o)}))):e.slideTo(o):o>e.slides.length-r?(e.loopFix(),o=n.children(`.${t.slideClass}[data-swiper-slide-index="${i}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),_((()=>{e.slideTo(o)}))):e.slideTo(o)}else e.slideTo(o)}};function L(e){const t=this,n=l(),r=c(),i=t.touchEventsData,{params:o,touches:a,enabled:s}=t;if(!s)return;if(t.animating&&o.preventInteractionOnTransition)return;!t.animating&&o.cssMode&&o.loop&&t.loopFix();let u=e;u.originalEvent&&(u=u.originalEvent);let d=v(u.target);if("wrapper"===o.touchEventsTarget&&!d.closest(t.wrapperEl).length)return;if(i.isTouchEvent="touchstart"===u.type,!i.isTouchEvent&&"which"in u&&3===u.which)return;if(!i.isTouchEvent&&"button"in u&&u.button>0)return;if(i.isTouched&&i.isMoved)return;const h=!!o.noSwipingClass&&""!==o.noSwipingClass,f=e.composedPath?e.composedPath():e.path;h&&u.target&&u.target.shadowRoot&&f&&(d=v(f[0]));const p=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,m=!(!u.target||!u.target.shadowRoot);if(o.noSwiping&&(m?function(e,t=this){return function t(n){if(!n||n===l()||n===c())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(e);return r||n.getRootNode?r||t(n.getRootNode().host):null}(t)}(p,d[0]):d.closest(p)[0]))return void(t.allowClick=!0);if(o.swipeHandler&&!d.closest(o.swipeHandler)[0])return;a.currentX="touchstart"===u.type?u.targetTouches[0].pageX:u.pageX,a.currentY="touchstart"===u.type?u.targetTouches[0].pageY:u.pageY;const g=a.currentX,y=a.currentY,_=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,x=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(_&&(g<=x||g>=r.innerWidth-x)){if("prevent"!==_)return;e.preventDefault()}if(Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=g,a.startY=y,i.touchStartTime=b(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(i.allowThresholdMove=!1),"touchstart"!==u.type){let e=!0;d.is(i.focusableElements)&&(e=!1,"SELECT"===d[0].nodeName&&(i.isTouched=!1)),n.activeElement&&v(n.activeElement).is(i.focusableElements)&&n.activeElement!==d[0]&&n.activeElement.blur();const r=e&&t.allowTouchMove&&o.touchStartPreventDefault;!o.touchStartForcePreventDefault&&!r||d[0].isContentEditable||u.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!o.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",u)}function D(e){const t=l(),n=this,r=n.touchEventsData,{params:i,touches:o,rtlTranslate:a,enabled:s}=n;if(!s)return;let u=e;if(u.originalEvent&&(u=u.originalEvent),!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",u));if(r.isTouchEvent&&"touchmove"!==u.type)return;const c="touchmove"===u.type&&u.targetTouches&&(u.targetTouches[0]||u.changedTouches[0]),d="touchmove"===u.type?c.pageX:u.pageX,h="touchmove"===u.type?c.pageY:u.pageY;if(u.preventedByNestedSwiper)return o.startX=d,void(o.startY=h);if(!n.allowTouchMove)return v(u.target).is(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(o,{startX:d,startY:h,currentX:d,currentY:h}),r.touchStartTime=b()));if(r.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(h<o.startY&&n.translate<=n.maxTranslate()||h>o.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(d<o.startX&&n.translate<=n.maxTranslate()||d>o.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&u.target===t.activeElement&&v(u.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",u),u.targetTouches&&u.targetTouches.length>1)return;o.currentX=d,o.currentY=h;const f=o.currentX-o.startX,p=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(f**2+p**2)<n.params.threshold)return;if(void 0===r.isScrolling){let e;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:f*f+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(f))/Math.PI,r.isScrolling=n.isHorizontal()?e>i.touchAngle:90-e>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",u),void 0===r.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(r.startMoving=!0)),r.isScrolling)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&u.cancelable&&u.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&u.stopPropagation(),r.isMoved||(i.loop&&!i.cssMode&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",u)),n.emit("sliderMove",u),r.isMoved=!0;let m=n.isHorizontal()?f:p;o.diff=m,m*=i.touchRatio,a&&(m=-m),n.swipeDirection=m>0?"prev":"next",r.currentTranslate=m+r.startTranslate;let g=!0,y=i.resistanceRatio;if(i.touchReleaseOnEdges&&(y=0),m>0&&r.currentTranslate>n.minTranslate()?(g=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+m)**y)):m<0&&r.currentTranslate<n.maxTranslate()&&(g=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-m)**y)),g&&(u.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(m)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,void(o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function R(e){const t=this,n=t.touchEventsData,{params:r,touches:i,rtlTranslate:o,slidesGrid:a,enabled:s}=t;if(!s)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const u=b(),c=u-n.touchStartTime;if(t.allowClick){const e=l.path||l.composedPath&&l.composedPath();t.updateClickedSlide(e&&e[0]||l.target),t.emit("tap click",l),c<300&&u-n.lastClickTime<300&&t.emit("doubleTap doubleClick",l)}if(n.lastClickTime=b(),_((()=>{t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===i.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let d;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,d=r.followFinger?o?t.translate:-t.translate:-n.currentTranslate,r.cssMode)return;if(t.params.freeMode&&r.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:d});let h=0,f=t.slidesSizesGrid[0];for(let v=0;v<a.length;v+=v<r.slidesPerGroupSkip?1:r.slidesPerGroup){const e=v<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==a[v+e]?d>=a[v]&&d<a[v+e]&&(h=v,f=a[v+e]-a[v]):d>=a[v]&&(h=v,f=a[a.length-1]-a[a.length-2])}let p=null,m=null;r.rewind&&(t.isBeginning?m=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(p=0));const g=(d-a[h])/f,y=h<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(c>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(g>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?p:h+y):t.slideTo(h)),"prev"===t.swipeDirection&&(g>1-r.longSwipesRatio?t.slideTo(h+y):null!==m&&g<0&&Math.abs(g)>r.longSwipesRatio?t.slideTo(m):t.slideTo(h))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);!t.navigation||l.target!==t.navigation.nextEl&&l.target!==t.navigation.prevEl?("next"===t.swipeDirection&&t.slideTo(null!==p?p:h+y),"prev"===t.swipeDirection&&t.slideTo(null!==m?m:h)):l.target===t.navigation.nextEl?t.slideTo(h+y):t.slideTo(h)}}function N(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:o}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}function z(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function j(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;let i;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const o=e.maxTranslate()-e.minTranslate();i=0===o?0:(e.translate-e.minTranslate())/o,i!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let B=!1;function F(){}const U=(e,t)=>{const n=l(),{params:r,touchEvents:i,el:o,wrapperEl:a,device:s,support:u}=e,c=!!r.nested,d="on"===t?"addEventListener":"removeEventListener",h=t;if(u.touch){const t=!("touchstart"!==i.start||!u.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};o[d](i.start,e.onTouchStart,t),o[d](i.move,e.onTouchMove,u.passiveListener?{passive:!1,capture:c}:c),o[d](i.end,e.onTouchEnd,t),i.cancel&&o[d](i.cancel,e.onTouchEnd,t)}else o[d](i.start,e.onTouchStart,!1),n[d](i.move,e.onTouchMove,c),n[d](i.end,e.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&o[d]("click",e.onClick,!0),r.cssMode&&a[d]("scroll",e.onScroll),r.updateOnWindowResize?e[h](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",N,!0):e[h]("observerUpdate",N,!0)},G={attachEvents:function(){const e=this,t=l(),{params:n,support:r}=e;e.onTouchStart=L.bind(e),e.onTouchMove=D.bind(e),e.onTouchEnd=R.bind(e),n.cssMode&&(e.onScroll=j.bind(e)),e.onClick=z.bind(e),r.touch&&!B&&(t.addEventListener("touchstart",F),B=!0),U(e,"on")},detachEvents:function(){U(this,"off")}},H=(e,t)=>e.grid&&t.grid&&t.grid.rows>1,V={addClasses:function(){const e=this,{classNames:t,params:n,rtl:r,$el:i,device:o,support:a}=e,s=function(e,t){const n=[];return e.forEach((e=>{"object"==typeof e?Object.keys(e).forEach((r=>{e[r]&&n.push(t+r)})):"string"==typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"pointer-events":!a.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...s),i.addClass([...t].join(" ")),e.emitContainerClasses()},removeClasses:function(){const{$el:e,classNames:t}=this;e.removeClass(t.join(" ")),this.emitContainerClasses()}},q={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function $(e,t){return function(n={}){const r=Object.keys(n)[0],i=n[r];"object"==typeof i&&null!==i?(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===e[r]&&(e[r]={auto:!0}),r in e&&"enabled"in i?(!0===e[r]&&(e[r]={enabled:!0}),"object"!=typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),w(t,n)):w(t,n)):w(t,n)}}const W={eventsEmitter:P,update:A,translate:{getTranslate:function(e=(this.isHorizontal()?"x":"y")){const{params:t,rtlTranslate:n,translate:r,$wrapperEl:i}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let o=function(e,t="x"){const n=c();let r,i,o;const a=function(e){const t=c();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map((e=>e.replace(",","."))).join(", ")),o=new n.WebKitCSSMatrix("none"===i?"":i)):(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=o.toString().split(",")),"x"===t&&(i=n.WebKitCSSMatrix?o.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(i=n.WebKitCSSMatrix?o.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),i||0}(i[0],e);return n&&(o=-o),o||0},setTranslate:function(e,t){const n=this,{rtlTranslate:r,params:i,$wrapperEl:o,wrapperEl:a,progress:s}=n;let l,u=0,c=0;n.isHorizontal()?u=r?-e:e:c=e,i.roundLengths&&(u=Math.floor(u),c=Math.floor(c)),i.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-c:i.virtualTranslate||o.transform(`translate3d(${u}px, ${c}px, 0px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:c;const d=n.maxTranslate()-n.minTranslate();l=0===d?0:(e-n.minTranslate())/d,l!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e=0,t=this.params.speed,n=!0,r=!0,i){const o=this,{params:a,wrapperEl:s}=o;if(o.animating&&a.preventInteractionOnTransition)return!1;const l=o.minTranslate(),u=o.maxTranslate();let c;if(c=r&&e>l?l:r&&e<u?u:e,o.updateProgress(c),a.cssMode){const e=o.isHorizontal();if(0===t)s[e?"scrollLeft":"scrollTop"]=-c;else{if(!o.support.smoothScroll)return S({swiper:o,targetPosition:-c,side:e?"left":"top"}),!0;s.scrollTo({[e?"left":"top"]:-c,behavior:"smooth"})}return!0}return 0===t?(o.setTransition(0),o.setTranslate(c),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(c),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.$wrapperEl[0].addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){const n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e=!0,t){const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),O({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e=!0,t){const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),O({swiper:n,runCallbacks:e,direction:t,step:"End"}))}},slide:I,loop:{loopCreate:function(){const e=this,t=l(),{params:n,$wrapperEl:r}=e,i=r.children().length>0?v(r.children()[0].parentNode):r;i.children(`.${n.slideClass}.${n.slideDuplicateClass}`).remove();let o=i.children(`.${n.slideClass}`);if(n.loopFillGroupWithBlank){const e=n.slidesPerGroup-o.length%n.slidesPerGroup;if(e!==n.slidesPerGroup){for(let r=0;r<e;r+=1){const e=v(t.createElement("div")).addClass(`${n.slideClass} ${n.slideBlankClass}`);i.append(e)}o=i.children(`.${n.slideClass}`)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=o.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>o.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=o.length);const a=[],s=[];o.each(((e,t)=>{v(e).attr("data-swiper-slide-index",t)}));for(let l=0;l<e.loopedSlides;l+=1){const e=l-Math.floor(l/o.length)*o.length;s.push(o.eq(e)[0]),a.unshift(o.eq(o.length-e-1)[0])}for(let l=0;l<s.length;l+=1)i.append(v(s[l].cloneNode(!0)).addClass(n.slideDuplicateClass));for(let l=a.length-1;l>=0;l-=1)i.prepend(v(a[l].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:n,loopedSlides:r,allowSlidePrev:i,allowSlideNext:o,snapGrid:a,rtlTranslate:s}=e;let l;e.allowSlidePrev=!0,e.allowSlideNext=!0;const u=-a[t]-e.getTranslate();t<r?(l=n.length-3*r+t,l+=r,e.slideTo(l,0,!1,!0)&&0!==u&&e.setTranslate((s?-e.translate:e.translate)-u)):t>=n.length-r&&(l=-n.length+t+r,l+=r,e.slideTo(l,0,!1,!0)&&0!==u&&e.setTranslate((s?-e.translate:e.translate)-u)),e.allowSlidePrev=i,e.allowSlideNext=o,e.emit("loopFix")},loopDestroy:function(){const{$wrapperEl:e,params:t,slides:n}=this;e.children(`.${t.slideClass}.${t.slideDuplicateClass},.${t.slideClass}.${t.slideBlankClass}`).remove(),n.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"},unsetGrabCursor:function(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:G,breakpoints:{setBreakpoint:function(){const e=this,{activeIndex:t,initialized:n,loopedSlides:r=0,params:i,$el:o}=e,a=i.breakpoints;if(!a||a&&0===Object.keys(a).length)return;const s=e.getBreakpoint(a,e.params.breakpointsBase,e.el);if(!s||e.currentBreakpoint===s)return;const l=(s in a?a[s]:void 0)||e.originalParams,u=H(e,i),c=H(e,l),d=i.enabled;u&&!c?(o.removeClass(`${i.containerModifierClass}grid ${i.containerModifierClass}grid-column`),e.emitContainerClasses()):!u&&c&&(o.addClass(`${i.containerModifierClass}grid`),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===i.grid.fill)&&o.addClass(`${i.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((t=>{const n=i[t]&&i[t].enabled,r=l[t]&&l[t].enabled;n&&!r&&e[t].disable(),!n&&r&&e[t].enable()}));const h=l.direction&&l.direction!==i.direction,f=i.loop&&(l.slidesPerView!==i.slidesPerView||h);h&&n&&e.changeDirection(),w(e.params,l);const p=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),d&&!p?e.disable():!d&&p&&e.enable(),e.currentBreakpoint=s,e.emit("_beforeBreakpoint",l),f&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-r+e.loopedSlides,0,!1)),e.emit("breakpoint",l)},getBreakpoint:function(e,t="window",n){if(!e||"container"===t&&!n)return;let r=!1;const i=c(),o="window"===t?i.innerHeight:n.clientHeight,a=Object.keys(e).map((e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:o*t,point:e}}return{value:e,point:e}}));a.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let s=0;s<a.length;s+=1){const{point:e,value:o}=a[s];"window"===t?i.matchMedia(`(min-width: ${o}px)`).matches&&(r=e):o<=n.clientWidth&&(r=e)}return r||"max"}},checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*r;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:V,images:{loadImage:function(e,t,n,r,i,o){const a=c();let s;function l(){o&&o()}v(e).parent("picture")[0]||e.complete&&i?l():t?(s=new a.Image,s.onload=l,s.onerror=l,r&&(s.sizes=r),n&&(s.srcset=n),t&&(s.src=t)):l()},preloadImages:function(){const e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(let n=0;n<e.imagesToLoad.length;n+=1){const r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}}},Z={};class X{constructor(...e){let t,n;if(1===e.length&&e[0].constructor&&"Object"===Object.prototype.toString.call(e[0]).slice(8,-1)?n=e[0]:[t,n]=e,n||(n={}),n=w({},n),t&&!n.el&&(n.el=t),n.el&&v(n.el).length>1){const e=[];return v(n.el).each((t=>{const r=w({},n,{el:t});e.push(new X(r))})),e}const r=this;r.__swiper__=!0,r.support=C(),r.device=function(e={}){return M||(M=function({userAgent:e}={}){const t=C(),n=c(),r=n.navigator.platform,i=e||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,s=n.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/);let u=i.match(/(iPad).*OS\s([\d_]+)/);const d=i.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===r;let p="MacIntel"===r;return!u&&p&&t.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${a}x${s}`)>=0&&(u=i.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),p=!1),l&&!f&&(o.os="android",o.android=!0),(u||h||d)&&(o.os="ios",o.ios=!0),o}(e)),M}({userAgent:n.userAgent}),r.browser=(k||(k=function(){const e=c();return{isSafari:function(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),k),r.eventsListeners={},r.eventsAnyListeners=[],r.modules=[...r.__modules__],n.modules&&Array.isArray(n.modules)&&r.modules.push(...n.modules);const i={};r.modules.forEach((e=>{e({swiper:r,extendParams:$(n,i),on:r.on.bind(r),once:r.once.bind(r),off:r.off.bind(r),emit:r.emit.bind(r)})}));const o=w({},q,i);return r.params=w({},o,Z,n),r.originalParams=w({},r.params),r.passedParams=w({},n),r.params&&r.params.on&&Object.keys(r.params.on).forEach((e=>{r.on(e,r.params.on[e])})),r.params&&r.params.onAny&&r.onAny(r.params.onAny),r.$=v,Object.assign(r,{enabled:r.params.enabled,el:t,classNames:[],slides:v(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===r.params.direction,isVertical:()=>"vertical"===r.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev,touchEvents:function(){const e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return r.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},r.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},r.support.touch||!r.params.simulateTouch?r.touchEventsTouch:r.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:r.params.focusableElements,lastClickTime:b(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:r.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),r.emit("_swiper"),r.params.init&&r.init(),r}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.each((n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e="current",t=!1){const{params:n,slides:r,slidesGrid:i,slidesSizesGrid:o,size:a,activeIndex:s}=this;let l=1;if(n.centeredSlides){let e,t=r[s].swiperSlideSize;for(let n=s+1;n<r.length;n+=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>a&&(e=!0));for(let n=s-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>a&&(e=!0))}else if("current"===e)for(let u=s+1;u<r.length;u+=1)(t?i[u]+o[u]-i[s]<a:i[u]-i[s]<a)&&(l+=1);else for(let u=s-1;u>=0;u-=1)i[s]-i[u]<a&&(l+=1);return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function r(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let i;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(r(),e.params.autoHeight&&e.updateAutoHeight()):(i=("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),i||r()),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t=!0){const n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass(`${n.params.containerModifierClass}${r}`).addClass(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.each((t=>{"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.$el.addClass(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.$el.removeClass(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;const n=v(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let i=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const t=v(e.shadowRoot.querySelector(r()));return t.children=e=>n.children(e),t}return n.children?n.children(r()):v(n).children(r())})();if(0===i.length&&t.params.createElements){const e=l().createElement("div");i=v(e),e.className=t.params.wrapperClass,n.append(e),n.children(`.${t.params.slideClass}`).each((e=>{i.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:i,wrapperEl:i[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===i.css("display")}),!0}init(e){const t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}destroy(e=!0,t=!0){const n=this,{params:r,$el:i,$wrapperEl:o,slides:a}=n;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttr("style"),o.removeAttr("style"),a&&a.length&&a.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((e=>{n.off(e)})),!1!==e&&(n.$el[0].swiper=null,function(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}(n)),n.destroyed=!0),null}static extendDefaults(e){w(Z,e)}static get extendedDefaults(){return Z}static get defaults(){return q}static installModule(e){X.prototype.__modules__||(X.prototype.__modules__=[]);const t=X.prototype.__modules__;"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>X.installModule(e))),X):(X.installModule(e),X)}}Object.keys(W).forEach((e=>{Object.keys(W[e]).forEach((t=>{X.prototype[t]=W[e][t]}))})),X.use([function({swiper:e,on:t,emit:n}){const r=c();let i=null,o=null;const a=()=>{e&&!e.destroyed&&e.initialized&&(n("beforeResize"),n("resize"))},s=()=>{e&&!e.destroyed&&e.initialized&&n("orientationchange")};t("init",(()=>{e.params.resizeObserver&&void 0!==r.ResizeObserver?e&&!e.destroyed&&e.initialized&&(i=new ResizeObserver((t=>{o=r.requestAnimationFrame((()=>{const{width:n,height:r}=e;let i=n,o=r;t.forEach((({contentBoxSize:t,contentRect:n,target:r})=>{r&&r!==e.el||(i=n?n.width:(t[0]||t).inlineSize,o=n?n.height:(t[0]||t).blockSize)})),i===n&&o===r||a()}))})),i.observe(e.el)):(r.addEventListener("resize",a),r.addEventListener("orientationchange",s))})),t("destroy",(()=>{o&&r.cancelAnimationFrame(o),i&&i.unobserve&&e.el&&(i.unobserve(e.el),i=null),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",s)}))},function({swiper:e,extendParams:t,on:n,emit:r}){const i=[],o=c(),a=(e,t={})=>{const n=new(o.MutationObserver||o.WebkitMutationObserver)((e=>{if(1===e.length)return void r("observerUpdate",e[0]);const t=function(){r("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)}));n.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),i.push(n)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",(()=>{if(e.params.observer){if(e.params.observeParents){const t=e.$el.parents();for(let e=0;e<t.length;e+=1)a(t[e])}a(e.$el[0],{childList:e.params.observeSlideChildren}),a(e.$wrapperEl[0],{attributes:!1})}})),n("destroy",(()=>{i.forEach((e=>{e.disconnect()})),i.splice(0,i.length)}))}]);const Y=X;function K(e=""){return`.${e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function J({swiper:e,extendParams:t,on:n,emit:r}){const i="swiper-pagination";let o;t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),e.pagination={el:null,$el:null,bullets:[]};let a=0;function s(){return!e.params.pagination.el||!e.pagination.el||!e.pagination.$el||0===e.pagination.$el.length}function u(t,n){const{bulletActiveClass:r}=e.params.pagination;t[n]().addClass(`${r}-${n}`)[n]().addClass(`${r}-${n}-${n}`)}function c(){const t=e.rtl,n=e.params.pagination;if(s())return;const i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,l=e.pagination.$el;let c;const d=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(c=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup),c>i-1-2*e.loopedSlides&&(c-=i-2*e.loopedSlides),c>d-1&&(c-=d),c<0&&"bullets"!==e.params.paginationType&&(c=d+c)):c=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===n.type&&e.pagination.bullets&&e.pagination.bullets.length>0){const r=e.pagination.bullets;let i,s,d;if(n.dynamicBullets&&(o=r.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),l.css(e.isHorizontal()?"width":"height",o*(n.dynamicMainBullets+4)+"px"),n.dynamicMainBullets>1&&void 0!==e.previousIndex&&(a+=c-(e.previousIndex-e.loopedSlides||0),a>n.dynamicMainBullets-1?a=n.dynamicMainBullets-1:a<0&&(a=0)),i=Math.max(c-a,0),s=i+(Math.min(r.length,n.dynamicMainBullets)-1),d=(s+i)/2),r.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map((e=>`${n.bulletActiveClass}${e}`)).join(" ")),l.length>1)r.each((e=>{const t=v(e),r=t.index();r===c&&t.addClass(n.bulletActiveClass),n.dynamicBullets&&(r>=i&&r<=s&&t.addClass(`${n.bulletActiveClass}-main`),r===i&&u(t,"prev"),r===s&&u(t,"next"))}));else{const t=r.eq(c),o=t.index();if(t.addClass(n.bulletActiveClass),n.dynamicBullets){const t=r.eq(i),a=r.eq(s);for(let e=i;e<=s;e+=1)r.eq(e).addClass(`${n.bulletActiveClass}-main`);if(e.params.loop)if(o>=r.length){for(let e=n.dynamicMainBullets;e>=0;e-=1)r.eq(r.length-e).addClass(`${n.bulletActiveClass}-main`);r.eq(r.length-n.dynamicMainBullets-1).addClass(`${n.bulletActiveClass}-prev`)}else u(t,"prev"),u(a,"next");else u(t,"prev"),u(a,"next")}}if(n.dynamicBullets){const i=Math.min(r.length,n.dynamicMainBullets+4),a=(o*i-o)/2-d*o,s=t?"right":"left";r.css(e.isHorizontal()?s:"top",`${a}px`)}}if("fraction"===n.type&&(l.find(K(n.currentClass)).text(n.formatFractionCurrent(c+1)),l.find(K(n.totalClass)).text(n.formatFractionTotal(d))),"progressbar"===n.type){let t;t=n.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";const r=(c+1)/d;let i=1,o=1;"horizontal"===t?i=r:o=r,l.find(K(n.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${i}) scaleY(${o})`).transition(e.params.speed)}"custom"===n.type&&n.renderCustom?(l.html(n.renderCustom(e,c+1,d)),r("paginationRender",l[0])):r("paginationUpdate",l[0]),e.params.watchOverflow&&e.enabled&&l[e.isLocked?"addClass":"removeClass"](n.lockClass)}function d(){const t=e.params.pagination;if(s())return;const n=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,i=e.pagination.$el;let o="";if("bullets"===t.type){let r=e.params.loop?Math.ceil((n-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&!e.params.loop&&r>n&&(r=n);for(let n=0;n<r;n+=1)t.renderBullet?o+=t.renderBullet.call(e,n,t.bulletClass):o+=`<${t.bulletElement} class="${t.bulletClass}"></${t.bulletElement}>`;i.html(o),e.pagination.bullets=i.find(K(t.bulletClass))}"fraction"===t.type&&(o=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`,i.html(o)),"progressbar"===t.type&&(o=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):`<span class="${t.progressbarFillClass}"></span>`,i.html(o)),"custom"!==t.type&&r("paginationRender",e.pagination.$el[0])}function h(){e.params.pagination=function(e,t,n,r){const i=l();return e.params.createElements&&Object.keys(r).forEach((o=>{if(!n[o]&&!0===n.auto){let a=e.$el.children(`.${r[o]}`)[0];a||(a=i.createElement("div"),a.className=r[o],e.$el.append(a)),n[o]=a,t[o]=a}})),n}(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const t=e.params.pagination;if(!t.el)return;let n=v(t.el);0!==n.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&n.length>1&&(n=e.$el.find(t.el),n.length>1&&(n=n.filter((t=>v(t).parents(".swiper")[0]===e.el)))),"bullets"===t.type&&t.clickable&&n.addClass(t.clickableClass),n.addClass(t.modifierClass+t.type),n.addClass(e.isHorizontal()?t.horizontalClass:t.verticalClass),"bullets"===t.type&&t.dynamicBullets&&(n.addClass(`${t.modifierClass}${t.type}-dynamic`),a=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&n.addClass(t.progressbarOppositeClass),t.clickable&&n.on("click",K(t.bulletClass),(function(t){t.preventDefault();let n=v(this).index()*e.params.slidesPerGroup;e.params.loop&&(n+=e.loopedSlides),e.slideTo(n)})),Object.assign(e.pagination,{$el:n,el:n[0]}),e.enabled||n.addClass(t.lockClass))}function f(){const t=e.params.pagination;if(s())return;const n=e.pagination.$el;n.removeClass(t.hiddenClass),n.removeClass(t.modifierClass+t.type),n.removeClass(e.isHorizontal()?t.horizontalClass:t.verticalClass),e.pagination.bullets&&e.pagination.bullets.removeClass&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&n.off("click",K(t.bulletClass))}n("init",(()=>{!1===e.params.pagination.enabled?p():(h(),d(),c())})),n("activeIndexChange",(()=>{(e.params.loop||void 0===e.snapIndex)&&c()})),n("snapIndexChange",(()=>{e.params.loop||c()})),n("slidesLengthChange",(()=>{e.params.loop&&(d(),c())})),n("snapGridLengthChange",(()=>{e.params.loop||(d(),c())})),n("destroy",(()=>{f()})),n("enable disable",(()=>{const{$el:t}=e.pagination;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)})),n("lock unlock",(()=>{c()})),n("click",((t,n)=>{const i=n.target,{$el:o}=e.pagination;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&o&&o.length>0&&!v(i).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&i===e.navigation.nextEl||e.navigation.prevEl&&i===e.navigation.prevEl))return;const t=o.hasClass(e.params.pagination.hiddenClass);r(!0===t?"paginationShow":"paginationHide"),o.toggleClass(e.params.pagination.hiddenClass)}}));const p=()=>{e.$el.addClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.addClass(e.params.pagination.paginationDisabledClass),f()};Object.assign(e.pagination,{enable:()=>{e.$el.removeClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.removeClass(e.params.pagination.paginationDisabledClass),h(),d(),c()},disable:p,render:d,update:c,init:h,destroy:f})}function Q({swiper:e,extendParams:t,emit:n,once:r}){t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(e,{freeMode:{onTouchStart:function(){const t=e.getTranslate();e.setTranslate(t),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})},onTouchMove:function(){const{touchEventsData:t,touches:n}=e;0===t.velocities.length&&t.velocities.push({position:n[e.isHorizontal()?"startX":"startY"],time:t.touchStartTime}),t.velocities.push({position:n[e.isHorizontal()?"currentX":"currentY"],time:b()})},onTouchEnd:function({currentPos:t}){const{params:i,$wrapperEl:o,rtlTranslate:a,snapGrid:s,touchEventsData:l}=e,u=b()-l.touchStartTime;if(t<-e.minTranslate())e.slideTo(e.activeIndex);else if(t>-e.maxTranslate())e.slides.length<s.length?e.slideTo(s.length-1):e.slideTo(e.slides.length-1);else{if(i.freeMode.momentum){if(l.velocities.length>1){const t=l.velocities.pop(),n=l.velocities.pop(),r=t.position-n.position,o=t.time-n.time;e.velocity=r/o,e.velocity/=2,Math.abs(e.velocity)<i.freeMode.minimumVelocity&&(e.velocity=0),(o>150||b()-t.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=i.freeMode.momentumVelocityRatio,l.velocities.length=0;let t=1e3*i.freeMode.momentumRatio;const u=e.velocity*t;let c=e.translate+u;a&&(c=-c);let d,h=!1;const f=20*Math.abs(e.velocity)*i.freeMode.momentumBounceRatio;let p;if(c<e.maxTranslate())i.freeMode.momentumBounce?(c+e.maxTranslate()<-f&&(c=e.maxTranslate()-f),d=e.maxTranslate(),h=!0,l.allowMomentumBounce=!0):c=e.maxTranslate(),i.loop&&i.centeredSlides&&(p=!0);else if(c>e.minTranslate())i.freeMode.momentumBounce?(c-e.minTranslate()>f&&(c=e.minTranslate()+f),d=e.minTranslate(),h=!0,l.allowMomentumBounce=!0):c=e.minTranslate(),i.loop&&i.centeredSlides&&(p=!0);else if(i.freeMode.sticky){let t;for(let e=0;e<s.length;e+=1)if(s[e]>-c){t=e;break}c=Math.abs(s[t]-c)<Math.abs(s[t-1]-c)||"next"===e.swipeDirection?s[t]:s[t-1],c=-c}if(p&&r("transitionEnd",(()=>{e.loopFix()})),0!==e.velocity){if(t=a?Math.abs((-c-e.translate)/e.velocity):Math.abs((c-e.translate)/e.velocity),i.freeMode.sticky){const n=Math.abs((a?-c:c)-e.translate),r=e.slidesSizesGrid[e.activeIndex];t=n<r?i.speed:n<2*r?1.5*i.speed:2.5*i.speed}}else if(i.freeMode.sticky)return void e.slideToClosest();i.freeMode.momentumBounce&&h?(e.updateProgress(d),e.setTransition(t),e.setTranslate(c),e.transitionStart(!0,e.swipeDirection),e.animating=!0,o.transitionEnd((()=>{e&&!e.destroyed&&l.allowMomentumBounce&&(n("momentumBounce"),e.setTransition(i.speed),setTimeout((()=>{e.setTranslate(d),o.transitionEnd((()=>{e&&!e.destroyed&&e.transitionEnd()}))}),0))}))):e.velocity?(n("_freeModeNoMomentumRelease"),e.updateProgress(c),e.setTransition(t),e.setTranslate(c),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,o.transitionEnd((()=>{e&&!e.destroyed&&e.transitionEnd()})))):e.updateProgress(c),e.updateActiveIndex(),e.updateSlidesClasses()}else{if(i.freeMode.sticky)return void e.slideToClosest();i.freeMode&&n("_freeModeNoMomentumRelease")}(!i.freeMode.momentum||u>=i.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}}}})}function ee(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function te(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>n.indexOf(e)<0)).forEach((n=>{void 0===e[n]?e[n]=t[n]:ee(t[n])&&ee(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:te(e[n],t[n]):e[n]=t[n]}))}function ne(e={}){return e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function re(e={}){return e.pagination&&void 0===e.pagination.el}function ie(e={}){return e.scrollbar&&void 0===e.scrollbar.el}function oe(e=""){const t=e.split(" ").map((e=>e.trim())).filter((e=>!!e)),n=[];return t.forEach((e=>{n.indexOf(e)<0&&n.push(e)})),n.join(" ")}const ae=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"],se=(e,t)=>{let n=t.slidesPerView;if(t.breakpoints){const e=Y.prototype.getBreakpoint(t.breakpoints),r=e in t.breakpoints?t.breakpoints[e]:void 0;r&&r.slidesPerView&&(n=r.slidesPerView)}let r=Math.ceil(parseFloat(t.loopedSlides||n,10));return r+=t.loopAdditionalSlides,r>e.length&&t.loopedSlidesLimit&&(r=e.length),r};function le(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function ue(e){const t=[];return i.Children.toArray(e).forEach((e=>{le(e)?t.push(e):e.props&&e.props.children&&ue(e.props.children).forEach((e=>t.push(e)))})),t}function ce(e){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return i.Children.toArray(e).forEach((e=>{if(le(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){const r=ue(e.props.children);r.length>0?r.forEach((e=>t.push(e))):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function de(e,t){return"undefined"==typeof window?(0,i.useEffect)(e,t):(0,i.useLayoutEffect)(e,t)}const he=(0,i.createContext)(null),fe=(0,i.createContext)(null);function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}const me=(0,i.forwardRef)((function(e,t){let{className:n,tag:r="div",wrapperTag:o="div",children:a,onSwiper:s,...l}=void 0===e?{}:e,u=!1;const[c,d]=(0,i.useState)("swiper"),[h,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1),g=(0,i.useRef)(!1),y=(0,i.useRef)(null),v=(0,i.useRef)(null),_=(0,i.useRef)(null),b=(0,i.useRef)(null),x=(0,i.useRef)(null),w=(0,i.useRef)(null),E=(0,i.useRef)(null),S=(0,i.useRef)(null),{params:T,passedParams:M,rest:k,events:C}=function(e={},t=!0){const n={on:{}},r={},i={};te(n,Y.defaults),te(n,Y.extendedDefaults),n._emitClasses=!0,n.init=!1;const o={},a=ae.map((e=>e.replace(/_/,""))),s=Object.assign({},e);return Object.keys(s).forEach((s=>{void 0!==e[s]&&(a.indexOf(s)>=0?ee(e[s])?(n[s]={},i[s]={},te(n[s],e[s]),te(i[s],e[s])):(n[s]=e[s],i[s]=e[s]):0===s.search(/on[A-Z]/)&&"function"==typeof e[s]?t?r[`${s[2].toLowerCase()}${s.substr(3)}`]=e[s]:n.on[`${s[2].toLowerCase()}${s.substr(3)}`]=e[s]:o[s]=e[s])})),["navigation","pagination","scrollbar"].forEach((e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:i,rest:o,events:r}}(l),{slides:P,slots:A}=ce(a),O=()=>{m(!p)};Object.assign(T.on,{_containerClasses(e,t){d(t)}});const I=()=>{if(Object.assign(T.on,C),u=!0,v.current=new Y(T),v.current.loopCreate=()=>{},v.current.loopDestroy=()=>{},T.loop&&(v.current.loopedSlides=se(P,T)),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=P;const e={cache:!1,slides:P,renderExternal:f,renderExternalUpdate:!1};te(v.current.params.virtual,e),te(v.current.originalParams.virtual,e)}};return y.current||I(),v.current&&v.current.on("_beforeBreakpoint",O),(0,i.useEffect)((()=>()=>{v.current&&v.current.off("_beforeBreakpoint",O)})),(0,i.useEffect)((()=>{!g.current&&v.current&&(v.current.emitSlidesClasses(),g.current=!0)})),de((()=>{if(t&&(t.current=y.current),y.current)return v.current.destroyed&&I(),function({el:e,nextEl:t,prevEl:n,paginationEl:r,scrollbarEl:i,swiper:o},a){ne(a)&&t&&n&&(o.params.navigation.nextEl=t,o.originalParams.navigation.nextEl=t,o.params.navigation.prevEl=n,o.originalParams.navigation.prevEl=n),re(a)&&r&&(o.params.pagination.el=r,o.originalParams.pagination.el=r),ie(a)&&i&&(o.params.scrollbar.el=i,o.originalParams.scrollbar.el=i),o.init(e)}({el:y.current,nextEl:x.current,prevEl:w.current,paginationEl:E.current,scrollbarEl:S.current,swiper:v.current},T),s&&s(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}}),[]),de((()=>{!u&&C&&v.current&&Object.keys(C).forEach((e=>{v.current.on(e,C[e])}));const e=function(e,t,n,r,i){const o=[];if(!t)return o;const a=e=>{o.indexOf(e)<0&&o.push(e)};if(n&&r){const e=r.map(i),t=n.map(i);e.join("")!==t.join("")&&a("children"),r.length!==n.length&&a("children")}return ae.filter((e=>"_"===e[0])).map((e=>e.replace(/_/,""))).forEach((n=>{if(n in e&&n in t)if(ee(e[n])&&ee(t[n])){const r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?a(n):(r.forEach((r=>{e[n][r]!==t[n][r]&&a(n)})),i.forEach((r=>{e[n][r]!==t[n][r]&&a(n)})))}else e[n]!==t[n]&&a(n)})),o}(M,_.current,P,b.current,(e=>e.key));return _.current=M,b.current=P,e.length&&v.current&&!v.current.destroyed&&function({swiper:e,slides:t,passedParams:n,changedParams:r,nextEl:i,prevEl:o,scrollbarEl:a,paginationEl:s}){const l=r.filter((e=>"children"!==e&&"direction"!==e)),{params:u,pagination:c,navigation:d,scrollbar:h,virtual:f,thumbs:p}=e;let m,g,y,v,_;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(m=!0),r.includes("controller")&&n.controller&&n.controller.control&&u.controller&&!u.controller.control&&(g=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||s)&&(u.pagination||!1===u.pagination)&&c&&!c.el&&(y=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(u.scrollbar||!1===u.scrollbar)&&h&&!h.el&&(v=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||o)&&(n.navigation.nextEl||i)&&(u.navigation||!1===u.navigation)&&d&&!d.prevEl&&!d.nextEl&&(_=!0),l.forEach((t=>{if(ee(u[t])&&ee(n[t]))te(u[t],n[t]);else{const i=n[t];!0!==i&&!1!==i||"navigation"!==t&&"pagination"!==t&&"scrollbar"!==t?u[t]=n[t]:!1===i&&e[r=t]&&(e[r].destroy(),"navigation"===r?(u[r].prevEl=void 0,u[r].nextEl=void 0,e[r].prevEl=void 0,e[r].nextEl=void 0):(u[r].el=void 0,e[r].el=void 0))}var r})),l.includes("controller")&&!g&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),r.includes("children")&&t&&f&&u.virtual.enabled?(f.slides=t,f.update(!0)):r.includes("children")&&e.lazy&&e.params.lazy.enabled&&e.lazy.load(),m&&p.init()&&p.update(!0),g&&(e.controller.control=u.controller.control),y&&(s&&(u.pagination.el=s),c.init(),c.render(),c.update()),v&&(a&&(u.scrollbar.el=a),h.init(),h.updateSize(),h.setTranslate()),_&&(i&&(u.navigation.nextEl=i),o&&(u.navigation.prevEl=o),d.init(),d.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&e.changeDirection(n.direction,!1),e.update()}({swiper:v.current,slides:P,passedParams:M,changedParams:e,nextEl:x.current,prevEl:w.current,scrollbarEl:S.current,paginationEl:E.current}),()=>{C&&v.current&&Object.keys(C).forEach((e=>{v.current.off(e,C[e])}))}})),de((()=>{var e;!(e=v.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[h]),i.createElement(r,pe({ref:y,className:oe(`${c}${n?` ${n}`:""}`)},k),i.createElement(fe.Provider,{value:v.current},A["container-start"],i.createElement(o,{className:"swiper-wrapper"},A["wrapper-start"],T.virtual?function(e,t,n){if(!n)return null;const r=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`};return t.filter(((e,t)=>t>=n.from&&t<=n.to)).map((t=>i.cloneElement(t,{swiper:e,style:r})))}(v.current,P,h):!T.loop||v.current&&v.current.destroyed?P.map((e=>i.cloneElement(e,{swiper:v.current}))):function(e,t,n){const r=t.map(((t,n)=>i.cloneElement(t,{swiper:e,"data-swiper-slide-index":n})));function o(e,t,r){return i.cloneElement(e,{key:`${e.key}-duplicate-${t}-${r}`,className:`${e.props.className||""} ${n.slideDuplicateClass}`})}if(n.loopFillGroupWithBlank){const e=n.slidesPerGroup-r.length%n.slidesPerGroup;if(e!==n.slidesPerGroup)for(let t=0;t<e;t+=1){const e=i.createElement("div",{className:`${n.slideClass} ${n.slideBlankClass}`});r.push(e)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length);const a=se(r,n),s=[],l=[];for(let i=0;i<a;i+=1){const e=i-Math.floor(i/r.length)*r.length;l.push(o(r[e],i,"append")),s.unshift(o(r[r.length-e-1],i,"prepend"))}return e&&(e.loopedSlides=a),[...s,...r,...l]}(v.current,P,T),A["wrapper-end"]),ne(T)&&i.createElement(i.Fragment,null,i.createElement("div",{ref:w,className:"swiper-button-prev"}),i.createElement("div",{ref:x,className:"swiper-button-next"})),ie(T)&&i.createElement("div",{ref:S,className:"swiper-scrollbar"}),re(T)&&i.createElement("div",{ref:E,className:"swiper-pagination"}),A["container-end"]))}));function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}me.displayName="Swiper";const ye=(0,i.forwardRef)((function(e,t){let{tag:n="div",children:r,className:o="",swiper:a,zoom:s,virtualIndex:l,...u}=void 0===e?{}:e;const c=(0,i.useRef)(null),[d,h]=(0,i.useState)("swiper-slide");function f(e,t,n){t===c.current&&h(n)}de((()=>{if(t&&(t.current=c.current),c.current&&a){if(!a.destroyed)return a.on("_slideClass",f),()=>{a&&a.off("_slideClass",f)};"swiper-slide"!==d&&h("swiper-slide")}})),de((()=>{a&&c.current&&!a.destroyed&&h(a.getSlideClasses(c.current))}),[a]);const p={isActive:d.indexOf("swiper-slide-active")>=0||d.indexOf("swiper-slide-duplicate-active")>=0,isVisible:d.indexOf("swiper-slide-visible")>=0,isDuplicate:d.indexOf("swiper-slide-duplicate")>=0,isPrev:d.indexOf("swiper-slide-prev")>=0||d.indexOf("swiper-slide-duplicate-prev")>=0,isNext:d.indexOf("swiper-slide-next")>=0||d.indexOf("swiper-slide-duplicate-next")>=0},m=()=>"function"==typeof r?r(p):r;return i.createElement(n,ge({ref:c,className:oe(`${d}${o?` ${o}`:""}`),"data-swiper-slide-index":l},u),i.createElement(he.Provider,{value:p},s?i.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof s?s:void 0},m()):m()))}));ye.displayName="SwiperSlide";var ve=n(72779),_e=n.n(ve);const be={container:"DD8wf1csn-EP+1B8K+ZOrg==",coldStartSwiperContainer:"_3opntNE6r7qE-MbjDYvYAQ==",swiperContainer:"joKw+U8GUbj86xtZ+sPbqA==",showOverflow:"a2VsJQlvKft461G+-An4wQ==",coldStartSwiper:"J9TW6T4Mqi53hHds1t06qQ==",swiper:"J4iZhy4Q8eegLItMzWo31A==",hideSlideOverflow:"db0P52s+7QxLb-3IF1SVeQ==",leftArrow:"_48xFgLZMKPTs8EeYOHBj2g==",rightArrow:"Zo0mJQBvsnhIo6DTuFCIxA==",subtle:"oRFNzA701lACbqwX7KBf3w==",external:"XAxiJuUSMRY85r5a+Y8RcA=="};var xe=n(17500),we=n(33598),Ee=function(e){return function(t){var n=t.className,i=t.onClick,o=t.uniqueId,a=t.title,s=t.variant;return(0,r.jsx)(we.default,{className:_e()(be["".concat(e,"Arrow")],be[s],n),icon:{Component:xe.default,orientation:e},onClick:function(e){null==e||e.preventDefault(),null==e||e.stopPropagation(),i()},tabIndex:-1,title:a,testId:"".concat(o,"_ArrowButton_").concat(e),size:"subtle"===s?"sm":"md",variant:"subtle"===s?"transparent":"elevated"})}},Se=Ee("left"),Te=Ee("right"),Me=n(19312),ke=n(1560),Ce=function(){return Ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ce.apply(this,arguments)};const Pe=function(e){var t=e.uniqueId,n=e.items,o=e.renderItem,a=e.getItemKey,s=e.className,l=e.loop,u=e.showPaginationDots,c=e.showOverflow,d=e.hideSlideOverflow,h=e.scrollMode,f=e.gap,p=void 0===f?0:f,m=e.itemsPerSlide,g=void 0===m?1:m,y=e.onSlideChange,v=e.onFirstTouch,_=e.arrowStyle,b=void 0===_?"standard":_,x=e.isColdStart,w=e.arrowClassName,E=(0,ke.default)(Me.Z).formattedDefaultMessages,S=E.NAVIGATE_PREV,T=E.NAVIGATE_NEXT,M=n.length>g,k=(0,i.useState)(),C=k[0],P=k[1],A=(0,i.useState)(M&&l),O=A[0],I=A[1],L=(0,i.useState)(M),D=L[0],R=L[1],N=(0,i.useState)(!1),z=N[0],j=N[1],B=function(){M&&(h?(I(!1),R(!1)):l?(I(!0),R(!0)):((null==C?void 0:C.activeIndex)||0)<g?(I(!1),R(!0)):((null==C?void 0:C.activeIndex)||0)+g>=n.length?(I(!0),R(!1)):(I(!0),R(!0)))};(0,i.useEffect)(B,[h]),(0,i.useEffect)((function(){C&&(B(),l&&C.slideTo(1,0),v&&C.once("touchStart",(function(){z||(v(),j(!0))})),C.on("slideChangeTransitionEnd",(function(){B(),v&&!z&&(v(),j(!0)),y&&y(C.realIndex)})))}),[C]);var F=function(){null==C||C.slidePrev()},U=function(){null==C||C.slideNext()},G=[h&&Q,M&&J].filter((function(e){return!!e})),H=(0,i.useMemo)((function(){return M&&u?{isClickable:h,dynamicBullets:!0,dynamicMainBullets:1}:{isClickable:h,renderBullet:function(){return""}}}),[h,M,u]);return(0,r.jsxs)("div",Ce({className:be.container},{children:[(0,r.jsx)("div",Ce({className:_e()(x?be.coldStartSwiperContainer:be.swiperContainer,c&&be.showOverflow,s),tabIndex:M?0:-1,onKeyDown:M?function(e){switch(e.key){case"ArrowLeft":F();break;case"ArrowRight":U()}}:void 0},{children:(0,r.jsx)(me,Ce({className:_e()(x?be.coldStartSwiper:be.swiper,d&&be.hideSlideOverflow),onSwiper:P,modules:G.length?G:void 0,pagination:H||void 0,loop:l,spaceBetween:p,freeMode:h,slidesPerView:g,slidesPerGroup:g,preloadImages:!1},{children:n.map((function(e,t){return(0,r.jsx)(ye,{children:o(e,t)},a(e,t))}))}))})),O?(0,r.jsx)(Se,{className:w,onClick:F,uniqueId:t,title:S,variant:b}):null,D?(0,r.jsx)(Te,{className:w,onClick:U,uniqueId:t,title:T,variant:b}):null]}))}},56186:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(52322),i=n(72779),o=n.n(i),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};const s=function(e){var t=e.children,n=e.href,i=e.openInNewTab,s=void 0!==i&&i,l=e.onClick,u=e.isOverlay,c=e.overlayFocusStyle,d=e.preventFocus,h=e.className,f=e.blockNavigation,p=e.testId,m={tabIndex:d?-1:0,className:o()(d&&"sagzIoNG6AYkb6OwpNutOA==",h,u&&"MAeU7STjXOwFXsjoI5meHg==","offset"===c?"E8W6wpmnshxeFElAofUjoA==":"YUdyXKFWY0YDKYzMi-qVJg=="),href:n,onClick:l?function(e){f&&(e.preventDefault(),e.stopPropagation()),l()}:void 0};return s?(0,r.jsx)("a",a({},m,{target:"_blank",rel:"noreferrer","data-testid":p},{children:t})):(0,r.jsx)("a",a({},m,{"data-testid":p},{children:t}))}},60352:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var r=n(52322),i=n(72779),o=n.n(i),a=n(66877),s=n(58743),l=n(1560),u=n(45548),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},d=(0,a.defineMessages)({COMPLETED:{id:"95stPq",defaultMessage:"Completed"},VERIFIED:{id:"Wmu9zK",defaultMessage:"Verified completed"}});const h=function(e){var t=e.isCompleted,n=void 0!==t&&t,i=e.isVerified,a=void 0!==i&&i,h=e.onClick,f=(0,l.default)(d).formattedDefaultMessages,p=f.COMPLETED,m=f.VERIFIED;if(!n&&!a)return(0,r.jsx)("div",{});var g=o()("xlate-none","+vYC8lLIRZm+SogYeqp13Q=="),y=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.default,{size:"sm",color:s.COLOR_NEUTRAL_WHITE}),a?m:p]});return h?(0,r.jsx)("button",c({className:g,onClick:h,type:"button"},{children:y})):(0,r.jsx)("div",c({className:g},{children:y}))}},26227:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(52322),i=n(72779),o=n.n(i),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};const s=function(e){var t=e.className;return(0,r.jsx)("span",a({className:o()("CA5KBrRd2R-qD4j3DMdv4A==",t)},{children:"\u2022"}))}},58671:(e,t,n)=>{"use strict";n.d(t,{default:()=>r.Z});var r=n(26227)},82250:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(52322),i=n(66877),o=n(14328),a=n(58671);const s=function(e){var t=e.languageRegionCode,n=e.meters,s=e.minutes,l=e.showLengthLabel,u=void 0!==l&&l,c=e.useMetric,d=void 0!==c&&c,h=e.decimalPlaces,f=void 0===h?1:h,p=(0,i.useIntl)();return(0,r.jsxs)(r.Fragment,{children:[u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.FormattedMessage,{id:"VIaxwl",defaultMessage:"Length:"})," "]}):null,(0,o.metersToFormattedDistance)(p,t,n,d?"km":"mi",f),s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.default,{}),(0,o.minutesToFormattedTime)(p,s,!0)]}):null]})}},27490:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(52322),i=n(72779),o=n.n(i);const a={container:"iohaujj+kqwp06dfzA7yYg==",wide:"_0WW+pCMvC9UuppsIRfV7Uw==",square:"MBxpuf-7-MLUv6kjwdHjPQ==",zoomPhoto:"gZrg53pY6Tw82bzE6n364A==",image:"Rt-4gJVX5rfa3D2YMUqJGQ=="};var s=n(23382),l=n(24081),u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};const c=function(e){var t=e.uniqueId,n=e.photos,i=e.loadPhotos,c=e.zoomPhoto,d=void 0!==c&&c,h=e.aspectRatio,f=void 0===h?"wide":h,p=e.lazyLoadImages,m=a[f],g=p?"lazy":"eager";return 0===n.length?(0,r.jsx)("div",{className:o()(a.container,m)}):1===n.length?(0,r.jsx)("div",u({className:o()(a.container,m,d&&a.zoomPhoto)},{children:(0,r.jsx)(s.Z,{src:n[0],className:a.image,loading:g})})):(0,r.jsx)(l.default,{className:o()(a.container,m,d&&a.zoomPhoto),uniqueId:t,items:n,renderItem:function(e){return(0,r.jsx)(s.Z,{src:e,className:a.image,loading:g})},getItemKey:function(e,t){return"PhotoCarousel_".concat(t,"_").concat(e)},onFirstTouch:i,arrowStyle:"subtle",loop:!0,showPaginationDots:!0,hideSlideOverflow:!0})}},37346:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(52322),i=n(72779),o=n.n(i),a=n(70408),s=n(56186),l=n(58743),u=n(45548);const c="kKeEC+AyX0Q6jpp5wHcbLg==";var d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const h=function(e){var t=e.isCompleted,n=void 0!==t&&t,i=e.isVerified,o=void 0!==i&&i,a=e.onClick;return n||o?a?(0,r.jsx)("button",d({className:c,onClick:a,type:"button"},{children:(0,r.jsx)(u.default,{size:"sm",color:l.COLOR_INTERACTIVE_DEFAULT})})):(0,r.jsx)("div",d({className:c},{children:(0,r.jsx)(u.default,{size:"sm",color:l.COLOR_INTERACTIVE_DEFAULT})})):(0,r.jsx)("div",{})};var f=n(23382),p=n(20249),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},g=function(e){var t=e.cta;return(0,r.jsx)(p.default,m({onClick:t.onClick,size:"sm"},{children:t.label}))};const y=function(e){var t=e.className,n=e.name,i=e.href,l=e.openInNewTab,u=e.onCardClick,c=e.onCardMouseEnter,d=e.onCardMouseLeave,p=e.metadata,y=e.onFavoriteClick,v=e.isFavorite,_=void 0!==v&&v,b=e.isCompleted,x=void 0!==b&&b,w=e.isVerified,E=void 0!==w&&w,S=e.photo,T=e.footerCTAs,M=e.onCompletionBadgeClick,k=e.blockNavigation,C=e.lazyLoadImages?"lazy":"eager",P=T&&T.length?(0,r.jsx)("div",m({className:"EHJsS7I4qeEyvuaS7en+CA=="},{children:T.map((function(e){return(0,r.jsx)(g,{cta:e},e.label)}))})):null;return(0,r.jsxs)("div",m({className:o()("xlate-none","UztDFFOUINaOcwHzq+lfcA==",t),onMouseEnter:c,onMouseLeave:d,title:n},{children:[(0,r.jsx)(s.default,m({href:i,blockNavigation:k,openInNewTab:l,onClick:u,isOverlay:!0,overlayFocusStyle:"border",testId:"".concat(n,"_OverlayLink")},{children:n})),(0,r.jsxs)("div",m({className:"+SWVVZEhk7oVgcK5+DfAug=="},{children:[(0,r.jsxs)("div",m({className:"IFreTIiYQJ4Ne6RvAPyqVA=="},{children:[(0,r.jsx)("div",m({className:"-JQLKj98hHCxvvcsOWZ2ZA=="},{children:(0,r.jsx)(h,{isCompleted:x,isVerified:E,onClick:M})})),y&&(0,r.jsx)("div",m({className:"uan6cZvHuPTiq-vVNtE8Eg=="},{children:(0,r.jsx)(a.default,{size:"sm",isSelected:_,onClick:y,onWhiteBackground:!0})})),(0,r.jsx)(f.Z,{src:S,className:"_3DMKGUNCrLkaQhXNolA-fA==",loading:C}),(0,r.jsx)("div",m({className:"dwm1TVbQ9R8y5xbkjvrmmQ=="},{children:p}))]})),P]}))]}))}},64812:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(52322),i=n(72779),o=n.n(i),a=n(8156),s=n(70408),l=n(56186),u=n(60352),c=n(27490),d=n(23382),h=n(27616),f=n(58743),p=n(66877),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},g=(0,p.defineMessage)({id:"UMbBzo",defaultMessage:"Move"});const y=function(e){var t=(0,p.useIntl)();return(0,r.jsx)("div",m({},e,{title:t.formatMessage(g),className:o()("Er9ap204Ua+6SM48vAUuSw==","item-move","clickable")},{children:(0,r.jsx)(h.default,{color:f.COLOR_NEUTRAL_WHITE})}))};var v=n(19486),_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_.apply(this,arguments)};const b=function(e){var t=e.className,n=e.name,i=e.href,h=e.openInNewTab,p=e.onCardClick,m=e.onCardMouseEnter,g=e.onCardMouseLeave,b=e.metadata,x=e.onFavoriteClick,w=e.isFavorite,E=void 0!==w&&w,S=e.isCompleted,T=void 0!==S&&S,M=e.isVerified,k=void 0!==M&&M,C=e.dragHandleProps,P=e.deleteButton,A=e.photos,O=e.pinnedPhoto,I=e.loadPhotos,L=e.squarePhoto,D=e.onCompletionBadgeClick,R=e.blockNavigation,N=e.lazyLoadImages,z=!!P,j=(0,a.useState)(!1),B=j[0],F=j[1],U=N?"lazy":"eager",G=(0,a.useMemo)((function(){return C?(0,r.jsx)(y,_({},C)):(0,r.jsx)(u.default,{isCompleted:T,isVerified:k,onClick:D})}),[C,T,k]),H=(0,a.useMemo)((function(){return P?(0,r.jsx)("button",_({className:"MmGOdoTMVv-ZnhfkXRd66w==",onClick:P.onClick,"aria-label":P.title,title:P.title,type:"button"},{children:(0,r.jsx)(v.default,{color:f.COLOR_NEUTRAL_WHITE})})):x?(0,r.jsx)(s.default,{isSelected:E,onClick:x}):null}),[P,E,x]);return(0,r.jsxs)("div",_({className:o()("xlate-none","u0xdvz4b6ogbqwUa8l4H4Q==",t),onMouseEnter:function(){F(!0),m&&m()},onMouseLeave:function(){F(!1),g&&g()}},{children:[(0,r.jsx)(l.default,_({href:i,blockNavigation:R,openInNewTab:h,onClick:p,isOverlay:!0,overlayFocusStyle:"offset",testId:"".concat(n,"_OverlayLink")},{children:n})),(0,r.jsxs)("div",_({className:"N8egiyiTwl3IU72Gf++Cpw=="},{children:[(0,r.jsxs)(l.default,_({href:i,blockNavigation:R,openInNewTab:h,onClick:p,preventFocus:!0},{children:[(0,r.jsx)(c.Z,{photos:z&&A.length?[A[0]]:A,loadPhotos:I,zoomPhoto:!z&&B,uniqueId:n,aspectRatio:L?"square":"wide",lazyLoadImages:N}),O?(0,r.jsx)(d.Z,{src:O,className:"ZukDCKLOK61k2Vvwokp28A==",loading:U}):null]})),z?(0,r.jsx)("div",{className:"nNYSTkMUTiMHwon-ceDBdQ==","data-testid":"StandardCard_Overlay"}):null]})),(0,r.jsxs)("div",_({className:"zKJQtZPqIc3jzqLDPQ2yrw=="},{children:[G,H]})),(0,r.jsx)("div",_({className:"ua-LcjiQC9L-0rciVkPt6Q=="},{children:b}))]}))}},83741:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(52322),i=n(58743),o=n(31814),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s={sm:16,md:24,lg:32},l={up:0,right:90,down:180,left:270};const u=function(e,t,n){return void 0===n&&(n=!1),Object.assign((function(u){var c=u.color,d=void 0===c?i.COLOR_INTERACTIVE_DEFAULT:c,h=u.size,f=void 0===h?"md":h,p=u.orientation,m=void 0===p?0:p,g="".concat(s[f],"px"),y="rotate(".concat("number"==typeof m?m:l[m],"deg)"),v=n?{stroke:d}:{};return(0,r.jsx)("svg",a({className:o.Z.container,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"presentation","aria-hidden":"true",focusable:"false","data-testid":e,style:a({transition:"transform 200ms ease-in-out",transform:y,height:g,width:g,fill:d},v)},{children:t}))}),{iconName:e})}},31522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(52322),i=n(8156),o=n(72779),a=n.n(o);const s={button:"E8Zz5cA6Bp9N81lmDgddbg==",loading:"TnGuRJ+iDxl9eJH1ZCEnUQ==",disabled:"M83WVMOE3d+Ps6ou0xSu0Q==",sm:"xLMgmtaVhNXlRwDvb8sItA==",md:"_61jzXtM9mhmNleWC5EMg8w==",lg:"p3HKVSf0cZwjU9p77YYwAg==",default:"_4gT3K3XQ4s6WMQ8tINtmhA==",elevated:"-8LYHY8sKjZd+CLZxSiOSg==",flat:"VtwHXgCyEQ4qn8ae9mfwHg==",primary:"SiH68RG76eIVBm9yryssRg==",transparent:"zQ+jdpzovsmw7qsY1SM63g=="};var l=n(44450),u=n(45517),c=n(56392),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const h=i.forwardRef((function(e,t){var n=e.className,o=e.disabled,h=e.icon,f=e.linkInfo,p=e.loading,m=e.onBlur,g=e.onClick,y=e.onFocus,v=e.size,_=void 0===v?"md":v,b=e.tabIndex,x=e.testId,w=e.title,E=e.ariaLabel,S=e.type,T=void 0===S?"button":S,M=e.variant,k=void 0===M?"default":M,C=e.stopPropagation,P=void 0!==C&&C,A=(0,i.useMemo)((function(){return function(e){P&&e.stopPropagation(),g&&g(e)}}),[g,P]),O="sm"===_?"sm":"md",I=(0,i.useMemo)((function(){return p&&!o?(0,r.jsx)(c.default,{size:O,testId:"".concat(x,"-loading-spinner")}):(0,r.jsx)(l.default,{icon:h,defaults:{color:"currentColor",size:O}})}),[o,h,O,p,x]),L=a()(n,s.button,s[_],s[k],p&&s.loading,o&&s.disabled);return(0,i.useMemo)((function(){return f?o?(0,r.jsx)("span",d({className:L,title:w,"aria-label":E||w,"data-testid":x,ref:t},{children:I})):(0,r.jsx)(u.default,d({className:L,linkInfo:f,onClick:p?void 0:A,title:w,"aria-label":E||w,testId:x,tabIndex:b,ref:t},{children:I})):(0,r.jsx)("button",d({className:L,onClick:p?void 0:A,onBlur:m,onFocus:y,disabled:o,title:w,"aria-label":E||w,"data-testid":x,type:T,tabIndex:b,ref:t},{children:I}))}),[L,I,o,f,p,m,A,y,t,b,x,w,T])}))},33598:(e,t,n)=>{"use strict";n.d(t,{default:()=>r.Z});var r=n(31522)},44450:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=function(e){var t=e.icon,n=e.defaults;return(0,r.jsx)(t.Component,{color:t.color||n.color,orientation:t.orientation||n.orientation,size:t.size||n.size})}},20249:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var r=n(52322),i=n(72779),o=n.n(i);const a={link:"MbgsHYI4C3t+zgZELSew8Q==",noUnderline:"yMOZ-biRE4fmEWyBLuXyAQ==",sm:"We9bFsEq46k7XAbhKzkONQ==",md:"_2WGfIS7Z0JgCPxX3uhrwlg==",lg:"QRkX-0DBXMbFUbn5SHECDw==",primary:"Jo3L6Dd7RNZhW8n84CYHEw==",secondary:"jSatM+AeiNDAUOwJovEGLg==",inverse:"urHYz-0lyBW8gbsvGMn1kw=="};var s=n(44450),l=n(45517),u=n(26529),c=n(50441),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const h=function(e){var t,n=e.children,i=e.className,h=e.href,f=e.icon,p=e.noUnderline,m=e.onClick,g=e.size,y=e.target,v=e.testId,_=e.variant,b=void 0===_?"primary":_,x=e.rel,w=e.useReactRouter,E=(0,u.default)(),S=o()(i,a.link,g&&a[g],a[b],((t={})[a.noUnderline]=p,t)),T=f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.default,{icon:f,defaults:{color:"currentColor",size:g}}),(0,r.jsx)("span",{children:n})]}):n;if(!h)return(0,r.jsx)("button",d({className:S,onClick:m,"data-testid":v,type:"button"},{children:T}));var M={href:h.startsWith("https://")||h.startsWith("#")||h.startsWith("mailto:")?h:(0,c.wrapUrlSafe)(h,E),target:y,rel:Array.isArray(x)?x:[x],useReactRouter:w};return(0,r.jsx)(l.default,d({className:S,linkInfo:M,onClick:m,testId:v},{children:T}))}},7770:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e,t){var n=e?e.filter((function(e){return!!e})):[];if("_blank"!==t||n.includes("noreferrer")||n.push("noreferrer"),n.length)return n.join(" ")}},45517:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(52322),i=n(8156),o=n(7770),a=n(19807),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};const l=i.forwardRef((function(e,t){var n=e.ariaLabel,i=e.children,l=e.className,u=e.linkInfo,c=e.onBlur,d=e.onClick,h=e.onFocus,f=e.onKeyDown,p=e.role,m=e.tabIndex,g=void 0===m?0:m,y=e.testId,v=e.title,_=u.rel,b=u.target,x=u.href,w=u.useReactRouter,E={className:l,onBlur:c,onClick:d,onFocus:h,onKeyDown:f,role:p,target:b,tabIndex:g,title:v,rel:(0,o.default)(_,b),"aria-label":n};return w?(0,r.jsx)(a.Link,s({to:x,"data-testid":y,ref:t},E,{children:i})):(0,r.jsx)("a",s({href:x,"data-testid":y,ref:t},E,{children:i}))}))},56392:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(52322),i=n(72779),o=n.n(i),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s={sm:16,md:24,lg:32};const l=function(e){var t=e.className,n=e.size,i=void 0===n?"md":n,l=e.testId,u="".concat(s[i],"px");return(0,r.jsxs)("svg",a({className:o()("Yi9ySmWPmUbUfm19jMaQdA==",t),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":"true",focusable:"false","data-testid":l,style:{height:u,width:u,fill:"currentColor"}},{children:[(0,r.jsx)("circle",{opacity:"1",cx:"8",cy:"1.5",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.08",cx:"12.6",cy:"3.4",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.16",cx:"14.5",cy:"8",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.3",cx:"12.6",cy:"12.6",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.44",cx:"8",cy:"14.5",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.58",cx:"3.4",cy:"12.6",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.72",cx:"1.5",cy:"8",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.86",cx:"3.4",cy:"3.4",r:"1.5"})]}))}},58743:(e,t,n)=>{"use strict";n.d(t,{COLOR_INTERACTIVE_DEFAULT:()=>o,COLOR_NEUTRAL_WHITE:()=>r,COLOR_UI_HIGHLIGHT:()=>i});var r="#ffffff",i="#5de372",o="#2b381f"},64187:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8156),i=n(60240);const o=function(e,t,n,o,a){var s=(0,r.useState)([]),l=s[0],u=s[1],c=(0,r.useState)(!1),d=c[0],h=c[1];(0,r.useEffect)((function(){if(o<1)u([]),h(!0);else{var r=(0,i.getCardPhotoUrl)(e,t,0,n,a);if(1===o)u([r]),h(!0);else{var s=Array(o-1).fill("");u(function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([r],s,!0)),h(!1)}}}),[n,o]);var f=(0,r.useCallback)((function(){if(!d){h(!0);var r=l.map((function(r,o){var s=(0,i.getCardPhotoUrl)(e,t,o,n,a);try{(new Image).src=s}catch(e){}return s}));u(r)}}),[a,e,t,l,d,n]);return{photos:l,loadPhotos:f}}},1560:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(66877);const i=function(e){var t=(0,r.useIntl)(),n={};return Object.keys(e).forEach((function(r){var i=e[r].defaultMessage;("string"==typeof i||void 0!==i&&1===i.length)&&(n[r]=t.formatMessage(e[r]))})),{intl:t,formattedDefaultMessages:n,formatMessage:function(n,r,i){return t.formatMessage(e[n],r,i)}}}},26529:(e,t,n)=>{"use strict";function r(){var e;return(null===(e=null===n.g||void 0===n.g?void 0:n.g.__AT_DATA__)||void 0===e?void 0:e.languageRegionCode)||"en-US"}n.d(t,{default:()=>r})},40133:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8156),i=n(60240),o=n(64187);const a=function(e,t,n,a,s){var l=(0,o.Z)("maps",e,t,a,s),u=l.photos,c=l.loadPhotos;return(0,r.useMemo)((function(){return{staticMap:(0,i.getStaticMapUrl)(e,n,s),photos:u,loadPhotos:c}}),[s,e,c,n,u])}},17500:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("arrow-sq",(0,r.jsx)("path",{d:"M4.223 10.956a.75.75 0 0 0 1.06 1.061L11.25 6.05v13.71a.75.75 0 0 0 1.5 0V6.05l5.966 5.967a.75.75 0 0 0 1.061-1.06L12.53 3.708a.746.746 0 0 0-1.06 0l-7.247 7.247Z"}))},96073:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 3a1.5 1.5 0 0 0-1.5 1.5V21a.75.75 0 0 0 1.147.636L12 18.134l5.602 3.502A.75.75 0 0 0 18.75 21V4.5a1.5 1.5 0 0 0-1.5-1.5H6.75Zm0 16.647V4.5h10.5v15.147l-4.852-3.033a.75.75 0 0 0-.796 0L6.75 19.647Z"}))},92753:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark-filled",(0,r.jsx)("path",{d:"M17.25 3H6.75a1.5 1.5 0 0 0-1.5 1.5V21a.76.76 0 0 0 .384.656.713.713 0 0 0 .366.094.74.74 0 0 0 .394-.113L12 18.131l5.597 3.506a.779.779 0 0 0 .769.02.76.76 0 0 0 .384-.657V4.5a1.5 1.5 0 0 0-1.5-1.5Z"}))},58911:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark-overlay",(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4Z",fillOpacity:"0.48"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4ZM6 3C5.44772 3 5 3.44772 5 4V21.1958L11.205 17.3176C11.6914 17.0136 12.3086 17.0136 12.795 17.3176L19 21.1958V4C19 3.44772 18.5523 3 18 3H6Z",fill:"white"})]}))},7768:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark-overlay-opaque",(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4ZM6 3C5.44772 3 5 3.44772 5 4V21.1958L11.205 17.3176C11.6914 17.0136 12.3086 17.0136 12.795 17.3176L19 21.1958V4C19 3.44772 18.5523 3 18 3H6Z",fill:"white"})]}))},45548:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("check-filled",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.583 3.893A9.75 9.75 0 0 1 12 2.25 9.769 9.769 0 0 1 21.75 12 9.75 9.75 0 1 1 6.583 3.893Zm10.06 6.4a.75.75 0 0 0-1.036-1.086l-4.985 4.756-2.229-2.13a.75.75 0 1 0-1.036 1.084l2.747 2.625a.75.75 0 0 0 1.036 0l5.503-5.25Z"}))},27616:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("handle",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 8.625a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0Zm6.375 0a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0Zm5.25 1.125a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25ZM6.75 15.375a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0ZM12 16.5a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25Zm7.5-1.125a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0Z"}))},19486:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("remove",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.75 1.5A2.25 2.25 0 0 0 7.5 3.75v.75H3.75a.75.75 0 0 0 0 1.5h.75v13.5A1.5 1.5 0 0 0 6 21h12a1.5 1.5 0 0 0 1.5-1.5V6h.75a.75.75 0 0 0 0-1.5H16.5v-.75a2.25 2.25 0 0 0-2.25-2.25h-4.5Zm5.25 3v-.75a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0-.75.75v.75h6ZM8.25 6H6v13.5h12V6H8.25Zm1.5 3a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-6A.75.75 0 0 1 9.75 9ZM15 15.75v-6a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 1.5 0Z"}))},66877:(e,t,n)=>{"use strict";var r=n(19767);n.o(r,"FormattedMessage")&&n.d(t,{FormattedMessage:function(){return r.FormattedMessage}}),n.o(r,"defineMessage")&&n.d(t,{defineMessage:function(){return r.defineMessage}}),n.o(r,"defineMessages")&&n.d(t,{defineMessages:function(){return r.defineMessages}}),n.o(r,"useIntl")&&n.d(t,{useIntl:function(){return r.useIntl}})},19312:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(19767).defineMessages)({CANCEL:{id:"47FYwb",defaultMessage:"Cancel"},APPLY:{id:"EWw/tK",defaultMessage:"Apply"},CLEAR:{id:"/GCoTA",defaultMessage:"Clear"},SAVE:{id:"jvo0vs",defaultMessage:"Save"},FACEBOOK_SETTINGS:{id:"VZ76LL",defaultMessage:"Facebook settings"},FACEBOOK_LOGIN:{id:"v8vhR2",defaultMessage:"Log in with Facebook"},DISCONNECT_FACEBOOK_LOGIN:{id:"etgsdI",defaultMessage:"Disconnect Log in with Facebook"},USE_FACEBOOK:{id:"aqARlx",defaultMessage:"Use Facebook to log in to AllTrails."},FACEBOOK_FRIENDS:{id:"5W1yLJ",defaultMessage:"Facebook friends"},SYNC_FB_FRIENDS:{id:"j7BVTZ",defaultMessage:"Sync your Facebook friends to connect with AllTrails members you already know."},DISCONNECT:{id:"qj1uhz",defaultMessage:"Disconnect"},DISCONNECT_FACEBOOK:{id:"ao58FP",defaultMessage:"Disconnect Facebook"},ARE_YOU_SURE:{id:"4hDcG5",defaultMessage:"Are you sure you want to disconnect Login with Facebook?"},STOP_SYNC:{id:"kDH5zE",defaultMessage:"Stop syncing friends"},STOP_SYNC_FRIENDS:{id:"HUR7cE",defaultMessage:"Do you also want to stop syncing your Facebook friends?"},REFRESH_FRIENDS_SUBTEXT:{id:"eH9OPQ",defaultMessage:"Refresh your Facebook friends to connect with AllTrails members you already know."},RETRY:{id:"62nsdy",defaultMessage:"Retry"},CLOSE:{id:"rbrahO",defaultMessage:"Close"},NAVIGATE_NEXT:{id:"9wZ+O0",defaultMessage:"Navigate next"},NAVIGATE_PREV:{id:"/u+ovH",defaultMessage:"Navigate previous"},SEE_MORE:{id:"yoLwRW",defaultMessage:"See more"},SEE_LESS:{id:"GZo7vg",defaultMessage:"See less"},CREATE_NEW_LIST:{id:"TLszpS",defaultMessage:"Create new list"},ADD_TO_LIST:{id:"oSGAZt",defaultMessage:"Add to list"},REMOVE_FROM_LIST:{id:"5bOFRX",defaultMessage:"Remove from list"},SEARCH_FOR_A_MEMBER:{id:"cYNAQO",defaultMessage:"Search for a member"},NO_RESULTS:{id:"jHJmjf",defaultMessage:"No results"},AN_APP_FOR_THE_OUTDOORS:{id:"+4Mwvi",defaultMessage:"An app for the outdoors"},LIST_PRIVACY:{id:"ZdcaBc",defaultMessage:"List privacy"},CHOOSE_WHO_CAN_VIEW_THIS_LIST:{id:"0IxcCk",defaultMessage:"Choose who can view this list."},GO_BACK:{id:"orvpWh",defaultMessage:"Go back"}})},22569:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={Danish:"da-DK",Dutch:"nl-NL",English:"en-US",EnglishGB:"en-GB",French:"fr-FR",German:"de-DE",Italian:"it-IT",Norwegian:"nb-NO",Polish:"pl-PL",Portuguese:"pt-PT",PortugueseBrazilian:"pt-BR",Spanish:"es-ES",SpanishLatAm:"es-MX",Swedish:"sv-SE"}},78453:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={Danish:"da-dk",Dutch:"nl-nl",English:"en",EnglishGB:"en-gb",French:"fr",German:"de",Italian:"it-it",Norwegian:"nb-no",Polish:"pl-pl",Portuguese:"pt-pt",PortugueseBrazilian:"pt-br",Spanish:"es",SpanishLatAm:"es-mx",Swedish:"sv-se"}},83840:(e,t,n)=>{"use strict";n.d(t,{PhotoSize:()=>r,staticMapScale:()=>i});var r,i={"512x217":1,"160x160":2,"200x200":2,"320x320":2};!function(e){e.Icon="icon",e.Small="small",e.Medium="medium",e.Large="large",e.ExtraLarge="extra_large",e.SmallSquare="small_square",e.MediumSquare="medium_square",e.LargeSquare="large_square",e.SmallWide="small_wide",e.LargeWide="large_wide",e.LargerWide="larger_wide"}(r||(r={}))},97081:(e,t,n)=>{"use strict";n.d(t,{X_AT_KEY:()=>o});var r,i=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=(function(e){function t(t,n){var r=this.constructor,i=e.call(this,t.statusText)||this;return Object.setPrototypeOf(i,r.prototype),i.headers=t.headers,i.url=t.url,i.status=t.status,i.statusText=t.statusText,i.data=n,i}i(t,e),t.initialize=function(e){var n,r,i,o;return r=this,o=function(){var r,i,o;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(a){switch(a.label){case 0:return r=null===(n=e.headers)||void 0===n?void 0:n.get("content-type"),204===e.status?[2,new t(e,void 0)]:r&&-1!==r.indexOf("application/json")?[4,e.json()]:[3,2];case 1:return i=a.sent(),[2,new t(e,i)];case 2:return[4,e.text()];case 3:o=a.sent();try{return[2,new t(e,JSON.parse(o))]}catch(n){return[2,new t(e,o)]}return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}s((o=o.apply(r,[])).next())}))}}(Error),"3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i")},47831:(e,t,n)=>{"use strict";n.d(t,{getMapUrl:()=>o,getUrlFromSlug:()=>i});var r=n(50441),i=function(e,t,n){return n?"".concat(t||"").concat((0,r.wrapUrlSafe)(e,n)):"".concat(t,"/").concat(e)},o=function(e,t,n){var i="/explore/map/".concat(e);return n?"".concat(t||"").concat((0,r.wrapUrlSafe)(i,n)):"".concat(t).concat(i)}},54321:(e,t,n)=>{"use strict";n.d(t,{getLocale:()=>o,getLocalePrefix:()=>a});var r=n(78453),i=n(22569),o=function(e){var t=Object.values(i.default).indexOf(e),n=Object.keys(i.default)[t];return r.default[n]},a=function(e){return e===i.default.English?"":o(e)};i.default.English,i.default.EnglishGB,i.default.Danish,i.default.German,i.default.Spanish,i.default.SpanishLatAm,i.default.French,i.default.Italian,i.default.Dutch,i.default.Norwegian,i.default.Polish,i.default.PortugueseBrazilian,i.default.Portuguese,i.default.Swedish},83751:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={"en-US":{trail:"trail",trails:"trails","trail/new":"trail/new",parks:"parks",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"en-GB":{trail:"trail",trails:"trails","trail/new":"trail/new",parks:"parks",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"da-DK":{trail:"rute",trails:"ruter","trail/new":"rute/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"de-DE":{trail:"route",trails:"route","trail/new":"route/neue",parks:"parks",cities:"staedte",countries:"countries",regions:"regionen",states:"staaten","national-parks":"nationalparks","state-parks":"naturparks","local-parks":"regionale-parks"},"es-ES":{trail:"ruta",trails:"ruta","trail/new":"ruta/nueva",parks:"parques",cities:"ciudades",countries:"countries",regions:"regiones",states:"estados","national-parks":"parques-nacionales","state-parks":"parques-naturales","local-parks":"parques-locales"},"es-MX":{trail:"ruta",trails:"senderos","trail/new":"ruta/nueva",parks:"parques",cities:"ciudades",countries:"countries",regions:"regiones",states:"estados","national-parks":"parques-nacionales","state-parks":"parques-naturales","local-parks":"parques-locales"},"fr-FR":{trail:"randonnee",trails:"randonnee","trail/new":"randonnee/nouvelle",parks:"parcs",cities:"villes",countries:"countries",regions:"regions",states:"etats","national-parks":"parcs-nationaux","state-parks":"parcs-naturels-regionaux","local-parks":"parcs-locaux"},"it-IT":{trail:"sentiero",trails:"sentieri","trail/new":"sentiero/new",parks:"parchi",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"nl-NL":{trail:"wandelpad",trails:"routes","trail/new":"wandelpad/new",parks:"parken",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"nb-NO":{trail:"sti",trails:"stier","trail/new":"sti/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pl-PL":{trail:"szlak",trails:"szlaki","trail/new":"szlak/new",parks:"parki",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pt-BR":{trail:"trilha",trails:"trilhas","trail/new":"trilha/new",parks:"parques",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pt-PT":{trail:"trilho",trails:"trilhos","trail/new":"trilho/new",parks:"parques",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"sv-SE":{trail:"led",trails:"leder","trail/new":"led/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"}}},14328:(e,t,n)=>{"use strict";n.d(t,{metersToFormattedDistance:()=>l,minutesToFormattedTime:()=>u});var r=n(22569),i=function(e,t,n){var i=e===r.default.Spanish?r.default.German:e;return t.toLocaleString(i,{minimumFractionDigits:n,maximumFractionDigits:n})},o=function(e){return 3.28084*e},a=function(e){return 621371e-9*e},s=function(e){return e/1e3},l=function(e,t,n,r,l){switch(r){case"mi":return e.formatMessage({id:"kmXVkv",defaultMessage:"{miles} mi"},{miles:i(t,a(n),l)});case"ft":return e.formatMessage({id:"Y+FADI",defaultMessage:"{feet} ft"},{feet:i(t,o(n),l)});case"km":return e.formatMessage({id:"WopFVb",defaultMessage:"{kilometers} km"},{kilometers:i(t,s(n),l)});default:return e.formatMessage({id:"RiGwgn",defaultMessage:"{meters} m"},{meters:i(t,n,l)})}},u=function(e,t,n){void 0===n&&(n=!1);var r,i=t?Math.floor(t/60):0,o=t?t-60*i:0,a=e.formatMessage({id:"minute.abbreviated",defaultMessage:"m"});return r=i>=12?e.formatMessage({id:"LOLF/M",defaultMessage:"Multi-day"}):0===i&&0===o?"0h 0".concat(a):i>0?"".concat(i,"h ").concat(o).concat(a):"".concat(o).concat(a),n?"".concat(e.formatMessage({id:"owDSk8",defaultMessage:"Est."})," ").concat(r):r}},50441:(e,t,n)=>{"use strict";n.d(t,{wrapUrlSafe:()=>a});var r=n(54321),i=n(83751),o=n(22569),a=(n(78453),function(e,t){if(t){var n=(0,r.getLocalePrefix)(t);if(n)return function(e,t){var n=i.default[t];if(t===o.default.English||!n)return e;var a=(0,r.getLocale)(t),s=new RegExp("^\\/".concat(a,"\\/(trail\\/new|trail|parks)($|\\/.*|\\?.*)")),l=e.match(s);return l&&n[l[1]]&&!e.match(/\/(print|photos|edit)($|\?.*)/)?"/".concat(a,"/").concat(n[l[1]]).concat(l[2]):e}("/".concat(n).concat(e),t)}return e})},60240:(e,t,n)=>{"use strict";n.d(t,{getCardPhotoUrl:()=>a,getStaticMapUrl:()=>s});var r,i=n(83840),o=n(97081),a=((r={})[i.PhotoSize.Small]={fit:"inside",dimensions:[100,100]},r[i.PhotoSize.Medium]={fit:"inside",dimensions:[200,200]},r[i.PhotoSize.Large]={fit:"inside",dimensions:[500,500]},r[i.PhotoSize.ExtraLarge]={fit:"inside",dimensions:[2048,2048]},r[i.PhotoSize.Icon]={fit:"cover",dimensions:[50,50]},r[i.PhotoSize.SmallSquare]={fit:"cover",dimensions:[80,80]},r[i.PhotoSize.MediumSquare]={fit:"cover",dimensions:[120,120]},r[i.PhotoSize.LargeSquare]={fit:"cover",dimensions:[160,160]},r[i.PhotoSize.SmallWide]={fit:"cover",dimensions:[160,120]},r[i.PhotoSize.LargeWide]={fit:"cover",dimensions:[800,300]},r[i.PhotoSize.LargerWide]={fit:"cover",dimensions:[1080,700]},function(e,t,n,r,a){return void 0===r&&(r=i.PhotoSize.Large),void 0===a&&(a=""),"".concat(a,"/api/alltrails/v2/").concat(e,"/").concat(t,"/photos/").concat(n,"?size=").concat(r,"&key=").concat(o.X_AT_KEY)}),s=function(e,t,n){return void 0===n&&(n=""),"".concat(n,"/api/alltrails/v3/maps/").concat(e,"/static_map?size=").concat(t,"&scale=").concat(i.staticMapScale[t],"&key=").concat(o.X_AT_KEY)}},8156:t=>{"use strict";t.exports=e},19767:e=>{"use strict";e.exports=t},56128:e=>{"use strict";e.exports=n}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";o.r(a),o.d(a,{default:()=>g});var e=o(52322),t=o(83840),n=o(40133),r=o(37346),i=o(64812);const s="CzRZApKg7GzEg4q1CzeBQA==";var l=o(20249),u=o(47831),c=o(82250),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const h=function(t){var n=t.variant,r=t.map,i=t.isFirstParty,o=t.languageRegionCode,a=t.useMetric,h=t.decimalPlaces,f=void 0===h?1:h,p=t.openInNewTab,m=t.baseUrl,g=r.name,y=r.locationName,v=r.locationSlug,_=r.minutes,b=r.meters,x=r.user,w="MapCard_".concat(g),E=v?(0,e.jsx)(l.default,d({className:"_1gTva3DQUl4pCfUNAUI26A==",size:"sm",variant:"secondary",href:(0,u.getUrlFromSlug)(v,m),testId:"".concat(w,"_Location_Link"),target:p?"_blank":void 0,rel:p?"noreferrer":void 0},{children:y})):y;return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",d({className:"NOGGdsO0uAzPiOimQ5iU+w==","data-testid":"".concat(w,"_Title")},{children:g})),(0,e.jsx)("div",d({className:s,"data-testid":"".concat(w,"_Location")},{children:E})),(0,e.jsx)("div",d({className:s,"data-testid":"".concat(w,"_Stats")},{children:(0,e.jsx)(c.Z,{languageRegionCode:o,meters:b,minutes:_,useMetric:a,decimalPlaces:f,showLengthLabel:"small"!==n})})),i?null:(0,e.jsx)("div",d({className:s,"data-testid":"".concat(w,"_User")},{children:x.name}))]})};var f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)},p=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},m=function(e){return"small"===e?t.PhotoSize.LargeSquare:t.PhotoSize.LargerWide};const g=function(t){var o=t.className,a=t.variant,s=t.map,l=t.isFirstParty,c=void 0!==l&&l,d=t.languageRegionCode,g=t.onCardClick,y=t.onCardMouseEnter,v=t.onCardMouseLeave,_=t.onFavoriteClick,b=t.isFavorite,x=t.openInNewTab,w=t.useMetric,E=t.decimalPlaces,S=void 0===E?1:E,T=t.maxPhotos,M=void 0===T?6:T,k=t.baseUrl,C=void 0===k?"":k,P=t.dragHandleProps,A=t.deleteButton,O=t.footerCTAs,I=s.name,L=s.slug,D=s.id,R=s.hasPhotos,N=(0,u.getMapUrl)(L,C,d),z=(0,n.Z)(D,m(a),function(e){return"small"===e?"160x160":"320x320"}(a),function(e,t){return"small"===e?1:t}(a,M),C),j=z.staticMap,B=z.photos,F=z.loadPhotos,U={className:o,name:I,href:N,openInNewTab:x,metadata:(0,e.jsx)(h,{variant:a,map:s,isFirstParty:c,languageRegionCode:d,useMetric:w,decimalPlaces:S,baseUrl:C,openInNewTab:x}),onCardClick:g,onCardMouseEnter:function(){F(),y&&y()},onCardMouseLeave:v,onFavoriteClick:_,isFavorite:b};return"small"===a?(0,e.jsx)(r.Z,f({},U,{photo:j,footerCTAs:O})):(0,e.jsx)(i.Z,f({},U,{photos:R?p([j],B,!0):[j],loadPhotos:F,dragHandleProps:P,deleteButton:A}))}})(),a})(),e.exports=r(n(67294),n(21038),n(32675))},49343:function(e,t,n){var r;r=e=>(()=>{var t={72779:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},37320:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},11837:(e,t,n)=>{"use strict";n(37320);var r=n(8156),i=60103;if("function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},52322:(e,t,n)=>{"use strict";e.exports=n(11837)},8156:t=>{"use strict";t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";r.r(i),r.d(i,{default:()=>a});var e=r(52322),t=r(72779),n=r.n(t),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};const a=function(t){var r=t.className,i=void 0===r?"":r,a=t.children,s=t.testId,l=t.onSiteBackground,u=void 0!==l&&l;return(0,e.jsxs)("div",o({className:n()("NzdGSjbO3BwhITWynaqodQ==",i),"data-testid":s},{children:[(0,e.jsx)("div",{className:n()("wBzD+ZQe-XCaNBqfTivATA==",u&&"_00fz2x0FWaHOv8BJNkGsxQ==")}),a]}))}})(),i})(),e.exports=r(n(67294))},55115:function(e,t,n){var r;r=(e,t,n,r)=>(()=>{var i={72779:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},35368:function(e){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,n){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,n)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function r(e,i,o){return r=n()?Reflect.construct:function(e,n,r){var i=[null];i.push.apply(i,n);var o=new(Function.bind.apply(e,i));return r&&t(o,r.prototype),o},r.apply(null,arguments)}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=Object.hasOwnProperty,s=Object.setPrototypeOf,l=Object.isFrozen,u=Object.getPrototypeOf,c=Object.getOwnPropertyDescriptor,d=Object.freeze,h=Object.seal,f=Object.create,p="undefined"!=typeof Reflect&&Reflect,m=p.apply,g=p.construct;m||(m=function(e,t,n){return e.apply(t,n)}),d||(d=function(e){return e}),h||(h=function(e){return e}),g||(g=function(e,t){return r(e,i(t))});var y,v=C(Array.prototype.forEach),_=C(Array.prototype.pop),b=C(Array.prototype.push),x=C(String.prototype.toLowerCase),w=C(String.prototype.match),E=C(String.prototype.replace),S=C(String.prototype.indexOf),T=C(String.prototype.trim),M=C(RegExp.prototype.test),k=(y=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g(y,t)});function C(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return m(e,t,r)}}function P(e,t,n){n=n||x,s&&s(e,null);for(var r=t.length;r--;){var i=t[r];if("string"==typeof i){var o=n(i);o!==i&&(l(t)||(t[r]=o),i=o)}e[i]=!0}return e}function A(e){var t,n=f(null);for(t in e)m(a,e,[t])&&(n[t]=e[t]);return n}function O(e,t){for(;null!==e;){var n=c(e,t);if(n){if(n.get)return C(n.get);if("function"==typeof n.value)return C(n.value)}e=u(e)}return function(e){return console.warn("fallback value for",e),null}}var I=d(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=d(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),D=d(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R=d(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),N=d(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),z=d(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),j=d(["#text"]),B=d(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),F=d(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U=d(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),G=d(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),H=h(/\{\{[\w\W]*|[\w\W]*\}\}/gm),V=h(/<%[\w\W]*|[\w\W]*%>/gm),q=h(/^data-[\-\w.\u00B7-\uFFFF]/),$=h(/^aria-[\-\w]+$/),W=h(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z=h(/^(?:\w+script|data):/i),X=h(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Y=h(/^html$/i),K=function(){return"undefined"==typeof window?null:window},J=function(t,n){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var r=null,i="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(i)&&(r=n.currentScript.getAttribute(i));var o="dompurify"+(r?"#"+r:"");try{return t.createPolicy(o,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};return function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K(),r=function(e){return t(e)};if(r.version="2.4.0",r.removed=[],!n||!n.document||9!==n.document.nodeType)return r.isSupported=!1,r;var o=n.document,a=n.document,s=n.DocumentFragment,l=n.HTMLTemplateElement,u=n.Node,c=n.Element,h=n.NodeFilter,f=n.NamedNodeMap,p=void 0===f?n.NamedNodeMap||n.MozNamedAttrMap:f,m=n.HTMLFormElement,g=n.DOMParser,y=n.trustedTypes,C=c.prototype,Q=O(C,"cloneNode"),ee=O(C,"nextSibling"),te=O(C,"childNodes"),ne=O(C,"parentNode");if("function"==typeof l){var re=a.createElement("template");re.content&&re.content.ownerDocument&&(a=re.content.ownerDocument)}var ie=J(y,o),oe=ie?ie.createHTML(""):"",ae=a,se=ae.implementation,le=ae.createNodeIterator,ue=ae.createDocumentFragment,ce=ae.getElementsByTagName,de=o.importNode,he={};try{he=A(a).documentMode?a.documentMode:{}}catch(e){}var fe={};r.isSupported="function"==typeof ne&&se&&void 0!==se.createHTMLDocument&&9!==he;var pe,me,ge=H,ye=V,ve=q,_e=$,be=Z,xe=X,we=W,Ee=null,Se=P({},[].concat(i(I),i(L),i(D),i(N),i(j))),Te=null,Me=P({},[].concat(i(B),i(F),i(U),i(G))),ke=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ce=null,Pe=null,Ae=!0,Oe=!0,Ie=!1,Le=!1,De=!1,Re=!1,Ne=!1,ze=!1,je=!1,Be=!1,Fe=!0,Ue=!1,Ge="user-content-",He=!0,Ve=!1,qe={},$e=null,We=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ze=null,Xe=P({},["audio","video","img","source","image","track"]),Ye=null,Ke=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",Qe="http://www.w3.org/2000/svg",et="http://www.w3.org/1999/xhtml",tt=et,nt=!1,rt=["application/xhtml+xml","text/html"],it="text/html",ot=null,at=a.createElement("form"),st=function(e){return e instanceof RegExp||e instanceof Function},lt=function(t){ot&&ot===t||(t&&"object"===e(t)||(t={}),t=A(t),pe=pe=-1===rt.indexOf(t.PARSER_MEDIA_TYPE)?it:t.PARSER_MEDIA_TYPE,me="application/xhtml+xml"===pe?function(e){return e}:x,Ee="ALLOWED_TAGS"in t?P({},t.ALLOWED_TAGS,me):Se,Te="ALLOWED_ATTR"in t?P({},t.ALLOWED_ATTR,me):Me,Ye="ADD_URI_SAFE_ATTR"in t?P(A(Ke),t.ADD_URI_SAFE_ATTR,me):Ke,Ze="ADD_DATA_URI_TAGS"in t?P(A(Xe),t.ADD_DATA_URI_TAGS,me):Xe,$e="FORBID_CONTENTS"in t?P({},t.FORBID_CONTENTS,me):We,Ce="FORBID_TAGS"in t?P({},t.FORBID_TAGS,me):{},Pe="FORBID_ATTR"in t?P({},t.FORBID_ATTR,me):{},qe="USE_PROFILES"in t&&t.USE_PROFILES,Ae=!1!==t.ALLOW_ARIA_ATTR,Oe=!1!==t.ALLOW_DATA_ATTR,Ie=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=t.SAFE_FOR_TEMPLATES||!1,De=t.WHOLE_DOCUMENT||!1,ze=t.RETURN_DOM||!1,je=t.RETURN_DOM_FRAGMENT||!1,Be=t.RETURN_TRUSTED_TYPE||!1,Ne=t.FORCE_BODY||!1,Fe=!1!==t.SANITIZE_DOM,Ue=t.SANITIZE_NAMED_PROPS||!1,He=!1!==t.KEEP_CONTENT,Ve=t.IN_PLACE||!1,we=t.ALLOWED_URI_REGEXP||we,tt=t.NAMESPACE||et,t.CUSTOM_ELEMENT_HANDLING&&st(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&st(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Le&&(Oe=!1),je&&(ze=!0),qe&&(Ee=P({},i(j)),Te=[],!0===qe.html&&(P(Ee,I),P(Te,B)),!0===qe.svg&&(P(Ee,L),P(Te,F),P(Te,G)),!0===qe.svgFilters&&(P(Ee,D),P(Te,F),P(Te,G)),!0===qe.mathMl&&(P(Ee,N),P(Te,U),P(Te,G))),t.ADD_TAGS&&(Ee===Se&&(Ee=A(Ee)),P(Ee,t.ADD_TAGS,me)),t.ADD_ATTR&&(Te===Me&&(Te=A(Te)),P(Te,t.ADD_ATTR,me)),t.ADD_URI_SAFE_ATTR&&P(Ye,t.ADD_URI_SAFE_ATTR,me),t.FORBID_CONTENTS&&($e===We&&($e=A($e)),P($e,t.FORBID_CONTENTS,me)),He&&(Ee["#text"]=!0),De&&P(Ee,["html","head","body"]),Ee.table&&(P(Ee,["tbody"]),delete Ce.tbody),d&&d(t),ot=t)},ut=P({},["mi","mo","mn","ms","mtext"]),ct=P({},["foreignobject","desc","title","annotation-xml"]),dt=P({},["title","style","font","a","script"]),ht=P({},L);P(ht,D),P(ht,R);var ft=P({},N);P(ft,z);var pt=function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:et,tagName:"template"});var n=x(e.tagName),r=x(t.tagName);return e.namespaceURI===Qe?t.namespaceURI===et?"svg"===n:t.namespaceURI===Je?"svg"===n&&("annotation-xml"===r||ut[r]):Boolean(ht[n]):e.namespaceURI===Je?t.namespaceURI===et?"math"===n:t.namespaceURI===Qe?"math"===n&&ct[r]:Boolean(ft[n]):e.namespaceURI===et&&!(t.namespaceURI===Qe&&!ct[r])&&!(t.namespaceURI===Je&&!ut[r])&&!ft[n]&&(dt[n]||!ht[n])},mt=function(e){b(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=oe}catch(t){e.remove()}}},gt=function(e,t){try{b(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){b(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Te[e])if(ze||je)try{mt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},yt=function(e){var t,n;if(Ne)e="<remove></remove>"+e;else{var r=w(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===pe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var i=ie?ie.createHTML(e):e;if(tt===et)try{t=(new g).parseFromString(i,pe)}catch(e){}if(!t||!t.documentElement){t=se.createDocument(tt,"template",null);try{t.documentElement.innerHTML=nt?"":i}catch(e){}}var o=t.body||t.documentElement;return e&&n&&o.insertBefore(a.createTextNode(n),o.childNodes[0]||null),tt===et?ce.call(t,De?"html":"body")[0]:De?t.documentElement:o},vt=function(e){return le.call(e.ownerDocument||e,e,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,null,!1)},_t=function(e){return e instanceof m&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof p)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},bt=function(t){return"object"===e(u)?t instanceof u:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},xt=function(e,t,n){fe[e]&&v(fe[e],(function(e){e.call(r,t,n,ot)}))},wt=function(e){var t;if(xt("beforeSanitizeElements",e,null),_t(e))return mt(e),!0;if(M(/[\u0080-\uFFFF]/,e.nodeName))return mt(e),!0;var n=me(e.nodeName);if(xt("uponSanitizeElement",e,{tagName:n,allowedTags:Ee}),e.hasChildNodes()&&!bt(e.firstElementChild)&&(!bt(e.content)||!bt(e.content.firstElementChild))&&M(/<[/\w]/g,e.innerHTML)&&M(/<[/\w]/g,e.textContent))return mt(e),!0;if("select"===n&&M(/<template/i,e.innerHTML))return mt(e),!0;if(!Ee[n]||Ce[n]){if(!Ce[n]&&St(n)){if(ke.tagNameCheck instanceof RegExp&&M(ke.tagNameCheck,n))return!1;if(ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))return!1}if(He&&!$e[n]){var i=ne(e)||e.parentNode,o=te(e)||e.childNodes;if(o&&i)for(var a=o.length-1;a>=0;--a)i.insertBefore(Q(o[a],!0),ee(e))}return mt(e),!0}return e instanceof c&&!pt(e)?(mt(e),!0):"noscript"!==n&&"noembed"!==n||!M(/<\/no(script|embed)/i,e.innerHTML)?(Le&&3===e.nodeType&&(t=e.textContent,t=E(t,ge," "),t=E(t,ye," "),e.textContent!==t&&(b(r.removed,{element:e.cloneNode()}),e.textContent=t)),xt("afterSanitizeElements",e,null),!1):(mt(e),!0)},Et=function(e,t,n){if(Fe&&("id"===t||"name"===t)&&(n in a||n in at))return!1;if(Oe&&!Pe[t]&&M(ve,t));else if(Ae&&M(_e,t));else if(!Te[t]||Pe[t]){if(!(St(e)&&(ke.tagNameCheck instanceof RegExp&&M(ke.tagNameCheck,e)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(e))&&(ke.attributeNameCheck instanceof RegExp&&M(ke.attributeNameCheck,t)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(t))||"is"===t&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&M(ke.tagNameCheck,n)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))))return!1}else if(Ye[t]);else if(M(we,E(n,xe,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==S(n,"data:")||!Ze[e])if(Ie&&!M(be,E(n,xe,"")));else if(n)return!1;return!0},St=function(e){return e.indexOf("-")>0},Tt=function(t){var n,i,o,a;xt("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Te};for(a=s.length;a--;){var u=n=s[a],c=u.name,d=u.namespaceURI;if(i="value"===c?n.value:T(n.value),o=me(c),l.attrName=o,l.attrValue=i,l.keepAttr=!0,l.forceKeepAttr=void 0,xt("uponSanitizeAttribute",t,l),i=l.attrValue,!l.forceKeepAttr&&(gt(c,t),l.keepAttr))if(M(/\/>/i,i))gt(c,t);else{Le&&(i=E(i,ge," "),i=E(i,ye," "));var h=me(t.nodeName);if(Et(h,o,i)){if(!Ue||"id"!==o&&"name"!==o||(gt(c,t),i=Ge+i),ie&&"object"===e(y)&&"function"==typeof y.getAttributeType)if(d);else switch(y.getAttributeType(h,o)){case"TrustedHTML":i=ie.createHTML(i);break;case"TrustedScriptURL":i=ie.createScriptURL(i)}try{d?t.setAttributeNS(d,c,i):t.setAttribute(c,i),_(r.removed)}catch(e){}}}}xt("afterSanitizeAttributes",t,null)}},Mt=function e(t){var n,r=vt(t);for(xt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)xt("uponSanitizeShadowNode",n,null),wt(n)||(n.content instanceof s&&e(n.content),Tt(n));xt("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(t){var i,a,l,c,d,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((nt=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!bt(t)){if("function"!=typeof t.toString)throw k("toString is not a function");if("string"!=typeof(t=t.toString()))throw k("dirty is not a string, aborting")}if(!r.isSupported){if("object"===e(n.toStaticHTML)||"function"==typeof n.toStaticHTML){if("string"==typeof t)return n.toStaticHTML(t);if(bt(t))return n.toStaticHTML(t.outerHTML)}return t}if(Re||lt(h),r.removed=[],"string"==typeof t&&(Ve=!1),Ve){if(t.nodeName){var f=me(t.nodeName);if(!Ee[f]||Ce[f])throw k("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof u)1===(a=(i=yt("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?i=a:i.appendChild(a);else{if(!ze&&!Le&&!De&&-1===t.indexOf("<"))return ie&&Be?ie.createHTML(t):t;if(!(i=yt(t)))return ze?null:Be?oe:""}i&&Ne&&mt(i.firstChild);for(var p=vt(Ve?t:i);l=p.nextNode();)3===l.nodeType&&l===c||wt(l)||(l.content instanceof s&&Mt(l.content),Tt(l),c=l);if(c=null,Ve)return t;if(ze){if(je)for(d=ue.call(i.ownerDocument);i.firstChild;)d.appendChild(i.firstChild);else d=i;return Te.shadowroot&&(d=de.call(o,d,!0)),d}var m=De?i.outerHTML:i.innerHTML;return De&&Ee["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&M(Y,i.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+m),Le&&(m=E(m,ge," "),m=E(m,ye," ")),ie&&Be?ie.createHTML(m):m},r.setConfig=function(e){lt(e),Re=!0},r.clearConfig=function(){ot=null,Re=!1},r.isValidAttribute=function(e,t,n){ot||lt({});var r=me(e),i=me(t);return Et(r,i,n)},r.addHook=function(e,t){"function"==typeof t&&(fe[e]=fe[e]||[],b(fe[e],t))},r.removeHook=function(e){if(fe[e])return _(fe[e])},r.removeHooks=function(e){fe[e]&&(fe[e]=[])},r.removeAllHooks=function(){fe={}},r}()}()},50857:(e,t,n)=>{var r=n(37772).Symbol;e.exports=r},53366:(e,t,n)=>{var r=n(50857),i=n(62107),o=n(37157),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},51704:(e,t,n)=>{var r=n(52153),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},51242:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},62107:(e,t,n)=>{var r=n(50857),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},37157:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},37772:(e,t,n)=>{var r=n(51242),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},52153:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},54073:(e,t,n)=>{var r=n(29259),i=n(61100),o=n(7642),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l,u,c,d,h,f,p=0,m=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=l,r=u;return l=u=void 0,p=t,d=e.apply(r,n)}function _(e){return p=e,h=setTimeout(x,t),m?v(e):d}function b(e){var n=e-f;return void 0===f||n>=t||n<0||g&&e-p>=c}function x(){var e=i();if(b(e))return w(e);h=setTimeout(x,function(e){var n=t-(e-f);return g?s(n,c-(e-p)):n}(e))}function w(e){return h=void 0,y&&l?v(e):(l=u=void 0,d)}function E(){var e=i(),n=b(e);if(l=arguments,u=this,f=e,n){if(void 0===h)return _(f);if(g)return clearTimeout(h),h=setTimeout(x,t),v(f)}return void 0===h&&(h=setTimeout(x,t)),d}return t=o(t)||0,r(n)&&(m=!!n.leading,c=(g="maxWait"in n)?a(o(n.maxWait)||0,t):c,y="trailing"in n?!!n.trailing:y),E.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=f=u=h=void 0},E.flush=function(){return void 0===h?d:w(i())},E}},29259:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},15125:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},4795:(e,t,n)=>{var r=n(53366),i=n(15125);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},61100:(e,t,n)=>{var r=n(37772);e.exports=function(){return r.Date.now()}},7642:(e,t,n)=>{var r=n(51704),i=n(29259),o=n(4795),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},31814:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={container:"AUxnvEMKUpKbQqeQ+9Di6g=="}},37320:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},11837:(e,t,n)=>{"use strict";n(37320);var r=n(8156),i=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},52322:(e,t,n)=>{"use strict";e.exports=n(11837)},70408:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(52322),i=n(72779),o=n.n(i);const a={container:"gxT3Zc1Gp7dW6rif5GvCzw==",sm:"_97pFfg115fuRuZVwLYmVfQ==",lg:"jJf9ZRAJNn++9licv1HAqA=="};var s=n(1560),l=n(19312),u=n(58743),c=n(96073),d=n(92753),h=n(58911),f=n(7768),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)};const m=function(e){var t=e.isSelected,n=e.onClick,i=e.onWhiteBackground,m=void 0!==i&&i,g=e.className,y=void 0===g?"":g,v=e.size,_=(0,s.default)(l.Z).formattedDefaultMessages,b=_.REMOVE_FROM_LIST,x=_.ADD_TO_LIST,w=t?b:x;return(0,r.jsx)("button",p({"aria-label":w,className:o()(a.container,v&&a[v],y),onClick:n,title:w,type:"button"},{children:t?m?(0,r.jsx)(d.default,{color:u.COLOR_UI_HIGHLIGHT,size:v}):(0,r.jsx)(f.default,{color:u.COLOR_UI_HIGHLIGHT,size:v}):m?(0,r.jsx)(c.default,{size:v}):(0,r.jsx)(h.default,{size:v})}))}},37006:(e,t,n)=>{"use strict";n(52322),n(56128)},19807:(e,t,n)=>{"use strict";n(37006);var r=n(56128);n.o(r,"Link")&&n.d(t,{Link:function(){return r.Link}})},23382:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(52322),i=n(8156);const o=function(e){var t=e.src,n=e.className,o=e.loading,a=(0,i.useState)(),s=a[0],l=a[1];return(0,i.useEffect)((function(){l(!1)}),[t]),!t||s?(0,r.jsx)("div",{className:n}):(0,r.jsx)("img",{className:n,src:t,alt:"",onError:function(){l(!0)},loading:o})}},38785:(e,t,n)=>{"use strict";n.d(t,{default:()=>g});var r=n(52322),i=n(72779),o=n.n(i),a=n(54073),s=n.n(a),l=n(35368),u=n.n(l),c=n(8156),d=n(66877),h=n(58743),f=n(1560),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)},m=(0,d.defineMessages)({SHOW_MORE:{id:"aWpBzj",defaultMessage:"Show more"},SHOW_LESS:{id:"qyJtWy",defaultMessage:"Show less"}});const g=function(e){var t=e.text,n=e.innerHtml,i=e.maxLines,a=e.className,l=e.preventExpansion,d=void 0!==l&&l,g=e.showMoreBackgroundColor,y=void 0===g?h.COLOR_BACKGROUND_PRIMARY:g,v=e.testIdPrefix,_=e.hideShowLess,b=void 0!==_&&_,x=t&&t.length>0,w=(0,f.default)(m).formattedDefaultMessages,E=w.SHOW_LESS,S=w.SHOW_MORE,T=(0,c.useState)(!1),M=T[0],k=T[1],C=(0,c.useState)(!1),P=C[0],A=C[1],O=(0,c.useRef)(null),I=(0,c.useCallback)((function(){!M&&O.current&&A(O.current.scrollHeight>O.current.clientHeight)}),[M,O]);(0,c.useEffect)((function(){return x&&(I(),window.addEventListener("resize",s()(I,300))),function(){x&&window.removeEventListener("resize",s()(I,300))}}),[I]);var L=(0,c.useMemo)((function(){if(M&&b)return null;var e=function(e){return d?(0,r.jsx)("span",p({"data-testid":"".concat(v,"_ShowMoreLabel")},{children:e})):(0,r.jsx)("button",p({onClick:function(){return k(!M)},type:"button","data-testid":"".concat(v,"_ShowMoreButton")},{children:e}))};return M?e(E):P?(0,r.jsxs)(r.Fragment,{children:["... ",e(S)]}):null}),[E,S,M,P,d]),D=(0,c.useMemo)((function(){var e={className:"pSG7+HfuYezu8ITHbrBe3Q==",style:{WebkitLineClamp:M?void 0:i},ref:O,"data-testid":"".concat(v,"_ShowMoreText")};if(n&&"undefined"!=typeof window){var o=u().sanitize(n,{ALLOWED_TAGS:["strong"]});return(0,r.jsx)("div",p({},e,{dangerouslySetInnerHTML:{__html:o}}))}return(0,r.jsx)("div",p({},e,{children:t}))}),[t,n,M,i]);return x?(0,r.jsxs)("div",p({className:o()("_6kZwzDjchQ-pnbfI-y-mXA==",a)},{children:[D,L?(0,r.jsx)("div",p({className:"xAXKTZskHijNr1Kctn4LlQ==",style:{backgroundColor:y}},{children:L})):null]})):null}},24081:(e,t,n)=>{"use strict";n.d(t,{default:()=>Pe});var r=n(52322),i=n(8156);function o(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function a(e={},t={}){Object.keys(t).forEach((n=>{void 0===e[n]?e[n]=t[n]:o(t[n])&&o(e[n])&&Object.keys(t[n]).length>0&&a(e[n],t[n])}))}const s={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function l(){const e="undefined"!=typeof document?document:{};return a(e,s),e}const u={document:s,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function c(){const e="undefined"!=typeof window?window:{};return a(e,u),e}class d extends Array{constructor(e){"number"==typeof e?super(e):(super(...e||[]),function(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get:()=>t,set(e){t.__proto__=e}})}(this))}}function h(e=[]){const t=[];return e.forEach((e=>{Array.isArray(e)?t.push(...h(e)):t.push(e)})),t}function f(e,t){return Array.prototype.filter.call(e,t)}function p(e,t){const n=c(),r=l();let i=[];if(!t&&e instanceof d)return e;if(!e)return new d(i);if("string"==typeof e){const n=e.trim();if(n.indexOf("<")>=0&&n.indexOf(">")>=0){let e="div";0===n.indexOf("<li")&&(e="ul"),0===n.indexOf("<tr")&&(e="tbody"),0!==n.indexOf("<td")&&0!==n.indexOf("<th")||(e="tr"),0===n.indexOf("<tbody")&&(e="table"),0===n.indexOf("<option")&&(e="select");const t=r.createElement(e);t.innerHTML=n;for(let n=0;n<t.childNodes.length;n+=1)i.push(t.childNodes[n])}else i=function(e,t){if("string"!=typeof e)return[e];const n=[],r=t.querySelectorAll(e);for(let i=0;i<r.length;i+=1)n.push(r[i]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)i.push(e);else if(Array.isArray(e)){if(e instanceof d)return e;i=e}return new d(function(e){const t=[];for(let n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(i))}p.fn=d.prototype;const m="resize scroll".split(" ");function g(e){return function(...t){if(void 0===t[0]){for(let t=0;t<this.length;t+=1)m.indexOf(e)<0&&(e in this[t]?this[t][e]():p(this[t]).trigger(e));return this}return this.on(e,...t)}}g("click"),g("blur"),g("focus"),g("focusin"),g("focusout"),g("keyup"),g("keydown"),g("keypress"),g("submit"),g("change"),g("mousedown"),g("mousemove"),g("mouseup"),g("mouseenter"),g("mouseleave"),g("mouseout"),g("mouseover"),g("touchstart"),g("touchend"),g("touchmove"),g("resize"),g("scroll");const y={addClass:function(...e){const t=h(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.add(...t)})),this},removeClass:function(...e){const t=h(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.remove(...t)})),this},hasClass:function(...e){const t=h(e.map((e=>e.split(" "))));return f(this,(e=>t.filter((t=>e.classList.contains(t))).length>0)).length>0},toggleClass:function(...e){const t=h(e.map((e=>e.split(" "))));this.forEach((e=>{t.forEach((t=>{e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(let n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(const t in e)this[n][t]=e[t],this[n].setAttribute(t,e[t]);return this},removeAttr:function(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?`${e}ms`:e;return this},on:function(...e){let[t,n,r,i]=e;function o(e){const t=e.target;if(!t)return;const i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),p(t).is(n))r.apply(t,i);else{const e=p(t).parents();for(let t=0;t<e.length;t+=1)p(e[t]).is(n)&&r.apply(e[t],i)}}function a(e){const t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),r.apply(this,t)}"function"==typeof e[1]&&([t,r,i]=e,n=void 0),i||(i=!1);const s=t.split(" ");let l;for(let u=0;u<this.length;u+=1){const e=this[u];if(n)for(l=0;l<s.length;l+=1){const t=s[l];e.dom7LiveListeners||(e.dom7LiveListeners={}),e.dom7LiveListeners[t]||(e.dom7LiveListeners[t]=[]),e.dom7LiveListeners[t].push({listener:r,proxyListener:o}),e.addEventListener(t,o,i)}else for(l=0;l<s.length;l+=1){const t=s[l];e.dom7Listeners||(e.dom7Listeners={}),e.dom7Listeners[t]||(e.dom7Listeners[t]=[]),e.dom7Listeners[t].push({listener:r,proxyListener:a}),e.addEventListener(t,a,i)}}return this},off:function(...e){let[t,n,r,i]=e;"function"==typeof e[1]&&([t,r,i]=e,n=void 0),i||(i=!1);const o=t.split(" ");for(let a=0;a<o.length;a+=1){const e=o[a];for(let t=0;t<this.length;t+=1){const o=this[t];let a;if(!n&&o.dom7Listeners?a=o.dom7Listeners[e]:n&&o.dom7LiveListeners&&(a=o.dom7LiveListeners[e]),a&&a.length)for(let t=a.length-1;t>=0;t-=1){const n=a[t];r&&n.listener===r||r&&n.listener&&n.listener.dom7proxy&&n.listener.dom7proxy===r?(o.removeEventListener(e,n.proxyListener,i),a.splice(t,1)):r||(o.removeEventListener(e,n.proxyListener,i),a.splice(t,1))}}}return this},trigger:function(...e){const t=c(),n=e[0].split(" "),r=e[1];for(let i=0;i<n.length;i+=1){const o=n[i];for(let n=0;n<this.length;n+=1){const i=this[n];if(t.CustomEvent){const n=new t.CustomEvent(o,{detail:r,bubbles:!0,cancelable:!0});i.dom7EventData=e.filter(((e,t)=>t>0)),i.dispatchEvent(n),i.dom7EventData=[],delete i.dom7EventData}}}return this},transitionEnd:function(e){const t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){const e=c();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){const e=c(),t=l(),n=this[0],r=n.getBoundingClientRect(),i=t.body,o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,s=n===e?e.scrollY:n.scrollTop,u=n===e?e.scrollX:n.scrollLeft;return{top:r.top+s-o,left:r.left+u-a}}return null},css:function(e,t){const n=c();let r;if(1===arguments.length){if("string"!=typeof e){for(r=0;r<this.length;r+=1)for(const t in e)this[r].style[t]=e[t];return this}if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(r=0;r<this.length;r+=1)this[r].style[e]=t;return this}return this},each:function(e){return e?(this.forEach(((t,n)=>{e.apply(t,[t,n])})),this):this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){const t=c(),n=l(),r=this[0];let i,o;if(!r||void 0===e)return!1;if("string"==typeof e){if(r.matches)return r.matches(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);for(i=p(e),o=0;o<i.length;o+=1)if(i[o]===r)return!0;return!1}if(e===n)return r===n;if(e===t)return r===t;if(e.nodeType||e instanceof d){for(i=e.nodeType?[e]:e,o=0;o<i.length;o+=1)if(i[o]===r)return!0;return!1}return!1},index:function(){let e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;const t=this.length;if(e>t-1)return p([]);if(e<0){const n=t+e;return p(n<0?[]:[this[n]])}return p([this[e]])},append:function(...e){let t;const n=l();for(let r=0;r<e.length;r+=1){t=e[r];for(let e=0;e<this.length;e+=1)if("string"==typeof t){const r=n.createElement("div");for(r.innerHTML=t;r.firstChild;)this[e].appendChild(r.firstChild)}else if(t instanceof d)for(let n=0;n<t.length;n+=1)this[e].appendChild(t[n]);else this[e].appendChild(t)}return this},prepend:function(e){const t=l();let n,r;for(n=0;n<this.length;n+=1)if("string"==typeof e){const i=t.createElement("div");for(i.innerHTML=e,r=i.childNodes.length-1;r>=0;r-=1)this[n].insertBefore(i.childNodes[r],this[n].childNodes[0])}else if(e instanceof d)for(r=0;r<e.length;r+=1)this[n].insertBefore(e[r],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&p(this[0].nextElementSibling).is(e)?p([this[0].nextElementSibling]):p([]):this[0].nextElementSibling?p([this[0].nextElementSibling]):p([]):p([])},nextAll:function(e){const t=[];let n=this[0];if(!n)return p([]);for(;n.nextElementSibling;){const r=n.nextElementSibling;e?p(r).is(e)&&t.push(r):t.push(r),n=r}return p(t)},prev:function(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&p(t.previousElementSibling).is(e)?p([t.previousElementSibling]):p([]):t.previousElementSibling?p([t.previousElementSibling]):p([])}return p([])},prevAll:function(e){const t=[];let n=this[0];if(!n)return p([]);for(;n.previousElementSibling;){const r=n.previousElementSibling;e?p(r).is(e)&&t.push(r):t.push(r),n=r}return p(t)},parent:function(e){const t=[];for(let n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?p(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return p(t)},parents:function(e){const t=[];for(let n=0;n<this.length;n+=1){let r=this[n].parentNode;for(;r;)e?p(r).is(e)&&t.push(r):t.push(r),r=r.parentNode}return p(t)},closest:function(e){let t=this;return void 0===e?p([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].querySelectorAll(e);for(let e=0;e<r.length;e+=1)t.push(r[e])}return p(t)},children:function(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].children;for(let n=0;n<r.length;n+=1)e&&!p(r[n]).is(e)||t.push(r[n])}return p(t)},filter:function(e){return p(f(this,e))},remove:function(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(y).forEach((e=>{Object.defineProperty(p.fn,e,{value:y[e],writable:!0})}));const v=p;function _(e,t=0){return setTimeout(e,t)}function b(){return Date.now()}function x(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function w(...e){const t=Object(e[0]),n=["__proto__","constructor","prototype"];for(let i=1;i<e.length;i+=1){const o=e[i];if(null!=o&&(r=o,!("undefined"!=typeof window&&void 0!==window.HTMLElement?r instanceof HTMLElement:r&&(1===r.nodeType||11===r.nodeType)))){const e=Object.keys(Object(o)).filter((e=>n.indexOf(e)<0));for(let n=0,r=e.length;n<r;n+=1){const r=e[n],i=Object.getOwnPropertyDescriptor(o,r);void 0!==i&&i.enumerable&&(x(t[r])&&x(o[r])?o[r].__swiper__?t[r]=o[r]:w(t[r],o[r]):!x(t[r])&&x(o[r])?(t[r]={},o[r].__swiper__?t[r]=o[r]:w(t[r],o[r])):t[r]=o[r])}}}var r;return t}function E(e,t,n){e.style.setProperty(t,n)}function S({swiper:e,targetPosition:t,side:n}){const r=c(),i=-e.translate;let o,a=null;const s=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const l=t>i?"next":"prev",u=(e,t)=>"next"===l&&e>=t||"prev"===l&&e<=t,d=()=>{o=(new Date).getTime(),null===a&&(a=o);const l=Math.max(Math.min((o-a)/s,1),0),c=.5-Math.cos(l*Math.PI)/2;let h=i+c*(t-i);if(u(h,t)&&(h=t),e.wrapperEl.scrollTo({[n]:h}),u(h,t))return e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout((()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:h})})),void r.cancelAnimationFrame(e.cssModeFrameID);e.cssModeFrameID=r.requestAnimationFrame(d)};d()}let T,M,k;function C(){return T||(T=function(){const e=c(),t=l();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let t=!1;try{const n=Object.defineProperty({},"passive",{get(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),T}const P={on(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!=typeof t)return r;const i=n?"unshift":"push";return e.split(" ").forEach((e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!=typeof t)return r;function i(...n){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy,t.apply(r,n)}return i.__emitterProxy=t,r.on(e,i,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof e)return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((e=>{void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach(((r,i)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsListeners)return t;let n,r,i;return"string"==typeof e[0]||Array.isArray(e[0])?(n=e[0],r=e.slice(1,e.length),i=t):(n=e[0].events,r=e[0].data,i=e[0].context||t),r.unshift(i),(Array.isArray(n)?n:n.split(" ")).forEach((e=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach((t=>{t.apply(i,[e,...r])})),t.eventsListeners&&t.eventsListeners[e]&&t.eventsListeners[e].forEach((e=>{e.apply(i,r)}))})),t}},A={updateSize:function(){const e=this;let t,n;const r=e.$el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:r[0].clientWidth,n=void 0!==e.params.height&&null!==e.params.height?e.params.height:r[0].clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),n=n-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}const r=e.params,{$wrapperEl:i,size:o,rtlTranslate:a,wrongRTL:s}=e,l=e.virtual&&r.virtual.enabled,u=l?e.virtual.slides.length:e.slides.length,c=i.children(`.${e.params.slideClass}`),d=l?e.virtual.slides.length:c.length;let h=[];const f=[],p=[];let m=r.slidesOffsetBefore;"function"==typeof m&&(m=r.slidesOffsetBefore.call(e));let g=r.slidesOffsetAfter;"function"==typeof g&&(g=r.slidesOffsetAfter.call(e));const y=e.snapGrid.length,v=e.slidesGrid.length;let _=r.spaceBetween,b=-m,x=0,w=0;if(void 0===o)return;"string"==typeof _&&_.indexOf("%")>=0&&(_=parseFloat(_.replace("%",""))/100*o),e.virtualSize=-_,a?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),r.centeredSlides&&r.cssMode&&(E(e.wrapperEl,"--swiper-centered-offset-before",""),E(e.wrapperEl,"--swiper-centered-offset-after",""));const S=r.grid&&r.grid.rows>1&&e.grid;let T;S&&e.grid.initSlides(d);const M="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter((e=>void 0!==r.breakpoints[e].slidesPerView)).length>0;for(let E=0;E<d;E+=1){T=0;const i=c.eq(E);if(S&&e.grid.updateSlide(E,i,d,t),"none"!==i.css("display")){if("auto"===r.slidesPerView){M&&(c[E].style[t("width")]="");const o=getComputedStyle(i[0]),a=i[0].style.transform,s=i[0].style.webkitTransform;if(a&&(i[0].style.transform="none"),s&&(i[0].style.webkitTransform="none"),r.roundLengths)T=e.isHorizontal()?i.outerWidth(!0):i.outerHeight(!0);else{const e=n(o,"width"),t=n(o,"padding-left"),r=n(o,"padding-right"),a=n(o,"margin-left"),s=n(o,"margin-right"),l=o.getPropertyValue("box-sizing");if(l&&"border-box"===l)T=e+a+s;else{const{clientWidth:n,offsetWidth:o}=i[0];T=e+t+r+a+s+(o-n)}}a&&(i[0].style.transform=a),s&&(i[0].style.webkitTransform=s),r.roundLengths&&(T=Math.floor(T))}else T=(o-(r.slidesPerView-1)*_)/r.slidesPerView,r.roundLengths&&(T=Math.floor(T)),c[E]&&(c[E].style[t("width")]=`${T}px`);c[E]&&(c[E].swiperSlideSize=T),p.push(T),r.centeredSlides?(b=b+T/2+x/2+_,0===x&&0!==E&&(b=b-o/2-_),0===E&&(b=b-o/2-_),Math.abs(b)<.001&&(b=0),r.roundLengths&&(b=Math.floor(b)),w%r.slidesPerGroup==0&&h.push(b),f.push(b)):(r.roundLengths&&(b=Math.floor(b)),(w-Math.min(e.params.slidesPerGroupSkip,w))%e.params.slidesPerGroup==0&&h.push(b),f.push(b),b=b+T+_),e.virtualSize+=T+_,x=T,w+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+g,a&&s&&("slide"===r.effect||"coverflow"===r.effect)&&i.css({width:`${e.virtualSize+r.spaceBetween}px`}),r.setWrapperSize&&i.css({[t("width")]:`${e.virtualSize+r.spaceBetween}px`}),S&&e.grid.updateWrapperSize(T,h,t),!r.centeredSlides){const t=[];for(let n=0;n<h.length;n+=1){let i=h[n];r.roundLengths&&(i=Math.floor(i)),h[n]<=e.virtualSize-o&&t.push(i)}h=t,Math.floor(e.virtualSize-o)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-o)}if(0===h.length&&(h=[0]),0!==r.spaceBetween){const n=e.isHorizontal()&&a?"marginLeft":t("marginRight");c.filter(((e,t)=>!r.cssMode||t!==c.length-1)).css({[n]:`${_}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let e=0;p.forEach((t=>{e+=t+(r.spaceBetween?r.spaceBetween:0)})),e-=r.spaceBetween;const t=e-o;h=h.map((e=>e<0?-m:e>t?t+g:e))}if(r.centerInsufficientSlides){let e=0;if(p.forEach((t=>{e+=t+(r.spaceBetween?r.spaceBetween:0)})),e-=r.spaceBetween,e<o){const t=(o-e)/2;h.forEach(((e,n)=>{h[n]=e-t})),f.forEach(((e,n)=>{f[n]=e+t}))}}if(Object.assign(e,{slides:c,snapGrid:h,slidesGrid:f,slidesSizesGrid:p}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){E(e.wrapperEl,"--swiper-centered-offset-before",-h[0]+"px"),E(e.wrapperEl,"--swiper-centered-offset-after",e.size/2-p[p.length-1]/2+"px");const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+n))}if(d!==u&&e.emit("slidesLengthChange"),h.length!==y&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==v&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!(l||r.cssMode||"slide"!==r.effect&&"fade"!==r.effect)){const t=`${r.containerModifierClass}backface-hidden`,n=e.$el.hasClass(t);d<=r.maxBackfaceHiddenSlides?n||e.$el.addClass(t):n&&e.$el.removeClass(t)}},updateAutoHeight:function(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let i,o=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const a=e=>r?t.slides.filter((t=>parseInt(t.getAttribute("data-swiper-slide-index"),10)===e))[0]:t.slides.eq(e)[0];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||v([])).each((e=>{n.push(e)}));else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const e=t.activeIndex+i;if(e>t.slides.length&&!r)break;n.push(a(e))}else n.push(a(t.activeIndex));for(i=0;i<n.length;i+=1)if(void 0!==n[i]){const e=n[i].offsetHeight;o=e>o?e:o}(o||0===o)&&t.$wrapperEl.css("height",`${o}px`)},updateSlidesOffset:function(){const e=this,t=e.slides;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=e.isHorizontal()?t[n].offsetLeft:t[n].offsetTop},updateSlidesProgress:function(e=this&&this.translate||0){const t=this,n=t.params,{slides:r,rtlTranslate:i,snapGrid:o}=t;if(0===r.length)return;void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();let a=-e;i&&(a=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let s=0;s<r.length;s+=1){const e=r[s];let l=e.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);const u=(a+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+n.spaceBetween),c=(a-o[0]+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+n.spaceBetween),d=-(a-l),h=d+t.slidesSizesGrid[s];(d>=0&&d<t.size-1||h>1&&h<=t.size||d<=0&&h>=t.size)&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(s),r.eq(s).addClass(n.slideVisibleClass)),e.progress=i?-u:u,e.originalProgress=i?-c:c}t.visibleSlides=v(t.visibleSlides)},updateProgress:function(e){const t=this;if(void 0===e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:o,isEnd:a}=t;const s=o,l=a;0===r?(i=0,o=!0,a=!0):(i=(e-t.minTranslate())/r,o=i<=0,a=i>=1),Object.assign(t,{progress:i,isBeginning:o,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),o&&!s&&t.emit("reachBeginning toEdge"),a&&!l&&t.emit("reachEnd toEdge"),(s&&!o||l&&!a)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,$wrapperEl:r,activeIndex:i,realIndex:o}=e,a=e.virtual&&n.virtual.enabled;let s;t.removeClass(`${n.slideActiveClass} ${n.slideNextClass} ${n.slidePrevClass} ${n.slideDuplicateActiveClass} ${n.slideDuplicateNextClass} ${n.slideDuplicatePrevClass}`),s=a?e.$wrapperEl.find(`.${n.slideClass}[data-swiper-slide-index="${i}"]`):t.eq(i),s.addClass(n.slideActiveClass),n.loop&&(s.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${o}"]`).addClass(n.slideDuplicateActiveClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${o}"]`).addClass(n.slideDuplicateActiveClass));let l=s.nextAll(`.${n.slideClass}`).eq(0).addClass(n.slideNextClass);n.loop&&0===l.length&&(l=t.eq(0),l.addClass(n.slideNextClass));let u=s.prevAll(`.${n.slideClass}`).eq(0).addClass(n.slidePrevClass);n.loop&&0===u.length&&(u=t.eq(-1),u.addClass(n.slidePrevClass)),n.loop&&(l.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass),u.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass)),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:r,snapGrid:i,params:o,activeIndex:a,realIndex:s,snapIndex:l}=t;let u,c=e;if(void 0===c){for(let e=0;e<r.length;e+=1)void 0!==r[e+1]?n>=r[e]&&n<r[e+1]-(r[e+1]-r[e])/2?c=e:n>=r[e]&&n<r[e+1]&&(c=e+1):n>=r[e]&&(c=e);o.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(i.indexOf(n)>=0)u=i.indexOf(n);else{const e=Math.min(o.slidesPerGroupSkip,c);u=e+Math.floor((c-e)/o.slidesPerGroup)}if(u>=i.length&&(u=i.length-1),c===a)return void(u!==l&&(t.snapIndex=u,t.emit("snapIndexChange")));const d=parseInt(t.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(t,{snapIndex:u,realIndex:d,previousIndex:a,activeIndex:c}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),s!==d&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")},updateClickedSlide:function(e){const t=this,n=t.params,r=v(e).closest(`.${n.slideClass}`)[0];let i,o=!1;if(r)for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===r){o=!0,i=a;break}if(!r||!o)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(v(r).attr("data-swiper-slide-index"),10):t.clickedIndex=i,n.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}};function O({swiper:e,runCallbacks:t,direction:n,step:r}){const{activeIndex:i,previousIndex:o}=e;let a=n;if(a||(a=i>o?"next":i<o?"prev":"reset"),e.emit(`transition${r}`),t&&i!==o){if("reset"===a)return void e.emit(`slideResetTransition${r}`);e.emit(`slideChangeTransition${r}`),"next"===a?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}const I={slideTo:function(e=0,t=this.params.speed,n=!0,r,i){if("number"!=typeof e&&"string"!=typeof e)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const o=this;let a=e;a<0&&(a=0);const{params:s,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:p}=o;if(o.animating&&s.preventInteractionOnTransition||!p&&!r&&!i)return!1;const m=Math.min(o.params.slidesPerGroupSkip,a);let g=m+Math.floor((a-m)/o.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const y=-l[g];if(s.normalizeSlideIndex)for(let _=0;_<u.length;_+=1){const e=-Math.floor(100*y),t=Math.floor(100*u[_]),n=Math.floor(100*u[_+1]);void 0!==u[_+1]?e>=t&&e<n-(n-t)/2?a=_:e>=t&&e<n&&(a=_+1):e>=t&&(a=_)}if(o.initialized&&a!==d){if(!o.allowSlideNext&&y<o.translate&&y<o.minTranslate())return!1;if(!o.allowSlidePrev&&y>o.translate&&y>o.maxTranslate()&&(d||0)!==a)return!1}let v;if(a!==(c||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(y),v=a>d?"next":a<d?"prev":"reset",h&&-y===o.translate||!h&&y===o.translate)return o.updateActiveIndex(a),s.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==s.effect&&o.setTranslate(y),"reset"!==v&&(o.transitionStart(n,v),o.transitionEnd(n,v)),!1;if(s.cssMode){const e=o.isHorizontal(),n=h?y:-y;if(0===t){const t=o.virtual&&o.params.virtual.enabled;t&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),f[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame((()=>{o.wrapperEl.style.scrollSnapType="",o._swiperImmediateVirtual=!1}))}else{if(!o.support.smoothScroll)return S({swiper:o,targetPosition:n,side:e?"left":"top"}),!0;f.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return o.setTransition(t),o.setTranslate(y),o.updateActiveIndex(a),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,r),o.transitionStart(n,v),0===t?o.transitionEnd(n,v):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,v))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e=0,t=this.params.speed,n=!0,r){if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const i=this;let o=e;return i.params.loop&&(o+=i.loopedSlides),i.slideTo(o,t,n,r)},slideNext:function(e=this.params.speed,t=!0,n){const r=this,{animating:i,enabled:o,params:a}=r;if(!o)return r;let s=a.slidesPerGroup;"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(s=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<a.slidesPerGroupSkip?1:s;if(a.loop){if(i&&a.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return a.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+l,e,t,n)},slidePrev:function(e=this.params.speed,t=!0,n){const r=this,{params:i,animating:o,snapGrid:a,slidesGrid:s,rtlTranslate:l,enabled:u}=r;if(!u)return r;if(i.loop){if(o&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const d=c(l?r.translate:-r.translate),h=a.map((e=>c(e)));let f=a[h.indexOf(d)-1];if(void 0===f&&i.cssMode){let e;a.forEach(((t,n)=>{d>=t&&(e=n)})),void 0!==e&&(f=a[e>0?e-1:e])}let p=0;if(void 0!==f&&(p=s.indexOf(f),p<0&&(p=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(p=p-r.slidesPerViewDynamic("previous",!0)+1,p=Math.max(p,0))),i.rewind&&r.isBeginning){const i=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(i,e,t,n)}return r.slideTo(p,e,t,n)},slideReset:function(e=this.params.speed,t=!0,n){return this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e=this.params.speed,t=!0,n,r=.5){const i=this;let o=i.activeIndex;const a=Math.min(i.params.slidesPerGroupSkip,o),s=a+Math.floor((o-a)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[s]){const e=i.snapGrid[s];l-e>(i.snapGrid[s+1]-e)*r&&(o+=i.params.slidesPerGroup)}else{const e=i.snapGrid[s-1];l-e<=(i.snapGrid[s]-e)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,e,t,n)},slideToClickedSlide:function(){const e=this,{params:t,$wrapperEl:n}=e,r="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let i,o=e.clickedIndex;if(t.loop){if(e.animating)return;i=parseInt(v(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?o<e.loopedSlides-r/2||o>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),o=n.children(`.${t.slideClass}[data-swiper-slide-index="${i}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),_((()=>{e.slideTo(o)}))):e.slideTo(o):o>e.slides.length-r?(e.loopFix(),o=n.children(`.${t.slideClass}[data-swiper-slide-index="${i}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),_((()=>{e.slideTo(o)}))):e.slideTo(o)}else e.slideTo(o)}};function L(e){const t=this,n=l(),r=c(),i=t.touchEventsData,{params:o,touches:a,enabled:s}=t;if(!s)return;if(t.animating&&o.preventInteractionOnTransition)return;!t.animating&&o.cssMode&&o.loop&&t.loopFix();let u=e;u.originalEvent&&(u=u.originalEvent);let d=v(u.target);if("wrapper"===o.touchEventsTarget&&!d.closest(t.wrapperEl).length)return;if(i.isTouchEvent="touchstart"===u.type,!i.isTouchEvent&&"which"in u&&3===u.which)return;if(!i.isTouchEvent&&"button"in u&&u.button>0)return;if(i.isTouched&&i.isMoved)return;const h=!!o.noSwipingClass&&""!==o.noSwipingClass,f=e.composedPath?e.composedPath():e.path;h&&u.target&&u.target.shadowRoot&&f&&(d=v(f[0]));const p=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,m=!(!u.target||!u.target.shadowRoot);if(o.noSwiping&&(m?function(e,t=this){return function t(n){if(!n||n===l()||n===c())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(e);return r||n.getRootNode?r||t(n.getRootNode().host):null}(t)}(p,d[0]):d.closest(p)[0]))return void(t.allowClick=!0);if(o.swipeHandler&&!d.closest(o.swipeHandler)[0])return;a.currentX="touchstart"===u.type?u.targetTouches[0].pageX:u.pageX,a.currentY="touchstart"===u.type?u.targetTouches[0].pageY:u.pageY;const g=a.currentX,y=a.currentY,_=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,x=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(_&&(g<=x||g>=r.innerWidth-x)){if("prevent"!==_)return;e.preventDefault()}if(Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=g,a.startY=y,i.touchStartTime=b(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(i.allowThresholdMove=!1),"touchstart"!==u.type){let e=!0;d.is(i.focusableElements)&&(e=!1,"SELECT"===d[0].nodeName&&(i.isTouched=!1)),n.activeElement&&v(n.activeElement).is(i.focusableElements)&&n.activeElement!==d[0]&&n.activeElement.blur();const r=e&&t.allowTouchMove&&o.touchStartPreventDefault;!o.touchStartForcePreventDefault&&!r||d[0].isContentEditable||u.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!o.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",u)}function D(e){const t=l(),n=this,r=n.touchEventsData,{params:i,touches:o,rtlTranslate:a,enabled:s}=n;if(!s)return;let u=e;if(u.originalEvent&&(u=u.originalEvent),!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",u));if(r.isTouchEvent&&"touchmove"!==u.type)return;const c="touchmove"===u.type&&u.targetTouches&&(u.targetTouches[0]||u.changedTouches[0]),d="touchmove"===u.type?c.pageX:u.pageX,h="touchmove"===u.type?c.pageY:u.pageY;if(u.preventedByNestedSwiper)return o.startX=d,void(o.startY=h);if(!n.allowTouchMove)return v(u.target).is(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(o,{startX:d,startY:h,currentX:d,currentY:h}),r.touchStartTime=b()));if(r.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(h<o.startY&&n.translate<=n.maxTranslate()||h>o.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(d<o.startX&&n.translate<=n.maxTranslate()||d>o.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&u.target===t.activeElement&&v(u.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",u),u.targetTouches&&u.targetTouches.length>1)return;o.currentX=d,o.currentY=h;const f=o.currentX-o.startX,p=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(f**2+p**2)<n.params.threshold)return;if(void 0===r.isScrolling){let e;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:f*f+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(f))/Math.PI,r.isScrolling=n.isHorizontal()?e>i.touchAngle:90-e>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",u),void 0===r.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(r.startMoving=!0)),r.isScrolling)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&u.cancelable&&u.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&u.stopPropagation(),r.isMoved||(i.loop&&!i.cssMode&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",u)),n.emit("sliderMove",u),r.isMoved=!0;let m=n.isHorizontal()?f:p;o.diff=m,m*=i.touchRatio,a&&(m=-m),n.swipeDirection=m>0?"prev":"next",r.currentTranslate=m+r.startTranslate;let g=!0,y=i.resistanceRatio;if(i.touchReleaseOnEdges&&(y=0),m>0&&r.currentTranslate>n.minTranslate()?(g=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+m)**y)):m<0&&r.currentTranslate<n.maxTranslate()&&(g=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-m)**y)),g&&(u.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(m)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,void(o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function R(e){const t=this,n=t.touchEventsData,{params:r,touches:i,rtlTranslate:o,slidesGrid:a,enabled:s}=t;if(!s)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const u=b(),c=u-n.touchStartTime;if(t.allowClick){const e=l.path||l.composedPath&&l.composedPath();t.updateClickedSlide(e&&e[0]||l.target),t.emit("tap click",l),c<300&&u-n.lastClickTime<300&&t.emit("doubleTap doubleClick",l)}if(n.lastClickTime=b(),_((()=>{t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===i.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let d;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,d=r.followFinger?o?t.translate:-t.translate:-n.currentTranslate,r.cssMode)return;if(t.params.freeMode&&r.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:d});let h=0,f=t.slidesSizesGrid[0];for(let v=0;v<a.length;v+=v<r.slidesPerGroupSkip?1:r.slidesPerGroup){const e=v<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==a[v+e]?d>=a[v]&&d<a[v+e]&&(h=v,f=a[v+e]-a[v]):d>=a[v]&&(h=v,f=a[a.length-1]-a[a.length-2])}let p=null,m=null;r.rewind&&(t.isBeginning?m=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(p=0));const g=(d-a[h])/f,y=h<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(c>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(g>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?p:h+y):t.slideTo(h)),"prev"===t.swipeDirection&&(g>1-r.longSwipesRatio?t.slideTo(h+y):null!==m&&g<0&&Math.abs(g)>r.longSwipesRatio?t.slideTo(m):t.slideTo(h))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);!t.navigation||l.target!==t.navigation.nextEl&&l.target!==t.navigation.prevEl?("next"===t.swipeDirection&&t.slideTo(null!==p?p:h+y),"prev"===t.swipeDirection&&t.slideTo(null!==m?m:h)):l.target===t.navigation.nextEl?t.slideTo(h+y):t.slideTo(h)}}function N(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:o}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}function z(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function j(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;let i;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const o=e.maxTranslate()-e.minTranslate();i=0===o?0:(e.translate-e.minTranslate())/o,i!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let B=!1;function F(){}const U=(e,t)=>{const n=l(),{params:r,touchEvents:i,el:o,wrapperEl:a,device:s,support:u}=e,c=!!r.nested,d="on"===t?"addEventListener":"removeEventListener",h=t;if(u.touch){const t=!("touchstart"!==i.start||!u.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};o[d](i.start,e.onTouchStart,t),o[d](i.move,e.onTouchMove,u.passiveListener?{passive:!1,capture:c}:c),o[d](i.end,e.onTouchEnd,t),i.cancel&&o[d](i.cancel,e.onTouchEnd,t)}else o[d](i.start,e.onTouchStart,!1),n[d](i.move,e.onTouchMove,c),n[d](i.end,e.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&o[d]("click",e.onClick,!0),r.cssMode&&a[d]("scroll",e.onScroll),r.updateOnWindowResize?e[h](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",N,!0):e[h]("observerUpdate",N,!0)},G={attachEvents:function(){const e=this,t=l(),{params:n,support:r}=e;e.onTouchStart=L.bind(e),e.onTouchMove=D.bind(e),e.onTouchEnd=R.bind(e),n.cssMode&&(e.onScroll=j.bind(e)),e.onClick=z.bind(e),r.touch&&!B&&(t.addEventListener("touchstart",F),B=!0),U(e,"on")},detachEvents:function(){U(this,"off")}},H=(e,t)=>e.grid&&t.grid&&t.grid.rows>1,V={addClasses:function(){const e=this,{classNames:t,params:n,rtl:r,$el:i,device:o,support:a}=e,s=function(e,t){const n=[];return e.forEach((e=>{"object"==typeof e?Object.keys(e).forEach((r=>{e[r]&&n.push(t+r)})):"string"==typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"pointer-events":!a.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...s),i.addClass([...t].join(" ")),e.emitContainerClasses()},removeClasses:function(){const{$el:e,classNames:t}=this;e.removeClass(t.join(" ")),this.emitContainerClasses()}},q={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function $(e,t){return function(n={}){const r=Object.keys(n)[0],i=n[r];"object"==typeof i&&null!==i?(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===e[r]&&(e[r]={auto:!0}),r in e&&"enabled"in i?(!0===e[r]&&(e[r]={enabled:!0}),"object"!=typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),w(t,n)):w(t,n)):w(t,n)}}const W={eventsEmitter:P,update:A,translate:{getTranslate:function(e=(this.isHorizontal()?"x":"y")){const{params:t,rtlTranslate:n,translate:r,$wrapperEl:i}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let o=function(e,t="x"){const n=c();let r,i,o;const a=function(e){const t=c();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map((e=>e.replace(",","."))).join(", ")),o=new n.WebKitCSSMatrix("none"===i?"":i)):(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=o.toString().split(",")),"x"===t&&(i=n.WebKitCSSMatrix?o.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(i=n.WebKitCSSMatrix?o.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),i||0}(i[0],e);return n&&(o=-o),o||0},setTranslate:function(e,t){const n=this,{rtlTranslate:r,params:i,$wrapperEl:o,wrapperEl:a,progress:s}=n;let l,u=0,c=0;n.isHorizontal()?u=r?-e:e:c=e,i.roundLengths&&(u=Math.floor(u),c=Math.floor(c)),i.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-c:i.virtualTranslate||o.transform(`translate3d(${u}px, ${c}px, 0px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:c;const d=n.maxTranslate()-n.minTranslate();l=0===d?0:(e-n.minTranslate())/d,l!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e=0,t=this.params.speed,n=!0,r=!0,i){const o=this,{params:a,wrapperEl:s}=o;if(o.animating&&a.preventInteractionOnTransition)return!1;const l=o.minTranslate(),u=o.maxTranslate();let c;if(c=r&&e>l?l:r&&e<u?u:e,o.updateProgress(c),a.cssMode){const e=o.isHorizontal();if(0===t)s[e?"scrollLeft":"scrollTop"]=-c;else{if(!o.support.smoothScroll)return S({swiper:o,targetPosition:-c,side:e?"left":"top"}),!0;s.scrollTo({[e?"left":"top"]:-c,behavior:"smooth"})}return!0}return 0===t?(o.setTransition(0),o.setTranslate(c),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(c),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.$wrapperEl[0].addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){const n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e=!0,t){const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),O({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e=!0,t){const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),O({swiper:n,runCallbacks:e,direction:t,step:"End"}))}},slide:I,loop:{loopCreate:function(){const e=this,t=l(),{params:n,$wrapperEl:r}=e,i=r.children().length>0?v(r.children()[0].parentNode):r;i.children(`.${n.slideClass}.${n.slideDuplicateClass}`).remove();let o=i.children(`.${n.slideClass}`);if(n.loopFillGroupWithBlank){const e=n.slidesPerGroup-o.length%n.slidesPerGroup;if(e!==n.slidesPerGroup){for(let r=0;r<e;r+=1){const e=v(t.createElement("div")).addClass(`${n.slideClass} ${n.slideBlankClass}`);i.append(e)}o=i.children(`.${n.slideClass}`)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=o.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>o.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=o.length);const a=[],s=[];o.each(((e,t)=>{v(e).attr("data-swiper-slide-index",t)}));for(let l=0;l<e.loopedSlides;l+=1){const e=l-Math.floor(l/o.length)*o.length;s.push(o.eq(e)[0]),a.unshift(o.eq(o.length-e-1)[0])}for(let l=0;l<s.length;l+=1)i.append(v(s[l].cloneNode(!0)).addClass(n.slideDuplicateClass));for(let l=a.length-1;l>=0;l-=1)i.prepend(v(a[l].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:n,loopedSlides:r,allowSlidePrev:i,allowSlideNext:o,snapGrid:a,rtlTranslate:s}=e;let l;e.allowSlidePrev=!0,e.allowSlideNext=!0;const u=-a[t]-e.getTranslate();t<r?(l=n.length-3*r+t,l+=r,e.slideTo(l,0,!1,!0)&&0!==u&&e.setTranslate((s?-e.translate:e.translate)-u)):t>=n.length-r&&(l=-n.length+t+r,l+=r,e.slideTo(l,0,!1,!0)&&0!==u&&e.setTranslate((s?-e.translate:e.translate)-u)),e.allowSlidePrev=i,e.allowSlideNext=o,e.emit("loopFix")},loopDestroy:function(){const{$wrapperEl:e,params:t,slides:n}=this;e.children(`.${t.slideClass}.${t.slideDuplicateClass},.${t.slideClass}.${t.slideBlankClass}`).remove(),n.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"},unsetGrabCursor:function(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:G,breakpoints:{setBreakpoint:function(){const e=this,{activeIndex:t,initialized:n,loopedSlides:r=0,params:i,$el:o}=e,a=i.breakpoints;if(!a||a&&0===Object.keys(a).length)return;const s=e.getBreakpoint(a,e.params.breakpointsBase,e.el);if(!s||e.currentBreakpoint===s)return;const l=(s in a?a[s]:void 0)||e.originalParams,u=H(e,i),c=H(e,l),d=i.enabled;u&&!c?(o.removeClass(`${i.containerModifierClass}grid ${i.containerModifierClass}grid-column`),e.emitContainerClasses()):!u&&c&&(o.addClass(`${i.containerModifierClass}grid`),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===i.grid.fill)&&o.addClass(`${i.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((t=>{const n=i[t]&&i[t].enabled,r=l[t]&&l[t].enabled;n&&!r&&e[t].disable(),!n&&r&&e[t].enable()}));const h=l.direction&&l.direction!==i.direction,f=i.loop&&(l.slidesPerView!==i.slidesPerView||h);h&&n&&e.changeDirection(),w(e.params,l);const p=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),d&&!p?e.disable():!d&&p&&e.enable(),e.currentBreakpoint=s,e.emit("_beforeBreakpoint",l),f&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-r+e.loopedSlides,0,!1)),e.emit("breakpoint",l)},getBreakpoint:function(e,t="window",n){if(!e||"container"===t&&!n)return;let r=!1;const i=c(),o="window"===t?i.innerHeight:n.clientHeight,a=Object.keys(e).map((e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:o*t,point:e}}return{value:e,point:e}}));a.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let s=0;s<a.length;s+=1){const{point:e,value:o}=a[s];"window"===t?i.matchMedia(`(min-width: ${o}px)`).matches&&(r=e):o<=n.clientWidth&&(r=e)}return r||"max"}},checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*r;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:V,images:{loadImage:function(e,t,n,r,i,o){const a=c();let s;function l(){o&&o()}v(e).parent("picture")[0]||e.complete&&i?l():t?(s=new a.Image,s.onload=l,s.onerror=l,r&&(s.sizes=r),n&&(s.srcset=n),t&&(s.src=t)):l()},preloadImages:function(){const e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(let n=0;n<e.imagesToLoad.length;n+=1){const r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}}},Z={};class X{constructor(...e){let t,n;if(1===e.length&&e[0].constructor&&"Object"===Object.prototype.toString.call(e[0]).slice(8,-1)?n=e[0]:[t,n]=e,n||(n={}),n=w({},n),t&&!n.el&&(n.el=t),n.el&&v(n.el).length>1){const e=[];return v(n.el).each((t=>{const r=w({},n,{el:t});e.push(new X(r))})),e}const r=this;r.__swiper__=!0,r.support=C(),r.device=function(e={}){return M||(M=function({userAgent:e}={}){const t=C(),n=c(),r=n.navigator.platform,i=e||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,s=n.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/);let u=i.match(/(iPad).*OS\s([\d_]+)/);const d=i.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===r;let p="MacIntel"===r;return!u&&p&&t.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${a}x${s}`)>=0&&(u=i.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),p=!1),l&&!f&&(o.os="android",o.android=!0),(u||h||d)&&(o.os="ios",o.ios=!0),o}(e)),M}({userAgent:n.userAgent}),r.browser=(k||(k=function(){const e=c();return{isSafari:function(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),k),r.eventsListeners={},r.eventsAnyListeners=[],r.modules=[...r.__modules__],n.modules&&Array.isArray(n.modules)&&r.modules.push(...n.modules);const i={};r.modules.forEach((e=>{e({swiper:r,extendParams:$(n,i),on:r.on.bind(r),once:r.once.bind(r),off:r.off.bind(r),emit:r.emit.bind(r)})}));const o=w({},q,i);return r.params=w({},o,Z,n),r.originalParams=w({},r.params),r.passedParams=w({},n),r.params&&r.params.on&&Object.keys(r.params.on).forEach((e=>{r.on(e,r.params.on[e])})),r.params&&r.params.onAny&&r.onAny(r.params.onAny),r.$=v,Object.assign(r,{enabled:r.params.enabled,el:t,classNames:[],slides:v(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===r.params.direction,isVertical:()=>"vertical"===r.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev,touchEvents:function(){const e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return r.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},r.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},r.support.touch||!r.params.simulateTouch?r.touchEventsTouch:r.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:r.params.focusableElements,lastClickTime:b(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:r.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),r.emit("_swiper"),r.params.init&&r.init(),r}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.each((n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e="current",t=!1){const{params:n,slides:r,slidesGrid:i,slidesSizesGrid:o,size:a,activeIndex:s}=this;let l=1;if(n.centeredSlides){let e,t=r[s].swiperSlideSize;for(let n=s+1;n<r.length;n+=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>a&&(e=!0));for(let n=s-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>a&&(e=!0))}else if("current"===e)for(let u=s+1;u<r.length;u+=1)(t?i[u]+o[u]-i[s]<a:i[u]-i[s]<a)&&(l+=1);else for(let u=s-1;u>=0;u-=1)i[s]-i[u]<a&&(l+=1);return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function r(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let i;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(r(),e.params.autoHeight&&e.updateAutoHeight()):(i=("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),i||r()),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t=!0){const n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass(`${n.params.containerModifierClass}${r}`).addClass(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.each((t=>{"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.$el.addClass(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.$el.removeClass(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;const n=v(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let i=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const t=v(e.shadowRoot.querySelector(r()));return t.children=e=>n.children(e),t}return n.children?n.children(r()):v(n).children(r())})();if(0===i.length&&t.params.createElements){const e=l().createElement("div");i=v(e),e.className=t.params.wrapperClass,n.append(e),n.children(`.${t.params.slideClass}`).each((e=>{i.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:i,wrapperEl:i[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===i.css("display")}),!0}init(e){const t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}destroy(e=!0,t=!0){const n=this,{params:r,$el:i,$wrapperEl:o,slides:a}=n;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttr("style"),o.removeAttr("style"),a&&a.length&&a.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((e=>{n.off(e)})),!1!==e&&(n.$el[0].swiper=null,function(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}(n)),n.destroyed=!0),null}static extendDefaults(e){w(Z,e)}static get extendedDefaults(){return Z}static get defaults(){return q}static installModule(e){X.prototype.__modules__||(X.prototype.__modules__=[]);const t=X.prototype.__modules__;"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>X.installModule(e))),X):(X.installModule(e),X)}}Object.keys(W).forEach((e=>{Object.keys(W[e]).forEach((t=>{X.prototype[t]=W[e][t]}))})),X.use([function({swiper:e,on:t,emit:n}){const r=c();let i=null,o=null;const a=()=>{e&&!e.destroyed&&e.initialized&&(n("beforeResize"),n("resize"))},s=()=>{e&&!e.destroyed&&e.initialized&&n("orientationchange")};t("init",(()=>{e.params.resizeObserver&&void 0!==r.ResizeObserver?e&&!e.destroyed&&e.initialized&&(i=new ResizeObserver((t=>{o=r.requestAnimationFrame((()=>{const{width:n,height:r}=e;let i=n,o=r;t.forEach((({contentBoxSize:t,contentRect:n,target:r})=>{r&&r!==e.el||(i=n?n.width:(t[0]||t).inlineSize,o=n?n.height:(t[0]||t).blockSize)})),i===n&&o===r||a()}))})),i.observe(e.el)):(r.addEventListener("resize",a),r.addEventListener("orientationchange",s))})),t("destroy",(()=>{o&&r.cancelAnimationFrame(o),i&&i.unobserve&&e.el&&(i.unobserve(e.el),i=null),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",s)}))},function({swiper:e,extendParams:t,on:n,emit:r}){const i=[],o=c(),a=(e,t={})=>{const n=new(o.MutationObserver||o.WebkitMutationObserver)((e=>{if(1===e.length)return void r("observerUpdate",e[0]);const t=function(){r("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)}));n.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),i.push(n)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",(()=>{if(e.params.observer){if(e.params.observeParents){const t=e.$el.parents();for(let e=0;e<t.length;e+=1)a(t[e])}a(e.$el[0],{childList:e.params.observeSlideChildren}),a(e.$wrapperEl[0],{attributes:!1})}})),n("destroy",(()=>{i.forEach((e=>{e.disconnect()})),i.splice(0,i.length)}))}]);const Y=X;function K(e=""){return`.${e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function J({swiper:e,extendParams:t,on:n,emit:r}){const i="swiper-pagination";let o;t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),e.pagination={el:null,$el:null,bullets:[]};let a=0;function s(){return!e.params.pagination.el||!e.pagination.el||!e.pagination.$el||0===e.pagination.$el.length}function u(t,n){const{bulletActiveClass:r}=e.params.pagination;t[n]().addClass(`${r}-${n}`)[n]().addClass(`${r}-${n}-${n}`)}function c(){const t=e.rtl,n=e.params.pagination;if(s())return;const i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,l=e.pagination.$el;let c;const d=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(c=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup),c>i-1-2*e.loopedSlides&&(c-=i-2*e.loopedSlides),c>d-1&&(c-=d),c<0&&"bullets"!==e.params.paginationType&&(c=d+c)):c=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===n.type&&e.pagination.bullets&&e.pagination.bullets.length>0){const r=e.pagination.bullets;let i,s,d;if(n.dynamicBullets&&(o=r.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),l.css(e.isHorizontal()?"width":"height",o*(n.dynamicMainBullets+4)+"px"),n.dynamicMainBullets>1&&void 0!==e.previousIndex&&(a+=c-(e.previousIndex-e.loopedSlides||0),a>n.dynamicMainBullets-1?a=n.dynamicMainBullets-1:a<0&&(a=0)),i=Math.max(c-a,0),s=i+(Math.min(r.length,n.dynamicMainBullets)-1),d=(s+i)/2),r.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map((e=>`${n.bulletActiveClass}${e}`)).join(" ")),l.length>1)r.each((e=>{const t=v(e),r=t.index();r===c&&t.addClass(n.bulletActiveClass),n.dynamicBullets&&(r>=i&&r<=s&&t.addClass(`${n.bulletActiveClass}-main`),r===i&&u(t,"prev"),r===s&&u(t,"next"))}));else{const t=r.eq(c),o=t.index();if(t.addClass(n.bulletActiveClass),n.dynamicBullets){const t=r.eq(i),a=r.eq(s);for(let e=i;e<=s;e+=1)r.eq(e).addClass(`${n.bulletActiveClass}-main`);if(e.params.loop)if(o>=r.length){for(let e=n.dynamicMainBullets;e>=0;e-=1)r.eq(r.length-e).addClass(`${n.bulletActiveClass}-main`);r.eq(r.length-n.dynamicMainBullets-1).addClass(`${n.bulletActiveClass}-prev`)}else u(t,"prev"),u(a,"next");else u(t,"prev"),u(a,"next")}}if(n.dynamicBullets){const i=Math.min(r.length,n.dynamicMainBullets+4),a=(o*i-o)/2-d*o,s=t?"right":"left";r.css(e.isHorizontal()?s:"top",`${a}px`)}}if("fraction"===n.type&&(l.find(K(n.currentClass)).text(n.formatFractionCurrent(c+1)),l.find(K(n.totalClass)).text(n.formatFractionTotal(d))),"progressbar"===n.type){let t;t=n.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";const r=(c+1)/d;let i=1,o=1;"horizontal"===t?i=r:o=r,l.find(K(n.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${i}) scaleY(${o})`).transition(e.params.speed)}"custom"===n.type&&n.renderCustom?(l.html(n.renderCustom(e,c+1,d)),r("paginationRender",l[0])):r("paginationUpdate",l[0]),e.params.watchOverflow&&e.enabled&&l[e.isLocked?"addClass":"removeClass"](n.lockClass)}function d(){const t=e.params.pagination;if(s())return;const n=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,i=e.pagination.$el;let o="";if("bullets"===t.type){let r=e.params.loop?Math.ceil((n-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&!e.params.loop&&r>n&&(r=n);for(let n=0;n<r;n+=1)t.renderBullet?o+=t.renderBullet.call(e,n,t.bulletClass):o+=`<${t.bulletElement} class="${t.bulletClass}"></${t.bulletElement}>`;i.html(o),e.pagination.bullets=i.find(K(t.bulletClass))}"fraction"===t.type&&(o=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`,i.html(o)),"progressbar"===t.type&&(o=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):`<span class="${t.progressbarFillClass}"></span>`,i.html(o)),"custom"!==t.type&&r("paginationRender",e.pagination.$el[0])}function h(){e.params.pagination=function(e,t,n,r){const i=l();return e.params.createElements&&Object.keys(r).forEach((o=>{if(!n[o]&&!0===n.auto){let a=e.$el.children(`.${r[o]}`)[0];a||(a=i.createElement("div"),a.className=r[o],e.$el.append(a)),n[o]=a,t[o]=a}})),n}(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const t=e.params.pagination;if(!t.el)return;let n=v(t.el);0!==n.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&n.length>1&&(n=e.$el.find(t.el),n.length>1&&(n=n.filter((t=>v(t).parents(".swiper")[0]===e.el)))),"bullets"===t.type&&t.clickable&&n.addClass(t.clickableClass),n.addClass(t.modifierClass+t.type),n.addClass(e.isHorizontal()?t.horizontalClass:t.verticalClass),"bullets"===t.type&&t.dynamicBullets&&(n.addClass(`${t.modifierClass}${t.type}-dynamic`),a=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&n.addClass(t.progressbarOppositeClass),t.clickable&&n.on("click",K(t.bulletClass),(function(t){t.preventDefault();let n=v(this).index()*e.params.slidesPerGroup;e.params.loop&&(n+=e.loopedSlides),e.slideTo(n)})),Object.assign(e.pagination,{$el:n,el:n[0]}),e.enabled||n.addClass(t.lockClass))}function f(){const t=e.params.pagination;if(s())return;const n=e.pagination.$el;n.removeClass(t.hiddenClass),n.removeClass(t.modifierClass+t.type),n.removeClass(e.isHorizontal()?t.horizontalClass:t.verticalClass),e.pagination.bullets&&e.pagination.bullets.removeClass&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&n.off("click",K(t.bulletClass))}n("init",(()=>{!1===e.params.pagination.enabled?p():(h(),d(),c())})),n("activeIndexChange",(()=>{(e.params.loop||void 0===e.snapIndex)&&c()})),n("snapIndexChange",(()=>{e.params.loop||c()})),n("slidesLengthChange",(()=>{e.params.loop&&(d(),c())})),n("snapGridLengthChange",(()=>{e.params.loop||(d(),c())})),n("destroy",(()=>{f()})),n("enable disable",(()=>{const{$el:t}=e.pagination;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)})),n("lock unlock",(()=>{c()})),n("click",((t,n)=>{const i=n.target,{$el:o}=e.pagination;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&o&&o.length>0&&!v(i).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&i===e.navigation.nextEl||e.navigation.prevEl&&i===e.navigation.prevEl))return;const t=o.hasClass(e.params.pagination.hiddenClass);r(!0===t?"paginationShow":"paginationHide"),o.toggleClass(e.params.pagination.hiddenClass)}}));const p=()=>{e.$el.addClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.addClass(e.params.pagination.paginationDisabledClass),f()};Object.assign(e.pagination,{enable:()=>{e.$el.removeClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.removeClass(e.params.pagination.paginationDisabledClass),h(),d(),c()},disable:p,render:d,update:c,init:h,destroy:f})}function Q({swiper:e,extendParams:t,emit:n,once:r}){t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(e,{freeMode:{onTouchStart:function(){const t=e.getTranslate();e.setTranslate(t),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})},onTouchMove:function(){const{touchEventsData:t,touches:n}=e;0===t.velocities.length&&t.velocities.push({position:n[e.isHorizontal()?"startX":"startY"],time:t.touchStartTime}),t.velocities.push({position:n[e.isHorizontal()?"currentX":"currentY"],time:b()})},onTouchEnd:function({currentPos:t}){const{params:i,$wrapperEl:o,rtlTranslate:a,snapGrid:s,touchEventsData:l}=e,u=b()-l.touchStartTime;if(t<-e.minTranslate())e.slideTo(e.activeIndex);else if(t>-e.maxTranslate())e.slides.length<s.length?e.slideTo(s.length-1):e.slideTo(e.slides.length-1);else{if(i.freeMode.momentum){if(l.velocities.length>1){const t=l.velocities.pop(),n=l.velocities.pop(),r=t.position-n.position,o=t.time-n.time;e.velocity=r/o,e.velocity/=2,Math.abs(e.velocity)<i.freeMode.minimumVelocity&&(e.velocity=0),(o>150||b()-t.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=i.freeMode.momentumVelocityRatio,l.velocities.length=0;let t=1e3*i.freeMode.momentumRatio;const u=e.velocity*t;let c=e.translate+u;a&&(c=-c);let d,h=!1;const f=20*Math.abs(e.velocity)*i.freeMode.momentumBounceRatio;let p;if(c<e.maxTranslate())i.freeMode.momentumBounce?(c+e.maxTranslate()<-f&&(c=e.maxTranslate()-f),d=e.maxTranslate(),h=!0,l.allowMomentumBounce=!0):c=e.maxTranslate(),i.loop&&i.centeredSlides&&(p=!0);else if(c>e.minTranslate())i.freeMode.momentumBounce?(c-e.minTranslate()>f&&(c=e.minTranslate()+f),d=e.minTranslate(),h=!0,l.allowMomentumBounce=!0):c=e.minTranslate(),i.loop&&i.centeredSlides&&(p=!0);else if(i.freeMode.sticky){let t;for(let e=0;e<s.length;e+=1)if(s[e]>-c){t=e;break}c=Math.abs(s[t]-c)<Math.abs(s[t-1]-c)||"next"===e.swipeDirection?s[t]:s[t-1],c=-c}if(p&&r("transitionEnd",(()=>{e.loopFix()})),0!==e.velocity){if(t=a?Math.abs((-c-e.translate)/e.velocity):Math.abs((c-e.translate)/e.velocity),i.freeMode.sticky){const n=Math.abs((a?-c:c)-e.translate),r=e.slidesSizesGrid[e.activeIndex];t=n<r?i.speed:n<2*r?1.5*i.speed:2.5*i.speed}}else if(i.freeMode.sticky)return void e.slideToClosest();i.freeMode.momentumBounce&&h?(e.updateProgress(d),e.setTransition(t),e.setTranslate(c),e.transitionStart(!0,e.swipeDirection),e.animating=!0,o.transitionEnd((()=>{e&&!e.destroyed&&l.allowMomentumBounce&&(n("momentumBounce"),e.setTransition(i.speed),setTimeout((()=>{e.setTranslate(d),o.transitionEnd((()=>{e&&!e.destroyed&&e.transitionEnd()}))}),0))}))):e.velocity?(n("_freeModeNoMomentumRelease"),e.updateProgress(c),e.setTransition(t),e.setTranslate(c),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,o.transitionEnd((()=>{e&&!e.destroyed&&e.transitionEnd()})))):e.updateProgress(c),e.updateActiveIndex(),e.updateSlidesClasses()}else{if(i.freeMode.sticky)return void e.slideToClosest();i.freeMode&&n("_freeModeNoMomentumRelease")}(!i.freeMode.momentum||u>=i.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}}}})}function ee(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function te(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>n.indexOf(e)<0)).forEach((n=>{void 0===e[n]?e[n]=t[n]:ee(t[n])&&ee(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:te(e[n],t[n]):e[n]=t[n]}))}function ne(e={}){return e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function re(e={}){return e.pagination&&void 0===e.pagination.el}function ie(e={}){return e.scrollbar&&void 0===e.scrollbar.el}function oe(e=""){const t=e.split(" ").map((e=>e.trim())).filter((e=>!!e)),n=[];return t.forEach((e=>{n.indexOf(e)<0&&n.push(e)})),n.join(" ")}const ae=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"],se=(e,t)=>{let n=t.slidesPerView;if(t.breakpoints){const e=Y.prototype.getBreakpoint(t.breakpoints),r=e in t.breakpoints?t.breakpoints[e]:void 0;r&&r.slidesPerView&&(n=r.slidesPerView)}let r=Math.ceil(parseFloat(t.loopedSlides||n,10));return r+=t.loopAdditionalSlides,r>e.length&&t.loopedSlidesLimit&&(r=e.length),r};function le(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function ue(e){const t=[];return i.Children.toArray(e).forEach((e=>{le(e)?t.push(e):e.props&&e.props.children&&ue(e.props.children).forEach((e=>t.push(e)))})),t}function ce(e){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return i.Children.toArray(e).forEach((e=>{if(le(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){const r=ue(e.props.children);r.length>0?r.forEach((e=>t.push(e))):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function de(e,t){return"undefined"==typeof window?(0,i.useEffect)(e,t):(0,i.useLayoutEffect)(e,t)}const he=(0,i.createContext)(null),fe=(0,i.createContext)(null);function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}const me=(0,i.forwardRef)((function(e,t){let{className:n,tag:r="div",wrapperTag:o="div",children:a,onSwiper:s,...l}=void 0===e?{}:e,u=!1;const[c,d]=(0,i.useState)("swiper"),[h,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1),g=(0,i.useRef)(!1),y=(0,i.useRef)(null),v=(0,i.useRef)(null),_=(0,i.useRef)(null),b=(0,i.useRef)(null),x=(0,i.useRef)(null),w=(0,i.useRef)(null),E=(0,i.useRef)(null),S=(0,i.useRef)(null),{params:T,passedParams:M,rest:k,events:C}=function(e={},t=!0){const n={on:{}},r={},i={};te(n,Y.defaults),te(n,Y.extendedDefaults),n._emitClasses=!0,n.init=!1;const o={},a=ae.map((e=>e.replace(/_/,""))),s=Object.assign({},e);return Object.keys(s).forEach((s=>{void 0!==e[s]&&(a.indexOf(s)>=0?ee(e[s])?(n[s]={},i[s]={},te(n[s],e[s]),te(i[s],e[s])):(n[s]=e[s],i[s]=e[s]):0===s.search(/on[A-Z]/)&&"function"==typeof e[s]?t?r[`${s[2].toLowerCase()}${s.substr(3)}`]=e[s]:n.on[`${s[2].toLowerCase()}${s.substr(3)}`]=e[s]:o[s]=e[s])})),["navigation","pagination","scrollbar"].forEach((e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:i,rest:o,events:r}}(l),{slides:P,slots:A}=ce(a),O=()=>{m(!p)};Object.assign(T.on,{_containerClasses(e,t){d(t)}});const I=()=>{if(Object.assign(T.on,C),u=!0,v.current=new Y(T),v.current.loopCreate=()=>{},v.current.loopDestroy=()=>{},T.loop&&(v.current.loopedSlides=se(P,T)),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=P;const e={cache:!1,slides:P,renderExternal:f,renderExternalUpdate:!1};te(v.current.params.virtual,e),te(v.current.originalParams.virtual,e)}};return y.current||I(),v.current&&v.current.on("_beforeBreakpoint",O),(0,i.useEffect)((()=>()=>{v.current&&v.current.off("_beforeBreakpoint",O)})),(0,i.useEffect)((()=>{!g.current&&v.current&&(v.current.emitSlidesClasses(),g.current=!0)})),de((()=>{if(t&&(t.current=y.current),y.current)return v.current.destroyed&&I(),function({el:e,nextEl:t,prevEl:n,paginationEl:r,scrollbarEl:i,swiper:o},a){ne(a)&&t&&n&&(o.params.navigation.nextEl=t,o.originalParams.navigation.nextEl=t,o.params.navigation.prevEl=n,o.originalParams.navigation.prevEl=n),re(a)&&r&&(o.params.pagination.el=r,o.originalParams.pagination.el=r),ie(a)&&i&&(o.params.scrollbar.el=i,o.originalParams.scrollbar.el=i),o.init(e)}({el:y.current,nextEl:x.current,prevEl:w.current,paginationEl:E.current,scrollbarEl:S.current,swiper:v.current},T),s&&s(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}}),[]),de((()=>{!u&&C&&v.current&&Object.keys(C).forEach((e=>{v.current.on(e,C[e])}));const e=function(e,t,n,r,i){const o=[];if(!t)return o;const a=e=>{o.indexOf(e)<0&&o.push(e)};if(n&&r){const e=r.map(i),t=n.map(i);e.join("")!==t.join("")&&a("children"),r.length!==n.length&&a("children")}return ae.filter((e=>"_"===e[0])).map((e=>e.replace(/_/,""))).forEach((n=>{if(n in e&&n in t)if(ee(e[n])&&ee(t[n])){const r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?a(n):(r.forEach((r=>{e[n][r]!==t[n][r]&&a(n)})),i.forEach((r=>{e[n][r]!==t[n][r]&&a(n)})))}else e[n]!==t[n]&&a(n)})),o}(M,_.current,P,b.current,(e=>e.key));return _.current=M,b.current=P,e.length&&v.current&&!v.current.destroyed&&function({swiper:e,slides:t,passedParams:n,changedParams:r,nextEl:i,prevEl:o,scrollbarEl:a,paginationEl:s}){const l=r.filter((e=>"children"!==e&&"direction"!==e)),{params:u,pagination:c,navigation:d,scrollbar:h,virtual:f,thumbs:p}=e;let m,g,y,v,_;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(m=!0),r.includes("controller")&&n.controller&&n.controller.control&&u.controller&&!u.controller.control&&(g=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||s)&&(u.pagination||!1===u.pagination)&&c&&!c.el&&(y=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(u.scrollbar||!1===u.scrollbar)&&h&&!h.el&&(v=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||o)&&(n.navigation.nextEl||i)&&(u.navigation||!1===u.navigation)&&d&&!d.prevEl&&!d.nextEl&&(_=!0),l.forEach((t=>{if(ee(u[t])&&ee(n[t]))te(u[t],n[t]);else{const i=n[t];!0!==i&&!1!==i||"navigation"!==t&&"pagination"!==t&&"scrollbar"!==t?u[t]=n[t]:!1===i&&e[r=t]&&(e[r].destroy(),"navigation"===r?(u[r].prevEl=void 0,u[r].nextEl=void 0,e[r].prevEl=void 0,e[r].nextEl=void 0):(u[r].el=void 0,e[r].el=void 0))}var r})),l.includes("controller")&&!g&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),r.includes("children")&&t&&f&&u.virtual.enabled?(f.slides=t,f.update(!0)):r.includes("children")&&e.lazy&&e.params.lazy.enabled&&e.lazy.load(),m&&p.init()&&p.update(!0),g&&(e.controller.control=u.controller.control),y&&(s&&(u.pagination.el=s),c.init(),c.render(),c.update()),v&&(a&&(u.scrollbar.el=a),h.init(),h.updateSize(),h.setTranslate()),_&&(i&&(u.navigation.nextEl=i),o&&(u.navigation.prevEl=o),d.init(),d.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&e.changeDirection(n.direction,!1),e.update()}({swiper:v.current,slides:P,passedParams:M,changedParams:e,nextEl:x.current,prevEl:w.current,scrollbarEl:S.current,paginationEl:E.current}),()=>{C&&v.current&&Object.keys(C).forEach((e=>{v.current.off(e,C[e])}))}})),de((()=>{var e;!(e=v.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[h]),i.createElement(r,pe({ref:y,className:oe(`${c}${n?` ${n}`:""}`)},k),i.createElement(fe.Provider,{value:v.current},A["container-start"],i.createElement(o,{className:"swiper-wrapper"},A["wrapper-start"],T.virtual?function(e,t,n){if(!n)return null;const r=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`};return t.filter(((e,t)=>t>=n.from&&t<=n.to)).map((t=>i.cloneElement(t,{swiper:e,style:r})))}(v.current,P,h):!T.loop||v.current&&v.current.destroyed?P.map((e=>i.cloneElement(e,{swiper:v.current}))):function(e,t,n){const r=t.map(((t,n)=>i.cloneElement(t,{swiper:e,"data-swiper-slide-index":n})));function o(e,t,r){return i.cloneElement(e,{key:`${e.key}-duplicate-${t}-${r}`,className:`${e.props.className||""} ${n.slideDuplicateClass}`})}if(n.loopFillGroupWithBlank){const e=n.slidesPerGroup-r.length%n.slidesPerGroup;if(e!==n.slidesPerGroup)for(let t=0;t<e;t+=1){const e=i.createElement("div",{className:`${n.slideClass} ${n.slideBlankClass}`});r.push(e)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length);const a=se(r,n),s=[],l=[];for(let i=0;i<a;i+=1){const e=i-Math.floor(i/r.length)*r.length;l.push(o(r[e],i,"append")),s.unshift(o(r[r.length-e-1],i,"prepend"))}return e&&(e.loopedSlides=a),[...s,...r,...l]}(v.current,P,T),A["wrapper-end"]),ne(T)&&i.createElement(i.Fragment,null,i.createElement("div",{ref:w,className:"swiper-button-prev"}),i.createElement("div",{ref:x,className:"swiper-button-next"})),ie(T)&&i.createElement("div",{ref:S,className:"swiper-scrollbar"}),re(T)&&i.createElement("div",{ref:E,className:"swiper-pagination"}),A["container-end"]))}));function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}me.displayName="Swiper";const ye=(0,i.forwardRef)((function(e,t){let{tag:n="div",children:r,className:o="",swiper:a,zoom:s,virtualIndex:l,...u}=void 0===e?{}:e;const c=(0,i.useRef)(null),[d,h]=(0,i.useState)("swiper-slide");function f(e,t,n){t===c.current&&h(n)}de((()=>{if(t&&(t.current=c.current),c.current&&a){if(!a.destroyed)return a.on("_slideClass",f),()=>{a&&a.off("_slideClass",f)};"swiper-slide"!==d&&h("swiper-slide")}})),de((()=>{a&&c.current&&!a.destroyed&&h(a.getSlideClasses(c.current))}),[a]);const p={isActive:d.indexOf("swiper-slide-active")>=0||d.indexOf("swiper-slide-duplicate-active")>=0,isVisible:d.indexOf("swiper-slide-visible")>=0,isDuplicate:d.indexOf("swiper-slide-duplicate")>=0,isPrev:d.indexOf("swiper-slide-prev")>=0||d.indexOf("swiper-slide-duplicate-prev")>=0,isNext:d.indexOf("swiper-slide-next")>=0||d.indexOf("swiper-slide-duplicate-next")>=0},m=()=>"function"==typeof r?r(p):r;return i.createElement(n,ge({ref:c,className:oe(`${d}${o?` ${o}`:""}`),"data-swiper-slide-index":l},u),i.createElement(he.Provider,{value:p},s?i.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof s?s:void 0},m()):m()))}));ye.displayName="SwiperSlide";var ve=n(72779),_e=n.n(ve);const be={container:"DD8wf1csn-EP+1B8K+ZOrg==",coldStartSwiperContainer:"_3opntNE6r7qE-MbjDYvYAQ==",swiperContainer:"joKw+U8GUbj86xtZ+sPbqA==",showOverflow:"a2VsJQlvKft461G+-An4wQ==",coldStartSwiper:"J9TW6T4Mqi53hHds1t06qQ==",swiper:"J4iZhy4Q8eegLItMzWo31A==",hideSlideOverflow:"db0P52s+7QxLb-3IF1SVeQ==",leftArrow:"_48xFgLZMKPTs8EeYOHBj2g==",rightArrow:"Zo0mJQBvsnhIo6DTuFCIxA==",subtle:"oRFNzA701lACbqwX7KBf3w==",external:"XAxiJuUSMRY85r5a+Y8RcA=="};var xe=n(17500),we=n(33598),Ee=function(e){return function(t){var n=t.className,i=t.onClick,o=t.uniqueId,a=t.title,s=t.variant;return(0,r.jsx)(we.default,{className:_e()(be["".concat(e,"Arrow")],be[s],n),icon:{Component:xe.default,orientation:e},onClick:function(e){null==e||e.preventDefault(),null==e||e.stopPropagation(),i()},tabIndex:-1,title:a,testId:"".concat(o,"_ArrowButton_").concat(e),size:"subtle"===s?"sm":"md",variant:"subtle"===s?"transparent":"elevated"})}},Se=Ee("left"),Te=Ee("right"),Me=n(19312),ke=n(1560),Ce=function(){return Ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ce.apply(this,arguments)};const Pe=function(e){var t=e.uniqueId,n=e.items,o=e.renderItem,a=e.getItemKey,s=e.className,l=e.loop,u=e.showPaginationDots,c=e.showOverflow,d=e.hideSlideOverflow,h=e.scrollMode,f=e.gap,p=void 0===f?0:f,m=e.itemsPerSlide,g=void 0===m?1:m,y=e.onSlideChange,v=e.onFirstTouch,_=e.arrowStyle,b=void 0===_?"standard":_,x=e.isColdStart,w=e.arrowClassName,E=(0,ke.default)(Me.Z).formattedDefaultMessages,S=E.NAVIGATE_PREV,T=E.NAVIGATE_NEXT,M=n.length>g,k=(0,i.useState)(),C=k[0],P=k[1],A=(0,i.useState)(M&&l),O=A[0],I=A[1],L=(0,i.useState)(M),D=L[0],R=L[1],N=(0,i.useState)(!1),z=N[0],j=N[1],B=function(){M&&(h?(I(!1),R(!1)):l?(I(!0),R(!0)):((null==C?void 0:C.activeIndex)||0)<g?(I(!1),R(!0)):((null==C?void 0:C.activeIndex)||0)+g>=n.length?(I(!0),R(!1)):(I(!0),R(!0)))};(0,i.useEffect)(B,[h]),(0,i.useEffect)((function(){C&&(B(),l&&C.slideTo(1,0),v&&C.once("touchStart",(function(){z||(v(),j(!0))})),C.on("slideChangeTransitionEnd",(function(){B(),v&&!z&&(v(),j(!0)),y&&y(C.realIndex)})))}),[C]);var F=function(){null==C||C.slidePrev()},U=function(){null==C||C.slideNext()},G=[h&&Q,M&&J].filter((function(e){return!!e})),H=(0,i.useMemo)((function(){return M&&u?{isClickable:h,dynamicBullets:!0,dynamicMainBullets:1}:{isClickable:h,renderBullet:function(){return""}}}),[h,M,u]);return(0,r.jsxs)("div",Ce({className:be.container},{children:[(0,r.jsx)("div",Ce({className:_e()(x?be.coldStartSwiperContainer:be.swiperContainer,c&&be.showOverflow,s),tabIndex:M?0:-1,onKeyDown:M?function(e){switch(e.key){case"ArrowLeft":F();break;case"ArrowRight":U()}}:void 0},{children:(0,r.jsx)(me,Ce({className:_e()(x?be.coldStartSwiper:be.swiper,d&&be.hideSlideOverflow),onSwiper:P,modules:G.length?G:void 0,pagination:H||void 0,loop:l,spaceBetween:p,freeMode:h,slidesPerView:g,slidesPerGroup:g,preloadImages:!1},{children:n.map((function(e,t){return(0,r.jsx)(ye,{children:o(e,t)},a(e,t))}))}))})),O?(0,r.jsx)(Se,{className:w,onClick:F,uniqueId:t,title:S,variant:b}):null,D?(0,r.jsx)(Te,{className:w,onClick:U,uniqueId:t,title:T,variant:b}):null]}))}},56186:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(52322),i=n(72779),o=n.n(i),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};const s=function(e){var t=e.children,n=e.href,i=e.openInNewTab,s=void 0!==i&&i,l=e.onClick,u=e.isOverlay,c=e.overlayFocusStyle,d=e.preventFocus,h=e.className,f=e.blockNavigation,p=e.testId,m={tabIndex:d?-1:0,className:o()(d&&"sagzIoNG6AYkb6OwpNutOA==",h,u&&"MAeU7STjXOwFXsjoI5meHg==","offset"===c?"E8W6wpmnshxeFElAofUjoA==":"YUdyXKFWY0YDKYzMi-qVJg=="),href:n,onClick:l?function(e){f&&(e.preventDefault(),e.stopPropagation()),l()}:void 0};return s?(0,r.jsx)("a",a({},m,{target:"_blank",rel:"noreferrer","data-testid":p},{children:t})):(0,r.jsx)("a",a({},m,{"data-testid":p},{children:t}))}},60352:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var r=n(52322),i=n(72779),o=n.n(i),a=n(66877),s=n(58743),l=n(1560),u=n(45548),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},d=(0,a.defineMessages)({COMPLETED:{id:"95stPq",defaultMessage:"Completed"},VERIFIED:{id:"Wmu9zK",defaultMessage:"Verified completed"}});const h=function(e){var t=e.isCompleted,n=void 0!==t&&t,i=e.isVerified,a=void 0!==i&&i,h=e.onClick,f=(0,l.default)(d).formattedDefaultMessages,p=f.COMPLETED,m=f.VERIFIED;if(!n&&!a)return(0,r.jsx)("div",{});var g=o()("xlate-none","+vYC8lLIRZm+SogYeqp13Q=="),y=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.default,{size:"sm",color:s.COLOR_NEUTRAL_WHITE}),a?m:p]});return h?(0,r.jsx)("button",c({className:g,onClick:h,type:"button"},{children:y})):(0,r.jsx)("div",c({className:g},{children:y}))}},74878:(e,t,n)=>{"use strict";n.d(t,{default:()=>p});var r=n(52322),i=n(66877),o=n(58743),a=n(1560),s=n(54624),l=n(58671),u=n(14328),c=n(26529),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)},h=(0,i.defineMessages)({EASY:{id:"6n4LpX",defaultMessage:"Easy"},MODERATE:{id:"difficulty.Moderate",defaultMessage:"Moderate"},HARD:{id:"n8uxry",defaultMessage:"Hard"}}),f=function(e){var t=e.difficulty,n=e.testIdPrefix,i=(0,a.default)(h).formattedDefaultMessages,o=i.EASY,s=i.MODERATE,l=i.HARD,u="".concat(n,"_Difficulty"),c="";return t<3?c=o:t<5?c=s:t<9&&(c=l),(0,r.jsx)("span",d({className:"XjHj2z5HuPNMZefOp5MA5g==","data-testid":u},{children:c}))};const p=function(e){var t=e.difficulty,n=e.rating,i=e.reviewCount,a=e.className,h=e.testIdPrefix,p=(0,c.default)(),m=(0,u.ratingToFormattedRating)(n,p);return(0,r.jsxs)("div",d({className:a,"data-testid":"".concat(h,"_DifficultyAndRating")},{children:[void 0!==t&&t>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{difficulty:t,testIdPrefix:h}),(0,r.jsx)(l.default,{})]}),(0,r.jsx)("span",d({className:"h756AWTsKVloG5O5A6aJFQ=="},{children:(0,r.jsx)(s.default,{size:"sm",color:o.COLOR_UI_HIGHLIGHT})})),(0,r.jsx)("span",d({className:"lwzqbqErqDlQCv5VR6Cw5w==","data-testid":"".concat(h,"_Rating")},{children:m})),(0,r.jsxs)("span",d({className:"C4Aa+9jSPShFuEehAasL9g==","data-testid":"".concat(h,"_ReviewCount")},{children:["(",i,")"]}))]}))}},26227:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(52322),i=n(72779),o=n.n(i),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};const s=function(e){var t=e.className;return(0,r.jsx)("span",a({className:o()("CA5KBrRd2R-qD4j3DMdv4A==",t)},{children:"\u2022"}))}},58671:(e,t,n)=>{"use strict";n.d(t,{default:()=>r.Z});var r=n(26227)},82250:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(52322),i=n(66877),o=n(14328),a=n(58671);const s=function(e){var t=e.languageRegionCode,n=e.meters,s=e.minutes,l=e.showLengthLabel,u=void 0!==l&&l,c=e.useMetric,d=void 0!==c&&c,h=e.decimalPlaces,f=void 0===h?1:h,p=(0,i.useIntl)();return(0,r.jsxs)(r.Fragment,{children:[u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.FormattedMessage,{id:"VIaxwl",defaultMessage:"Length:"})," "]}):null,(0,o.metersToFormattedDistance)(p,t,n,d?"km":"mi",f),s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.default,{}),(0,o.minutesToFormattedTime)(p,s,!0)]}):null]})}},27490:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(52322),i=n(72779),o=n.n(i);const a={container:"iohaujj+kqwp06dfzA7yYg==",wide:"_0WW+pCMvC9UuppsIRfV7Uw==",square:"MBxpuf-7-MLUv6kjwdHjPQ==",zoomPhoto:"gZrg53pY6Tw82bzE6n364A==",image:"Rt-4gJVX5rfa3D2YMUqJGQ=="};var s=n(23382),l=n(24081),u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};const c=function(e){var t=e.uniqueId,n=e.photos,i=e.loadPhotos,c=e.zoomPhoto,d=void 0!==c&&c,h=e.aspectRatio,f=void 0===h?"wide":h,p=e.lazyLoadImages,m=a[f],g=p?"lazy":"eager";return 0===n.length?(0,r.jsx)("div",{className:o()(a.container,m)}):1===n.length?(0,r.jsx)("div",u({className:o()(a.container,m,d&&a.zoomPhoto)},{children:(0,r.jsx)(s.Z,{src:n[0],className:a.image,loading:g})})):(0,r.jsx)(l.default,{className:o()(a.container,m,d&&a.zoomPhoto),uniqueId:t,items:n,renderItem:function(e){return(0,r.jsx)(s.Z,{src:e,className:a.image,loading:g})},getItemKey:function(e,t){return"PhotoCarousel_".concat(t,"_").concat(e)},onFirstTouch:i,arrowStyle:"subtle",loop:!0,showPaginationDots:!0,hideSlideOverflow:!0})}},37346:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(52322),i=n(72779),o=n.n(i),a=n(70408),s=n(56186),l=n(58743),u=n(45548);const c="kKeEC+AyX0Q6jpp5wHcbLg==";var d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const h=function(e){var t=e.isCompleted,n=void 0!==t&&t,i=e.isVerified,o=void 0!==i&&i,a=e.onClick;return n||o?a?(0,r.jsx)("button",d({className:c,onClick:a,type:"button"},{children:(0,r.jsx)(u.default,{size:"sm",color:l.COLOR_INTERACTIVE_DEFAULT})})):(0,r.jsx)("div",d({className:c},{children:(0,r.jsx)(u.default,{size:"sm",color:l.COLOR_INTERACTIVE_DEFAULT})})):(0,r.jsx)("div",{})};var f=n(23382),p=n(20249),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},g=function(e){var t=e.cta;return(0,r.jsx)(p.default,m({onClick:t.onClick,size:"sm"},{children:t.label}))};const y=function(e){var t=e.className,n=e.name,i=e.href,l=e.openInNewTab,u=e.onCardClick,c=e.onCardMouseEnter,d=e.onCardMouseLeave,p=e.metadata,y=e.onFavoriteClick,v=e.isFavorite,_=void 0!==v&&v,b=e.isCompleted,x=void 0!==b&&b,w=e.isVerified,E=void 0!==w&&w,S=e.photo,T=e.footerCTAs,M=e.onCompletionBadgeClick,k=e.blockNavigation,C=e.lazyLoadImages?"lazy":"eager",P=T&&T.length?(0,r.jsx)("div",m({className:"EHJsS7I4qeEyvuaS7en+CA=="},{children:T.map((function(e){return(0,r.jsx)(g,{cta:e},e.label)}))})):null;return(0,r.jsxs)("div",m({className:o()("xlate-none","UztDFFOUINaOcwHzq+lfcA==",t),onMouseEnter:c,onMouseLeave:d,title:n},{children:[(0,r.jsx)(s.default,m({href:i,blockNavigation:k,openInNewTab:l,onClick:u,isOverlay:!0,overlayFocusStyle:"border",testId:"".concat(n,"_OverlayLink")},{children:n})),(0,r.jsxs)("div",m({className:"+SWVVZEhk7oVgcK5+DfAug=="},{children:[(0,r.jsxs)("div",m({className:"IFreTIiYQJ4Ne6RvAPyqVA=="},{children:[(0,r.jsx)("div",m({className:"-JQLKj98hHCxvvcsOWZ2ZA=="},{children:(0,r.jsx)(h,{isCompleted:x,isVerified:E,onClick:M})})),y&&(0,r.jsx)("div",m({className:"uan6cZvHuPTiq-vVNtE8Eg=="},{children:(0,r.jsx)(a.default,{size:"sm",isSelected:_,onClick:y,onWhiteBackground:!0})})),(0,r.jsx)(f.Z,{src:S,className:"_3DMKGUNCrLkaQhXNolA-fA==",loading:C}),(0,r.jsx)("div",m({className:"dwm1TVbQ9R8y5xbkjvrmmQ=="},{children:p}))]})),P]}))]}))}},64812:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(52322),i=n(72779),o=n.n(i),a=n(8156),s=n(70408),l=n(56186),u=n(60352),c=n(27490),d=n(23382),h=n(27616),f=n(58743),p=n(66877),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},g=(0,p.defineMessage)({id:"UMbBzo",defaultMessage:"Move"});const y=function(e){var t=(0,p.useIntl)();return(0,r.jsx)("div",m({},e,{title:t.formatMessage(g),className:o()("Er9ap204Ua+6SM48vAUuSw==","item-move","clickable")},{children:(0,r.jsx)(h.default,{color:f.COLOR_NEUTRAL_WHITE})}))};var v=n(19486),_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_.apply(this,arguments)};const b=function(e){var t=e.className,n=e.name,i=e.href,h=e.openInNewTab,p=e.onCardClick,m=e.onCardMouseEnter,g=e.onCardMouseLeave,b=e.metadata,x=e.onFavoriteClick,w=e.isFavorite,E=void 0!==w&&w,S=e.isCompleted,T=void 0!==S&&S,M=e.isVerified,k=void 0!==M&&M,C=e.dragHandleProps,P=e.deleteButton,A=e.photos,O=e.pinnedPhoto,I=e.loadPhotos,L=e.squarePhoto,D=e.onCompletionBadgeClick,R=e.blockNavigation,N=e.lazyLoadImages,z=!!P,j=(0,a.useState)(!1),B=j[0],F=j[1],U=N?"lazy":"eager",G=(0,a.useMemo)((function(){return C?(0,r.jsx)(y,_({},C)):(0,r.jsx)(u.default,{isCompleted:T,isVerified:k,onClick:D})}),[C,T,k]),H=(0,a.useMemo)((function(){return P?(0,r.jsx)("button",_({className:"MmGOdoTMVv-ZnhfkXRd66w==",onClick:P.onClick,"aria-label":P.title,title:P.title,type:"button"},{children:(0,r.jsx)(v.default,{color:f.COLOR_NEUTRAL_WHITE})})):x?(0,r.jsx)(s.default,{isSelected:E,onClick:x}):null}),[P,E,x]);return(0,r.jsxs)("div",_({className:o()("xlate-none","u0xdvz4b6ogbqwUa8l4H4Q==",t),onMouseEnter:function(){F(!0),m&&m()},onMouseLeave:function(){F(!1),g&&g()}},{children:[(0,r.jsx)(l.default,_({href:i,blockNavigation:R,openInNewTab:h,onClick:p,isOverlay:!0,overlayFocusStyle:"offset",testId:"".concat(n,"_OverlayLink")},{children:n})),(0,r.jsxs)("div",_({className:"N8egiyiTwl3IU72Gf++Cpw=="},{children:[(0,r.jsxs)(l.default,_({href:i,blockNavigation:R,openInNewTab:h,onClick:p,preventFocus:!0},{children:[(0,r.jsx)(c.Z,{photos:z&&A.length?[A[0]]:A,loadPhotos:I,zoomPhoto:!z&&B,uniqueId:n,aspectRatio:L?"square":"wide",lazyLoadImages:N}),O?(0,r.jsx)(d.Z,{src:O,className:"ZukDCKLOK61k2Vvwokp28A==",loading:U}):null]})),z?(0,r.jsx)("div",{className:"nNYSTkMUTiMHwon-ceDBdQ==","data-testid":"StandardCard_Overlay"}):null]})),(0,r.jsxs)("div",_({className:"zKJQtZPqIc3jzqLDPQ2yrw=="},{children:[G,H]})),(0,r.jsx)("div",_({className:"ua-LcjiQC9L-0rciVkPt6Q=="},{children:b}))]}))}},83741:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(52322),i=n(58743),o=n(31814),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s={sm:16,md:24,lg:32},l={up:0,right:90,down:180,left:270};const u=function(e,t,n){return void 0===n&&(n=!1),Object.assign((function(u){var c=u.color,d=void 0===c?i.COLOR_INTERACTIVE_DEFAULT:c,h=u.size,f=void 0===h?"md":h,p=u.orientation,m=void 0===p?0:p,g="".concat(s[f],"px"),y="rotate(".concat("number"==typeof m?m:l[m],"deg)"),v=n?{stroke:d}:{};return(0,r.jsx)("svg",a({className:o.Z.container,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"presentation","aria-hidden":"true",focusable:"false","data-testid":e,style:a({transition:"transform 200ms ease-in-out",transform:y,height:g,width:g,fill:d},v)},{children:t}))}),{iconName:e})}},31522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(52322),i=n(8156),o=n(72779),a=n.n(o);const s={button:"E8Zz5cA6Bp9N81lmDgddbg==",loading:"TnGuRJ+iDxl9eJH1ZCEnUQ==",disabled:"M83WVMOE3d+Ps6ou0xSu0Q==",sm:"xLMgmtaVhNXlRwDvb8sItA==",md:"_61jzXtM9mhmNleWC5EMg8w==",lg:"p3HKVSf0cZwjU9p77YYwAg==",default:"_4gT3K3XQ4s6WMQ8tINtmhA==",elevated:"-8LYHY8sKjZd+CLZxSiOSg==",flat:"VtwHXgCyEQ4qn8ae9mfwHg==",primary:"SiH68RG76eIVBm9yryssRg==",transparent:"zQ+jdpzovsmw7qsY1SM63g=="};var l=n(44450),u=n(45517),c=n(56392),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const h=i.forwardRef((function(e,t){var n=e.className,o=e.disabled,h=e.icon,f=e.linkInfo,p=e.loading,m=e.onBlur,g=e.onClick,y=e.onFocus,v=e.size,_=void 0===v?"md":v,b=e.tabIndex,x=e.testId,w=e.title,E=e.ariaLabel,S=e.type,T=void 0===S?"button":S,M=e.variant,k=void 0===M?"default":M,C=e.stopPropagation,P=void 0!==C&&C,A=(0,i.useMemo)((function(){return function(e){P&&e.stopPropagation(),g&&g(e)}}),[g,P]),O="sm"===_?"sm":"md",I=(0,i.useMemo)((function(){return p&&!o?(0,r.jsx)(c.default,{size:O,testId:"".concat(x,"-loading-spinner")}):(0,r.jsx)(l.default,{icon:h,defaults:{color:"currentColor",size:O}})}),[o,h,O,p,x]),L=a()(n,s.button,s[_],s[k],p&&s.loading,o&&s.disabled);return(0,i.useMemo)((function(){return f?o?(0,r.jsx)("span",d({className:L,title:w,"aria-label":E||w,"data-testid":x,ref:t},{children:I})):(0,r.jsx)(u.default,d({className:L,linkInfo:f,onClick:p?void 0:A,title:w,"aria-label":E||w,testId:x,tabIndex:b,ref:t},{children:I})):(0,r.jsx)("button",d({className:L,onClick:p?void 0:A,onBlur:m,onFocus:y,disabled:o,title:w,"aria-label":E||w,"data-testid":x,type:T,tabIndex:b,ref:t},{children:I}))}),[L,I,o,f,p,m,A,y,t,b,x,w,T])}))},33598:(e,t,n)=>{"use strict";n.d(t,{default:()=>r.Z});var r=n(31522)},44450:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=function(e){var t=e.icon,n=e.defaults;return(0,r.jsx)(t.Component,{color:t.color||n.color,orientation:t.orientation||n.orientation,size:t.size||n.size})}},20249:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var r=n(52322),i=n(72779),o=n.n(i);const a={link:"MbgsHYI4C3t+zgZELSew8Q==",noUnderline:"yMOZ-biRE4fmEWyBLuXyAQ==",sm:"We9bFsEq46k7XAbhKzkONQ==",md:"_2WGfIS7Z0JgCPxX3uhrwlg==",lg:"QRkX-0DBXMbFUbn5SHECDw==",primary:"Jo3L6Dd7RNZhW8n84CYHEw==",secondary:"jSatM+AeiNDAUOwJovEGLg==",inverse:"urHYz-0lyBW8gbsvGMn1kw=="};var s=n(44450),l=n(45517),u=n(26529),c=n(50441),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const h=function(e){var t,n=e.children,i=e.className,h=e.href,f=e.icon,p=e.noUnderline,m=e.onClick,g=e.size,y=e.target,v=e.testId,_=e.variant,b=void 0===_?"primary":_,x=e.rel,w=e.useReactRouter,E=(0,u.default)(),S=o()(i,a.link,g&&a[g],a[b],((t={})[a.noUnderline]=p,t)),T=f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.default,{icon:f,defaults:{color:"currentColor",size:g}}),(0,r.jsx)("span",{children:n})]}):n;if(!h)return(0,r.jsx)("button",d({className:S,onClick:m,"data-testid":v,type:"button"},{children:T}));var M={href:h.startsWith("https://")||h.startsWith("#")||h.startsWith("mailto:")?h:(0,c.wrapUrlSafe)(h,E),target:y,rel:Array.isArray(x)?x:[x],useReactRouter:w};return(0,r.jsx)(l.default,d({className:S,linkInfo:M,onClick:m,testId:v},{children:T}))}},7770:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e,t){var n=e?e.filter((function(e){return!!e})):[];if("_blank"!==t||n.includes("noreferrer")||n.push("noreferrer"),n.length)return n.join(" ")}},45517:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(52322),i=n(8156),o=n(7770),a=n(19807),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};const l=i.forwardRef((function(e,t){var n=e.ariaLabel,i=e.children,l=e.className,u=e.linkInfo,c=e.onBlur,d=e.onClick,h=e.onFocus,f=e.onKeyDown,p=e.role,m=e.tabIndex,g=void 0===m?0:m,y=e.testId,v=e.title,_=u.rel,b=u.target,x=u.href,w=u.useReactRouter,E={className:l,onBlur:c,onClick:d,onFocus:h,onKeyDown:f,role:p,target:b,tabIndex:g,title:v,rel:(0,o.default)(_,b),"aria-label":n};return w?(0,r.jsx)(a.Link,s({to:x,"data-testid":y,ref:t},E,{children:i})):(0,r.jsx)("a",s({href:x,"data-testid":y,ref:t},E,{children:i}))}))},56392:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(52322),i=n(72779),o=n.n(i),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s={sm:16,md:24,lg:32};const l=function(e){var t=e.className,n=e.size,i=void 0===n?"md":n,l=e.testId,u="".concat(s[i],"px");return(0,r.jsxs)("svg",a({className:o()("Yi9ySmWPmUbUfm19jMaQdA==",t),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":"true",focusable:"false","data-testid":l,style:{height:u,width:u,fill:"currentColor"}},{children:[(0,r.jsx)("circle",{opacity:"1",cx:"8",cy:"1.5",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.08",cx:"12.6",cy:"3.4",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.16",cx:"14.5",cy:"8",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.3",cx:"12.6",cy:"12.6",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.44",cx:"8",cy:"14.5",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.58",cx:"3.4",cy:"12.6",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.72",cx:"1.5",cy:"8",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.86",cx:"3.4",cy:"3.4",r:"1.5"})]}))}},58743:(e,t,n)=>{"use strict";n.d(t,{COLOR_BACKGROUND_PRIMARY:()=>o,COLOR_INTERACTIVE_DEFAULT:()=>a,COLOR_NEUTRAL_WHITE:()=>r,COLOR_UI_HIGHLIGHT:()=>i});var r="#ffffff",i="#5de372",o="#ffffff",a="#2b381f"},64187:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8156),i=n(60240);const o=function(e,t,n,o,a){var s=(0,r.useState)([]),l=s[0],u=s[1],c=(0,r.useState)(!1),d=c[0],h=c[1];(0,r.useEffect)((function(){if(o<1)u([]),h(!0);else{var r=(0,i.getCardPhotoUrl)(e,t,0,n,a);if(1===o)u([r]),h(!0);else{var s=Array(o-1).fill("");u(function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([r],s,!0)),h(!1)}}}),[n,o]);var f=(0,r.useCallback)((function(){if(!d){h(!0);var r=l.map((function(r,o){var s=(0,i.getCardPhotoUrl)(e,t,o,n,a);try{(new Image).src=s}catch(e){}return s}));u(r)}}),[a,e,t,l,d,n]);return{photos:l,loadPhotos:f}}},1560:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(66877);const i=function(e){var t=(0,r.useIntl)(),n={};return Object.keys(e).forEach((function(r){var i=e[r].defaultMessage;("string"==typeof i||void 0!==i&&1===i.length)&&(n[r]=t.formatMessage(e[r]))})),{intl:t,formattedDefaultMessages:n,formatMessage:function(n,r,i){return t.formatMessage(e[n],r,i)}}}},88611:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(77880),i=n.n(r);const o=function(e){return i()("(max-width: ".concat(e,"px)"))}},25143:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(46694),i=n(88611);const o=function(){return(0,i.default)(r.Q)}},26529:(e,t,n)=>{"use strict";function r(){var e;return(null===(e=null===n.g||void 0===n.g?void 0:n.g.__AT_DATA__)||void 0===e?void 0:e.languageRegionCode)||"en-US"}n.d(t,{default:()=>r})},88085:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(8156),i=n(60240),o=n(64187);const a=function(e,t,n,a,s,l){var u=(0,o.Z)("trails",e,n,t?s:s-1,l),c=u.photos,d=u.loadPhotos,h=(0,r.useMemo)((function(){return t?c:function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([(0,i.getTrailProfilePhoto)(e,n,a,l)],c,!0)}),[l,c,t,e,n]);return(0,r.useMemo)((function(){return{photos:h,loadPhotos:d}}),[d,h])}},17500:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("arrow-sq",(0,r.jsx)("path",{d:"M4.223 10.956a.75.75 0 0 0 1.06 1.061L11.25 6.05v13.71a.75.75 0 0 0 1.5 0V6.05l5.966 5.967a.75.75 0 0 0 1.061-1.06L12.53 3.708a.746.746 0 0 0-1.06 0l-7.247 7.247Z"}))},96073:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 3a1.5 1.5 0 0 0-1.5 1.5V21a.75.75 0 0 0 1.147.636L12 18.134l5.602 3.502A.75.75 0 0 0 18.75 21V4.5a1.5 1.5 0 0 0-1.5-1.5H6.75Zm0 16.647V4.5h10.5v15.147l-4.852-3.033a.75.75 0 0 0-.796 0L6.75 19.647Z"}))},92753:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark-filled",(0,r.jsx)("path",{d:"M17.25 3H6.75a1.5 1.5 0 0 0-1.5 1.5V21a.76.76 0 0 0 .384.656.713.713 0 0 0 .366.094.74.74 0 0 0 .394-.113L12 18.131l5.597 3.506a.779.779 0 0 0 .769.02.76.76 0 0 0 .384-.657V4.5a1.5 1.5 0 0 0-1.5-1.5Z"}))},58911:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark-overlay",(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4Z",fillOpacity:"0.48"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4ZM6 3C5.44772 3 5 3.44772 5 4V21.1958L11.205 17.3176C11.6914 17.0136 12.3086 17.0136 12.795 17.3176L19 21.1958V4C19 3.44772 18.5523 3 18 3H6Z",fill:"white"})]}))},7768:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("bookmark-overlay-opaque",(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1H18C19.6569 1 21 2.34315 21 4V22.0979C21 23.276 19.7041 23.9943 18.705 23.3699L12 19.1792L5.295 23.3699C4.29592 23.9943 3 23.276 3 22.0979V4ZM6 3C5.44772 3 5 3.44772 5 4V21.1958L11.205 17.3176C11.6914 17.0136 12.3086 17.0136 12.795 17.3176L19 21.1958V4C19 3.44772 18.5523 3 18 3H6Z",fill:"white"})]}))},45548:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("check-filled",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.583 3.893A9.75 9.75 0 0 1 12 2.25 9.769 9.769 0 0 1 21.75 12 9.75 9.75 0 1 1 6.583 3.893Zm10.06 6.4a.75.75 0 0 0-1.036-1.086l-4.985 4.756-2.229-2.13a.75.75 0 1 0-1.036 1.084l2.747 2.625a.75.75 0 0 0 1.036 0l5.503-5.25Z"}))},27616:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("handle",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 8.625a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0Zm6.375 0a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0Zm5.25 1.125a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25ZM6.75 15.375a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0ZM12 16.5a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25Zm7.5-1.125a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0Z"}))},19486:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("remove",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.75 1.5A2.25 2.25 0 0 0 7.5 3.75v.75H3.75a.75.75 0 0 0 0 1.5h.75v13.5A1.5 1.5 0 0 0 6 21h12a1.5 1.5 0 0 0 1.5-1.5V6h.75a.75.75 0 0 0 0-1.5H16.5v-.75a2.25 2.25 0 0 0-2.25-2.25h-4.5Zm5.25 3v-.75a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0-.75.75v.75h6ZM8.25 6H6v13.5h12V6H8.25Zm1.5 3a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-6A.75.75 0 0 1 9.75 9ZM15 15.75v-6a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 1.5 0Z"}))},54624:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("star-filled",(0,r.jsx)("path",{d:"M11.776.454a.25.25 0 0 1 .448 0l3.303 6.692 7.384 1.073a.25.25 0 0 1 .139.426l-5.344 5.21 1.262 7.354a.25.25 0 0 1-.363.264L12 18l-6.605 3.473a.25.25 0 0 1-.363-.264l1.262-7.355L.95 8.645a.25.25 0 0 1 .139-.426l7.384-1.073L11.776.454Z"}))},66877:(e,t,n)=>{"use strict";var r=n(19767);n.o(r,"FormattedMessage")&&n.d(t,{FormattedMessage:function(){return r.FormattedMessage}}),n.o(r,"defineMessage")&&n.d(t,{defineMessage:function(){return r.defineMessage}}),n.o(r,"defineMessages")&&n.d(t,{defineMessages:function(){return r.defineMessages}}),n.o(r,"useIntl")&&n.d(t,{useIntl:function(){return r.useIntl}})},19312:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(19767).defineMessages)({CANCEL:{id:"47FYwb",defaultMessage:"Cancel"},APPLY:{id:"EWw/tK",defaultMessage:"Apply"},CLEAR:{id:"/GCoTA",defaultMessage:"Clear"},SAVE:{id:"jvo0vs",defaultMessage:"Save"},FACEBOOK_SETTINGS:{id:"VZ76LL",defaultMessage:"Facebook settings"},FACEBOOK_LOGIN:{id:"v8vhR2",defaultMessage:"Log in with Facebook"},DISCONNECT_FACEBOOK_LOGIN:{id:"etgsdI",defaultMessage:"Disconnect Log in with Facebook"},USE_FACEBOOK:{id:"aqARlx",defaultMessage:"Use Facebook to log in to AllTrails."},FACEBOOK_FRIENDS:{id:"5W1yLJ",defaultMessage:"Facebook friends"},SYNC_FB_FRIENDS:{id:"j7BVTZ",defaultMessage:"Sync your Facebook friends to connect with AllTrails members you already know."},DISCONNECT:{id:"qj1uhz",defaultMessage:"Disconnect"},DISCONNECT_FACEBOOK:{id:"ao58FP",defaultMessage:"Disconnect Facebook"},ARE_YOU_SURE:{id:"4hDcG5",defaultMessage:"Are you sure you want to disconnect Login with Facebook?"},STOP_SYNC:{id:"kDH5zE",defaultMessage:"Stop syncing friends"},STOP_SYNC_FRIENDS:{id:"HUR7cE",defaultMessage:"Do you also want to stop syncing your Facebook friends?"},REFRESH_FRIENDS_SUBTEXT:{id:"eH9OPQ",defaultMessage:"Refresh your Facebook friends to connect with AllTrails members you already know."},RETRY:{id:"62nsdy",defaultMessage:"Retry"},CLOSE:{id:"rbrahO",defaultMessage:"Close"},NAVIGATE_NEXT:{id:"9wZ+O0",defaultMessage:"Navigate next"},NAVIGATE_PREV:{id:"/u+ovH",defaultMessage:"Navigate previous"},SEE_MORE:{id:"yoLwRW",defaultMessage:"See more"},SEE_LESS:{id:"GZo7vg",defaultMessage:"See less"},CREATE_NEW_LIST:{id:"TLszpS",defaultMessage:"Create new list"},ADD_TO_LIST:{id:"oSGAZt",defaultMessage:"Add to list"},REMOVE_FROM_LIST:{id:"5bOFRX",defaultMessage:"Remove from list"},SEARCH_FOR_A_MEMBER:{id:"cYNAQO",defaultMessage:"Search for a member"},NO_RESULTS:{id:"jHJmjf",defaultMessage:"No results"},AN_APP_FOR_THE_OUTDOORS:{id:"+4Mwvi",defaultMessage:"An app for the outdoors"},LIST_PRIVACY:{id:"ZdcaBc",defaultMessage:"List privacy"},CHOOSE_WHO_CAN_VIEW_THIS_LIST:{id:"0IxcCk",defaultMessage:"Choose who can view this list."},GO_BACK:{id:"orvpWh",defaultMessage:"Go back"}})},22569:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={Danish:"da-DK",Dutch:"nl-NL",English:"en-US",EnglishGB:"en-GB",French:"fr-FR",German:"de-DE",Italian:"it-IT",Norwegian:"nb-NO",Polish:"pl-PL",Portuguese:"pt-PT",PortugueseBrazilian:"pt-BR",Spanish:"es-ES",SpanishLatAm:"es-MX",Swedish:"sv-SE"}},78453:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={Danish:"da-dk",Dutch:"nl-nl",English:"en",EnglishGB:"en-gb",French:"fr",German:"de",Italian:"it-it",Norwegian:"nb-no",Polish:"pl-pl",Portuguese:"pt-pt",PortugueseBrazilian:"pt-br",Spanish:"es",SpanishLatAm:"es-mx",Swedish:"sv-se"}},83840:(e,t,n)=>{"use strict";n.d(t,{PhotoSize:()=>r,staticMapScale:()=>i});var r,i={"512x217":1,"160x160":2,"200x200":2,"320x320":2};!function(e){e.Icon="icon",e.Small="small",e.Medium="medium",e.Large="large",e.ExtraLarge="extra_large",e.SmallSquare="small_square",e.MediumSquare="medium_square",e.LargeSquare="large_square",e.SmallWide="small_wide",e.LargeWide="large_wide",e.LargerWide="larger_wide"}(r||(r={}))},97081:(e,t,n)=>{"use strict";n.d(t,{X_AT_KEY:()=>o});var r,i=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=(function(e){function t(t,n){var r=this.constructor,i=e.call(this,t.statusText)||this;return Object.setPrototypeOf(i,r.prototype),i.headers=t.headers,i.url=t.url,i.status=t.status,i.statusText=t.statusText,i.data=n,i}i(t,e),t.initialize=function(e){var n,r,i,o;return r=this,o=function(){var r,i,o;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(a){switch(a.label){case 0:return r=null===(n=e.headers)||void 0===n?void 0:n.get("content-type"),204===e.status?[2,new t(e,void 0)]:r&&-1!==r.indexOf("application/json")?[4,e.json()]:[3,2];case 1:return i=a.sent(),[2,new t(e,i)];case 2:return[4,e.text()];case 3:o=a.sent();try{return[2,new t(e,JSON.parse(o))]}catch(n){return[2,new t(e,o)]}return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}s((o=o.apply(r,[])).next())}))}}(Error),"3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i")},47831:(e,t,n)=>{"use strict";n.d(t,{getTrailUrl:()=>o,getUrlFromSlug:()=>i});var r=n(50441),i=function(e,t,n){return n?"".concat(t||"").concat((0,r.wrapUrlSafe)(e,n)):"".concat(t,"/").concat(e)},o=function(e,t,n){var i="/trail/".concat(e);return n?"".concat(t||"").concat((0,r.wrapUrlSafe)(i,n)):"".concat(t).concat(i)}},46694:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});var r=640},54321:(e,t,n)=>{"use strict";n.d(t,{getLocale:()=>o,getLocalePrefix:()=>a});var r=n(78453),i=n(22569),o=function(e){var t=Object.values(i.default).indexOf(e),n=Object.keys(i.default)[t];return r.default[n]},a=function(e){return e===i.default.English?"":o(e)};i.default.English,i.default.EnglishGB,i.default.Danish,i.default.German,i.default.Spanish,i.default.SpanishLatAm,i.default.French,i.default.Italian,i.default.Dutch,i.default.Norwegian,i.default.Polish,i.default.PortugueseBrazilian,i.default.Portuguese,i.default.Swedish},83751:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={"en-US":{trail:"trail",trails:"trails","trail/new":"trail/new",parks:"parks",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"en-GB":{trail:"trail",trails:"trails","trail/new":"trail/new",parks:"parks",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"da-DK":{trail:"rute",trails:"ruter","trail/new":"rute/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"de-DE":{trail:"route",trails:"route","trail/new":"route/neue",parks:"parks",cities:"staedte",countries:"countries",regions:"regionen",states:"staaten","national-parks":"nationalparks","state-parks":"naturparks","local-parks":"regionale-parks"},"es-ES":{trail:"ruta",trails:"ruta","trail/new":"ruta/nueva",parks:"parques",cities:"ciudades",countries:"countries",regions:"regiones",states:"estados","national-parks":"parques-nacionales","state-parks":"parques-naturales","local-parks":"parques-locales"},"es-MX":{trail:"ruta",trails:"senderos","trail/new":"ruta/nueva",parks:"parques",cities:"ciudades",countries:"countries",regions:"regiones",states:"estados","national-parks":"parques-nacionales","state-parks":"parques-naturales","local-parks":"parques-locales"},"fr-FR":{trail:"randonnee",trails:"randonnee","trail/new":"randonnee/nouvelle",parks:"parcs",cities:"villes",countries:"countries",regions:"regions",states:"etats","national-parks":"parcs-nationaux","state-parks":"parcs-naturels-regionaux","local-parks":"parcs-locaux"},"it-IT":{trail:"sentiero",trails:"sentieri","trail/new":"sentiero/new",parks:"parchi",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"nl-NL":{trail:"wandelpad",trails:"routes","trail/new":"wandelpad/new",parks:"parken",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"nb-NO":{trail:"sti",trails:"stier","trail/new":"sti/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pl-PL":{trail:"szlak",trails:"szlaki","trail/new":"szlak/new",parks:"parki",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pt-BR":{trail:"trilha",trails:"trilhas","trail/new":"trilha/new",parks:"parques",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pt-PT":{trail:"trilho",trails:"trilhos","trail/new":"trilho/new",parks:"parques",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"sv-SE":{trail:"led",trails:"leder","trail/new":"led/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"}}},14328:(e,t,n)=>{"use strict";n.d(t,{metersToFormattedDistance:()=>l,minutesToFormattedTime:()=>u,ratingToFormattedRating:()=>c});var r=n(22569),i=function(e,t,n){var i=e===r.default.Spanish?r.default.German:e;return t.toLocaleString(i,{minimumFractionDigits:n,maximumFractionDigits:n})},o=function(e){return 3.28084*e},a=function(e){return 621371e-9*e},s=function(e){return e/1e3},l=function(e,t,n,r,l){switch(r){case"mi":return e.formatMessage({id:"kmXVkv",defaultMessage:"{miles} mi"},{miles:i(t,a(n),l)});case"ft":return e.formatMessage({id:"Y+FADI",defaultMessage:"{feet} ft"},{feet:i(t,o(n),l)});case"km":return e.formatMessage({id:"WopFVb",defaultMessage:"{kilometers} km"},{kilometers:i(t,s(n),l)});default:return e.formatMessage({id:"RiGwgn",defaultMessage:"{meters} m"},{meters:i(t,n,l)})}},u=function(e,t,n){void 0===n&&(n=!1);var r,i=t?Math.floor(t/60):0,o=t?t-60*i:0,a=e.formatMessage({id:"minute.abbreviated",defaultMessage:"m"});return r=i>=12?e.formatMessage({id:"LOLF/M",defaultMessage:"Multi-day"}):0===i&&0===o?"0h 0".concat(a):i>0?"".concat(i,"h ").concat(o).concat(a):"".concat(o).concat(a),n?"".concat(e.formatMessage({id:"owDSk8",defaultMessage:"Est."})," ").concat(r):r},c=function(e,t){return i(t,e,1)}},50441:(e,t,n)=>{"use strict";n.d(t,{wrapUrlSafe:()=>a});var r=n(54321),i=n(83751),o=n(22569),a=(n(78453),function(e,t){if(t){var n=(0,r.getLocalePrefix)(t);if(n)return function(e,t){var n=i.default[t];if(t===o.default.English||!n)return e;var a=(0,r.getLocale)(t),s=new RegExp("^\\/".concat(a,"\\/(trail\\/new|trail|parks)($|\\/.*|\\?.*)")),l=e.match(s);return l&&n[l[1]]&&!e.match(/\/(print|photos|edit)($|\?.*)/)?"/".concat(a,"/").concat(n[l[1]]).concat(l[2]):e}("/".concat(n).concat(e),t)}return e})},60240:(e,t,n)=>{"use strict";n.d(t,{getCardPhotoUrl:()=>a,getTrailProfilePhoto:()=>s});var r,i=n(83840),o=n(97081),a=((r={})[i.PhotoSize.Small]={fit:"inside",dimensions:[100,100]},r[i.PhotoSize.Medium]={fit:"inside",dimensions:[200,200]},r[i.PhotoSize.Large]={fit:"inside",dimensions:[500,500]},r[i.PhotoSize.ExtraLarge]={fit:"inside",dimensions:[2048,2048]},r[i.PhotoSize.Icon]={fit:"cover",dimensions:[50,50]},r[i.PhotoSize.SmallSquare]={fit:"cover",dimensions:[80,80]},r[i.PhotoSize.MediumSquare]={fit:"cover",dimensions:[120,120]},r[i.PhotoSize.LargeSquare]={fit:"cover",dimensions:[160,160]},r[i.PhotoSize.SmallWide]={fit:"cover",dimensions:[160,120]},r[i.PhotoSize.LargeWide]={fit:"cover",dimensions:[800,300]},r[i.PhotoSize.LargerWide]={fit:"cover",dimensions:[1080,700]},function(e,t,n,r,a){return void 0===r&&(r=i.PhotoSize.Large),void 0===a&&(a=""),"".concat(a,"/api/alltrails/v2/").concat(e,"/").concat(t,"/photos/").concat(n,"?size=").concat(r,"&key=").concat(o.X_AT_KEY)}),s=function(e,t,n,r){return void 0===r&&(r=""),"".concat(r,"/api/alltrails/v3/trails/").concat(e,"/profile_photo?show_placeholder=no&size=").concat(t,"&static_map_size=").concat(n,"&static_map_scale=").concat(i.staticMapScale[n],"&key=").concat(o.X_AT_KEY)}},77880:t=>{"use strict";t.exports=e},8156:e=>{"use strict";e.exports=t},19767:e=>{"use strict";e.exports=n},56128:e=>{"use strict";e.exports=r}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return i[e].call(n.exports,n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";a.r(s),a.d(s,{default:()=>k});var e=a(52322),t=a(83840),n=a(88085),r=a(37346),i=a(64812),o=a(72779),l=a.n(o),u=a(8156),c=a(70408),d=a(38785),h=a(56186),f=a(60352),p=a(27490),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)};const g=function(t){var n=t.className,r=t.name,i=t.href,o=t.openInNewTab,a=t.onCardClick,s=t.onCardMouseEnter,g=t.onCardMouseLeave,y=t.metadata,v=t.onFavoriteClick,_=t.isFavorite,b=void 0!==_&&_,x=t.isCompleted,w=void 0!==x&&x,E=t.isVerified,S=void 0!==E&&E,T=t.photos,M=t.loadPhotos,k=t.description,C=t.onCompletionBadgeClick,P=t.blockNavigation,A=t.lazyLoadImages,O=(0,u.useState)(!1),I=O[0],L=O[1];return(0,e.jsxs)("div",m({className:l()("xlate-none","_6oPxMj1DEAlxw6nLtP5ggg==",n),onMouseEnter:function(){L(!0),s&&s()},onMouseLeave:function(){L(!1),g&&g()}},{children:[(0,e.jsx)(h.default,m({href:i,openInNewTab:o,onClick:a,blockNavigation:P,isOverlay:!0,overlayFocusStyle:"offset",testId:"".concat(r,"_OverlayLink")},{children:r})),(0,e.jsx)("div",m({className:"jmi4ocZBUaOa9vAZPCSCSA=="},{children:(0,e.jsx)(h.default,m({href:i,openInNewTab:o,onClick:a,blockNavigation:P,preventFocus:!0},{children:(0,e.jsx)(p.Z,{photos:T,loadPhotos:M,zoomPhoto:I,uniqueId:r,lazyLoadImages:A})}))})),(0,e.jsx)("div",m({className:"em-nin9wYvptmhFp5+QNSQ=="},{children:(0,e.jsx)(f.default,{isCompleted:w,isVerified:S,onClick:C})})),v&&(0,e.jsx)("div",m({className:"FO5i6fC2qSLdUnXSKUov2g=="},{children:(0,e.jsx)(c.default,{isSelected:b,onClick:v,onWhiteBackground:!0})})),(0,e.jsxs)("div",m({className:"-weRf+lnVh8TlRwQ402g8w=="},{children:[(0,e.jsx)("div",m({className:"Gn7HmIuztxW1tMpA1p+fyA=="},{children:y})),(0,e.jsx)(d.default,{text:k,maxLines:2,className:"kpLC00UqW1H317x3jZVbLw==",preventExpansion:!0})]}))]}))};var y=a(74878);const v={wide:"_6ADu0-edGGYRl43xagceFg==",title:"+EPb2CygFldz3zgQlRScTw==",truncating:"qB0NLl6ugCxEGpNhNfftdg==",rating:"_2cpo4-zIgp0hg5dm3QSuAw==",stats:"Mdzeb8h2PTA6mFDVRrAXqg==",link:"FeN09tTLRWzcvnAx7iliJw=="};var _=a(20249),b=a(47831),x=a(82250),w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},w.apply(this,arguments)};const E=function(t){var n=t.variant,r=t.trail,i=t.languageRegionCode,o=t.useMetric,a=t.decimalPlaces,s=void 0===a?1:a,u=t.openInNewTab,c=t.baseUrl,d=t.displayRank,h=r.difficulty,f=r.rating,p=r.reviewCount,m=r.name,g=r.locationName,E=r.locationSlug,S=r.minutes,T=r.meters,M="TrailCard_".concat(m),k=E?(0,e.jsx)(_.default,w({className:v.link,size:"sm",variant:"secondary",href:(0,b.getUrlFromSlug)(E,c),testId:"".concat(M,"_Location_Link"),target:u?"_blank":void 0,rel:u?"noreferrer":void 0},{children:g})):g,C=d?"#".concat(d," - ").concat(m):m;return(0,e.jsxs)("div",w({className:v[n]},{children:[(0,e.jsx)(y.default,{className:l()(v.truncating,v.rating),difficulty:h,rating:f,reviewCount:p,testIdPrefix:M}),(0,e.jsx)("div",w({className:v.title,"data-testid":"".concat(M,"_Title")},{children:C})),(0,e.jsx)("div",w({className:v.truncating,"data-testid":"".concat(M,"_Location")},{children:k})),(0,e.jsx)("div",w({className:v.stats,"data-testid":"".concat(M,"_Stats")},{children:(0,e.jsx)(x.Z,{languageRegionCode:i,meters:T,minutes:S,useMetric:o,decimalPlaces:s,showLengthLabel:"small"!==n})}))]}))};var S=a(25143),T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},T.apply(this,arguments)},M=function(e,n){switch(e){case"small":return t.PhotoSize.LargeSquare;case"feed":return n?t.PhotoSize.LargerWide:t.PhotoSize.ExtraLarge;default:return t.PhotoSize.LargerWide}};const k=function(t){var o=t.className,a=t.variant,s=t.trail,l=t.url,u=t.languageRegionCode,c=t.onCardClick,d=t.onCardMouseEnter,h=t.onCardMouseLeave,f=t.onFavoriteClick,p=t.isFavorite,m=t.isCompleted,y=t.isVerified,v=t.openInNewTab,_=t.useMetric,x=t.decimalPlaces,w=void 0===x?1:x,k=t.maxPhotos,C=void 0===k?6:k,P=t.baseUrl,A=void 0===P?"":P,O=t.dragHandleProps,I=t.deleteButton,L=t.footerCTAs,D=t.onCompletionBadgeClick,R=t.metadata,N=t.displayRank,z=t.blockNavigation,j=t.lazyLoadImages,B=s.name,F=s.slug,U=s.id,G=s.description,H=l||(0,b.getTrailUrl)(F,A,u),V=(0,S.default)(),q=(0,n.default)(U,s.hasProfilePhoto,M(a,V),function(e){return"small"===e?"160x160":"320x320"}(a),function(e,t){return"small"===e?1:Math.min(t,6)}(a,C),A),$=q.photos,W=q.loadPhotos,Z={className:o,name:B,href:H,openInNewTab:v,metadata:R||(0,e.jsx)(E,{variant:a,trail:s,languageRegionCode:u,useMetric:_,decimalPlaces:w,baseUrl:A,openInNewTab:v,displayRank:N}),onCardClick:c,onCardMouseEnter:function(){W(),d&&d()},onCardMouseLeave:h,onFavoriteClick:f,isFavorite:p,isCompleted:m,isVerified:y,onCompletionBadgeClick:D,blockNavigation:z,lazyLoadImages:j};switch(a){case"small":return(0,e.jsx)(r.Z,T({},Z,{photo:$[0],footerCTAs:L}));case"wide":return(0,e.jsx)(g,T({},Z,{photos:$,loadPhotos:W,description:G}));default:return(0,e.jsx)(i.Z,T({},Z,{photos:$,loadPhotos:W,dragHandleProps:O,deleteButton:I}))}}})(),s})(),e.exports=r(n(63362),n(67294),n(21038),n(32675))},64372:function(e,t,n){var r;r=(e,t)=>(()=>{var n={72779:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},37320:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},11837:(e,t,n)=>{"use strict";n(37320);var r=n(8156),i=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},52322:(e,t,n)=>{"use strict";e.exports=n(11837)},37006:(e,t,n)=>{"use strict";n(52322),n(56128)},19807:(e,t,n)=>{"use strict";n(37006);var r=n(56128);n.o(r,"Link")&&n.d(t,{Link:function(){return r.Link}})},44450:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=function(e){var t=e.icon,n=e.defaults;return(0,r.jsx)(t.Component,{color:t.color||n.color,orientation:t.orientation||n.orientation,size:t.size||n.size})}},7770:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e,t){var n=e?e.filter((function(e){return!!e})):[];if("_blank"!==t||n.includes("noreferrer")||n.push("noreferrer"),n.length)return n.join(" ")}},45517:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(52322),i=n(8156),o=n(7770),a=n(19807),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};const l=i.forwardRef((function(e,t){var n=e.ariaLabel,i=e.children,l=e.className,u=e.linkInfo,c=e.onBlur,d=e.onClick,h=e.onFocus,f=e.onKeyDown,p=e.role,m=e.tabIndex,g=void 0===m?0:m,y=e.testId,v=e.title,_=u.rel,b=u.target,x=u.href,w=u.useReactRouter,E={className:l,onBlur:c,onClick:d,onFocus:h,onKeyDown:f,role:p,target:b,tabIndex:g,title:v,rel:(0,o.default)(_,b),"aria-label":n};return w?(0,r.jsx)(a.Link,s({to:x,"data-testid":y,ref:t},E,{children:i})):(0,r.jsx)("a",s({href:x,"data-testid":y,ref:t},E,{children:i}))}))},12530:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(52322),i=n(72779),o=n.n(i),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};const s=function(e){var t=e.className,n=e.testId;return(0,r.jsxs)("div",a({className:o()("_2b61qqSUlJb6S-W-rq5rfQ==",t),"data-testid":n},{children:[(0,r.jsx)("div",{className:"KkmnJ4nu24xkEicyGSF00w=="}),(0,r.jsx)("div",{className:"PInduI8FvHySbFwN9-N1lA=="}),(0,r.jsx)("div",{className:"NFIbjag8-kHXcQReTr9Bfw=="})]}))}},8156:t=>{"use strict";t.exports=e},56128:e=>{"use strict";e.exports=t}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";i.r(o),i.d(o,{default:()=>d});var e=i(52322),t=i(8156),n=i(72779),r=i.n(n);const a={button:"GiyqJKhU9Wi22cfIGuPzKA==",loading:"GLr+ZLYrAlPNzGD+otwuLA==",disabled:"fx7juoq+py5ls1FWbkQR-A==",sm:"_4HebrTipXXwDvMQLAEjvJg==",hasIcon:"am7WJtI3+o6ePyAoP8djSA==",md:"wP2SH2JrfFE589d9aAJxGA==",lg:"Ot7LYYfsL-zPS0EeJRE2rQ==",full:"DLwjKUXnlKlmbMUGV5EeQw==",fullOnMobile:"OmaR32UuPTufA2xVBi6Bgg==",default:"yInh8YFKk+PYfGixnBuVOg==",destructive:"a1SQCn6DFU2CScYEK-hJnA==",elevated:"Pixxv-46x50fF9gWNH9JYQ==",flat:"fzyDAevJk-K6dtYWFAKINg==",inverse:"vpI3HUw1k2QWEU2k1evWyg==",primary:"q4PKlCIJK6EpJIZLpeiCHg==",accent:"Bj7nKCKV6SFF4MGBb9BJ0g==",loadingDots:"rRVEdUPmGCV73U-laUlpQA==",allowWrap:"SfZgpMRVHiYD-YEAFI1jeg==",link:"_07dmR+9fIQ3+YOEn1ZYN2A=="};var s=i(44450),l=i(45517),u=i(12530),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)};const d=t.forwardRef((function(t,n){var i=t.className,o=t.disabled,d=t.icon,h=t.linkInfo,f=t.loading,p=t.onClick,m=t.size,g=void 0===m?"md":m,y=t.testId,v=t.text,_=t.title,b=t.type,x=void 0===b?"button":b,w=t.variant,E=void 0===w?"default":w,S=t.width,T=void 0===S?"auto":S,M=t.allowWrap,k=void 0!==M&&M,C=t.stopPropagation,P=void 0!==C&&C,A=function(e){P&&e.stopPropagation(),p&&p(e)},O=d?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.default,{icon:d,defaults:{color:"currentColor",size:"sm"===g?"sm":"md"}}),(0,e.jsx)("span",{children:v})]}):(0,e.jsx)("span",{children:v}),I=r()(i,a.button,a[g],a[E],a[T],d&&a.hasIcon,o&&a.disabled,f&&a.loading,k&&a.allowWrap,h&&!o&&a.link);return h?o?(0,e.jsx)("span",c({className:I,"data-testid":y,ref:n,title:_},{children:O})):(0,e.jsxs)(l.default,c({className:I,linkInfo:h,onClick:f?void 0:A,testId:y,title:_,ref:n},{children:[O,f&&!o?(0,e.jsx)(u.default,{testId:"".concat(y,"-loading-dots")}):null]})):(0,e.jsxs)("button",c({className:I,onClick:f?void 0:A,disabled:o,"data-testid":y,title:_,type:x,ref:n},{children:[O,f&&!o?(0,e.jsx)(u.default,{className:a.loadingDots,testId:"".concat(y,"-loading-dots")}):null]}))}))})(),o})(),e.exports=r(n(67294),n(32675))},4112:function(e,t,n){var r;r=(e,t)=>(()=>{var n={72779:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},37320:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},11837:(e,t,n)=>{"use strict";n(37320);var r=n(8156),i=60103;if("function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},52322:(e,t,n)=>{"use strict";e.exports=n(11837)},37006:(e,t,n)=>{"use strict";n(52322),n(56128)},19807:(e,t,n)=>{"use strict";n(37006);var r=n(56128);n.o(r,"Link")&&n.d(t,{Link:function(){return r.Link}})},31522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(52322),i=n(8156),o=n(72779),a=n.n(o);const s={button:"E8Zz5cA6Bp9N81lmDgddbg==",loading:"TnGuRJ+iDxl9eJH1ZCEnUQ==",disabled:"M83WVMOE3d+Ps6ou0xSu0Q==",sm:"xLMgmtaVhNXlRwDvb8sItA==",md:"_61jzXtM9mhmNleWC5EMg8w==",lg:"p3HKVSf0cZwjU9p77YYwAg==",default:"_4gT3K3XQ4s6WMQ8tINtmhA==",elevated:"-8LYHY8sKjZd+CLZxSiOSg==",flat:"VtwHXgCyEQ4qn8ae9mfwHg==",primary:"SiH68RG76eIVBm9yryssRg==",transparent:"zQ+jdpzovsmw7qsY1SM63g=="};var l=n(44450),u=n(45517),c=n(56392),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const h=i.forwardRef((function(e,t){var n=e.className,o=e.disabled,h=e.icon,f=e.linkInfo,p=e.loading,m=e.onBlur,g=e.onClick,y=e.onFocus,v=e.size,_=void 0===v?"md":v,b=e.tabIndex,x=e.testId,w=e.title,E=e.ariaLabel,S=e.type,T=void 0===S?"button":S,M=e.variant,k=void 0===M?"default":M,C=e.stopPropagation,P=void 0!==C&&C,A=(0,i.useMemo)((function(){return function(e){P&&e.stopPropagation(),g&&g(e)}}),[g,P]),O="sm"===_?"sm":"md",I=(0,i.useMemo)((function(){return p&&!o?(0,r.jsx)(c.default,{size:O,testId:"".concat(x,"-loading-spinner")}):(0,r.jsx)(l.default,{icon:h,defaults:{color:"currentColor",size:O}})}),[o,h,O,p,x]),L=a()(n,s.button,s[_],s[k],p&&s.loading,o&&s.disabled);return(0,i.useMemo)((function(){return f?o?(0,r.jsx)("span",d({className:L,title:w,"aria-label":E||w,"data-testid":x,ref:t},{children:I})):(0,r.jsx)(u.default,d({className:L,linkInfo:f,onClick:p?void 0:A,title:w,"aria-label":E||w,testId:x,tabIndex:b,ref:t},{children:I})):(0,r.jsx)("button",d({className:L,onClick:p?void 0:A,onBlur:m,onFocus:y,disabled:o,title:w,"aria-label":E||w,"data-testid":x,type:T,tabIndex:b,ref:t},{children:I}))}),[L,I,o,f,p,m,A,y,t,b,x,w,T])}))},44450:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=function(e){var t=e.icon,n=e.defaults;return(0,r.jsx)(t.Component,{color:t.color||n.color,orientation:t.orientation||n.orientation,size:t.size||n.size})}},7770:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e,t){var n=e?e.filter((function(e){return!!e})):[];if("_blank"!==t||n.includes("noreferrer")||n.push("noreferrer"),n.length)return n.join(" ")}},45517:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(52322),i=n(8156),o=n(7770),a=n(19807),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};const l=i.forwardRef((function(e,t){var n=e.ariaLabel,i=e.children,l=e.className,u=e.linkInfo,c=e.onBlur,d=e.onClick,h=e.onFocus,f=e.onKeyDown,p=e.role,m=e.tabIndex,g=void 0===m?0:m,y=e.testId,v=e.title,_=u.rel,b=u.target,x=u.href,w=u.useReactRouter,E={className:l,onBlur:c,onClick:d,onFocus:h,onKeyDown:f,role:p,target:b,tabIndex:g,title:v,rel:(0,o.default)(_,b),"aria-label":n};return w?(0,r.jsx)(a.Link,s({to:x,"data-testid":y,ref:t},E,{children:i})):(0,r.jsx)("a",s({href:x,"data-testid":y,ref:t},E,{children:i}))}))},56392:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(52322),i=n(72779),o=n.n(i),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s={sm:16,md:24,lg:32};const l=function(e){var t=e.className,n=e.size,i=void 0===n?"md":n,l=e.testId,u="".concat(s[i],"px");return(0,r.jsxs)("svg",a({className:o()("Yi9ySmWPmUbUfm19jMaQdA==",t),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":"true",focusable:"false","data-testid":l,style:{height:u,width:u,fill:"currentColor"}},{children:[(0,r.jsx)("circle",{opacity:"1",cx:"8",cy:"1.5",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.08",cx:"12.6",cy:"3.4",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.16",cx:"14.5",cy:"8",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.3",cx:"12.6",cy:"12.6",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.44",cx:"8",cy:"14.5",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.58",cx:"3.4",cy:"12.6",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.72",cx:"1.5",cy:"8",r:"1.5"}),(0,r.jsx)("circle",{opacity:"0.86",cx:"3.4",cy:"3.4",r:"1.5"})]}))}},8156:t=>{"use strict";t.exports=e},56128:e=>{"use strict";e.exports=t}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";i.r(o),i.d(o,{default:()=>e.Z});var e=i(31522)})(),o})(),e.exports=r(n(67294),n(32675))},18754:function(e){e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{BORDERS_WEIGHT_LG:()=>i,BORDERS_WEIGHT_MD:()=>r,BORDERS_WEIGHT_SM:()=>n,BREAKPOINT_LG_MARGIN:()=>wr,BREAKPOINT_LG_SIZE:()=>xr,BREAKPOINT_MD_MARGIN:()=>br,BREAKPOINT_MD_SIZE:()=>_r,BREAKPOINT_SM_MARGIN:()=>vr,BREAKPOINT_SM_SIZE:()=>yr,BREAKPOINT_XS_MARGIN:()=>gr,BREAKPOINT_XS_SIZE:()=>mr,COLOR_BACKGROUND_ACCENT_BASE:()=>ue,COLOR_BACKGROUND_ACCENT_STRONG:()=>ce,COLOR_BACKGROUND_ACCENT_WEAK:()=>le,COLOR_BACKGROUND_CAUTION_BASE:()=>oe,COLOR_BACKGROUND_CAUTION_WEAK:()=>ie,COLOR_BACKGROUND_DISABLED:()=>K,COLOR_BACKGROUND_ERROR_BASE:()=>re,COLOR_BACKGROUND_ERROR_WEAK:()=>ne,COLOR_BACKGROUND_INFO_BASE:()=>se,COLOR_BACKGROUND_INFO_WEAK:()=>ae,COLOR_BACKGROUND_INVERSE:()=>de,COLOR_BACKGROUND_PLUS:()=>J,COLOR_BACKGROUND_PLUS_SECONDARY:()=>Q,COLOR_BACKGROUND_PRIMARY:()=>W,COLOR_BACKGROUND_PRIMARY_HOVER:()=>Z,COLOR_BACKGROUND_PRIMARY_INVERSE_OVERLAY:()=>fe,COLOR_BACKGROUND_PRIMARY_OVERLAY:()=>he,COLOR_BACKGROUND_SECONDARY:()=>X,COLOR_BACKGROUND_SECONDARY_HOVER:()=>Y,COLOR_BACKGROUND_SUCCESS_BASE:()=>te,COLOR_BACKGROUND_SUCCESS_WEAK:()=>ee,COLOR_BADGE_COMPLETE:()=>Fe,COLOR_BADGE_VERIFIED:()=>Ue,COLOR_BLUE_100:()=>Et,COLOR_BLUE_300:()=>St,COLOR_BLUE_700:()=>Tt,COLOR_BLUE_900:()=>Mt,COLOR_BLUE_BASE:()=>kt,COLOR_BORDER_DISABLED:()=>_e,COLOR_BORDER_ERROR:()=>be,COLOR_BORDER_FOCUS_DEFAULT:()=>we,COLOR_BORDER_FOCUS_PRIMARY:()=>xe,COLOR_BORDER_INTERACTIVE:()=>me,COLOR_BORDER_INTERACTIVE_ACCENT:()=>ge,COLOR_BORDER_INTERACTIVE_ACTIVE:()=>ye,COLOR_BORDER_INTERACTIVE_HOVER:()=>ve,COLOR_BORDER_SEPARATOR:()=>pe,COLOR_BRAND_CREAM:()=>ot,COLOR_BRAND_DARK:()=>rt,COLOR_BRAND_DARKEST:()=>ct,COLOR_BRAND_LAVENDER:()=>st,COLOR_BRAND_LIGHT:()=>dt,COLOR_BRAND_NEON:()=>it,COLOR_BRAND_PEACH:()=>at,COLOR_BRAND_PLUS_DARK:()=>ut,COLOR_BRAND_PLUS_LIGHT:()=>lt,COLOR_BRAND_PRIMARY:()=>nt,COLOR_BRAND_PRO:()=>ht,COLOR_DATAVIZ_1:()=>Ye,COLOR_DIFFICULTY_EASY:()=>Ie,COLOR_DIFFICULTY_HARD:()=>De,COLOR_DIFFICULTY_MODERATE:()=>Le,COLOR_GREEN_100:()=>ft,COLOR_GREEN_300:()=>pt,COLOR_GREEN_700:()=>mt,COLOR_GREEN_900:()=>gt,COLOR_GREEN_BASE:()=>yt,COLOR_INTERACTIVE_ACCENT:()=>Se,COLOR_INTERACTIVE_ACCENT_HOVER:()=>Ce,COLOR_INTERACTIVE_DEFAULT:()=>Me,COLOR_INTERACTIVE_DEFAULT_HOVER:()=>Ae,COLOR_INTERACTIVE_PRIMARY:()=>Te,COLOR_INTERACTIVE_PRIMARY_HOVER:()=>Pe,COLOR_INTERACTIVE_SUBTLE:()=>ke,COLOR_INTERACTIVE_SUBTLE_HOVER:()=>Oe,COLOR_MAP_ACTIVITY:()=>Ve,COLOR_MAP_ACTIVITY_OUTLINE:()=>qe,COLOR_MAP_CUSTOM_ROUTE_1:()=>$e,COLOR_MAP_CUSTOM_ROUTE_2:()=>We,COLOR_MAP_CUSTOM_ROUTE_3:()=>Ze,COLOR_MAP_CUSTOM_ROUTE_4:()=>Xe,COLOR_MAP_ROUTE:()=>Ge,COLOR_MAP_ROUTE_OUTLINE:()=>He,COLOR_NEUTRAL_100:()=>a,COLOR_NEUTRAL_100_A:()=>y,COLOR_NEUTRAL_200:()=>s,COLOR_NEUTRAL_200_A:()=>v,COLOR_NEUTRAL_300:()=>l,COLOR_NEUTRAL_300_A:()=>_,COLOR_NEUTRAL_400:()=>u,COLOR_NEUTRAL_400_A:()=>b,COLOR_NEUTRAL_50:()=>o,COLOR_NEUTRAL_500:()=>c,COLOR_NEUTRAL_500_A:()=>x,COLOR_NEUTRAL_50_A:()=>g,COLOR_NEUTRAL_600:()=>d,COLOR_NEUTRAL_600_A:()=>w,COLOR_NEUTRAL_700:()=>h,COLOR_NEUTRAL_700_A:()=>E,COLOR_NEUTRAL_800:()=>f,COLOR_NEUTRAL_800_A:()=>S,COLOR_NEUTRAL_900:()=>p,COLOR_NEUTRAL_900_A:()=>T,COLOR_NEUTRAL_950:()=>m,COLOR_NEUTRAL_BLACK:()=>k,COLOR_NEUTRAL_TRANSPARENT:()=>C,COLOR_NEUTRAL_WHITE:()=>M,COLOR_ORANGE_100:()=>Rt,COLOR_ORANGE_300:()=>Nt,COLOR_ORANGE_BASE:()=>zt,COLOR_PLUS_100:()=>jt,COLOR_PLUS_300:()=>Bt,COLOR_PLUS_500:()=>Ft,COLOR_PLUS_600:()=>Ut,COLOR_PLUS_700:()=>Gt,COLOR_PLUS_900:()=>Ht,COLOR_PURPLE_100:()=>Lt,COLOR_PURPLE_BASE:()=>Dt,COLOR_RED_100:()=>vt,COLOR_RED_300:()=>_t,COLOR_RED_700:()=>bt,COLOR_RED_900:()=>xt,COLOR_RED_BASE:()=>wt,COLOR_SCRIM_DARK:()=>Je,COLOR_SCRIM_LIGHT:()=>Ke,COLOR_SHADOW:()=>Ee,COLOR_TEXT_CAUTION:()=>j,COLOR_TEXT_DISABLED:()=>D,COLOR_TEXT_ERROR:()=>N,COLOR_TEXT_INFO:()=>B,COLOR_TEXT_LINK_INVERSE:()=>q,COLOR_TEXT_LINK_INVERSE_HOVER:()=>$,COLOR_TEXT_LINK_PRIMARY:()=>U,COLOR_TEXT_LINK_PRIMARY_HOVER:()=>G,COLOR_TEXT_LINK_SECONDARY:()=>H,COLOR_TEXT_LINK_SECONDARY_HOVER:()=>V,COLOR_TEXT_PLACEHOLDER:()=>R,COLOR_TEXT_PLUS:()=>F,COLOR_TEXT_PRIMARY:()=>O,COLOR_TEXT_PRIMARY_INVERSE:()=>L,COLOR_TEXT_SECONDARY:()=>I,COLOR_TEXT_SUCCESS:()=>z,COLOR_UI_HIGHLIGHT:()=>P,COLOR_UI_HIGHLIGHT_HOVER:()=>A,COLOR_UV_1:()=>Re,COLOR_UV_2:()=>Ne,COLOR_UV_3:()=>ze,COLOR_UV_4:()=>je,COLOR_UV_5:()=>Be,COLOR_VENDOR_APPLE:()=>tt,COLOR_VENDOR_FACEBOOK:()=>Qe,COLOR_VENDOR_GOOGLE:()=>et,COLOR_YELLOW_100:()=>Ct,COLOR_YELLOW_300:()=>Pt,COLOR_YELLOW_700:()=>At,COLOR_YELLOW_900:()=>Ot,COLOR_YELLOW_BASE:()=>It,FONT_FAMILY_PRIMARY:()=>Vt,FONT_FAMILY_SECONDARY:()=>qt,FONT_LINE_HEIGHT_DEFAULT:()=>Xt,FONT_LINE_HEIGHT_LOOSE:()=>Zt,FONT_LINE_HEIGHT_TIGHT:()=>Yt,FONT_SIZE_100:()=>Jt,FONT_SIZE_200:()=>Qt,FONT_SIZE_300:()=>en,FONT_SIZE_400:()=>tn,FONT_SIZE_400_RESPONSIVE:()=>an,FONT_SIZE_50:()=>Kt,FONT_SIZE_500:()=>nn,FONT_SIZE_500_RESPONSIVE:()=>sn,FONT_SIZE_600:()=>rn,FONT_SIZE_600_RESPONSIVE:()=>ln,FONT_SIZE_700:()=>on,FONT_SIZE_700_RESPONSIVE:()=>un,FONT_WEIGHT_BOLD:()=>Wt,FONT_WEIGHT_NORMAL:()=>$t,GRID_PAGE_MAX_WIDTH:()=>pr,GUIDE_BLACKFOREST_BACKGROUND:()=>er,GUIDE_BLACKFOREST_BLOCKQUOTE:()=>tr,GUIDE_BROWN_BACKGROUND:()=>ar,GUIDE_BROWN_BLOCKQUOTE:()=>sr,GUIDE_EVERGREEN_BACKGROUND:()=>nr,GUIDE_EVERGREEN_BLOCKQUOTE:()=>rr,GUIDE_GOLDENROD_BACKGROUND:()=>lr,GUIDE_GOLDENROD_BLOCKQUOTE:()=>ur,GUIDE_MAROON_BACKGROUND:()=>ir,GUIDE_MAROON_BLOCKQUOTE:()=>or,GUIDE_MIDNIGHT_BACKGROUND:()=>hr,GUIDE_MIDNIGHT_BLOCKQUOTE:()=>fr,GUIDE_REDWOOD_BACKGROUND:()=>cr,GUIDE_REDWOOD_BLOCKQUOTE:()=>dr,HEADER_SIZE_HEIGHT_DESKTOP:()=>Er,HEADER_SIZE_HEIGHT_MOBILE:()=>Sr,RADIUS_CARD:()=>yn,RADIUS_DRAWER:()=>gn,RADIUS_LG:()=>fn,RADIUS_MD:()=>hn,RADIUS_NONE:()=>cn,RADIUS_ROUND:()=>mn,RADIUS_SM:()=>dn,RADIUS_XL:()=>pn,SHADOW_LG_RADIUS:()=>Cn,SHADOW_LG_SPREAD:()=>Pn,SHADOW_LG_X:()=>Mn,SHADOW_LG_Y:()=>kn,SHADOW_MD_RADIUS:()=>Sn,SHADOW_MD_SPREAD:()=>Tn,SHADOW_MD_X:()=>wn,SHADOW_MD_Y:()=>En,SHADOW_SM_RADIUS:()=>bn,SHADOW_SM_SPREAD:()=>xn,SHADOW_SM_X:()=>vn,SHADOW_SM_Y:()=>_n,SPACE_12:()=>In,SPACE_128:()=>Fn,SPACE_16:()=>Ln,SPACE_24:()=>Dn,SPACE_32:()=>Rn,SPACE_4:()=>An,SPACE_40:()=>Nn,SPACE_48:()=>zn,SPACE_64:()=>jn,SPACE_8:()=>On,SPACE_96:()=>Bn,SPACE_PAGE_HORIZONTAL_MOBILE:()=>Un,TIME_DEFAULT:()=>Hn,TIME_LONG:()=>Vn,TIME_SHORT:()=>Gn,Z_INDEX_DEEP:()=>qn,Z_INDEX_DEFAULT:()=>$n,Z_INDEX_DROPDOWN:()=>Zn,Z_INDEX_MODAL:()=>Yn,Z_INDEX_OVERLAY:()=>Xn,Z_INDEX_POPOVER:()=>Kn,Z_INDEX_SPINNER:()=>Jn,Z_INDEX_STICKY:()=>Wn,Z_INDEX_TOAST:()=>Qn});var n=1,r=2,i=3,o="#f6f6f4",a="#efefec",s="#dbdad2",l="#c2c2b8",u="#a7a99f",c="#8b9182",d="#656e5e",h="#4c5c43",f="#2b381f",p="#1c2513",m="#10130b",g="rgba(21, 27, 13, 0.04)",y="rgba(21, 27, 13, 0.08)",v="rgba(21, 27, 13, 0.16)",_="rgba(21, 27, 13, 0.27)",b="rgba(21, 27, 13, 0.38)",x="rgba(21, 27, 13, 0.49)",w="rgba(21, 27, 13, 0.64)",E="rgba(21, 27, 13, 0.74)",S="rgba(21, 27, 13, 0.88)",T="rgba(21, 27, 13, 0.9)",M="#ffffff",k="#000000",C="rgba(0, 0, 0, 0)",P="#5de372",A="#5dbb5f",O="#2b381f",I="#656e5e",L="#efefec",D="#dbdad2",R="#656e5e",N="#b24b34",z="#2f751a",j="#925e0c",B="#196b8d",F="#4563ff",U="#2b381f",G="#1c2513",H="#2b381f",V="#1c2513",q="#ffffff",$="#efefec",W="#ffffff",Z="#efefec",X="#efefec",Y="#dbdad2",K="#f6f6f4",J="#ebeeff",Q="#a3b2ff",ee="#e9faec",te="#51c152",ne="#ffe6df",re="#b24b34",ie="#fdf0d5",oe="#eea82f",ae="#e2eff2",se="#51aec8",le="#f6f5e8",ue="#2c5601",ce="#142800",de="#142800",he="rgba(255, 255, 255, 0.8)",fe="rgba(18, 18, 18, 0.85)",pe="#dbdad2",me="#c2c2b8",ge="#2c5601",ye="#2c5601",ve="#a7a99f",_e="#dbdad2",be="#b24b34",xe="rgba(110, 221, 127, 0.7)",we="rgba(101, 110, 94, 0.7)",Ee="rgba(0, 0, 0, 0.3)",Se="#2c5601",Te="#2c5601",Me="#2b381f",ke="#656e5e",Ce="#51c152",Pe="#2b381f",Ae="#1c2513",Oe="#4c5c43",Ie="#2f751a",Le="#196b8d",De="#b24b34",Re="#a2e4a0",Ne="#fccc78",ze="#f39d4f",je="#f87559",Be="#a386aa",Fe="#5de372",Ue="#5de372",Ge="#5de372",He="#2f751a",Ve="#219ad8",qe="#24505e",$e="#51c152",We="#f87559",Ze="#eea82f",Xe="#a386aa",Ye="#3571ca",Ke="rgba(0, 0, 0, 0.4)",Je="rgba(0, 0, 0, 0.7)",Qe="#3c5997",et="#4184f3",tt="#000000",nt="#2c5601",rt="#142800",it="#64f67b",ot="#f6f5e8",at="#f9d9b3",st="#d7cadb",lt="#a3b2ff",ut="#4563ff",ct="#1e4304",dt="#69a041",ht="#e9501e",ft="#e9faec",pt="#a2e4a0",mt="#2f751a",gt="#1c2513",yt="#51c152",vt="#ffe6df",_t="#fdaa9b",bt="#b24b34",xt="#38201a",wt="#f87559",Et="#e2eff2",St="#83c9dc",Tt="#196b8d",Mt="#19252a",kt="#51aec8",Ct="#fdf0d5",Pt="#fccc78",At="#925e0c",Ot="#3a2a0e",It="#eea82f",Lt="#d7cadb",Dt="#a386aa",Rt="#f9d9b3",Nt="#f0c389",zt="#f39d4f",jt="#ebeeff",Bt="#a3b2ff",Ft="#5772ff",Ut="#4563ff",Gt="#415096",Ht="#171e40",Vt="Manrope",qt="Beatrice",$t="normal",Wt="bold",Zt=1.7,Xt=1.5,Yt=1.3,Kt=11,Jt=13,Qt=16,en=20,tn=24,nn=28,rn=32,on=44,an=28,sn=32,ln=36,un=60,cn=0,dn=4,hn=8,fn=16,pn=24,mn=9999,gn=16,yn=16,vn=0,_n=1,bn=6,xn=-2,wn=0,En=4,Sn=8,Tn=-2,Mn=0,kn=8,Cn=16,Pn=-1,An=4,On=8,In=12,Ln=16,Dn=24,Rn=32,Nn=40,zn=48,jn=64,Bn=96,Fn=128,Un=24,Gn="300ms",Hn="500ms",Vn="2000ms",qn=-99999,$n=1,Wn=100,Zn=200,Xn=300,Yn=400,Kn=800,Jn=900,Qn=1e3,er="#131E0E",tr="#e9faec",nr="#142800",rr="#e9faec",ir="#38201a",or="#ffe6df",ar="#3a2a0e",sr="#f9d9b3",lr="#845B15",ur="#f9d9b3",cr="#9A4020",dr="#f9d9b3",hr="#19252a",fr="#e2eff2",pr=1280,mr=360,gr=16,yr=760,vr=24,_r=1120,br=48,xr=1920,wr=80,Er=64,Sr=64;return t})()},84521:function(e,t,n){var r;e.exports=(r=n(21038),(()=>{"use strict";var e={66877:(e,t,n)=>{var r=n(19767);n.o(r,"useIntl")&&n.d(t,{useIntl:function(){return r.useIntl}})},19767:e=>{e.exports=r}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{n.r(i),n.d(i,{default:()=>t});var e=n(66877);const t=function(t){var n=(0,e.useIntl)(),r={};return Object.keys(t).forEach((function(e){var i=t[e].defaultMessage;("string"==typeof i||void 0!==i&&1===i.length)&&(r[e]=n.formatMessage(t[e]))})),{intl:n,formattedDefaultMessages:r,formatMessage:function(e,r,i){return n.formatMessage(t[e],r,i)}}}})(),i})())},17738:function(e){var t;t=()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};function n(){var t;return(null===(t=null===e.g||void 0===e.g?void 0:e.g.__AT_DATA__)||void 0===t?void 0:t.languageRegionCode)||"en-US"}return e.r(t),e.d(t,{default:()=>n}),t})(),e.exports=t()},21432:function(e,t,n){var r;r=e=>(()=>{"use strict";var t={31814:(e,t,n)=>{n.d(t,{Z:()=>r});const r={container:"AUxnvEMKUpKbQqeQ+9Di6g=="}},37320:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},11837:(e,t,n)=>{n(37320);var r=n(8156),i=60103;if("function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}},52322:(e,t,n)=>{e.exports=n(11837)},83741:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(52322),i=n(58743),o=n(31814),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s={sm:16,md:24,lg:32},l={up:0,right:90,down:180,left:270};const u=function(e,t,n){return void 0===n&&(n=!1),Object.assign((function(u){var c=u.color,d=void 0===c?i.COLOR_INTERACTIVE_DEFAULT:c,h=u.size,f=void 0===h?"md":h,p=u.orientation,m=void 0===p?0:p,g="".concat(s[f],"px"),y="rotate(".concat("number"==typeof m?m:l[m],"deg)"),v=n?{stroke:d}:{};return(0,r.jsx)("svg",a({className:o.Z.container,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"presentation","aria-hidden":"true",focusable:"false","data-testid":e,style:a({transition:"transform 200ms ease-in-out",transform:y,height:g,width:g,fill:d},v)},{children:t}))}),{iconName:e})}},58743:(e,t,n)=>{n.d(t,{COLOR_INTERACTIVE_DEFAULT:()=>r});var r="#2b381f"},8156:t=>{t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{r.r(i),r.d(i,{default:()=>t});var e=r(52322);const t=(0,r(83741).Z)("translation",(0,e.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.25 2.25A.75.75 0 0 1 9 3v1.5h5.25a.75.75 0 0 1 0 1.5h-2.279a9.75 9.75 0 0 1-2.596 5.905l.112.08a8.25 8.25 0 0 0 4.306 1.502l2.036-4.072a.75.75 0 0 1 1.342 0l3.743 7.486.014.028 1.493 2.986a.75.75 0 1 1-1.342.67L19.786 18h-6.573l-1.292 2.585a.75.75 0 1 1-1.342-.67l1.493-2.986.008-.017.006-.01.986-1.974a9.75 9.75 0 0 1-4.822-1.993 9.75 9.75 0 0 1-6 2.065.75.75 0 0 1 0-1.5 8.25 8.25 0 0 0 4.876-1.595A9.75 9.75 0 0 1 5.059 8.5.75.75 0 0 1 6.473 8a8.25 8.25 0 0 0 1.777 2.912A8.25 8.25 0 0 0 10.466 6H2.25a.75.75 0 0 1 0-1.5H7.5V3a.75.75 0 0 1 .75-.75Zm6.664 12.349-.95 1.901h5.072L16.5 11.427l-1.572 3.144a.913.913 0 0 1-.014.028Z"}))})(),i})(),e.exports=r(n(67294))},15663:function(e,t,n){var r;r=(e,t)=>(()=>{var n={72779:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},31814:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={container:"AUxnvEMKUpKbQqeQ+9Di6g=="}},37320:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},11837:(e,t,n)=>{"use strict";n(37320);var r=n(8156),i=60103;if("function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},52322:(e,t,n)=>{"use strict";e.exports=n(11837)},83741:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(52322),i=n(58743),o=n(31814),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s={sm:16,md:24,lg:32},l={up:0,right:90,down:180,left:270};const u=function(e,t,n){return void 0===n&&(n=!1),Object.assign((function(u){var c=u.color,d=void 0===c?i.COLOR_INTERACTIVE_DEFAULT:c,h=u.size,f=void 0===h?"md":h,p=u.orientation,m=void 0===p?0:p,g="".concat(s[f],"px"),y="rotate(".concat("number"==typeof m?m:l[m],"deg)"),v=n?{stroke:d}:{};return(0,r.jsx)("svg",a({className:o.Z.container,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"presentation","aria-hidden":"true",focusable:"false","data-testid":e,style:a({transition:"transform 200ms ease-in-out",transform:y,height:g,width:g,fill:d},v)},{children:t}))}),{iconName:e})}},58743:(e,t,n)=>{"use strict";n.d(t,{COLOR_INTERACTIVE_DEFAULT:()=>r});var r="#2b381f"},1560:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(66877);const i=function(e){var t=(0,r.useIntl)(),n={};return Object.keys(e).forEach((function(r){var i=e[r].defaultMessage;("string"==typeof i||void 0!==i&&1===i.length)&&(n[r]=t.formatMessage(e[r]))})),{intl:t,formattedDefaultMessages:n,formatMessage:function(n,r,i){return t.formatMessage(e[n],r,i)}}}},6816:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52322);const i=(0,n(83741).Z)("translation",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.25 2.25A.75.75 0 0 1 9 3v1.5h5.25a.75.75 0 0 1 0 1.5h-2.279a9.75 9.75 0 0 1-2.596 5.905l.112.08a8.25 8.25 0 0 0 4.306 1.502l2.036-4.072a.75.75 0 0 1 1.342 0l3.743 7.486.014.028 1.493 2.986a.75.75 0 1 1-1.342.67L19.786 18h-6.573l-1.292 2.585a.75.75 0 1 1-1.342-.67l1.493-2.986.008-.017.006-.01.986-1.974a9.75 9.75 0 0 1-4.822-1.993 9.75 9.75 0 0 1-6 2.065.75.75 0 0 1 0-1.5 8.25 8.25 0 0 0 4.876-1.595A9.75 9.75 0 0 1 5.059 8.5.75.75 0 0 1 6.473 8a8.25 8.25 0 0 0 1.777 2.912A8.25 8.25 0 0 0 10.466 6H2.25a.75.75 0 0 1 0-1.5H7.5V3a.75.75 0 0 1 .75-.75Zm6.664 12.349-.95 1.901h5.072L16.5 11.427l-1.572 3.144a.913.913 0 0 1-.014.028Z"}))},66877:(e,t,n)=>{"use strict";var r=n(19767);n.o(r,"defineMessages")&&n.d(t,{defineMessages:function(){return r.defineMessages}}),n.o(r,"useIntl")&&n.d(t,{useIntl:function(){return r.useIntl}})},97081:(e,t,n)=>{"use strict";n.d(t,{get:()=>h});var r,i=n(33343),o=n(60957),a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=function(e){function t(t,n){var r=this.constructor,i=e.call(this,t.statusText)||this;return Object.setPrototypeOf(i,r.prototype),i.headers=t.headers,i.url=t.url,i.status=t.status,i.statusText=t.statusText,i.data=n,i}return a(t,e),t.initialize=function(e){var n;return l(this,void 0,void 0,(function(){var r,i,o;return u(this,(function(a){switch(a.label){case 0:return r=null===(n=e.headers)||void 0===n?void 0:n.get("content-type"),204===e.status?[2,new t(e,void 0)]:r&&-1!==r.indexOf("application/json")?[4,e.json()]:[3,2];case 1:return i=a.sent(),[2,new t(e,i)];case 2:return[4,e.text()];case 3:o=a.sent();try{return[2,new t(e,JSON.parse(o))]}catch(n){return[2,new t(e,o)]}return[2]}}))}))},t}(Error);function d(e,t){var r;return l(this,void 0,void 0,(function(){var a,l,d,h;return u(this,(function(u){switch(u.label){case 0:return a=document.querySelector('meta[name="csrf-token"]'),l=(0,o.cacheGet)("shared.api.fetch.headers"),d=s(s({},(null==t?void 0:t.body)&&{"content-type":"application/json"}),{"X-AT-KEY":"3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i","X-CSRF-TOKEN":null==a?void 0:a.content,"X-Language-Locale":(null===(r=null===n.g||void 0===n.g?void 0:n.g.__AT_DATA__)||void 0===r?void 0:r.languageRegionCode)||"en-US"}),[4,fetch(e,s(s({credentials:(0,i.isDevelopment)()?"include":void 0},t),{headers:s(s(s({},d),l),null==t?void 0:t.headers)}))];case 1:return(h=u.sent()).ok?[3,3]:[4,c.initialize(h)];case 2:throw u.sent();case 3:return[4,h.text().then((function(e){return e?JSON.parse(e):{}}))];case 4:return[2,u.sent()]}}))}))}function h(e,t){return l(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){return r=(n=t||{}).params,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(n,["params"]),[2,d("".concat(e).concat(r?"?".concat(new URLSearchParams(r).toString()):""),s({},i))]}))}))}},33343:(e,t,n)=>{"use strict";n.d(t,{isDevelopment:()=>r});var r=function(){return!1}},60957:(e,t,n)=>{"use strict";function r(e){var t;return null===(t=n.g.__AllTrailsStorage__)||void 0===t?void 0:t[e]}n.d(t,{cacheGet:()=>r})},8156:t=>{"use strict";t.exports=e},19767:e=>{"use strict";e.exports=t}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";i.r(o),i.d(o,{LocalizationButton:()=>g,useLocalizedText:()=>s});var e=i(8156),t=i(97081),n=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},r=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a={activities:"at_maps",lists:"lists",reviews:"trail_reviews",trails:"trails",waypoints:"at_map_markers"};const s=function(i,o,s,l,u){void 0===l&&(l={}),void 0===u&&(u=!1);var c=(0,e.useState)(null),d=c[0],h=c[1],f=(0,e.useState)(!1),p=f[0],m=f[1],g=(0,e.useState)(!1),y=g[0],v=g[1],_=i&&o&&s&&o!==s,b=a[l.table];if(!b)throw new Error("Table must be one of: activities, lists, reviews, trails, waypoints");var x=(0,e.useCallback)((function(){return n(void 0,void 0,void 0,(function(){var e;return r(this,(function(n){switch(n.label){case 0:if(d||!_)return[2];v(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(r=b,i=l.column,o=l.row,(0,t.get)("/api/alltrails/localizations?table=".concat(r,"&columnName=").concat(i,"&rowId=").concat(o)))];case 2:return e=n.sent(),h(e[0]),v(!1),[3,4];case 3:return n.sent(),v(!1),[3,4];case 4:return[2]}var r,i,o}))}))}),[_,l.column,l.row,d,b]);return(0,e.useEffect)((function(){u&&x()}),[]),{canBeLocalized:_,isLoading:y,isLocalized:p,text:p?null==d?void 0:d.content:i,toggleText:function(){return n(void 0,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return _?d?[3,2]:[4,x()]:[2];case 1:e.sent(),e.label=2;case 2:return m(!p),[2]}}))}))}}};var l=i(52322),u=i(72779),c=i.n(u),d=i(66877),h=i(1560),f=i(6816),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)},m=(0,d.defineMessages)({SEE_ORIGINAL:{id:"PqR5hW",defaultMessage:"See original"},SEE_TRANSLATION:{id:"Cy9aS4",defaultMessage:"See translation"}});const g=function(e){var t=e.className,n=e.isLocalized,r=e.onClick,i=e.testIdPrefix,o=(0,h.default)(m).formattedDefaultMessages,a=o.SEE_ORIGINAL,s=o.SEE_TRANSLATION;return(0,l.jsxs)("button",p({className:c()("ykvC0F497qW2PyI5NQ3oRw==",t),onClick:r,"data-testid":"".concat(i,"-localization-button"),type:"button"},{children:[(0,l.jsx)(f.default,{size:"sm",color:"currentColor"}),n?a:s]}))}})(),o})(),e.exports=r(n(67294),n(21038))},55077:function(e,t,n){var r;e.exports=(r=n(21038),(()=>{"use strict";var e={19767:e=>{e.exports=r}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{n.r(i);var e=n(19767),t={};for(const n in e)"default"!==n&&(t[n]=()=>e[n]);n.d(i,t)})(),i})())},13967:function(e){e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>n});const n={Danish:"da-DK",Dutch:"nl-NL",English:"en-US",EnglishGB:"en-GB",French:"fr-FR",German:"de-DE",Italian:"it-IT",Norwegian:"nb-NO",Polish:"pl-PL",Portuguese:"pt-PT",PortugueseBrazilian:"pt-BR",Spanish:"es-ES",SpanishLatAm:"es-MX",Swedish:"sv-SE"};return t})()},6961:function(e){e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{PhotoSize:()=>n,staticMapScale:()=>r});var n,r={"512x217":1,"160x160":2,"200x200":2,"320x320":2};return function(e){e.Icon="icon",e.Small="small",e.Medium="medium",e.Large="large",e.ExtraLarge="extra_large",e.SmallSquare="small_square",e.MediumSquare="medium_square",e.LargeSquare="large_square",e.SmallWide="small_wide",e.LargeWide="large_wide",e.LargerWide="larger_wide"}(n||(n={})),t})()},30824:function(e){e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{PageStrings:()=>n,humanizePageName:()=>s,isAtMapCollectionPage:()=>o,isAtMapPage:()=>i,isListPage:()=>a,isSingleMapPage:()=>r});var n={CONTRIBUTE_TRAIL:"CONTRIBUTE_TRAIL",EXPLORE_ALL_PAGE:"EXPLORE_ALL",EXPLORE_FAVORITE_PAGE:"EXPLORE_FAVORITE",EXPLORE_COMPLETED_PAGE:"EXPLORE_COMPLETED",EXPLORE_PENDING_PAGE:"EXPLORE_PENDING",EXPLORE_CUSTOM_PAGE:"EXPLORE_CUSTOM",EXPLORE_TRAIL_MAP_PAGE:"EXPLORE_TRAIL_MAP",EXPLORE_USERS_TRACKS_PAGE:"EXPLORE_USERS_TRACKS",EXPLORE_LIFELINE_PAGE:"EXPLORE_LIFELINE",EXPLORE_USERS_TRACKS_MAP_PAGE:"EXPLORE_USERS_TRACKS_MAP",EXPLORE_USERS_MAPS_PAGE:"EXPLORE_USERS_MAPS",EXPLORE_USERS_MAPS_MAP_PAGE:"EXPLORE_USERS_MAPS_MAP",EXPLORE_COMMUNITY_CONTENT_PAGE:"EXPLORE_COMMUNITY_CONTENT",ET_PHOTO_USER_SLUG:"alltrails-user",SEO_PAGE:"SEO_PAGE",LISTS_PAGE:"LISTS_PAGE",TRAIL_PAGE:"TRAIL_PAGE",HOMEPAGE:"HOMEPAGE"},r=function(e){return[n.EXPLORE_TRAIL_MAP_PAGE,n.EXPLORE_USERS_MAPS_MAP_PAGE,n.EXPLORE_USERS_TRACKS_MAP_PAGE,n.EXPLORE_LIFELINE_PAGE].includes(e)},i=function(e){return[n.EXPLORE_USERS_TRACKS_MAP_PAGE,n.EXPLORE_USERS_MAPS_MAP_PAGE].includes(e)},o=function(e){return[n.EXPLORE_USERS_TRACKS_PAGE,n.EXPLORE_USERS_MAPS_PAGE].includes(e)},a=function(e){return[n.EXPLORE_FAVORITE_PAGE,n.EXPLORE_COMPLETED_PAGE,n.EXPLORE_CUSTOM_PAGE].includes(e)},s=function(e){void 0===e&&(e="");for(var t=e.split("_"),n=0;n<t.length;n+=1)t[n]=t[n].charAt(0).toUpperCase()+t[n].slice(1).toLowerCase();return t.join(" ")};return t})()},30142:function(e,t,n){var r;e.exports=(r=n(21038),(()=>{"use strict";var e={19767:e=>{e.exports=r}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{n.r(i),n.d(i,{default:()=>r});var e=n(19767),t={backpacking:(0,e.defineMessage)({id:"xXZGmj",defaultMessage:"Backpacking"}),"bike-touring":(0,e.defineMessage)({id:"M5TOMz",defaultMessage:"Bike touring"}),birding:(0,e.defineMessage)({id:"9qzrpX",defaultMessage:"Bird watching"}),camping:(0,e.defineMessage)({id:"XjJcVS",defaultMessage:"Camping"}),"cross-country-skiing":(0,e.defineMessage)({id:"u9HJIU",defaultMessage:"Cross-country skiing"}),fishing:(0,e.defineMessage)({id:"oo+gUt",defaultMessage:"Fishing"}),hiking:(0,e.defineMessage)({id:"yP9SR1",defaultMessage:"Hiking"}),"horseback-riding":(0,e.defineMessage)({id:"t45Jzl",defaultMessage:"Horseback riding"}),"mountain-biking":(0,e.defineMessage)({id:"Mrpw7R",defaultMessage:"Mountain biking"}),"nature-trips":(0,e.defineMessage)({id:"P50G2A",defaultMessage:"Nature trips"}),"off-road-driving":(0,e.defineMessage)({id:"ZU/M7P",defaultMessage:"OHV/Off-road driving"}),"paddle-sports":(0,e.defineMessage)({id:"3bDB/A",defaultMessage:"Paddle sports"}),"road-biking":(0,e.defineMessage)({id:"YvPE7L",defaultMessage:"Road biking"}),"rock-climbing":(0,e.defineMessage)({id:"B2nDRs",defaultMessage:"Rock climbing"}),"scenic-driving":(0,e.defineMessage)({id:"oDo4CB",defaultMessage:"Scenic driving"}),skiing:(0,e.defineMessage)({id:"zMggtP",defaultMessage:"Skiing"}),snowshoeing:(0,e.defineMessage)({id:"WfJM+3",defaultMessage:"Snowshoeing"}),"trail-running":(0,e.defineMessage)({id:"nDyaq/",defaultMessage:"Running"}),"via-ferrata":(0,e.defineMessage)({id:"7WZTTn",defaultMessage:"Via ferrata"}),walking:(0,e.defineMessage)({id:"+8XF1s",defaultMessage:"Walking"})};const r=function(e,n){return Object.keys(t).includes(n)?e.formatMessage(t[n]):""}})(),i})())},44624:function(e){e.exports=(()=>{"use strict";var e={22569:(e,t,n)=>{n.d(t,{default:()=>r});const r={Danish:"da-DK",Dutch:"nl-NL",English:"en-US",EnglishGB:"en-GB",French:"fr-FR",German:"de-DE",Italian:"it-IT",Norwegian:"nb-NO",Polish:"pl-PL",Portuguese:"pt-PT",PortugueseBrazilian:"pt-BR",Spanish:"es-ES",SpanishLatAm:"es-MX",Swedish:"sv-SE"}},78453:(e,t,n)=>{n.d(t,{default:()=>r});const r={Danish:"da-dk",Dutch:"nl-nl",English:"en",EnglishGB:"en-gb",French:"fr",German:"de",Italian:"it-it",Norwegian:"nb-no",Polish:"pl-pl",Portuguese:"pt-pt",PortugueseBrazilian:"pt-br",Spanish:"es",SpanishLatAm:"es-mx",Swedish:"sv-se"}},54321:(e,t,n)=>{n.d(t,{getLanguageCode:()=>o,getLanguageRegionCodeFromLocale:()=>l,getLocale:()=>a,getLocalePrefix:()=>s});var r=n(78453),i=n(22569),o=function(e){return e.split("-")[0]},a=function(e){var t=Object.values(i.default).indexOf(e),n=Object.keys(i.default)[t];return r.default[n]},s=function(e){return e===i.default.English?"":a(e)},l=function(e){var t=Object.values(r.default).indexOf(e),n=Object.keys(i.default)[t];return i.default[n]};i.default.English,i.default.EnglishGB,i.default.Danish,i.default.German,i.default.Spanish,i.default.SpanishLatAm,i.default.French,i.default.Italian,i.default.Dutch,i.default.Norwegian,i.default.Polish,i.default.PortugueseBrazilian,i.default.Portuguese,i.default.Swedish},83751:(e,t,n)=>{n.d(t,{default:()=>r});const r={"en-US":{trail:"trail",trails:"trails","trail/new":"trail/new",parks:"parks",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"en-GB":{trail:"trail",trails:"trails","trail/new":"trail/new",parks:"parks",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"da-DK":{trail:"rute",trails:"ruter","trail/new":"rute/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"de-DE":{trail:"route",trails:"route","trail/new":"route/neue",parks:"parks",cities:"staedte",countries:"countries",regions:"regionen",states:"staaten","national-parks":"nationalparks","state-parks":"naturparks","local-parks":"regionale-parks"},"es-ES":{trail:"ruta",trails:"ruta","trail/new":"ruta/nueva",parks:"parques",cities:"ciudades",countries:"countries",regions:"regiones",states:"estados","national-parks":"parques-nacionales","state-parks":"parques-naturales","local-parks":"parques-locales"},"es-MX":{trail:"ruta",trails:"senderos","trail/new":"ruta/nueva",parks:"parques",cities:"ciudades",countries:"countries",regions:"regiones",states:"estados","national-parks":"parques-nacionales","state-parks":"parques-naturales","local-parks":"parques-locales"},"fr-FR":{trail:"randonnee",trails:"randonnee","trail/new":"randonnee/nouvelle",parks:"parcs",cities:"villes",countries:"countries",regions:"regions",states:"etats","national-parks":"parcs-nationaux","state-parks":"parcs-naturels-regionaux","local-parks":"parcs-locaux"},"it-IT":{trail:"sentiero",trails:"sentieri","trail/new":"sentiero/new",parks:"parchi",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"nl-NL":{trail:"wandelpad",trails:"routes","trail/new":"wandelpad/new",parks:"parken",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"nb-NO":{trail:"sti",trails:"stier","trail/new":"sti/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pl-PL":{trail:"szlak",trails:"szlaki","trail/new":"szlak/new",parks:"parki",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pt-BR":{trail:"trilha",trails:"trilhas","trail/new":"trilha/new",parks:"parques",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"pt-PT":{trail:"trilho",trails:"trilhos","trail/new":"trilho/new",parks:"parques",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"},"sv-SE":{trail:"led",trails:"leder","trail/new":"led/new",parks:"parker",cities:"cities",countries:"countries",regions:"regions",states:"states","national-parks":"national-parks","state-parks":"state-parks","local-parks":"local-parks"}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{Locale:()=>o.default,generateNewLanguageUrl:()=>u,getLanguageCode:()=>e.getLanguageCode,getLanguageRegionCodeFromLocale:()=>e.getLanguageRegionCodeFromLocale,getLocale:()=>e.getLocale,isTierOneLanguage:()=>l,localizeUrlComponents:()=>a,wrapUrlSafe:()=>s});var e=n(54321),t=n(83751),i=n(22569),o=n(78453),a=function(n,r){var o=t.default[r];if(r===i.default.English||!o)return n;var a=(0,e.getLocale)(r),s=new RegExp("^\\/".concat(a,"\\/(trail\\/new|trail|parks)($|\\/.*|\\?.*)")),l=n.match(s);return l&&o[l[1]]&&!n.match(/\/(print|photos|edit)($|\?.*)/)?"/".concat(a,"/").concat(o[l[1]]).concat(l[2]):n},s=function(t,n){if(n){var r=(0,e.getLocalePrefix)(n);if(r)return a("/".concat(r).concat(t),n)}return t},l=function(e){return!![i.default.English,i.default.German,i.default.French,i.default.Spanish].find((function(t){return t===e}))},u=function(t,n){if(!window||!window.location)return t;var r=(0,e.getLocalePrefix)(n);0!==r.length&&(r="/".concat(r));var i=Object.values(o.default).join("|"),a=new RegExp("^(".concat(i,")(/|$)")),s=t.substring(1).replace(a,"");return"".concat(r,"/").concat(s).concat(window.location.search).replace(/([^:]\/)\/+/g,"$1")}})(),r})()},87792:function(e){var t;t=()=>(()=>{"use strict";var e={97081:(e,t,n)=>{n.d(t,{put:()=>h});var r,i=n(33343),o=n(60957),a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=function(e){function t(t,n){var r=this.constructor,i=e.call(this,t.statusText)||this;return Object.setPrototypeOf(i,r.prototype),i.headers=t.headers,i.url=t.url,i.status=t.status,i.statusText=t.statusText,i.data=n,i}return a(t,e),t.initialize=function(e){var n;return l(this,void 0,void 0,(function(){var r,i,o;return u(this,(function(a){switch(a.label){case 0:return r=null===(n=e.headers)||void 0===n?void 0:n.get("content-type"),204===e.status?[2,new t(e,void 0)]:r&&-1!==r.indexOf("application/json")?[4,e.json()]:[3,2];case 1:return i=a.sent(),[2,new t(e,i)];case 2:return[4,e.text()];case 3:o=a.sent();try{return[2,new t(e,JSON.parse(o))]}catch(n){return[2,new t(e,o)]}return[2]}}))}))},t}(Error);function d(e,t){var r;return l(this,void 0,void 0,(function(){var a,l,d,h;return u(this,(function(u){switch(u.label){case 0:return a=document.querySelector('meta[name="csrf-token"]'),l=(0,o.cacheGet)("shared.api.fetch.headers"),d=s(s({},(null==t?void 0:t.body)&&{"content-type":"application/json"}),{"X-AT-KEY":"3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i","X-CSRF-TOKEN":null==a?void 0:a.content,"X-Language-Locale":(null===(r=null===n.g||void 0===n.g?void 0:n.g.__AT_DATA__)||void 0===r?void 0:r.languageRegionCode)||"en-US"}),[4,fetch(e,s(s({credentials:(0,i.isDevelopment)()?"include":void 0},t),{headers:s(s(s({},d),l),null==t?void 0:t.headers)}))];case 1:return(h=u.sent()).ok?[3,3]:[4,c.initialize(h)];case 2:throw u.sent();case 3:return[4,h.text().then((function(e){return e?JSON.parse(e):{}}))];case 4:return[2,u.sent()]}}))}))}function h(e,t,n){return l(this,void 0,void 0,(function(){var r;return u(this,(function(i){return r=function(e){return null==e?"":"string"==typeof e?e:JSON.stringify(e)}(t),[2,d("".concat(e).concat((null==n?void 0:n.params)?"?".concat(new URLSearchParams(n.params).toString()):""),s(s({},r&&{body:r}),{method:"put",headers:(null==n?void 0:n.headers)?s({},n.headers):{}}))]}))}))}},33343:(e,t,n)=>{n.d(t,{isDevelopment:()=>r});var r=function(){return!1}},60957:(e,t,n)=>{function r(e){var t;return null===(t=n.g.__AllTrailsStorage__)||void 0===t?void 0:t[e]}n.d(t,{cacheGet:()=>r})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{updateUserLanguageRequest:()=>t});var e=n(97081),t=function(t){return(0,e.put)("/api/alltrails/me/",{marketingLangPreference:t})}})(),r})(),e.exports=t()},48731:function(e){var t;t=()=>(()=>{"use strict";var e={83840:(e,t,n)=>{n.d(t,{PhotoSize:()=>r,staticMapScale:()=>i});var r,i={"512x217":1,"160x160":2,"200x200":2,"320x320":2};!function(e){e.Icon="icon",e.Small="small",e.Medium="medium",e.Large="large",e.ExtraLarge="extra_large",e.SmallSquare="small_square",e.MediumSquare="medium_square",e.LargeSquare="large_square",e.SmallWide="small_wide",e.LargeWide="large_wide",e.LargerWide="larger_wide"}(r||(r={}))},97081:(e,t,n)=>{n.d(t,{X_AT_KEY:()=>o});var r,i=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=(function(e){function t(t,n){var r=this.constructor,i=e.call(this,t.statusText)||this;return Object.setPrototypeOf(i,r.prototype),i.headers=t.headers,i.url=t.url,i.status=t.status,i.statusText=t.statusText,i.data=n,i}i(t,e),t.initialize=function(e){var n,r,i,o;return r=this,o=function(){var r,i,o;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(a){switch(a.label){case 0:return r=null===(n=e.headers)||void 0===n?void 0:n.get("content-type"),204===e.status?[2,new t(e,void 0)]:r&&-1!==r.indexOf("application/json")?[4,e.json()]:[3,2];case 1:return i=a.sent(),[2,new t(e,i)];case 2:return[4,e.text()];case 3:o=a.sent();try{return[2,new t(e,JSON.parse(o))]}catch(n){return[2,new t(e,o)]}return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}s((o=o.apply(r,[])).next())}))}}(Error),"3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{getCardPhotoUrl:()=>c,getPhotoFromId:()=>u,getPhotoUrl:()=>l,getStaticMapUrl:()=>d,getTrailProfilePhoto:()=>f,getUserProfilePhoto:()=>h,photoSizeSettings:()=>s});var e=n(83840),t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var n,r,i,o,a,s,l,u="",c=0;for(e=t._utf8_encode(e);c<e.length;)o=(n=e.charCodeAt(c++))>>2,a=(3&n)<<4|(r=e.charCodeAt(c++))>>4,s=(15&r)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,Number.isNaN(r)?(s=64,l=64):Number.isNaN(i)&&(l=64),u=u+t._keyStr.charAt(o)+t._keyStr.charAt(a)+t._keyStr.charAt(s)+t._keyStr.charAt(l);return u},decode:function(e){var n,r,i,o,a,s,l="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)n=t._keyStr.indexOf(e.charAt(u++))<<2|(o=t._keyStr.indexOf(e.charAt(u++)))>>4,r=(15&o)<<4|(a=t._keyStr.indexOf(e.charAt(u++)))>>2,i=(3&a)<<6|(s=t._keyStr.indexOf(e.charAt(u++))),l+=String.fromCharCode(n),64!=a&&(l+=String.fromCharCode(r)),64!=s&&(l+=String.fromCharCode(i));return t._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n+=1){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t,n="",r=0,i=0,o=0;r<e.length;)(i=e.charCodeAt(r))<128?(n+=String.fromCharCode(i),r++):i>191&&i<224?(o=e.charCodeAt(r+1),n+=String.fromCharCode((31&i)<<6|63&o),r+=2):(o=e.charCodeAt(r+1),t=e.charCodeAt(r+2),n+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&t),r+=3);return n}};const i=t;var o,a=n(97081),s=((o={})[e.PhotoSize.Small]={fit:"inside",dimensions:[100,100]},o[e.PhotoSize.Medium]={fit:"inside",dimensions:[200,200]},o[e.PhotoSize.Large]={fit:"inside",dimensions:[500,500]},o[e.PhotoSize.ExtraLarge]={fit:"inside",dimensions:[2048,2048]},o[e.PhotoSize.Icon]={fit:"cover",dimensions:[50,50]},o[e.PhotoSize.SmallSquare]={fit:"cover",dimensions:[80,80]},o[e.PhotoSize.MediumSquare]={fit:"cover",dimensions:[120,120]},o[e.PhotoSize.LargeSquare]={fit:"cover",dimensions:[160,160]},o[e.PhotoSize.SmallWide]={fit:"cover",dimensions:[160,120]},o[e.PhotoSize.LargeWide]={fit:"cover",dimensions:[800,300]},o[e.PhotoSize.LargerWide]={fit:"cover",dimensions:[1080,700]},o),l=function(e,t,n){var r=e.id,o=e.photoHash;void 0===n&&(n=!1);var a=s[t],l=a.fit,u=a.dimensions,c=u[0],d=u[1],h=JSON.stringify({bucket:"assets.alltrails.com",key:"uploads/photo/image/".concat(r,"/").concat(o,".jpg"),edits:{toFormat:n?"webp":"jpeg",resize:{width:c,height:d,fit:l},rotate:null,jpeg:{trellisQuantisation:!0,overshootDeringing:!0,optimiseScans:!0,quantisationTable:3}}});return"https://images.alltrails.com/".concat(i.encode(h))},u=function(e,t,n){return void 0===n&&(n=""),"".concat(n,"/api/alltrails/photos/").concat(e,"/image?size=").concat(t,"&key=").concat(a.X_AT_KEY)},c=function(t,n,r,i,o){return void 0===i&&(i=e.PhotoSize.Large),void 0===o&&(o=""),"".concat(o,"/api/alltrails/v2/").concat(t,"/").concat(n,"/photos/").concat(r,"?size=").concat(i,"&key=").concat(a.X_AT_KEY)},d=function(t,n,r){return void 0===r&&(r=""),"".concat(r,"/api/alltrails/v3/maps/").concat(t,"/static_map?size=").concat(n,"&scale=").concat(e.staticMapScale[n],"&key=").concat(a.X_AT_KEY)},h=function(t,n,r){return void 0===n&&(n=e.PhotoSize.Icon),void 0===r&&(r=""),"".concat(r,"/api/alltrails/v2/profile_photos/").concat(t,"/image?size=").concat(n,"&key=").concat(a.X_AT_KEY)},f=function(t,n,r,i){return void 0===i&&(i=""),"".concat(i,"/api/alltrails/v3/trails/").concat(t,"/profile_photo?show_placeholder=no&size=").concat(n,"&static_map_size=").concat(r,"&static_map_scale=").concat(e.staticMapScale[r],"&key=").concat(a.X_AT_KEY)}})(),r})(),e.exports=t()},71450:function(e){var t;t=()=>(()=>{var e={68633:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InitializeRelativeTimeFormat=void 0;var r=n(79776),i=n(71656),o=/^[a-z0-9]{3,8}(-[a-z0-9]{3,8})*$/i;t.InitializeRelativeTimeFormat=function(e,t,n,a){var s=a.getInternalSlots,l=a.availableLocales,u=a.relevantExtensionKeys,c=a.localeData,d=a.getDefaultLocale,h=s(e);h.initializedRelativeTimeFormat=!0;var f=(0,r.CanonicalizeLocaleList)(t),p=Object.create(null),m=(0,r.CoerceOptionsToObject)(n),g=(0,r.GetOption)(m,"localeMatcher","string",["best fit","lookup"],"best fit");p.localeMatcher=g;var y=(0,r.GetOption)(m,"numberingSystem","string",void 0,void 0);if(void 0!==y&&!o.test(y))throw new RangeError("Invalid numbering system ".concat(y));p.nu=y;var v=(0,i.ResolveLocale)(l,f,p,u,c,d),_=v.locale,b=v.nu;h.locale=_,h.style=(0,r.GetOption)(m,"style","string",["long","narrow","short"],"long"),h.numeric=(0,r.GetOption)(m,"numeric","string",["always","auto"],"always");var x=c[v.dataLocale];return(0,r.invariant)(!!x,"Missing locale data for ".concat(v.dataLocale)),h.fields=x,h.numberFormat=new Intl.NumberFormat(t),h.pluralRules=new Intl.PluralRules(t),h.numberingSystem=b,e}},65113:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MakePartsList=void 0;var r=n(79776);t.MakePartsList=function(e,t,n){for(var i=[],o=0,a=(0,r.PartitionPattern)(e);o<a.length;o++){var s=a[o];if("literal"===s.type)i.push({type:"literal",value:s.value});else{(0,r.invariant)("0"===s.type,"Malformed pattern ".concat(e));for(var l=0,u=n;l<u.length;l++){var c=u[l];i.push({type:c.type,value:c.value,unit:t})}}}return i}},67780:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartitionRelativeTimePattern=void 0;var r=n(79776),i=n(32523),o=n(65113);t.PartitionRelativeTimePattern=function(e,t,n,a){var s=a.getInternalSlots;if((0,r.invariant)("Number"===(0,r.Type)(t),"value must be number, instead got ".concat(typeof t),TypeError),(0,r.invariant)("String"===(0,r.Type)(n),"unit must be number, instead got ".concat(typeof t),TypeError),isNaN(t)||!isFinite(t))throw new RangeError("Invalid value ".concat(t));var l=(0,i.SingularRelativeTimeUnit)(n),u=s(e),c=u.fields,d=u.style,h=u.numeric,f=u.pluralRules,p=u.numberFormat,m=l;"short"===d?m="".concat(l,"-short"):"narrow"===d&&(m="".concat(l,"-narrow")),m in c||(m=l);var g=c[m];if("auto"===h&&(0,r.ToString)(t)in g)return[{type:"literal",value:g[(0,r.ToString)(t)]}];var y="future";((0,r.SameValue)(t,-0)||t<0)&&(y="past");var v=g[y],_="function"==typeof p.formatToParts?p.formatToParts(Math.abs(t)):[{type:"literal",value:p.format(Math.abs(t)),unit:n}],b=v[f.select(t)];return(0,o.MakePartsList)(b,l,_)}},32523:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingularRelativeTimeUnit=void 0;var r=n(79776);t.SingularRelativeTimeUnit=function(e){if((0,r.invariant)("String"===(0,r.Type)(e),"unit must be a string"),"seconds"===e)return"second";if("minutes"===e)return"minute";if("hours"===e)return"hour";if("days"===e)return"day";if("weeks"===e)return"week";if("months"===e)return"month";if("quarters"===e)return"quarter";if("years"===e)return"year";if("second"!==e&&"minute"!==e&&"hour"!==e&&"day"!==e&&"week"!==e&&"month"!==e&&"quarter"!==e&&"year"!==e)throw new RangeError("invalid unit");return e}},92034:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new WeakMap;t.default=function(e){var t=n.get(e);return t||(t=Object.create(null),n.set(e,t)),t}},74896:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53133),i=n(79776),o=n(68633),a=n(67780),s=r.__importDefault(n(92034)),l=function(){function e(t,n){if(!(this&&this instanceof e?this.constructor:void 0))throw new TypeError("Intl.RelativeTimeFormat must be called with 'new'");return(0,o.InitializeRelativeTimeFormat)(this,t,n,{getInternalSlots:s.default,availableLocales:e.availableLocales,relevantExtensionKeys:e.relevantExtensionKeys,localeData:e.localeData,getDefaultLocale:e.getDefaultLocale})}return e.prototype.format=function(e,t){if("object"!=typeof this)throw new TypeError("format was called on a non-object");if(!(0,s.default)(this).initializedRelativeTimeFormat)throw new TypeError("format was called on a invalid context");return(0,a.PartitionRelativeTimePattern)(this,Number(e),(0,i.ToString)(t),{getInternalSlots:s.default}).map((function(e){return e.value})).join("")},e.prototype.formatToParts=function(e,t){if("object"!=typeof this)throw new TypeError("formatToParts was called on a non-object");if(!(0,s.default)(this).initializedRelativeTimeFormat)throw new TypeError("formatToParts was called on a invalid context");return(0,a.PartitionRelativeTimePattern)(this,Number(e),(0,i.ToString)(t),{getInternalSlots:s.default})},e.prototype.resolvedOptions=function(){if("object"!=typeof this)throw new TypeError("resolvedOptions was called on a non-object");var e=(0,s.default)(this);if(!e.initializedRelativeTimeFormat)throw new TypeError("resolvedOptions was called on a invalid context");return{locale:e.locale,style:e.style,numeric:e.numeric,numberingSystem:e.numberingSystem}},e.supportedLocalesOf=function(t,n){return(0,i.SupportedLocales)(e.availableLocales,(0,i.CanonicalizeLocaleList)(t),n)},e.__addLocaleData=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r],a=o.data,s=o.locale,l=new Intl.Locale(s).minimize().toString();e.localeData[s]=e.localeData[l]=a,e.availableLocales.add(l),e.availableLocales.add(s),e.__defaultLocale||(e.__defaultLocale=l)}},e.getDefaultLocale=function(){return e.__defaultLocale},e.localeData={},e.availableLocales=new Set,e.__defaultLocale="",e.relevantExtensionKeys=["nu"],e.polyfilled=!0,e}();t.default=l;try{"undefined"!=typeof Symbol&&Object.defineProperty(l.prototype,Symbol.toStringTag,{value:"Intl.RelativeTimeFormat",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype.constructor,"length",{value:0,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(l.supportedLocalesOf,"length",{value:1,writable:!1,enumerable:!1,configurable:!0})}catch(e){}},80562:()=>{Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&Intl.RelativeTimeFormat.__addLocaleData({data:{nu:["latn"],year:{0:"i \xe5r",1:"n\xe6ste \xe5r",future:{one:"om {0} \xe5r",other:"om {0} \xe5r"},past:{one:"for {0} \xe5r siden",other:"for {0} \xe5r siden"},"-1":"sidste \xe5r"},"year-short":{0:"i \xe5r",1:"n\xe6ste \xe5r",future:{one:"om {0} \xe5r",other:"om {0} \xe5r"},past:{one:"{0} \xe5r siden",other:"{0} \xe5r siden"},"-1":"sidste \xe5r"},"year-narrow":{0:"i \xe5r",1:"n\xe6ste \xe5r",future:{one:"om {0} \xe5r",other:"om {0} \xe5r"},past:{one:"{0} \xe5r siden",other:"{0} \xe5r siden"},"-1":"sidste \xe5r"},quarter:{0:"dette kvartal",1:"n\xe6ste kvartal",future:{one:"om {0} kvartal",other:"om {0} kvartaler"},past:{one:"for {0} kvartal siden",other:"for {0} kvartaler siden"},"-1":"sidste kvartal"},"quarter-short":{0:"dette kvt.",1:"n\xe6ste kvt.",future:{one:"om {0} kvt.",other:"om {0} kvt."},past:{one:"{0} kvt. siden",other:"{0} kvt. siden"},"-1":"sidste kvt."},"quarter-narrow":{0:"dette kvt.",1:"n\xe6ste kvt.",future:{one:"om {0} kvt.",other:"om {0} kvt."},past:{one:"{0} kvt. siden",other:"{0} kvt. siden"},"-1":"sidste kvt."},month:{0:"denne m\xe5ned",1:"n\xe6ste m\xe5ned",future:{one:"om {0} m\xe5ned",other:"om {0} m\xe5neder"},past:{one:"for {0} m\xe5ned siden",other:"for {0} m\xe5neder siden"},"-1":"sidste m\xe5ned"},"month-short":{0:"denne md.",1:"n\xe6ste md.",future:{one:"om {0} md.",other:"om {0} mdr."},past:{one:"{0} md. siden",other:"{0} mdr. siden"},"-1":"sidste md."},"month-narrow":{0:"denne md.",1:"n\xe6ste md.",future:{one:"om {0} md.",other:"om {0} mdr."},past:{one:"{0} md. siden",other:"{0} mdr. siden"},"-1":"sidste md."},week:{0:"denne uge",1:"n\xe6ste uge",future:{one:"om {0} uge",other:"om {0} uger"},past:{one:"for {0} uge siden",other:"for {0} uger siden"},"-1":"sidste uge"},"week-short":{0:"denne uge",1:"n\xe6ste uge",future:{one:"om {0} uge",other:"om {0} uger"},past:{one:"{0} uge siden",other:"{0} uger siden"},"-1":"sidste uge"},"week-narrow":{0:"denne uge",1:"n\xe6ste uge",future:{one:"om {0} uge",other:"om {0} uger"},past:{one:"{0} uge siden",other:"{0} uger siden"},"-1":"sidste uge"},day:{0:"i dag",1:"i morgen",2:"i overmorgen",future:{one:"om {0} dag",other:"om {0} dage"},past:{one:"for {0} dag siden",other:"for {0} dage siden"},"-2":"i forg\xe5rs","-1":"i g\xe5r"},"day-short":{0:"i dag",1:"i morgen",2:"i overmorgen",future:{one:"om {0} dag",other:"om {0} dage"},past:{one:"{0} dag siden",other:"{0} dage siden"},"-2":"i forg\xe5rs","-1":"i g\xe5r"},"day-narrow":{0:"i dag",1:"i morgen",2:"i overmorgen",future:{one:"om {0} dag",other:"om {0} dage"},past:{one:"{0} dag siden",other:"{0} dage siden"},"-2":"i forg\xe5rs","-1":"i g\xe5r"},hour:{0:"denne time",future:{one:"om {0} time",other:"om {0} timer"},past:{one:"for {0} time siden",other:"for {0} timer siden"}},"hour-short":{0:"denne time",future:{one:"om {0} time",other:"om {0} timer"},past:{one:"{0} time siden",other:"{0} timer siden"}},"hour-narrow":{0:"denne time",future:{one:"om {0} time",other:"om {0} timer"},past:{one:"{0} time siden",other:"{0} timer siden"}},minute:{0:"dette minut",future:{one:"om {0} minut",other:"om {0} minutter"},past:{one:"for {0} minut siden",other:"for {0} minutter siden"}},"minute-short":{0:"dette minut",future:{one:"om {0} min.",other:"om {0} min."},past:{one:"{0} min. siden",other:"{0} min. siden"}},"minute-narrow":{0:"dette minut",future:{one:"om {0} min.",other:"om {0} min."},past:{one:"{0} min. siden",other:"{0} min. siden"}},second:{0:"nu",future:{one:"om {0} sekund",other:"om {0} sekunder"},past:{one:"for {0} sekund siden",other:"for {0} sekunder siden"}},"second-short":{0:"nu",future:{one:"om {0} sek.",other:"om {0} sek."},past:{one:"{0} sek. siden",other:"{0} sek. siden"}},"second-narrow":{0:"nu",future:{one:"om {0} sek.",other:"om {0} sek."},past:{one:"{0} sek. siden",other:"{0} sek. siden"}}},locale:"da"})},47730:()=>{Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&Intl.RelativeTimeFormat.__addLocaleData({data:{nu:["latn"],year:{0:"dieses Jahr",1:"n\xe4chstes Jahr",future:{one:"in {0} Jahr",other:"in {0} Jahren"},past:{one:"vor {0} Jahr",other:"vor {0} Jahren"},"-1":"letztes Jahr"},"year-short":{0:"dieses Jahr",1:"n\xe4chstes Jahr",future:{one:"in {0} Jahr",other:"in {0} Jahren"},past:{one:"vor {0} Jahr",other:"vor {0} Jahren"},"-1":"letztes Jahr"},"year-narrow":{0:"dieses Jahr",1:"n\xe4chstes Jahr",future:{one:"in {0} Jahr",other:"in {0} Jahren"},past:{one:"vor {0} Jahr",other:"vor {0} Jahren"},"-1":"letztes Jahr"},quarter:{0:"dieses Quartal",1:"n\xe4chstes Quartal",future:{one:"in {0} Quartal",other:"in {0} Quartalen"},past:{one:"vor {0} Quartal",other:"vor {0} Quartalen"},"-1":"letztes Quartal"},"quarter-short":{0:"dieses Quartal",1:"n\xe4chstes Quartal",future:{one:"in {0} Quart.",other:"in {0} Quart."},past:{one:"vor {0} Quart.",other:"vor {0} Quart."},"-1":"letztes Quartal"},"quarter-narrow":{0:"dieses Quartal",1:"n\xe4chstes Quartal",future:{one:"in {0} Q",other:"in {0} Q"},past:{one:"vor {0} Q",other:"vor {0} Q"},"-1":"letztes Quartal"},month:{0:"diesen Monat",1:"n\xe4chsten Monat",future:{one:"in {0} Monat",other:"in {0} Monaten"},past:{one:"vor {0} Monat",other:"vor {0} Monaten"},"-1":"letzten Monat"},"month-short":{0:"diesen Monat",1:"n\xe4chsten Monat",future:{one:"in {0} Monat",other:"in {0} Monaten"},past:{one:"vor {0} Monat",other:"vor {0}\xa0Monaten"},"-1":"letzten Monat"},"month-narrow":{0:"diesen Monat",1:"n\xe4chsten Monat",future:{one:"in {0} Monat",other:"in {0} Monaten"},past:{one:"vor {0}\xa0Monat",other:"vor {0} Monaten"},"-1":"letzten Monat"},week:{0:"diese Woche",1:"n\xe4chste Woche",future:{one:"in {0} Woche",other:"in {0} Wochen"},past:{one:"vor {0} Woche",other:"vor {0} Wochen"},"-1":"letzte Woche"},"week-short":{0:"diese Woche",1:"n\xe4chste Woche",future:{one:"in {0} Woche",other:"in {0} Wochen"},past:{one:"vor {0} Woche",other:"vor {0} Wochen"},"-1":"letzte Woche"},"week-narrow":{0:"diese Woche",1:"n\xe4chste Woche",future:{one:"in {0} Wo.",other:"in {0} Wo."},past:{one:"vor {0} Wo.",other:"vor {0} Wo."},"-1":"letzte Woche"},day:{0:"heute",1:"morgen",2:"\xfcbermorgen",future:{one:"in {0} Tag",other:"in {0} Tagen"},past:{one:"vor {0} Tag",other:"vor {0} Tagen"},"-2":"vorgestern","-1":"gestern"},"day-short":{0:"heute",1:"morgen",2:"\xfcbermorgen",future:{one:"in {0} Tag",other:"in {0} Tagen"},past:{one:"vor {0} Tag",other:"vor {0} Tagen"},"-2":"vorgestern","-1":"gestern"},"day-narrow":{0:"heute",1:"morgen",2:"\xfcbermorgen",future:{one:"in {0} Tag",other:"in {0} Tagen"},past:{one:"vor {0} Tag",other:"vor {0} Tagen"},"-2":"vorgestern","-1":"gestern"},hour:{0:"in dieser Stunde",future:{one:"in {0} Stunde",other:"in {0} Stunden"},past:{one:"vor {0} Stunde",other:"vor {0} Stunden"}},"hour-short":{0:"in dieser Stunde",future:{one:"in {0} Std.",other:"in {0} Std."},past:{one:"vor {0} Std.",other:"vor {0} Std."}},"hour-narrow":{0:"in dieser Stunde",future:{one:"in {0} Std.",other:"in {0} Std."},past:{one:"vor {0} Std.",other:"vor {0} Std."}},minute:{0:"in dieser Minute",future:{one:"in {0} Minute",other:"in {0} Minuten"},past:{one:"vor {0} Minute",other:"vor {0} Minuten"}},"minute-short":{0:"in dieser Minute",future:{one:"in {0} Min.",other:"in {0} Min."},past:{one:"vor {0} Min.",other:"vor {0} Min."}},"minute-narrow":{0:"in dieser Minute",future:{one:"in {0} m",other:"in {0} m"},past:{one:"vor {0} m",other:"vor {0} m"}},second:{0:"jetzt",future:{one:"in {0} Sekunde",other:"in {0} Sekunden"},past:{one:"vor {0} Sekunde",other:"vor {0} Sekunden"}},"second-short":{0:"jetzt",future:{one:"in {0} Sek.",other:"in {0} Sek."},past:{one:"vor {0} Sek.",other:"vor {0} Sek."}},"second-narrow":{0:"jetzt",future:{one:"in {0} s",other:"in {0} s"},past:{one:"vor {0} s",other:"vor {0} s"}}},locale:"de"})},26033:()=>{Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&Intl.RelativeTimeFormat.__addLocaleData({data:{nu:["latn"],year:{0:"this year",1:"next year",future:{one:"in {0} year",other:"in {0} years"},past:{one:"{0} year ago",other:"{0} years ago"},"-1":"last year"},"year-short":{0:"this yr.",1:"next yr.",future:{one:"in {0} yr.",other:"in {0} yr."},past:{one:"{0} yr. ago",other:"{0} yr. ago"},"-1":"last yr."},"year-narrow":{0:"this yr.",1:"next yr.",future:{one:"in {0} yr.",other:"in {0} yr."},past:{one:"{0} yr. ago",other:"{0} yr. ago"},"-1":"last yr."},quarter:{0:"this quarter",1:"next quarter",future:{one:"in {0} quarter",other:"in {0} quarters"},past:{one:"{0} quarter ago",other:"{0} quarters ago"},"-1":"last quarter"},"quarter-short":{0:"this qtr.",1:"next qtr.",future:{one:"in {0} qtr.",other:"in {0} qtrs."},past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},"-1":"last qtr."},"quarter-narrow":{0:"this qtr.",1:"next qtr.",future:{one:"in {0} qtr.",other:"in {0} qtrs."},past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},"-1":"last qtr."},month:{0:"this month",1:"next month",future:{one:"in {0} month",other:"in {0} months"},past:{one:"{0} month ago",other:"{0} months ago"},"-1":"last month"},"month-short":{0:"this mo.",1:"next mo.",future:{one:"in {0} mo.",other:"in {0} mo."},past:{one:"{0} mo. ago",other:"{0} mo. ago"},"-1":"last mo."},"month-narrow":{0:"this mo.",1:"next mo.",future:{one:"in {0} mo.",other:"in {0} mo."},past:{one:"{0} mo. ago",other:"{0} mo. ago"},"-1":"last mo."},week:{0:"this week",1:"next week",future:{one:"in {0} week",other:"in {0} weeks"},past:{one:"{0} week ago",other:"{0} weeks ago"},"-1":"last week"},"week-short":{0:"this wk.",1:"next wk.",future:{one:"in {0} wk.",other:"in {0} wk."},past:{one:"{0} wk. ago",other:"{0} wk. ago"},"-1":"last wk."},"week-narrow":{0:"this wk.",1:"next wk.",future:{one:"in {0} wk.",other:"in {0} wk."},past:{one:"{0} wk. ago",other:"{0} wk. ago"},"-1":"last wk."},day:{0:"today",1:"tomorrow",future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"},"-1":"yesterday"},"day-short":{0:"today",1:"tomorrow",future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"},"-1":"yesterday"},"day-narrow":{0:"today",1:"tomorrow",future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"},"-1":"yesterday"},hour:{0:"this hour",future:{one:"in {0} hour",other:"in {0} hours"},past:{one:"{0} hour ago",other:"{0} hours ago"}},"hour-short":{0:"this hour",future:{one:"in {0} hr.",other:"in {0} hr."},past:{one:"{0} hr. ago",other:"{0} hr. ago"}},"hour-narrow":{0:"this hour",future:{one:"in {0} hr.",other:"in {0} hr."},past:{one:"{0} hr. ago",other:"{0} hr. ago"}},minute:{0:"this minute",future:{one:"in {0} minute",other:"in {0} minutes"},past:{one:"{0} minute ago",other:"{0} minutes ago"}},"minute-short":{0:"this minute",future:{one:"in {0} min.",other:"in {0} min."},past:{one:"{0} min. ago",other:"{0} min. ago"}},"minute-narrow":{0:"this minute",future:{one:"in {0} min.",other:"in {0} min."},past:{one:"{0} min. ago",other:"{0} min. ago"}},second:{0:"now",future:{one:"in {0} second",other:"in {0} seconds"},past:{one:"{0} second ago",other:"{0} seconds ago"}},"second-short":{0:"now",future:{one:"in {0} sec.",other:"in {0} sec."},past:{one:"{0} sec. ago",other:"{0} sec. ago"}},"second-narrow":{0:"now",future:{one:"in {0} sec.",other:"in {0} sec."},past:{one:"{0} sec. ago",other:"{0} sec. ago"}}},locale:"en"})},42680:()=>{Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&Intl.RelativeTimeFormat.__addLocaleData({data:{nu:["latn"],year:{0:"este a\xf1o",1:"el pr\xf3ximo a\xf1o",future:{one:"dentro de {0} a\xf1o",other:"dentro de {0} a\xf1os"},past:{one:"hace {0} a\xf1o",other:"hace {0} a\xf1os"},"-1":"el a\xf1o pasado"},"year-short":{0:"este a\xf1o",1:"el pr\xf3ximo a\xf1o",future:{one:"dentro de {0} a",other:"dentro de {0} a"},past:{one:"hace {0} a",other:"hace {0} a"},"-1":"el a\xf1o pasado"},"year-narrow":{0:"este a\xf1o",1:"el pr\xf3ximo a\xf1o",future:{one:"dentro de {0} a",other:"dentro de {0} a"},past:{one:"hace {0} a",other:"hace {0} a"},"-1":"el a\xf1o pasado"},quarter:{0:"este trimestre",1:"el pr\xf3ximo trimestre",future:{one:"dentro de {0} trimestre",other:"dentro de {0} trimestres"},past:{one:"hace {0} trimestre",other:"hace {0} trimestres"},"-1":"el trimestre pasado"},"quarter-short":{0:"este trimestre",1:"el pr\xf3ximo trimestre",future:{one:"dentro de {0} trim.",other:"dentro de {0} trim."},past:{one:"hace {0} trim.",other:"hace {0} trim."},"-1":"el trimestre pasado"},"quarter-narrow":{0:"este trimestre",1:"el pr\xf3ximo trimestre",future:{one:"dentro de {0} trim.",other:"dentro de {0} trim."},past:{one:"hace {0} trim.",other:"hace {0} trim."},"-1":"el trimestre pasado"},month:{0:"este mes",1:"el pr\xf3ximo mes",future:{one:"dentro de {0} mes",other:"dentro de {0} meses"},past:{one:"hace {0} mes",other:"hace {0} meses"},"-1":"el mes pasado"},"month-short":{0:"este mes",1:"el pr\xf3ximo mes",future:{one:"dentro de {0} m",other:"dentro de {0} m"},past:{one:"hace {0} m",other:"hace {0} m"},"-1":"el mes pasado"},"month-narrow":{0:"este mes",1:"el pr\xf3ximo mes",future:{one:"dentro de {0} m",other:"dentro de {0} m"},past:{one:"hace {0} m",other:"hace {0} m"},"-1":"el mes pasado"},week:{0:"esta semana",1:"la pr\xf3xima semana",future:{one:"dentro de {0} semana",other:"dentro de {0} semanas"},past:{one:"hace {0} semana",other:"hace {0} semanas"},"-1":"la semana pasada"},"week-short":{0:"esta sem.",1:"pr\xf3x. sem.",future:{one:"dentro de {0} sem.",other:"dentro de {0} sem."},past:{one:"hace {0} sem.",other:"hace {0} sem."},"-1":"sem. ant."},"week-narrow":{0:"esta sem.",1:"pr\xf3x. sem.",future:{one:"dentro de {0} sem.",other:"dentro de {0} sem."},past:{one:"hace {0} sem.",other:"hace {0} sem."},"-1":"sem. ant."},day:{0:"hoy",1:"ma\xf1ana",2:"pasado ma\xf1ana",future:{one:"dentro de {0} d\xeda",other:"dentro de {0} d\xedas"},past:{one:"hace {0} d\xeda",other:"hace {0} d\xedas"},"-2":"anteayer","-1":"ayer"},"day-short":{0:"hoy",1:"ma\xf1ana",2:"pasado ma\xf1ana",future:{one:"dentro de {0} d",other:"dentro de {0} d"},past:{one:"hace {0} d",other:"hace {0} d"},"-2":"anteayer","-1":"ayer"},"day-narrow":{0:"hoy",1:"ma\xf1ana",2:"pasado ma\xf1ana",future:{one:"dentro de {0} d",other:"dentro de {0} d"},past:{one:"hace {0} d",other:"hace {0} d"},"-2":"anteayer","-1":"ayer"},hour:{0:"esta hora",future:{one:"dentro de {0} hora",other:"dentro de {0} horas"},past:{one:"hace {0} hora",other:"hace {0} horas"}},"hour-short":{0:"esta hora",future:{one:"dentro de {0} h",other:"dentro de {0} h"},past:{one:"hace {0} h",other:"hace {0} h"}},"hour-narrow":{0:"esta hora",future:{one:"dentro de {0} h",other:"dentro de {0} h"},past:{one:"hace {0} h",other:"hace {0} h"}},minute:{0:"este minuto",future:{one:"dentro de {0} minuto",other:"dentro de {0} minutos"},past:{one:"hace {0} minuto",other:"hace {0} minutos"}},"minute-short":{0:"este minuto",future:{one:"dentro de {0} min",other:"dentro de {0} min"},past:{one:"hace {0} min",other:"hace {0} min"}},"minute-narrow":{0:"este minuto",future:{one:"dentro de {0} min",other:"dentro de {0} min"},past:{one:"hace {0} min",other:"hace {0} min"}},second:{0:"ahora",future:{one:"dentro de {0} segundo",other:"dentro de {0} segundos"},past:{one:"hace {0} segundo",other:"hace {0} segundos"}},"second-short":{0:"ahora",future:{one:"dentro de {0} s",other:"dentro de {0} s"},past:{one:"hace {0} s",other:"hace {0} s"}},"second-narrow":{0:"ahora",future:{one:"dentro de {0} s",other:"dentro de {0} s"},past:{one:"hace {0} s",other:"hace {0} s"}}},locale:"es"})},28775:()=>{Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&Intl.RelativeTimeFormat.__addLocaleData({data:{nu:["latn"],year:{0:"cette ann\xe9e",1:"l\u2019ann\xe9e prochaine",future:{one:"dans {0} an",other:"dans {0} ans"},past:{one:"il y a {0} an",other:"il y a {0} ans"},"-1":"l\u2019ann\xe9e derni\xe8re"},"year-short":{0:"cette ann\xe9e",1:"l\u2019ann\xe9e prochaine",future:{one:"dans {0} a",other:"dans {0} a"},past:{one:"il y a {0} a",other:"il y a {0} a"},"-1":"l\u2019ann\xe9e derni\xe8re"},"year-narrow":{0:"cette ann\xe9e",1:"l\u2019ann\xe9e prochaine",future:{one:"+{0} a",other:"+{0} a"},past:{one:"-{0} a",other:"-{0} a"},"-1":"l\u2019ann\xe9e derni\xe8re"},quarter:{0:"ce trimestre",1:"le trimestre prochain",future:{one:"dans {0} trimestre",other:"dans {0} trimestres"},past:{one:"il y a {0} trimestre",other:"il y a {0} trimestres"},"-1":"le trimestre dernier"},"quarter-short":{0:"ce trimestre",1:"le trimestre prochain",future:{one:"dans {0} trim.",other:"dans {0} trim."},past:{one:"il y a {0} trim.",other:"il y a {0} trim."},"-1":"le trimestre dernier"},"quarter-narrow":{0:"ce trimestre",1:"le trimestre prochain",future:{one:"+{0} trim.",other:"+{0} trim."},past:{one:"-{0} trim.",other:"-{0} trim."},"-1":"le trimestre dernier"},month:{0:"ce mois-ci",1:"le mois prochain",future:{one:"dans {0} mois",other:"dans {0} mois"},past:{one:"il y a {0} mois",other:"il y a {0} mois"},"-1":"le mois dernier"},"month-short":{0:"ce mois-ci",1:"le mois prochain",future:{one:"dans {0} m.",other:"dans {0} m."},past:{one:"il y a {0} m.",other:"il y a {0} m."},"-1":"le mois dernier"},"month-narrow":{0:"ce mois-ci",1:"le mois prochain",future:{one:"+{0} m.",other:"+{0} m."},past:{one:"-{0} m.",other:"-{0} m."},"-1":"le mois dernier"},week:{0:"cette semaine",1:"la semaine prochaine",future:{one:"dans {0} semaine",other:"dans {0} semaines"},past:{one:"il y a {0} semaine",other:"il y a {0} semaines"},"-1":"la semaine derni\xe8re"},"week-short":{0:"cette semaine",1:"la semaine prochaine",future:{one:"dans {0} sem.",other:"dans {0} sem."},past:{one:"il y a {0} sem.",other:"il y a {0} sem."},"-1":"la semaine derni\xe8re"},"week-narrow":{0:"cette semaine",1:"la semaine prochaine",future:{one:"+{0} sem.",other:"+{0} sem."},past:{one:"-{0} sem.",other:"-{0} sem."},"-1":"la semaine derni\xe8re"},day:{0:"aujourd\u2019hui",1:"demain",2:"apr\xe8s-demain",future:{one:"dans {0} jour",other:"dans {0} jours"},past:{one:"il y a {0} jour",other:"il y a {0} jours"},"-2":"avant-hier","-1":"hier"},"day-short":{0:"aujourd\u2019hui",1:"demain",2:"apr\xe8s-demain",future:{one:"dans {0}\xa0j",other:"dans {0}\xa0j"},past:{one:"il y a {0}\xa0j",other:"il y a {0}\xa0j"},"-2":"avant-hier","-1":"hier"},"day-narrow":{0:"aujourd\u2019hui",1:"demain",2:"apr\xe8s-demain",future:{one:"+{0} j",other:"+{0} j"},past:{one:"-{0} j",other:"-{0} j"},"-2":"avant-hier","-1":"hier"},hour:{0:"cette heure-ci",future:{one:"dans {0} heure",other:"dans {0} heures"},past:{one:"il y a {0} heure",other:"il y a {0} heures"}},"hour-short":{0:"cette heure-ci",future:{one:"dans {0}\xa0h",other:"dans {0}\xa0h"},past:{one:"il y a {0}\xa0h",other:"il y a {0}\xa0h"}},"hour-narrow":{0:"cette heure-ci",future:{one:"+{0} h",other:"+{0} h"},past:{one:"-{0} h",other:"-{0} h"}},minute:{0:"cette minute-ci",future:{one:"dans {0} minute",other:"dans {0} minutes"},past:{one:"il y a {0} minute",other:"il y a {0} minutes"}},"minute-short":{0:"cette minute-ci",future:{one:"dans {0}\xa0min",other:"dans {0}\xa0min"},past:{one:"il y a {0}\xa0min",other:"il y a {0}\xa0min"}},"minute-narrow":{0:"cette minute-ci",future:{one:"+{0} min",other:"+{0} min"},past:{one:"-{0} min",other:"-{0} min"}},second:{0:"maintenant",future:{one:"dans {0} seconde",other:"dans {0} secondes"},past:{one:"il y a {0} seconde",other:"il y a {0} secondes"}},"second-short":{0:"maintenant",future:{one:"dans {0}\xa0s",other:"dans {0}\xa0s"},past:{one:"il y a {0}\xa0s",other:"il y a {0}\xa0s"}},"second-narrow":{0:"maintenant",future:{one:"+{0} s",other:"+{0} s"},past:{one:"-{0} s",other:"-{0} s"}}},locale:"fr"})},29258:()=>{Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&Intl.RelativeTimeFormat.__addLocaleData({data:{nu:["latn"],year:{0:"quest\u2019anno",1:"anno prossimo",future:{one:"tra {0} anno",other:"tra {0} anni"},past:{one:"{0} anno fa",other:"{0} anni fa"},"-1":"anno scorso"},"year-short":{0:"quest\u2019anno",1:"anno prossimo",future:{one:"tra {0} anno",other:"tra {0} anni"},past:{one:"{0} anno fa",other:"{0} anni fa"},"-1":"anno scorso"},"year-narrow":{0:"quest\u2019anno",1:"anno prossimo",future:{one:"tra {0} anno",other:"tra {0} anni"},past:{one:"{0} anno fa",other:"{0} anni fa"},"-1":"anno scorso"},quarter:{0:"questo trimestre",1:"trimestre prossimo",future:{one:"tra {0} trimestre",other:"tra {0} trimestri"},past:{one:"{0} trimestre fa",other:"{0} trimestri fa"},"-1":"trimestre scorso"},"quarter-short":{0:"questo trim.",1:"trim. prossimo",future:{one:"tra {0} trim.",other:"tra {0} trim."},past:{one:"{0} trim. fa",other:"{0} trim. fa"},"-1":"trim. scorso"},"quarter-narrow":{0:"questo trim.",1:"trim. prossimo",future:{one:"tra {0} trim.",other:"tra {0} trim."},past:{one:"{0} trim. fa",other:"{0} trim. fa"},"-1":"trim. scorso"},month:{0:"questo mese",1:"mese prossimo",future:{one:"tra {0} mese",other:"tra {0} mesi"},past:{one:"{0} mese fa",other:"{0} mesi fa"},"-1":"mese scorso"},"month-short":{0:"questo mese",1:"mese prossimo",future:{one:"tra {0} mese",other:"tra {0} mesi"},past:{one:"{0} mese fa",other:"{0} mesi fa"},"-1":"mese scorso"},"month-narrow":{0:"questo mese",1:"mese prossimo",future:{one:"tra {0} mese",other:"tra {0} mesi"},past:{one:"{0} mese fa",other:"{0} mesi fa"},"-1":"mese scorso"},week:{0:"questa settimana",1:"settimana prossima",future:{one:"tra {0} settimana",other:"tra {0} settimane"},past:{one:"{0} settimana fa",other:"{0} settimane fa"},"-1":"settimana scorsa"},"week-short":{0:"questa sett.",1:"sett. prossima",future:{one:"tra {0} sett.",other:"tra {0} sett."},past:{one:"{0} sett. fa",other:"{0} sett. fa"},"-1":"sett. scorsa"},"week-narrow":{0:"questa sett.",1:"sett. prossima",future:{one:"tra {0} sett.",other:"tra {0} sett."},past:{one:"{0} sett. fa",other:"{0} sett. fa"},"-1":"sett. scorsa"},day:{0:"oggi",1:"domani",2:"dopodomani",future:{one:"tra {0} giorno",other:"tra {0} giorni"},past:{one:"{0} giorno fa",other:"{0} giorni fa"},"-2":"l\u2019altro ieri","-1":"ieri"},"day-short":{0:"oggi",1:"domani",2:"dopodomani",future:{one:"tra {0} g",other:"tra {0} gg"},past:{one:"{0} g fa",other:"{0} gg fa"},"-2":"l\u2019altro ieri","-1":"ieri"},"day-narrow":{0:"oggi",1:"domani",2:"dopodomani",future:{one:"tra {0} g",other:"tra {0} gg"},past:{one:"{0} g fa",other:"{0} gg fa"},"-2":"l\u2019altro ieri","-1":"ieri"},hour:{0:"quest\u2019ora",future:{one:"tra {0} ora",other:"tra {0} ore"},past:{one:"{0} ora fa",other:"{0} ore fa"}},"hour-short":{0:"quest\u2019ora",future:{one:"tra {0} h",other:"tra {0} h"},past:{one:"{0} h fa",other:"{0} h fa"}},"hour-narrow":{0:"quest\u2019ora",future:{one:"tra {0} h",other:"tra {0} h"},past:{one:"{0} h fa",other:"{0} h fa"}},minute:{0:"questo minuto",future:{one:"tra {0} minuto",other:"tra {0} minuti"},past:{one:"{0} minuto fa",other:"{0} minuti fa"}},"minute-short":{0:"questo minuto",future:{one:"tra {0} min",other:"tra {0} min"},past:{one:"{0} min fa",other:"{0} min fa"}},"minute-narrow":{0:"questo minuto",future:{one:"tra {0} min",other:"tra {0} min"},past:{one:"{0} min fa",other:"{0} min fa"}},second:{0:"ora",future:{one:"tra {0} secondo",other:"tra {0} secondi"},past:{one:"{0} secondo fa",other:"{0} secondi fa"}},"second-short":{0:"ora",future:{one:"tra {0} sec.",other:"tra {0} sec."},past:{one:"{0} sec. fa",other:"{0} sec. fa"}},"second-narrow":{0:"ora",future:{one:"tra {0} s",other:"tra {0} s"},past:{one:"{0} s fa",other:"{0} s fa"}}},locale:"it"})},28588:()=>{Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&Intl.RelativeTimeFormat.__addLocaleData({data:{nu:["latn"],year:{0:"i \xe5r",1:"neste \xe5r",future:{one:"om {0} \xe5r",other:"om {0} \xe5r"},past:{one:"for {0} \xe5r siden",other:"for {0} \xe5r siden"},"-1":"i fjor"},"year-short":{0:"i \xe5r",1:"neste \xe5r",future:{one:"om {0} \xe5r",other:"om {0} \xe5r"},past:{one:"for {0} \xe5r siden",other:"for {0} \xe5r siden"},"-1":"i fjor"},"year-narrow":{0:"i \xe5r",1:"neste \xe5r",future:{one:"+{0} \xe5r",other:"+{0} \xe5r"},past:{one:"-{0} \xe5r",other:"-{0} \xe5r"},"-1":"i fjor"},quarter:{0:"dette kvartalet",1:"neste kvartal",future:{one:"om {0} kvartal",other:"om {0} kvartaler"},past:{one:"for {0} kvartal siden",other:"for {0} kvartaler siden"},"-1":"forrige kvartal"},"quarter-short":{0:"dette kv.",1:"neste kv.",future:{one:"om {0} kv.",other:"om {0} kv."},past:{one:"for {0} kv. siden",other:"for {0} kv. siden"},"-1":"forrige kv."},"quarter-narrow":{0:"dette kv.",1:"neste kv.",future:{one:"+{0} kv.",other:"+{0} kv."},past:{one:"-{0} kv.",other:"-{0} kv."},"-1":"forrige kv."},month:{0:"denne m\xe5neden",1:"neste m\xe5ned",future:{one:"om {0} m\xe5ned",other:"om {0} m\xe5neder"},past:{one:"for {0} m\xe5ned siden",other:"for {0} m\xe5neder siden"},"-1":"forrige m\xe5ned"},"month-short":{0:"denne md.",1:"neste md.",future:{one:"om {0} md.",other:"om {0} md."},past:{one:"for {0} md. siden",other:"for {0} md. siden"},"-1":"forrige md."},"month-narrow":{0:"denne md.",1:"neste md.",future:{one:"+{0} md.",other:"+{0} md."},past:{one:"-{0} md.",other:"-{0} md."},"-1":"forrige md."},week:{0:"denne uken",1:"neste uke",future:{one:"om {0} uke",other:"om {0} uker"},past:{one:"for {0} uke siden",other:"for {0} uker siden"},"-1":"forrige uke"},"week-short":{0:"denne uken",1:"neste uke",future:{one:"om {0} u.",other:"om {0} u."},past:{one:"for {0} u. siden",other:"for {0} u. siden"},"-1":"forrige uke"},"week-narrow":{0:"denne uken",1:"neste uke",future:{one:"+{0} u.",other:"+{0} u."},past:{one:"-{0} u.",other:"-{0} u."},"-1":"forrige uke"},day:{0:"i dag",1:"i morgen",2:"i overmorgen",future:{one:"om {0} d\xf8gn",other:"om {0} d\xf8gn"},past:{one:"for {0} d\xf8gn siden",other:"for {0} d\xf8gn siden"},"-2":"i forg\xe5rs","-1":"i g\xe5r"},"day-short":{0:"i dag",1:"i morgen",2:"i overmorgen",future:{one:"om {0} d.",other:"om {0} d."},past:{one:"for {0} d. siden",other:"for {0} d. siden"},"-2":"i forg\xe5rs","-1":"i g\xe5r"},"day-narrow":{0:"i dag",1:"i morgen",2:"+2 d.",future:{one:"+{0} d.",other:"+{0} d."},past:{one:"-{0} d.",other:"-{0} d."},"-2":"-2 d.","-1":"i g\xe5r"},hour:{0:"denne timen",future:{one:"om {0} time",other:"om {0} timer"},past:{one:"for {0} time siden",other:"for {0} timer siden"}},"hour-short":{0:"denne timen",future:{one:"om {0} t",other:"om {0} t"},past:{one:"for {0} t siden",other:"for {0} t siden"}},"hour-narrow":{0:"denne timen",future:{one:"+{0} t",other:"+{0} t"},past:{one:"-{0} t",other:"-{0} t"}},minute:{0:"dette minuttet",future:{one:"om {0} minutt",other:"om {0} minutter"},past:{one:"for {0} minutt siden",other:"for {0} minutter siden"}},"minute-short":{0:"dette minuttet",future:{one:"om {0} min",other:"om {0} min"},past:{one:"for {0} min siden",other:"for {0} min siden"}},"minute-narrow":{0:"dette minuttet",future:{one:"+{0} min",other:"+{0} min"},past:{one:"-{0} min",other:"-{0} min"}},second:{0:"n\xe5",future:{one:"om {0} sekund",other:"om {0} sekunder"},past:{one:"for {0} sekund siden",other:"for {0} sekunder siden"}},"second-short":{0:"n\xe5",future:{one:"om {0} sek",other:"om {0} sek"},past:{one:"for {0} sek siden",other:"for {0} sek siden"}},"second-narrow":{0:"n\xe5",future:{one:"+{0} s",other:"+{0} s"},past:{one:"-{0} s",other:"-{0} s"}}},locale:"nb"})},84075:()=>{Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&Intl.RelativeTimeFormat.__addLocaleData({data:{nu:["latn"],year:{0:"dit jaar",1:"volgend jaar",future:{one:"over {0} jaar",other:"over {0} jaar"},past:{one:"{0} jaar geleden",other:"{0} jaar geleden"},"-1":"vorig jaar"},"year-short":{0:"dit jaar",1:"volgend jaar",future:{one:"over {0} jaar",other:"over {0} jaar"},past:{one:"{0} jaar geleden",other:"{0} jaar geleden"},"-1":"vorig jaar"},"year-narrow":{0:"dit jaar",1:"volgend jaar",future:{one:"over {0} jaar",other:"over {0} jaar"},past:{one:"{0} jaar geleden",other:"{0} jaar geleden"},"-1":"vorig jaar"},quarter:{0:"dit kwartaal",1:"volgend kwartaal",future:{one:"over {0} kwartaal",other:"over {0} kwartalen"},past:{one:"{0} kwartaal geleden",other:"{0} kwartalen geleden"},"-1":"vorig kwartaal"},"quarter-short":{0:"dit kwartaal",1:"volgend kwartaal",future:{one:"over {0} kwartaal",other:"over {0} kwartalen"},past:{one:"{0} kwartaal geleden",other:"{0} kwartalen geleden"},"-1":"vorig kwartaal"},"quarter-narrow":{0:"dit kwartaal",1:"volgend kwartaal",future:{one:"over {0} kw.",other:"over {0} kwartalen"},past:{one:"{0} kwartaal geleden",other:"{0} kwartalen geleden"},"-1":"vorig kwartaal"},month:{0:"deze maand",1:"volgende maand",future:{one:"over {0} maand",other:"over {0} maanden"},past:{one:"{0} maand geleden",other:"{0} maanden geleden"},"-1":"vorige maand"},"month-short":{0:"deze maand",1:"volgende maand",future:{one:"over {0} maand",other:"over {0} maanden"},past:{one:"{0} maand geleden",other:"{0} maanden geleden"},"-1":"vorige maand"},"month-narrow":{0:"deze maand",1:"volgende maand",future:{one:"over {0} maand",other:"over {0} maanden"},past:{one:"{0} maand geleden",other:"{0} maanden geleden"},"-1":"vorige maand"},week:{0:"deze week",1:"volgende week",future:{one:"over {0} week",other:"over {0} weken"},past:{one:"{0} week geleden",other:"{0} weken geleden"},"-1":"vorige week"},"week-short":{0:"deze week",1:"volgende week",future:{one:"over {0} week",other:"over {0} weken"},past:{one:"{0} week geleden",other:"{0} weken geleden"},"-1":"vorige week"},"week-narrow":{0:"deze week",1:"volgende week",future:{one:"over {0} week",other:"over {0} weken"},past:{one:"{0} week geleden",other:"{0} weken geleden"},"-1":"vorige week"},day:{0:"vandaag",1:"morgen",2:"overmorgen",future:{one:"over {0} dag",other:"over {0} dagen"},past:{one:"{0} dag geleden",other:"{0} dagen geleden"},"-2":"eergisteren","-1":"gisteren"},"day-short":{0:"vandaag",1:"morgen",2:"overmorgen",future:{one:"over {0} dag",other:"over {0} dgn"},past:{one:"{0} dag geleden",other:"{0} dgn geleden"},"-2":"eergisteren","-1":"gisteren"},"day-narrow":{0:"vandaag",1:"morgen",2:"overmorgen",future:{one:"over {0} dag",other:"over {0} dgn"},past:{one:"{0} dag geleden",other:"{0} dgn geleden"},"-2":"eergisteren","-1":"gisteren"},hour:{0:"binnen een uur",future:{one:"over {0} uur",other:"over {0} uur"},past:{one:"{0} uur geleden",other:"{0} uur geleden"}},"hour-short":{0:"binnen een uur",future:{one:"over {0} uur",other:"over {0} uur"},past:{one:"{0} uur geleden",other:"{0} uur geleden"}},"hour-narrow":{0:"binnen een uur",future:{one:"over {0} uur",other:"over {0} uur"},past:{one:"{0} uur geleden",other:"{0} uur geleden"}},minute:{0:"binnen een minuut",future:{one:"over {0} minuut",other:"over {0} minuten"},past:{one:"{0} minuut geleden",other:"{0} minuten geleden"}},"minute-short":{0:"binnen een minuut",future:{one:"over {0} min.",other:"over {0} min."},past:{one:"{0} min. geleden",other:"{0} min. geleden"}},"minute-narrow":{0:"binnen een minuut",future:{one:"over {0} min.",other:"over {0} min."},past:{one:"{0} min. geleden",other:"{0} min. geleden"}},second:{0:"nu",future:{one:"over {0} seconde",other:"over {0} seconden"},past:{one:"{0} seconde geleden",other:"{0} seconden geleden"}},"second-short":{0:"nu",future:{one:"over {0} sec.",other:"over {0} sec."},past:{one:"{0} sec. geleden",other:"{0} sec. geleden"}},"second-narrow":{0:"nu",future:{one:"over {0} sec.",other:"over {0} sec."},past:{one:"{0} sec. geleden",other:"{0} sec. geleden"}}},locale:"nl"})},66941:()=>{Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&Intl.RelativeTimeFormat.__addLocaleData({data:{nu:["latn"],year:{0:"w tym roku",1:"w przysz\u0142ym roku",future:{one:"za {0} rok",few:"za {0} lata",many:"za {0} lat",other:"za {0} roku"},past:{one:"{0} rok temu",few:"{0} lata temu",many:"{0} lat temu",other:"{0} roku temu"},"-1":"w zesz\u0142ym roku"},"year-short":{0:"w tym roku",1:"w przysz\u0142ym roku",future:{one:"za {0} rok",few:"za {0} lata",many:"za {0} lat",other:"za {0} roku"},past:{one:"{0} rok temu",few:"{0} lata temu",many:"{0} lat temu",other:"{0} roku temu"},"-1":"w zesz\u0142ym roku"},"year-narrow":{0:"w tym roku",1:"w przysz\u0142ym roku",future:{one:"za {0} rok",few:"za {0} lata",many:"za {0} lat",other:"za {0} roku"},past:{one:"{0} rok temu",few:"{0} lata temu",many:"{0} lat temu",other:"{0} roku temu"},"-1":"w zesz\u0142ym roku"},quarter:{0:"w tym kwartale",1:"w przysz\u0142ym kwartale",future:{one:"za {0} kwarta\u0142",few:"za {0} kwarta\u0142y",many:"za {0} kwarta\u0142\xf3w",other:"za {0} kwarta\u0142u"},past:{one:"{0} kwarta\u0142 temu",few:"{0} kwarta\u0142y temu",many:"{0} kwarta\u0142\xf3w temu",other:"{0} kwarta\u0142u temu"},"-1":"w zesz\u0142ym kwartale"},"quarter-short":{0:"w tym kwartale",1:"w przysz\u0142ym kwartale",future:{one:"za {0} kw.",few:"za {0} kw.",many:"za {0} kw.",other:"za {0} kw."},past:{one:"{0} kw. temu",few:"{0} kw. temu",many:"{0} kw. temu",other:"{0} kw. temu"},"-1":"w zesz\u0142ym kwartale"},"quarter-narrow":{0:"w tym kwartale",1:"w przysz\u0142ym kwartale",future:{one:"za {0} kw.",few:"za {0} kw.",many:"za {0} kw.",other:"za {0} kw."},past:{one:"{0} kw. temu",few:"{0} kw. temu",many:"{0} kw. temu",other:"{0} kw. temu"},"-1":"w zesz\u0142ym kwartale"},month:{0:"w tym miesi\u0105cu",1:"w przysz\u0142ym miesi\u0105cu",future:{one:"za {0} miesi\u0105c",few:"za {0} miesi\u0105ce",many:"za {0} miesi\u0119cy",other:"za {0} miesi\u0105ca"},past:{one:"{0} miesi\u0105c temu",few:"{0} miesi\u0105ce temu",many:"{0} miesi\u0119cy temu",other:"{0} miesi\u0105ca temu"},"-1":"w zesz\u0142ym miesi\u0105cu"},"month-short":{0:"w tym mies.",1:"w przysz\u0142ym mies.",future:{one:"za {0} mies.",few:"za {0} mies.",many:"za {0} mies.",other:"za {0} mies."},past:{one:"{0} mies. temu",few:"{0} mies. temu",many:"{0} mies. temu",other:"{0} mies. temu"},"-1":"w zesz\u0142ym mies."},"month-narrow":{0:"w tym mies.",1:"w przysz\u0142ym mies.",future:{one:"za {0} mies.",few:"za {0} mies.",many:"za {0} mies.",other:"za {0} mies."},past:{one:"{0} mies. temu",few:"{0} mies. temu",many:"{0} mies. temu",other:"{0} mies. temu"},"-1":"w zesz\u0142ym mies."},week:{0:"w tym tygodniu",1:"w przysz\u0142ym tygodniu",future:{one:"za {0} tydzie\u0144",few:"za {0} tygodnie",many:"za {0} tygodni",other:"za {0} tygodnia"},past:{one:"{0} tydzie\u0144 temu",few:"{0} tygodnie temu",many:"{0} tygodni temu",other:"{0} tygodnia temu"},"-1":"w zesz\u0142ym tygodniu"},"week-short":{0:"w tym tyg.",1:"w przysz\u0142ym tyg.",future:{one:"za {0} tydz.",few:"za {0} tyg.",many:"za {0} tyg.",other:"za {0} tyg."},past:{one:"{0} tydz. temu",few:"{0} tyg. temu",many:"{0} tyg. temu",other:"{0} tyg. temu"},"-1":"w zesz\u0142ym tyg."},"week-narrow":{0:"w tym tyg.",1:"w przysz\u0142ym tyg.",future:{one:"za {0} tydz.",few:"za {0} tyg.",many:"za {0} tyg.",other:"za {0} tyg."},past:{one:"{0} tydz. temu",few:"{0} tyg. temu",many:"{0} tyg. temu",other:"{0} tyg. temu"},"-1":"w zesz\u0142ym tyg."},day:{0:"dzisiaj",1:"jutro",2:"pojutrze",future:{one:"za {0} dzie\u0144",few:"za {0} dni",many:"za {0} dni",other:"za {0} dnia"},past:{one:"{0} dzie\u0144 temu",few:"{0} dni temu",many:"{0} dni temu",other:"{0} dnia temu"},"-2":"przedwczoraj","-1":"wczoraj"},"day-short":{0:"dzisiaj",1:"jutro",2:"pojutrze",future:{one:"za {0} dzie\u0144",few:"za {0} dni",many:"za {0} dni",other:"za {0} dnia"},past:{one:"{0} dzie\u0144 temu",few:"{0} dni temu",many:"{0} dni temu",other:"{0} dnia temu"},"-2":"przedwczoraj","-1":"wczoraj"},"day-narrow":{0:"dzi\u015b",1:"jutro",2:"pojutrze",future:{one:"za {0} dzie\u0144",few:"za {0} dni",many:"za {0} dni",other:"za {0} dnia"},past:{one:"{0} dzie\u0144 temu",few:"{0} dni temu",many:"{0} dni temu",other:"{0} dnia temu"},"-2":"przedwczoraj","-1":"wcz."},hour:{0:"ta godzina",future:{one:"za {0} godzin\u0119",few:"za {0} godziny",many:"za {0} godzin",other:"za {0} godziny"},past:{one:"{0} godzin\u0119 temu",few:"{0} godziny temu",many:"{0} godzin temu",other:"{0} godziny temu"}},"hour-short":{0:"ta godzina",future:{one:"za {0} godz.",few:"za {0} godz.",many:"za {0} godz.",other:"za {0} godz."},past:{one:"{0} godz. temu",few:"{0} godz. temu",many:"{0} godz. temu",other:"{0} godz. temu"}},"hour-narrow":{0:"ta godzina",future:{one:"za {0} g.",few:"za {0} g.",many:"za {0} g.",other:"za {0} g."},past:{one:"{0} g. temu",few:"{0} g. temu",many:"{0} g. temu",other:"{0} g. temu"}},minute:{0:"ta minuta",future:{one:"za {0} minut\u0119",few:"za {0} minuty",many:"za {0} minut",other:"za {0} minuty"},past:{one:"{0} minut\u0119 temu",few:"{0} minuty temu",many:"{0} minut temu",other:"{0} minuty temu"}},"minute-short":{0:"ta minuta",future:{one:"za {0} min",few:"za {0} min",many:"za {0} min",other:"za {0} min"},past:{one:"{0} min temu",few:"{0} min temu",many:"{0} min temu",other:"{0} min temu"}},"minute-narrow":{0:"ta minuta",future:{one:"za {0} min",few:"za {0} min",many:"za {0} min",other:"za {0} min"},past:{one:"{0} min temu",few:"{0} min temu",many:"{0} min temu",other:"{0} min temu"}},second:{0:"teraz",future:{one:"za {0} sekund\u0119",few:"za {0} sekundy",many:"za {0} sekund",other:"za {0} sekundy"},past:{one:"{0} sekund\u0119 temu",few:"{0} sekundy temu",many:"{0} sekund temu",other:"{0} sekundy temu"}},"second-short":{0:"teraz",future:{one:"za {0} sek.",few:"za {0} sek.",many:"za {0} sek.",other:"za {0} sek."},past:{one:"{0} sek. temu",few:"{0} sek. temu",many:"{0} sek. temu",other:"{0} sek. temu"}},"second-narrow":{0:"teraz",future:{one:"za {0} s",few:"za {0} s",many:"za {0} s",other:"za {0} s"},past:{one:"{0} s temu",few:"{0} s temu",many:"{0} s temu",other:"{0} s temu"}}},locale:"pl"})},12750:()=>{Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&Intl.RelativeTimeFormat.__addLocaleData({data:{nu:["latn"],year:{0:"este ano",1:"pr\xf3ximo ano",future:{one:"em {0} ano",other:"em {0} anos"},past:{one:"h\xe1 {0} ano",other:"h\xe1 {0} anos"},"-1":"ano passado"},"year-short":{0:"este ano",1:"pr\xf3ximo ano",future:{one:"em {0} ano",other:"em {0} anos"},past:{one:"h\xe1 {0} ano",other:"h\xe1 {0} anos"},"-1":"ano passado"},"year-narrow":{0:"este ano",1:"pr\xf3ximo ano",future:{one:"em {0} ano",other:"em {0} anos"},past:{one:"h\xe1 {0} ano",other:"h\xe1 {0} anos"},"-1":"ano passado"},quarter:{0:"este trimestre",1:"pr\xf3ximo trimestre",future:{one:"em {0} trimestre",other:"em {0} trimestres"},past:{one:"h\xe1 {0} trimestre",other:"h\xe1 {0} trimestres"},"-1":"\xfaltimo trimestre"},"quarter-short":{0:"este trimestre",1:"pr\xf3ximo trimestre",future:{one:"em {0} trim.",other:"em {0} trim."},past:{one:"h\xe1 {0} trim.",other:"h\xe1 {0} trim."},"-1":"\xfaltimo trimestre"},"quarter-narrow":{0:"este trimestre",1:"pr\xf3ximo trimestre",future:{one:"em {0} trim.",other:"em {0} trim."},past:{one:"h\xe1 {0} trim.",other:"h\xe1 {0} trim."},"-1":"\xfaltimo trimestre"},month:{0:"este m\xeas",1:"pr\xf3ximo m\xeas",future:{one:"em {0} m\xeas",other:"em {0} meses"},past:{one:"h\xe1 {0} m\xeas",other:"h\xe1 {0} meses"},"-1":"m\xeas passado"},"month-short":{0:"este m\xeas",1:"pr\xf3ximo m\xeas",future:{one:"em {0} m\xeas",other:"em {0} meses"},past:{one:"h\xe1 {0} m\xeas",other:"h\xe1 {0} meses"},"-1":"m\xeas passado"},"month-narrow":{0:"este m\xeas",1:"pr\xf3ximo m\xeas",future:{one:"em {0} m\xeas",other:"em {0} meses"},past:{one:"h\xe1 {0} m\xeas",other:"h\xe1 {0} meses"},"-1":"m\xeas passado"},week:{0:"esta semana",1:"pr\xf3xima semana",future:{one:"em {0} semana",other:"em {0} semanas"},past:{one:"h\xe1 {0} semana",other:"h\xe1 {0} semanas"},"-1":"semana passada"},"week-short":{0:"esta semana",1:"pr\xf3xima semana",future:{one:"em {0} sem.",other:"em {0} sem."},past:{one:"h\xe1 {0} sem.",other:"h\xe1 {0} sem."},"-1":"semana passada"},"week-narrow":{0:"esta semana",1:"pr\xf3xima semana",future:{one:"em {0} sem.",other:"em {0} sem."},past:{one:"h\xe1 {0} sem.",other:"h\xe1 {0} sem."},"-1":"semana passada"},day:{0:"hoje",1:"amanh\xe3",2:"depois de amanh\xe3",future:{one:"em {0} dia",other:"em {0} dias"},past:{one:"h\xe1 {0} dia",other:"h\xe1 {0} dias"},"-2":"anteontem","-1":"ontem"},"day-short":{0:"hoje",1:"amanh\xe3",2:"depois de amanh\xe3",future:{one:"em {0} dia",other:"em {0} dias"},past:{one:"h\xe1 {0} dia",other:"h\xe1 {0} dias"},"-2":"anteontem","-1":"ontem"},"day-narrow":{0:"hoje",1:"amanh\xe3",2:"depois de amanh\xe3",future:{one:"em {0} dia",other:"em {0} dias"},past:{one:"h\xe1 {0} dia",other:"h\xe1 {0} dias"},"-2":"anteontem","-1":"ontem"},hour:{0:"esta hora",future:{one:"em {0} hora",other:"em {0} horas"},past:{one:"h\xe1 {0} hora",other:"h\xe1 {0} horas"}},"hour-short":{0:"esta hora",future:{one:"em {0} h",other:"em {0} h"},past:{one:"h\xe1 {0} h",other:"h\xe1 {0} h"}},"hour-narrow":{0:"esta hora",future:{one:"em {0} h",other:"em {0} h"},past:{one:"h\xe1 {0} h",other:"h\xe1 {0} h"}},minute:{0:"este minuto",future:{one:"em {0} minuto",other:"em {0} minutos"},past:{one:"h\xe1 {0} minuto",other:"h\xe1 {0} minutos"}},"minute-short":{0:"este minuto",future:{one:"em {0} min.",other:"em {0} min."},past:{one:"h\xe1 {0} min.",other:"h\xe1 {0} min."}},"minute-narrow":{0:"este minuto",future:{one:"em {0} min.",other:"em {0} min."},past:{one:"h\xe1 {0} min.",other:"h\xe1 {0} min."}},second:{0:"agora",future:{one:"em {0} segundo",other:"em {0} segundos"},past:{one:"h\xe1 {0} segundo",other:"h\xe1 {0} segundos"}},"second-short":{0:"agora",future:{one:"em {0} seg.",other:"em {0} seg."},past:{one:"h\xe1 {0} seg.",other:"h\xe1 {0} seg."}},"second-narrow":{0:"agora",future:{one:"em {0} seg.",other:"em {0} seg."},past:{one:"h\xe1 {0} seg.",other:"h\xe1 {0} seg."}}},locale:"pt"})},98306:()=>{Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&Intl.RelativeTimeFormat.__addLocaleData({data:{nu:["latn"],year:{0:"i \xe5r",1:"n\xe4sta \xe5r",future:{one:"om {0} \xe5r",other:"om {0} \xe5r"},past:{one:"f\xf6r {0} \xe5r sedan",other:"f\xf6r {0} \xe5r sedan"},"-1":"i fjol"},"year-short":{0:"i \xe5r",1:"n\xe4sta \xe5r",future:{one:"om {0} \xe5r",other:"om {0} \xe5r"},past:{one:"f\xf6r {0} \xe5r sen",other:"f\xf6r {0} \xe5r sen"},"-1":"i fjol"},"year-narrow":{0:"i \xe5r",1:"n\xe4sta \xe5r",future:{one:"+{0} \xe5r",other:"+{0} \xe5r"},past:{one:"\u2212{0} \xe5r",other:"\u2212{0} \xe5r"},"-1":"i fjol"},quarter:{0:"detta kvartal",1:"n\xe4sta kvartal",future:{one:"om {0} kvartal",other:"om {0} kvartal"},past:{one:"f\xf6r {0} kvartal sedan",other:"f\xf6r {0} kvartal sedan"},"-1":"f\xf6rra kvartalet"},"quarter-short":{0:"detta kv.",1:"n\xe4sta kv.",future:{one:"om {0} kv.",other:"om {0} kv."},past:{one:"f\xf6r {0} kv. sen",other:"f\xf6r {0} kv. sen"},"-1":"f\xf6rra kv."},"quarter-narrow":{0:"detta kv.",1:"n\xe4sta kv.",future:{one:"+{0} kv.",other:"+{0} kv."},past:{one:"\u2212{0} kv",other:"\u2212{0} kv"},"-1":"f\xf6rra kv."},month:{0:"denna m\xe5nad",1:"n\xe4sta m\xe5nad",future:{one:"om {0} m\xe5nad",other:"om {0} m\xe5nader"},past:{one:"f\xf6r {0} m\xe5nad sedan",other:"f\xf6r {0} m\xe5nader sedan"},"-1":"f\xf6rra m\xe5naden"},"month-short":{0:"denna m\xe5n.",1:"n\xe4sta m\xe5n.",future:{one:"om {0} m\xe5n.",other:"om {0} m\xe5n."},past:{one:"f\xf6r {0} m\xe5n. sen",other:"f\xf6r {0} m\xe5n. sen"},"-1":"f\xf6rra m\xe5n."},"month-narrow":{0:"denna m\xe5n.",1:"n\xe4sta m\xe5n.",future:{one:"+{0} m\xe5n.",other:"+{0} m\xe5n."},past:{one:"\u2212{0} m\xe5n",other:"\u2212{0} m\xe5n"},"-1":"f\xf6rra m\xe5n."},week:{0:"denna vecka",1:"n\xe4sta vecka",future:{one:"om {0} vecka",other:"om {0} veckor"},past:{one:"f\xf6r {0} vecka sedan",other:"f\xf6r {0} veckor sedan"},"-1":"f\xf6rra veckan"},"week-short":{0:"denna v.",1:"n\xe4sta v.",future:{one:"om {0} v.",other:"om {0} v."},past:{one:"f\xf6r {0} v. sedan",other:"f\xf6r {0} v. sedan"},"-1":"f\xf6rra v."},"week-narrow":{0:"denna v.",1:"n\xe4sta v.",future:{one:"+{0} v.",other:"+{0} v."},past:{one:"\u2212{0} v",other:"\u2212{0} v"},"-1":"f\xf6rra v."},day:{0:"i dag",1:"i morgon",2:"i \xf6vermorgon",future:{one:"om {0} dag",other:"om {0} dagar"},past:{one:"f\xf6r {0} dag sedan",other:"f\xf6r {0} dagar sedan"},"-2":"i f\xf6rrg\xe5r","-1":"i g\xe5r"},"day-short":{0:"i dag",1:"i morgon",2:"i \xf6vermorgon",future:{one:"om {0} d",other:"om {0} d"},past:{one:"f\xf6r {0} d sedan",other:"f\xf6r\xa0{0}\xa0d sedan"},"-2":"i f\xf6rrg\xe5r","-1":"i g\xe5r"},"day-narrow":{0:"idag",1:"imorgon",2:"i \xf6vermorgon",future:{one:"+{0} d",other:"+{0} d"},past:{one:"\u2212{0} d",other:"\u2212{0} d"},"-2":"i f\xf6rrg\xe5r","-1":"ig\xe5r"},hour:{0:"denna timme",future:{one:"om {0} timme",other:"om {0} timmar"},past:{one:"f\xf6r {0} timme sedan",other:"f\xf6r {0} timmar sedan"}},"hour-short":{0:"denna timme",future:{one:"om {0} tim",other:"om {0} tim"},past:{one:"f\xf6r {0} tim sedan",other:"f\xf6r {0} tim sedan"}},"hour-narrow":{0:"denna timme",future:{one:"+{0} h",other:"+{0} h"},past:{one:"\u2212{0} h",other:"\u2212{0} h"}},minute:{0:"denna minut",future:{one:"om {0} minut",other:"om {0} minuter"},past:{one:"f\xf6r {0} minut sedan",other:"f\xf6r {0} minuter sedan"}},"minute-short":{0:"denna minut",future:{one:"om\xa0{0} min",other:"om\xa0{0} min"},past:{one:"f\xf6r {0} min sen",other:"f\xf6r {0} min sen"}},"minute-narrow":{0:"denna minut",future:{one:"+{0} min",other:"+{0} min"},past:{one:"\u2212{0} min",other:"\u2212{0} min"}},second:{0:"nu",future:{one:"om {0} sekund",other:"om {0} sekunder"},past:{one:"f\xf6r {0} sekund sedan",other:"f\xf6r {0} sekunder sedan"}},"second-short":{0:"nu",future:{one:"om\xa0{0} sek",other:"om {0} sek"},past:{one:"f\xf6r {0} s sen",other:"f\xf6r {0} s sen"}},"second-narrow":{0:"nu",future:{one:"+{0} s",other:"+{0} s"},past:{one:"\u2212{0} s",other:"\u2212{0} s"}}},locale:"sv"})},79776:(e,t,n)=>{"use strict";function r(e){return Intl.getCanonicalLocales(e)}function i(e,t){var n=t.tzData,r=t.uppercaseLinks,i=e.toUpperCase(),o=Object.keys(n).reduce((function(e,t){return e[t.toUpperCase()]=t,e}),{}),a=r[i]||o[i];return"Etc/UTC"===a||"Etc/GMT"===a?"UTC":a}function o(e){if("symbol"==typeof e)throw TypeError("Cannot convert a Symbol value to a string");return String(e)}function a(e){if(void 0===e)return NaN;if(null===e)return 0;if("boolean"==typeof e)return e?1:0;if("number"==typeof e)return e;if("symbol"==typeof e||"bigint"==typeof e)throw new TypeError("Cannot convert symbol/bigint to number");return Number(e)}function s(e){return isFinite(e)?Math.abs(e)>8640000000000001?NaN:function(e){var t=a(e);if(isNaN(t)||u(t,-0))return 0;if(isFinite(t))return t;var n=Math.floor(Math.abs(t));return t<0&&(n=-n),u(n,-0)?0:n}(e):NaN}function l(e){if(null==e)throw new TypeError("undefined/null cannot be converted to object");return Object(e)}function u(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t}function c(e){return new Array(e)}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":void 0}n.r(t),n.d(t,{ApplyUnsignedRoundingMode:()=>V,ArrayCreate:()=>c,CanonicalizeLocaleList:()=>r,CanonicalizeTimeZoneName:()=>i,CoerceOptionsToObject:()=>A,CollapseNumberRange:()=>q,ComputeExponent:()=>oe,ComputeExponentForMagnitude:()=>te,CurrencyDigits:()=>ae,DateFromTime:()=>S,Day:()=>m,DayFromYear:()=>y,DayWithinYear:()=>x,DaysInYear:()=>b,FormatApproximately:()=>se,FormatNumericRange:()=>_e,FormatNumericRangeToParts:()=>be,FormatNumericToParts:()=>xe,FormatNumericToString:()=>ie,GetNumberOption:()=>I,GetOption:()=>L,GetOptionsObject:()=>D,GetStringOrBooleanOption:()=>R,GetUnsignedRoundingMode:()=>Se,HasOwnProperty:()=>d,HourFromTime:()=>T,InLeapYear:()=>w,InitializeNumberFormat:()=>Pe,IsSanctionedSimpleUnitIdentifier:()=>B,IsValidTimeZoneName:()=>F,IsWellFormedCurrencyCode:()=>G,IsWellFormedUnitIdentifier:()=>H,MinFromTime:()=>M,MonthFromTime:()=>E,OrdinaryHasInstance:()=>C,PartitionNumberPattern:()=>ye,PartitionNumberRangePattern:()=>ve,PartitionPattern:()=>Ae,RangePatternType:()=>Le,SANCTIONED_UNITS:()=>N,SIMPLE_UNITS:()=>j,SameValue:()=>u,SecFromTime:()=>k,SetNumberFormatDigitOptions:()=>ke,SetNumberFormatUnitOptions:()=>Me,SupportedLocales:()=>Ie,TimeClip:()=>s,TimeFromYear:()=>v,ToNumber:()=>a,ToObject:()=>l,ToRawFixed:()=>re,ToRawPrecision:()=>ne,ToString:()=>o,Type:()=>h,WeekDay:()=>g,YearFromTime:()=>_,_formatToParts:()=>fe,defineProperty:()=>Q,getInternalSlot:()=>Y,getMagnitude:()=>$,getMultiInternalSlots:()=>K,invariant:()=>ee,isLiteralPart:()=>J,isMissingLocaleDataError:()=>Ne,msFromTime:()=>P,removeUnitNamespace:()=>z,setInternalSlot:()=>Z,setMultiInternalSlots:()=>X});var f=864e5;function p(e,t){return e-Math.floor(e/t)*t}function m(e){return Math.floor(e/f)}function g(e){return p(m(e)+4,7)}function y(e){return Date.UTC(e,0)/f}function v(e){return Date.UTC(e,0)}function _(e){return new Date(e).getUTCFullYear()}function b(e){return e%4!=0?365:e%100!=0?366:e%400!=0?365:366}function x(e){return m(e)-y(_(e))}function w(e){return 365===b(_(e))?0:1}function E(e){var t=x(e),n=w(e);if(t>=0&&t<31)return 0;if(t<59+n)return 1;if(t<90+n)return 2;if(t<120+n)return 3;if(t<151+n)return 4;if(t<181+n)return 5;if(t<212+n)return 6;if(t<243+n)return 7;if(t<273+n)return 8;if(t<304+n)return 9;if(t<334+n)return 10;if(t<365+n)return 11;throw new Error("Invalid time")}function S(e){var t=x(e),n=E(e),r=w(e);if(0===n)return t+1;if(1===n)return t-30;if(2===n)return t-58-r;if(3===n)return t-89-r;if(4===n)return t-119-r;if(5===n)return t-150-r;if(6===n)return t-180-r;if(7===n)return t-211-r;if(8===n)return t-242-r;if(9===n)return t-272-r;if(10===n)return t-303-r;if(11===n)return t-333-r;throw new Error("Invalid time")}function T(e){return p(Math.floor(e/36e5),24)}function M(e){return p(Math.floor(e/6e4),60)}function k(e){return p(Math.floor(e/1e3),60)}function C(e,t,n){if("function"!=typeof e)return!1;if(null==n?void 0:n.boundTargetFunction)return t instanceof(null==n?void 0:n.boundTargetFunction);if("object"!=typeof t)return!1;var r=e.prototype;if("object"!=typeof r)throw new TypeError("OrdinaryHasInstance called on an object with an invalid prototype property.");return Object.prototype.isPrototypeOf.call(r,t)}function P(e){return p(e,1e3)}function A(e){return void 0===e?Object.create(null):l(e)}function O(e,t,n,r){if(void 0!==e){if(e=Number(e),isNaN(e)||e<t||e>n)throw new RangeError("".concat(e," is outside of range [").concat(t,", ").concat(n,"]"));return Math.floor(e)}return r}function I(e,t,n,r,i){return O(e[t],n,r,i)}function L(e,t,n,r,i){if("object"!=typeof e)throw new TypeError("Options must be an object");var a=e[t];if(void 0!==a){if("boolean"!==n&&"string"!==n)throw new TypeError("invalid type");if("boolean"===n&&(a=Boolean(a)),"string"===n&&(a=o(a)),void 0!==r&&!r.filter((function(e){return e==a})).length)throw new RangeError("".concat(a," is not within ").concat(r.join(", ")));return a}return i}function D(e){if(void 0===e)return Object.create(null);if("object"==typeof e)return e;throw new TypeError("Options must be an object")}function R(e,t,n,r,i,a){var s=e[t];if(void 0===s)return a;if(!0===s)return r;if(!1===Boolean(s))return i;if("true"===(s=o(s))||"false"===s)return a;if(-1===(n||[]).indexOf(s))throw new RangeError("Invalid value ".concat(s));return s}var N=["angle-degree","area-acre","area-hectare","concentr-percent","digital-bit","digital-byte","digital-gigabit","digital-gigabyte","digital-kilobit","digital-kilobyte","digital-megabit","digital-megabyte","digital-petabyte","digital-terabit","digital-terabyte","duration-day","duration-hour","duration-millisecond","duration-minute","duration-month","duration-second","duration-week","duration-year","length-centimeter","length-foot","length-inch","length-kilometer","length-meter","length-mile-scandinavian","length-mile","length-millimeter","length-yard","mass-gram","mass-kilogram","mass-ounce","mass-pound","mass-stone","temperature-celsius","temperature-fahrenheit","volume-fluid-ounce","volume-gallon","volume-liter","volume-milliliter"];function z(e){return e.slice(e.indexOf("-")+1)}var j=N.map(z);function B(e){return j.indexOf(e)>-1}function F(e,t){var n=t.tzData,r=t.uppercaseLinks,i=e.toUpperCase(),o=new Set,a=new Set;return Object.keys(n).map((function(e){return e.toUpperCase()})).forEach((function(e){return o.add(e)})),Object.keys(r).forEach((function(e){a.add(e.toUpperCase()),o.add(r[e].toUpperCase())})),o.has(i)||a.has(i)}var U=/[^A-Z]/;function G(e){return 3===(e=e.replace(/([a-z])/g,(function(e,t){return t.toUpperCase()}))).length&&!U.test(e)}function H(e){if(B(e=e.replace(/([A-Z])/g,(function(e,t){return t.toLowerCase()}))))return!0;var t=e.split("-per-");if(2!==t.length)return!1;var n=t[0],r=t[1];return!(!B(n)||!B(r))}function V(e,t,n,r){if(e===t)return t;if(void 0===r)throw new Error("unsignedRoundingMode is mandatory");if("zero"===r)return t;if("infinity"===r)return n;var i=e-t,o=n-e;if(i<o)return t;if(o<i)return n;if(i!==o)throw new Error("Unexpected error");if("half-zero"===r)return t;if("half-infinity"===r)return n;if("half-even"!==r)throw new Error("Unexpected value for unsignedRoundingMode: ".concat(r));return 0==t/(n-t)%2?t:n}function q(e){return e}function $(e){return Math.floor(Math.log(e)*Math.LOG10E)}function W(e,t){if("function"==typeof e.repeat)return e.repeat(t);for(var n=new Array(t),r=0;r<n.length;r++)n[r]=e;return n.join("")}function Z(e,t,n,r){e.get(t)||e.set(t,Object.create(null)),e.get(t)[n]=r}function X(e,t,n){for(var r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];Z(e,t,o,n[o])}}function Y(e,t,n){return K(e,t,n)[n]}function K(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e.get(t);if(!i)throw new TypeError("".concat(t," InternalSlot has not been initialized"));return n.reduce((function(e,t){return e[t]=i[t],e}),Object.create(null))}function J(e){return"literal"===e.type}function Q(e,t,n){var r=n.value;Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:r})}function ee(e,t,n){if(void 0===n&&(n=Error),!e)throw new n(t)}function te(e,t,n){var r=(0,n.getInternalSlots)(e),i=r.notation,o=r.dataLocaleData,a=r.numberingSystem;switch(i){case"standard":return 0;case"scientific":return t;case"engineering":return 3*Math.floor(t/3);default:var s=r.compactDisplay,l=r.style,u=r.currencyDisplay,c=void 0;if("currency"===l&&"name"!==u)c=(o.numbers.currency[a]||o.numbers.currency[o.numbers.nu[0]]).short;else{var d=o.numbers.decimal[a]||o.numbers.decimal[o.numbers.nu[0]];c="long"===s?d.long:d.short}if(!c)return 0;var h=String(Math.pow(10,t)),f=Object.keys(c);if(h<f[0])return 0;if(h>f[f.length-1])return f[f.length-1].length-1;var p=f.indexOf(h);if(-1===p)return 0;var m=f[p];return"0"===c[m].other?0:m.length-c[m].other.match(/0+/)[0].length}}function ne(e,t,n){var r,i,o,a,s=n;if(0===e)r=W("0",s),i=0,o=0;else{var l=e.toString(),u=l.indexOf("e"),c=l.split("e"),d=c[0],h=c[1],f=d.replace(".","");if(u>=0&&f.length<=s)i=+h,r=f+W("0",s-f.length),o=e;else{var p=(i=$(e))-s+1,m=Math.round(y(e,p));y(m,s-1)>=10&&(i+=1,m=Math.floor(m/10)),r=m.toString(),o=y(m,s-1-i)}}if(i>=s-1?(r+=W("0",i-s+1),a=i+1):i>=0?(r="".concat(r.slice(0,i+1),".").concat(r.slice(i+1)),a=i+1):(r="0.".concat(W("0",-i-1)).concat(r),a=1),r.indexOf(".")>=0&&n>t){for(var g=n-t;g>0&&"0"===r[r.length-1];)r=r.slice(0,-1),g--;"."===r[r.length-1]&&(r=r.slice(0,-1))}return{formattedString:r,roundedNumber:o,integerDigitsCount:a};function y(e,t){return t<0?e*Math.pow(10,-t):e/Math.pow(10,t)}}function re(e,t,n){var r,i,o=n,a=Math.round(e*Math.pow(10,o)),s=a/Math.pow(10,o);if(a<1e21)r=a.toString();else{var l=(r=a.toString()).split("e"),u=l[0],c=l[1];r=u.replace(".",""),r+=W("0",Math.max(+c-r.length+1,0))}if(0!==o){var d=r.length;d<=o&&(r=W("0",o+1-d)+r,d=o+1);var h=r.slice(0,d-o),f=r.slice(d-o);r="".concat(h,".").concat(f),i=h.length}else i=r.length;for(var p=n-t;p>0&&"0"===r[r.length-1];)r=r.slice(0,-1),p--;return"."===r[r.length-1]&&(r=r.slice(0,-1)),{formattedString:r,roundedNumber:s,integerDigitsCount:i}}function ie(e,t){var n,r=t<0||u(t,-0);switch(r&&(t=-t),e.roundingType){case"significantDigits":n=ne(t,e.minimumSignificantDigits,e.maximumSignificantDigits);break;case"fractionDigits":n=re(t,e.minimumFractionDigits,e.maximumFractionDigits);break;default:(n=ne(t,1,2)).integerDigitsCount>1&&(n=re(t,0,0))}t=n.roundedNumber;var i=n.formattedString,o=n.integerDigitsCount,a=e.minimumIntegerDigits;return o<a&&(i=W("0",a-o)+i),r&&(t=-t),{roundedNumber:t,formattedString:i}}function oe(e,t,n){var r=n.getInternalSlots;if(0===t)return[0,0];t<0&&(t=-t);var i=$(t),o=te(e,i,{getInternalSlots:r});t=o<0?t*Math.pow(10,-o):t/Math.pow(10,o);var a=ie(r(e),t);return 0===a.roundedNumber||$(a.roundedNumber)===i-o?[o,i]:[te(e,i+1,{getInternalSlots:r}),i+1]}function ae(e,t){var n=t.currencyDigitsData;return d(n,e)?n[e]:2}function se(e,t,n){var r=(0,n.getInternalSlots)(e),i=r.dataLocaleData.numbers.symbols[r.numberingSystem].approximatelySign;return t.push({type:"approximatelySign",value:i}),t}var le={adlm:["\ud83a\udd50","\ud83a\udd51","\ud83a\udd52","\ud83a\udd53","\ud83a\udd54","\ud83a\udd55","\ud83a\udd56","\ud83a\udd57","\ud83a\udd58","\ud83a\udd59"],ahom:["\ud805\udf30","\ud805\udf31","\ud805\udf32","\ud805\udf33","\ud805\udf34","\ud805\udf35","\ud805\udf36","\ud805\udf37","\ud805\udf38","\ud805\udf39"],arab:["\u0660","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"],arabext:["\u06f0","\u06f1","\u06f2","\u06f3","\u06f4","\u06f5","\u06f6","\u06f7","\u06f8","\u06f9"],bali:["\u1b50","\u1b51","\u1b52","\u1b53","\u1b54","\u1b55","\u1b56","\u1b57","\u1b58","\u1b59"],beng:["\u09e6","\u09e7","\u09e8","\u09e9","\u09ea","\u09eb","\u09ec","\u09ed","\u09ee","\u09ef"],bhks:["\ud807\udc50","\ud807\udc51","\ud807\udc52","\ud807\udc53","\ud807\udc54","\ud807\udc55","\ud807\udc56","\ud807\udc57","\ud807\udc58","\ud807\udc59"],brah:["\ud804\udc66","\ud804\udc67","\ud804\udc68","\ud804\udc69","\ud804\udc6a","\ud804\udc6b","\ud804\udc6c","\ud804\udc6d","\ud804\udc6e","\ud804\udc6f"],cakm:["\ud804\udd36","\ud804\udd37","\ud804\udd38","\ud804\udd39","\ud804\udd3a","\ud804\udd3b","\ud804\udd3c","\ud804\udd3d","\ud804\udd3e","\ud804\udd3f"],cham:["\uaa50","\uaa51","\uaa52","\uaa53","\uaa54","\uaa55","\uaa56","\uaa57","\uaa58","\uaa59"],deva:["\u0966","\u0967","\u0968","\u0969","\u096a","\u096b","\u096c","\u096d","\u096e","\u096f"],diak:["\ud806\udd50","\ud806\udd51","\ud806\udd52","\ud806\udd53","\ud806\udd54","\ud806\udd55","\ud806\udd56","\ud806\udd57","\ud806\udd58","\ud806\udd59"],fullwide:["\uff10","\uff11","\uff12","\uff13","\uff14","\uff15","\uff16","\uff17","\uff18","\uff19"],gong:["\ud807\udda0","\ud807\udda1","\ud807\udda2","\ud807\udda3","\ud807\udda4","\ud807\udda5","\ud807\udda6","\ud807\udda7","\ud807\udda8","\ud807\udda9"],gonm:["\ud807\udd50","\ud807\udd51","\ud807\udd52","\ud807\udd53","\ud807\udd54","\ud807\udd55","\ud807\udd56","\ud807\udd57","\ud807\udd58","\ud807\udd59"],gujr:["\u0ae6","\u0ae7","\u0ae8","\u0ae9","\u0aea","\u0aeb","\u0aec","\u0aed","\u0aee","\u0aef"],guru:["\u0a66","\u0a67","\u0a68","\u0a69","\u0a6a","\u0a6b","\u0a6c","\u0a6d","\u0a6e","\u0a6f"],hanidec:["\u3007","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],hmng:["\ud81a\udf50","\ud81a\udf51","\ud81a\udf52","\ud81a\udf53","\ud81a\udf54","\ud81a\udf55","\ud81a\udf56","\ud81a\udf57","\ud81a\udf58","\ud81a\udf59"],hmnp:["\ud838\udd40","\ud838\udd41","\ud838\udd42","\ud838\udd43","\ud838\udd44","\ud838\udd45","\ud838\udd46","\ud838\udd47","\ud838\udd48","\ud838\udd49"],java:["\ua9d0","\ua9d1","\ua9d2","\ua9d3","\ua9d4","\ua9d5","\ua9d6","\ua9d7","\ua9d8","\ua9d9"],kali:["\ua900","\ua901","\ua902","\ua903","\ua904","\ua905","\ua906","\ua907","\ua908","\ua909"],khmr:["\u17e0","\u17e1","\u17e2","\u17e3","\u17e4","\u17e5","\u17e6","\u17e7","\u17e8","\u17e9"],knda:["\u0ce6","\u0ce7","\u0ce8","\u0ce9","\u0cea","\u0ceb","\u0cec","\u0ced","\u0cee","\u0cef"],lana:["\u1a80","\u1a81","\u1a82","\u1a83","\u1a84","\u1a85","\u1a86","\u1a87","\u1a88","\u1a89"],lanatham:["\u1a90","\u1a91","\u1a92","\u1a93","\u1a94","\u1a95","\u1a96","\u1a97","\u1a98","\u1a99"],laoo:["\u0ed0","\u0ed1","\u0ed2","\u0ed3","\u0ed4","\u0ed5","\u0ed6","\u0ed7","\u0ed8","\u0ed9"],lepc:["\u1a90","\u1a91","\u1a92","\u1a93","\u1a94","\u1a95","\u1a96","\u1a97","\u1a98","\u1a99"],limb:["\u1946","\u1947","\u1948","\u1949","\u194a","\u194b","\u194c","\u194d","\u194e","\u194f"],mathbold:["\ud835\udfce","\ud835\udfcf","\ud835\udfd0","\ud835\udfd1","\ud835\udfd2","\ud835\udfd3","\ud835\udfd4","\ud835\udfd5","\ud835\udfd6","\ud835\udfd7"],mathdbl:["\ud835\udfd8","\ud835\udfd9","\ud835\udfda","\ud835\udfdb","\ud835\udfdc","\ud835\udfdd","\ud835\udfde","\ud835\udfdf","\ud835\udfe0","\ud835\udfe1"],mathmono:["\ud835\udff6","\ud835\udff7","\ud835\udff8","\ud835\udff9","\ud835\udffa","\ud835\udffb","\ud835\udffc","\ud835\udffd","\ud835\udffe","\ud835\udfff"],mathsanb:["\ud835\udfec","\ud835\udfed","\ud835\udfee","\ud835\udfef","\ud835\udff0","\ud835\udff1","\ud835\udff2","\ud835\udff3","\ud835\udff4","\ud835\udff5"],mathsans:["\ud835\udfe2","\ud835\udfe3","\ud835\udfe4","\ud835\udfe5","\ud835\udfe6","\ud835\udfe7","\ud835\udfe8","\ud835\udfe9","\ud835\udfea","\ud835\udfeb"],mlym:["\u0d66","\u0d67","\u0d68","\u0d69","\u0d6a","\u0d6b","\u0d6c","\u0d6d","\u0d6e","\u0d6f"],modi:["\ud805\ude50","\ud805\ude51","\ud805\ude52","\ud805\ude53","\ud805\ude54","\ud805\ude55","\ud805\ude56","\ud805\ude57","\ud805\ude58","\ud805\ude59"],mong:["\u1810","\u1811","\u1812","\u1813","\u1814","\u1815","\u1816","\u1817","\u1818","\u1819"],mroo:["\ud81a\ude60","\ud81a\ude61","\ud81a\ude62","\ud81a\ude63","\ud81a\ude64","\ud81a\ude65","\ud81a\ude66","\ud81a\ude67","\ud81a\ude68","\ud81a\ude69"],mtei:["\uabf0","\uabf1","\uabf2","\uabf3","\uabf4","\uabf5","\uabf6","\uabf7","\uabf8","\uabf9"],mymr:["\u1040","\u1041","\u1042","\u1043","\u1044","\u1045","\u1046","\u1047","\u1048","\u1049"],mymrshan:["\u1090","\u1091","\u1092","\u1093","\u1094","\u1095","\u1096","\u1097","\u1098","\u1099"],mymrtlng:["\ua9f0","\ua9f1","\ua9f2","\ua9f3","\ua9f4","\ua9f5","\ua9f6","\ua9f7","\ua9f8","\ua9f9"],newa:["\ud805\udc50","\ud805\udc51","\ud805\udc52","\ud805\udc53","\ud805\udc54","\ud805\udc55","\ud805\udc56","\ud805\udc57","\ud805\udc58","\ud805\udc59"],nkoo:["\u07c0","\u07c1","\u07c2","\u07c3","\u07c4","\u07c5","\u07c6","\u07c7","\u07c8","\u07c9"],olck:["\u1c50","\u1c51","\u1c52","\u1c53","\u1c54","\u1c55","\u1c56","\u1c57","\u1c58","\u1c59"],orya:["\u0b66","\u0b67","\u0b68","\u0b69","\u0b6a","\u0b6b","\u0b6c","\u0b6d","\u0b6e","\u0b6f"],osma:["\ud801\udca0","\ud801\udca1","\ud801\udca2","\ud801\udca3","\ud801\udca4","\ud801\udca5","\ud801\udca6","\ud801\udca7","\ud801\udca8","\ud801\udca9"],rohg:["\ud803\udd30","\ud803\udd31","\ud803\udd32","\ud803\udd33","\ud803\udd34","\ud803\udd35","\ud803\udd36","\ud803\udd37","\ud803\udd38","\ud803\udd39"],saur:["\ua8d0","\ua8d1","\ua8d2","\ua8d3","\ua8d4","\ua8d5","\ua8d6","\ua8d7","\ua8d8","\ua8d9"],segment:["\ud83e\udff0","\ud83e\udff1","\ud83e\udff2","\ud83e\udff3","\ud83e\udff4","\ud83e\udff5","\ud83e\udff6","\ud83e\udff7","\ud83e\udff8","\ud83e\udff9"],shrd:["\ud804\uddd0","\ud804\uddd1","\ud804\uddd2","\ud804\uddd3","\ud804\uddd4","\ud804\uddd5","\ud804\uddd6","\ud804\uddd7","\ud804\uddd8","\ud804\uddd9"],sind:["\ud804\udef0","\ud804\udef1","\ud804\udef2","\ud804\udef3","\ud804\udef4","\ud804\udef5","\ud804\udef6","\ud804\udef7","\ud804\udef8","\ud804\udef9"],sinh:["\u0de6","\u0de7","\u0de8","\u0de9","\u0dea","\u0deb","\u0dec","\u0ded","\u0dee","\u0def"],sora:["\ud804\udcf0","\ud804\udcf1","\ud804\udcf2","\ud804\udcf3","\ud804\udcf4","\ud804\udcf5","\ud804\udcf6","\ud804\udcf7","\ud804\udcf8","\ud804\udcf9"],sund:["\u1bb0","\u1bb1","\u1bb2","\u1bb3","\u1bb4","\u1bb5","\u1bb6","\u1bb7","\u1bb8","\u1bb9"],takr:["\ud805\udec0","\ud805\udec1","\ud805\udec2","\ud805\udec3","\ud805\udec4","\ud805\udec5","\ud805\udec6","\ud805\udec7","\ud805\udec8","\ud805\udec9"],talu:["\u19d0","\u19d1","\u19d2","\u19d3","\u19d4","\u19d5","\u19d6","\u19d7","\u19d8","\u19d9"],tamldec:["\u0be6","\u0be7","\u0be8","\u0be9","\u0bea","\u0beb","\u0bec","\u0bed","\u0bee","\u0bef"],telu:["\u0c66","\u0c67","\u0c68","\u0c69","\u0c6a","\u0c6b","\u0c6c","\u0c6d","\u0c6e","\u0c6f"],thai:["\u0e50","\u0e51","\u0e52","\u0e53","\u0e54","\u0e55","\u0e56","\u0e57","\u0e58","\u0e59"],tibt:["\u0f20","\u0f21","\u0f22","\u0f23","\u0f24","\u0f25","\u0f26","\u0f27","\u0f28","\u0f29"],tirh:["\ud805\udcd0","\ud805\udcd1","\ud805\udcd2","\ud805\udcd3","\ud805\udcd4","\ud805\udcd5","\ud805\udcd6","\ud805\udcd7","\ud805\udcd8","\ud805\udcd9"],vaii:["\u1620","\u1621","\u1622","\u1623","\u1624","\u1625","\u1626","\u1627","\u1628","\u1629"],wara:["\ud806\udce0","\ud806\udce1","\ud806\udce2","\ud806\udce3","\ud806\udce4","\ud806\udce5","\ud806\udce6","\ud806\udce7","\ud806\udce8","\ud806\udce9"],wcho:["\ud838\udef0","\ud838\udef1","\ud838\udef2","\ud838\udef3","\ud838\udef4","\ud838\udef5","\ud838\udef6","\ud838\udef7","\ud838\udef8","\ud838\udef9"]},ue=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20BF\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC1\uFDFC\uFDFD\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEE0-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDD78\uDD7A-\uDDCB\uDDCD-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6\uDF00-\uDF92\uDF94-\uDFCA]/,ce=new RegExp("^".concat(ue.source)),de=new RegExp("".concat(ue.source,"$")),he=/[#0](?:[\.,][#0]+)*/g;function fe(e,t,n,r){var i,o,a=e.sign,s=e.exponent,l=e.magnitude,u=r.notation,c=r.style,d=r.numberingSystem,h=t.numbers.nu[0],f=null;if("compact"===u&&l&&(f=function(e,t,n,r,i,o,a){var s,l,u=e.roundedNumber,c=e.sign,d=e.magnitude,h=String(Math.pow(10,d)),f=n.numbers.nu[0];if("currency"===r&&"name"!==o){var p=null===(s=((m=n.numbers.currency)[a]||m[f]).short)||void 0===s?void 0:s[h];if(!p)return null;l=ge(t,u,p)}else{var m,g=((m=n.numbers.decimal)[a]||m[f])[i][h];if(!g)return null;l=ge(t,u,g)}return"0"===l?null:me(l,c).replace(/([^\s;\-\+\d\xa4]+)/g,"{c:$1}").replace(/0+/,"0")}(e,n,t,c,r.compactDisplay,r.currencyDisplay,d)),"currency"===c&&"name"!==r.currencyDisplay){var p=t.currencies[r.currency];if(p)switch(r.currencyDisplay){case"code":i=r.currency;break;case"symbol":i=p.symbol;break;default:i=p.narrow}else i=r.currency}o=f||("decimal"===c||"unit"===c||"currency"===c&&"name"===r.currencyDisplay?me((t.numbers.decimal[d]||t.numbers.decimal[h]).standard,a):me("currency"===c?(g=t.numbers.currency[d]||t.numbers.currency[h])[r.currencySign]:t.numbers.percent[d]||t.numbers.percent[h],a));var m=he.exec(o)[0];if(o=o.replace(he,"{0}").replace(/'(.)'/g,"$1"),"currency"===c&&"name"!==r.currencyDisplay){var g,y=(g=t.numbers.currency[d]||t.numbers.currency[h]).currencySpacing.afterInsertBetween;y&&!de.test(i)&&(o=o.replace("\xa4{0}","\xa4".concat(y,"{0}")));var v=g.currencySpacing.beforeInsertBetween;v&&!ce.test(i)&&(o=o.replace("{0}\xa4","{0}".concat(v,"\xa4")))}for(var _=o.split(/({c:[^}]+}|\{0\}|[\xa4%\-\+])/g),b=[],x=t.numbers.symbols[d]||t.numbers.symbols[h],w=0,E=_;w<E.length;w++)if(G=E[w])switch(G){case"{0}":b.push.apply(b,pe(x,e,u,s,d,!f&&Boolean(r.useGrouping),m));break;case"-":b.push({type:"minusSign",value:x.minusSign});break;case"+":b.push({type:"plusSign",value:x.plusSign});break;case"%":b.push({type:"percentSign",value:x.percentSign});break;case"\xa4":b.push({type:"currency",value:i});break;default:/^\{c:/.test(G)?b.push({type:"compact",value:G.substring(3,G.length-1)}):b.push({type:"literal",value:G})}switch(c){case"currency":if("name"===r.currencyDisplay){var S,T=(t.numbers.currency[d]||t.numbers.currency[h]).unitPattern,M=t.currencies[r.currency];S=M?ge(n,e.roundedNumber*Math.pow(10,s),M.displayName):r.currency;for(var k=[],C=0,P=T.split(/(\{[01]\})/g);C<P.length;C++)switch(G=P[C]){case"{0}":k.push.apply(k,b);break;case"{1}":k.push({type:"currency",value:S});break;default:G&&k.push({type:"literal",value:G})}return k}return b;case"unit":var A=r.unit,O=r.unitDisplay,I=t.units.simple[A];if(T=void 0,I)T=ge(n,e.roundedNumber*Math.pow(10,s),t.units.simple[A][O]);else{var L=A.split("-per-"),D=L[0],R=L[1];I=t.units.simple[D];var N=ge(n,e.roundedNumber*Math.pow(10,s),t.units.simple[D][O]),z=t.units.simple[R].perUnit[O];if(z)T=z.replace("{0}",N);else{var j=t.units.compound.per[O],B=ge(n,1,t.units.simple[R][O]);T=T=j.replace("{0}",N).replace("{1}",B.replace("{0}",""))}}k=[];for(var F=0,U=T.split(/(\s*\{0\}\s*)/);F<U.length;F++){var G=U[F],H=/^(\s*)\{0\}(\s*)$/.exec(G);H?(H[1]&&k.push({type:"literal",value:H[1]}),k.push.apply(k,b),H[2]&&k.push({type:"literal",value:H[2]})):G&&k.push({type:"unit",value:G})}return k;default:return b}}function pe(e,t,n,r,i,o,a){var s=[],l=t.formattedString,u=t.roundedNumber;if(isNaN(u))return[{type:"nan",value:l}];if(!isFinite(u))return[{type:"infinity",value:l}];var c=le[i];c&&(l=l.replace(/\d/g,(function(e){return c[+e]||e})));var d,h,f=l.indexOf(".");if(f>0?(d=l.slice(0,f),h=l.slice(f+1)):d=l,o&&("compact"!==n||u>=1e4)){var p=e.group,m=[],g=a.split(".")[0].split(","),y=3,v=3;g.length>1&&(y=g[g.length-1].length),g.length>2&&(v=g[g.length-2].length);var _=d.length-y;if(_>0){for(m.push(d.slice(_,_+y)),_-=v;_>0;_-=v)m.push(d.slice(_,_+v));m.push(d.slice(0,_+v))}else m.push(d);for(;m.length>0;){var b=m.pop();s.push({type:"integer",value:b}),m.length>0&&s.push({type:"group",value:p})}}else s.push({type:"integer",value:d});if(void 0!==h&&s.push({type:"decimal",value:e.decimal},{type:"fraction",value:h}),("scientific"===n||"engineering"===n)&&isFinite(u)){s.push({type:"exponentSeparator",value:e.exponential}),r<0&&(s.push({type:"exponentMinusSign",value:e.minusSign}),r=-r);var x=re(r,0,0);s.push({type:"exponentInteger",value:x.formattedString})}return s}function me(e,t){e.indexOf(";")<0&&(e="".concat(e,";-").concat(e));var n=e.split(";"),r=n[0],i=n[1];switch(t){case 0:return r;case-1:return i;default:return i.indexOf("-")>=0?i.replace(/-/g,"+"):"+".concat(r)}}function ge(e,t,n){return n[e.select(t)]||n.other}function ye(e,t,n){var r,i,o,a=n.getInternalSlots,s=a(e),l=s.pl,c=s.dataLocaleData,d=s.numberingSystem,h=c.numbers.symbols[d]||c.numbers.symbols[c.numbers.nu[0]],f=0,p=0;if(isNaN(t))i=h.nan;else if(t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)i=h.infinity;else{if(!u(t,-0)){if(!isFinite(t))throw new Error("Input must be a mathematical value");"percent"==s.style&&(t*=100),p=(r=oe(e,t,{getInternalSlots:a}))[0],f=r[1],t=p<0?t*Math.pow(10,-p):t/Math.pow(10,p)}var m=ie(s,t);i=m.formattedString,t=m.roundedNumber}switch(s.signDisplay){case"never":o=0;break;case"auto":o=u(t,0)||t>0||isNaN(t)?0:-1;break;case"always":o=u(t,0)||t>0||isNaN(t)?1:-1;break;default:o=0===t||isNaN(t)?0:t>0?1:-1}return fe({roundedNumber:t,formattedString:i,exponent:p,magnitude:f,sign:o},s.dataLocaleData,l,s)}function ve(e,t,n,r){var i=r.getInternalSlots;if(isNaN(t)||isNaN(n))throw new RangeError("Input must be a number");var o=[],a=ye(e,t,{getInternalSlots:i}),s=ye(e,n,{getInternalSlots:i});if(a===s)return se(e,a,{getInternalSlots:i});for(var l=0,u=a;l<u.length;l++)u[l].source="startRange";o=o.concat(a);var c=i(e),d=c.dataLocaleData.numbers.symbols[c.numberingSystem];o.push({type:"literal",value:d.rangeSign,source:"shared"});for(var h=0,f=s;h<f.length;h++)f[h].source="endRange";return o.concat(s)}function _e(e,t,n,r){return ve(e,t,n,{getInternalSlots:r.getInternalSlots}).map((function(e){return e.value})).join("")}function be(e,t,n,r){return ve(e,t,n,{getInternalSlots:r.getInternalSlots}).map((function(e,t){return{type:e.type,value:e.value,source:e.source,result:t.toString()}}))}function xe(e,t,n){for(var r=ye(e,t,n),i=c(0),o=0,a=r;o<a.length;o++){var s=a[o];i.push({type:s.type,value:s.value})}return i}var we={ceil:"zero",floor:"infinity",expand:"infinity",trunc:"zero",halfCeil:"half-zero",halfFloor:"half-infinity",halfExpand:"half-infinity",halfTrunc:"half-zero",halfEven:"half-even"},Ee={ceil:"infinity",floor:"zero",expand:"infinity",trunc:"zero",halfCeil:"half-infinity",halfFloor:"half-zero",halfExpand:"half-infinity",halfTrunc:"half-zero",halfEven:"half-even"};function Se(e,t){return t?we[e]:Ee[e]}var Te=n(57574);function Me(e,t,n){void 0===t&&(t=Object.create(null));var r=(0,n.getInternalSlots)(e),i=L(t,"style","string",["decimal","percent","currency","unit"],"decimal");r.style=i;var o=L(t,"currency","string",void 0,void 0);if(void 0!==o&&!G(o))throw RangeError("Malformed currency code");if("currency"===i&&void 0===o)throw TypeError("currency cannot be undefined");var a=L(t,"currencyDisplay","string",["code","symbol","narrowSymbol","name"],"symbol"),s=L(t,"currencySign","string",["standard","accounting"],"standard"),l=L(t,"unit","string",void 0,void 0);if(void 0!==l&&!H(l))throw RangeError("Invalid unit argument for Intl.NumberFormat()");if("unit"===i&&void 0===l)throw TypeError("unit cannot be undefined");var u=L(t,"unitDisplay","string",["short","narrow","long"],"short");"currency"===i&&(r.currency=o.toUpperCase(),r.currencyDisplay=a,r.currencySign=s),"unit"===i&&(r.unit=l,r.unitDisplay=u)}function ke(e,t,n,r,i){var o=I(t,"minimumIntegerDigits",1,21,1),a=t.minimumFractionDigits,s=t.maximumFractionDigits,l=t.minimumSignificantDigits,u=t.maximumSignificantDigits;e.minimumIntegerDigits=o;var c=L(t,"roundingPriority","string",["auto","morePrecision","lessPrecision"],"auto"),d=void 0!==l||void 0!==u,h=void 0!==a||void 0!==s,f=!0,p=!0;if("auto"===c&&(f=d,(d||!h&&"compact"===i)&&(p=!1)),f&&(d?(l=O(l,1,21,1),u=O(u,l,21,21),e.minimumSignificantDigits=l,e.maximumSignificantDigits=u):(e.minimumSignificantDigits=1,e.maximumSignificantDigits=21)),p)if(h){if(a=O(a,0,20,void 0),s=O(s,0,20,void 0),void 0===a)a=Math.min(n,s);else if(void 0===s)s=Math.max(r,a);else if(a>s)throw new RangeError("Invalid range, ".concat(a," > ").concat(s));e.minimumFractionDigits=a,e.maximumFractionDigits=s}else e.minimumFractionDigits=n,e.maximumFractionDigits=r;f||p?e.roundingType="morePrecision"===c?"morePrecision":"lessPrecision"===c?"lessPrecision":d?"significantDigits":"fractionDigits":(e.roundingType="morePrecision",e.minimumFractionDigits=0,e.maximumFractionDigits=0,e.minimumSignificantDigits=1,e.maximumSignificantDigits=2)}var Ce=[1,2,5,10,20,25,50,100,200,250,500,1e3,2e3];function Pe(e,t,n,i){var o=i.getInternalSlots,a=i.localeData,s=i.availableLocales,l=i.numberingSystemNames,u=i.getDefaultLocale,c=i.currencyDigitsData,d=r(t),h=A(n),f=Object.create(null),p=L(h,"localeMatcher","string",["lookup","best fit"],"best fit");f.localeMatcher=p;var m=L(h,"numberingSystem","string",void 0,void 0);if(void 0!==m&&l.indexOf(m)<0)throw RangeError("Invalid numberingSystems: ".concat(m));f.nu=m;var g=(0,Te.f)(s,d,f,["nu"],a,u),y=a[g.dataLocale];ee(!!y,"Missing locale data for ".concat(g.dataLocale));var v=o(e);v.locale=g.locale,v.dataLocale=g.dataLocale,v.numberingSystem=g.nu,v.dataLocaleData=y,Me(e,h,{getInternalSlots:o});var _,b,x=v.style;if("currency"===x){var w=ae(v.currency,{currencyDigitsData:c});_=w,b=w}else _=0,b="percent"===x?0:3;var E=L(h,"notation","string",["standard","scientific","engineering","compact"],"standard");v.notation=E,ke(v,h,_,b,E);var S=I(h,"roundingIncrement",1,5e3,1);if(-1===Ce.indexOf(S))throw new RangeError("Invalid rounding increment value: ".concat(S,".\nValid values are ").concat(Ce,"."));if(1!==S&&"fractionDigits"!==v.roundingType)throw new TypeError("For roundingIncrement > 1 only fractionDigits is a valid roundingType");if(1!==S&&v.maximumFractionDigits!==v.minimumFractionDigits)throw new RangeError("With roundingIncrement > 1, maximumFractionDigits and minimumFractionDigits must be equal.");v.roundingIncrement=S;var T=L(h,"trailingZeroDisplay","string",["auto","stripIfInteger"],"auto");v.trailingZeroDisplay=T;var M=L(h,"compactDisplay","string",["short","long"],"short"),k="auto";return"compact"===E&&(v.compactDisplay=M,k="min2"),v.useGrouping=R(h,"useGrouping",["min2","auto","always"],"always",!1,k),v.signDisplay=L(h,"signDisplay","string",["auto","never","always","exceptZero","negative"],"auto"),v.roundingMode=L(h,"roundingMode","string",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],"halfExpand"),e}function Ae(e){for(var t=[],n=e.indexOf("{"),r=0,i=0,o=e.length;n<e.length&&n>-1;)ee((r=e.indexOf("}",n))>n,"Invalid pattern ".concat(e)),n>i&&t.push({type:"literal",value:e.substring(i,n)}),t.push({type:e.substring(n+1,r),value:void 0}),i=r+1,n=e.indexOf("{",i);return i<o&&t.push({type:"literal",value:e.substring(i,o)}),t}var Oe=n(7011);function Ie(e,t,n){return void 0!==n&&L(n=l(n),"localeMatcher","string",["lookup","best fit"],"best fit"),(0,Oe.T)(e,t)}var Le,De,Re=n(53133);function Ne(e){return"MISSING_LOCALE_DATA"===e.type}De=Error,(0,Re.__extends)((function(){var e=null!==De&&De.apply(this,arguments)||this;return e.type="MISSING_LOCALE_DATA",e}),De),function(e){e.startRange="startRange",e.shared="shared",e.endRange="endRange"}(Le||(Le={}))},76495:(e,t,n)=>{"use strict";function r(e,t){for(var n=t;;){if(e.has(n))return n;var r=n.lastIndexOf("-");if(!~r)return;r>=2&&"-"===n[r-2]&&(r-=2),n=n.slice(0,r)}}n.d(t,{t:()=>r})},7011:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var r=n(53994),i=n(76495);function o(e,t){for(var n=[],o=0,a=t;o<a.length;o++){var s=a[o].replace(r.p,""),l=(0,i.t)(e,s);l&&n.push(l)}return n}},57574:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});var r=n(53994),i=n(76495);function o(e,t){(0,r.k)(2===t.length,"key must have 2 elements");var n=e.length,i="-".concat(t,"-"),o=e.indexOf(i);if(-1!==o){for(var a=o+4,s=a,l=a,u=!1;!u;){var c=e.indexOf("-",l);2==(-1===c?n-l:c-l)?u=!0:-1===c?(s=n,u=!0):(s=c,l=c+1)}return e.slice(a,s)}if(i="-".concat(t),-1!==(o=e.indexOf(i))&&o+3===n)return""}function a(e,t,n,a,s,l){var u;u="lookup"===n.localeMatcher?function(e,t,n){for(var o={locale:""},a=0,s=t;a<s.length;a++){var l=s[a],u=l.replace(r.p,""),c=(0,i.t)(e,u);if(c)return o.locale=c,l!==u&&(o.extension=l.slice(u.length+1,l.length)),o}return o.locale=n(),o}(e,t,l):function(e,t,n){var o,a={},s={},l={},u=new Set;e.forEach((function(e){var t=new Intl.Locale(e).minimize().toString(),n=Intl.getCanonicalLocales(e)[0]||e;a[t]=e,s[e]=e,l[n]=e,u.add(t),u.add(e),u.add(n)}));for(var c=0,d=t;c<d.length;c++){var h=d[c];if(o)break;var f=h.replace(r.p,"");if(e.has(f)){o=f;break}if(u.has(f)){o=f;break}var p=new Intl.Locale(f),m=p.maximize().toString(),g=p.minimize().toString();if(u.has(g)){o=g;break}o=(0,i.t)(u,m)}return o?{locale:s[o]||l[o]||a[o]||o}:{locale:n()}}(e,t,l);for(var c=u.locale,d={locale:"",dataLocale:c},h="-u",f=0,p=a;f<p.length;f++){var m=p[f];(0,r.k)(c in s,"Missing locale data for ".concat(c));var g=s[c];(0,r.k)("object"==typeof g&&null!==g,"locale data ".concat(m," must be an object"));var y=g[m];(0,r.k)(Array.isArray(y),"keyLocaleData for ".concat(m," must be an array"));var v=y[0];(0,r.k)("string"==typeof v||null===v,"value must be string or null but got ".concat(typeof v," in key ").concat(m));var _="";if(u.extension){var b=o(u.extension,m);void 0!==b&&(""!==b?~y.indexOf(b)&&(v=b,_="-".concat(m,"-").concat(v)):~b.indexOf("true")&&(v="true",_="-".concat(m)))}if(m in n){var x=n[m];(0,r.k)("string"==typeof x||null==x,"optionsValue must be String, Undefined or Null"),~y.indexOf(x)&&x!==v&&(v=x,_="")}d[m]=v,h+=_}if(h.length>2){var w=c.indexOf("-x-");if(-1===w)c+=h;else{var E=c.slice(0,w),S=c.slice(w,c.length);c=E+h+S}c=Intl.getCanonicalLocales(c)[0]}return d.locale=c,d}},53994:(e,t,n)=>{"use strict";n.d(t,{k:()=>i,p:()=>r});var r=/-u(?:-[0-9a-z]{2,8})+/gi;function i(e,t,n){if(void 0===n&&(n=Error),!e)throw new n(t)}},71656:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LookupSupportedLocales:()=>i.T,ResolveLocale:()=>r.f,match:()=>o});var r=n(57574),i=n(7011);function o(e,t,n,i){var o=t.reduce((function(e,t){return e.add(t),e}),new Set);return(0,r.f)(o,function(e){return Intl.getCanonicalLocales(e)}(e),{localeMatcher:(null==i?void 0:i.algorithm)||"best fit"},[],{},(function(){return n})).locale}},53133:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__assign:()=>o,__asyncDelegator:()=>T,__asyncGenerator:()=>S,__asyncValues:()=>M,__await:()=>E,__awaiter:()=>p,__classPrivateFieldGet:()=>O,__classPrivateFieldIn:()=>L,__classPrivateFieldSet:()=>I,__createBinding:()=>g,__decorate:()=>s,__esDecorate:()=>u,__exportStar:()=>y,__extends:()=>i,__generator:()=>m,__importDefault:()=>A,__importStar:()=>P,__makeTemplateObject:()=>k,__metadata:()=>f,__param:()=>l,__propKey:()=>d,__read:()=>_,__rest:()=>a,__runInitializers:()=>c,__setFunctionName:()=>h,__spread:()=>b,__spreadArray:()=>w,__spreadArrays:()=>x,__values:()=>v});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){return function(n,r){t(n,r,e)}}function u(e,t,n,r,i,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,l=r.kind,u="getter"===l?"get":"setter"===l?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h=!1,f=n.length-1;f>=0;f--){var p={};for(var m in r)p[m]="access"===m?{}:r[m];for(var m in r.access)p.access[m]=r.access[m];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var g=(0,n[f])("accessor"===l?{get:d.get,set:d.set}:d[u],p);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(s=a(g.get))&&(d.get=s),(s=a(g.set))&&(d.set=s),(s=a(g.init))&&i.push(s)}else(s=a(g))&&("field"===l?i.push(s):d[u]=s)}c&&Object.defineProperty(c,r.name,d),h=!0}function c(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function h(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function m(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var g=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function y(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)}function v(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}function x(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function w(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function E(e){return this instanceof E?(this.v=e,this):new E(e)}function S(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof E?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(e){c(o[0][3],e)}var n}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function T(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:E(e[r](t)),done:!1}:i?i(t):t}:i}}function M(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=v(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function k(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var C=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&g(t,e,n);return C(t,e),t}function A(e){return e&&e.__esModule?e:{default:e}}function O(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function I(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function L(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},53502:(e,t,n)=>{"use strict";var r=n(53133).__importDefault(n(74896));(0,n(71824).shouldPolyfill)()&&Object.defineProperty(Intl,"RelativeTimeFormat",{value:r.default,writable:!0,enumerable:!1,configurable:!0})},71824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldPolyfill=void 0;var r=n(71656),i=n(50012);t.shouldPolyfill=function(e){if(void 0===e&&(e="en"),!("RelativeTimeFormat"in Intl)||!function(e){if(!e)return!0;var t=Array.isArray(e)?e:[e];return Intl.RelativeTimeFormat.supportedLocalesOf(t).length===t.length}(e)||!function(e){try{return"numberingSystem"in new Intl.RelativeTimeFormat(e||"en",{numeric:"auto"}).resolvedOptions()}catch(e){return!1}}(e))return(0,r.match)([e],i.supportedLocales,"en")}},50012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportedLocales=void 0,t.supportedLocales=["af","af-NA","agq","ak","am","ar","ar-AE","ar-BH","ar-DJ","ar-DZ","ar-EG","ar-EH","ar-ER","ar-IL","ar-IQ","ar-JO","ar-KM","ar-KW","ar-LB","ar-LY","ar-MA","ar-MR","ar-OM","ar-PS","ar-QA","ar-SA","ar-SD","ar-SO","ar-SS","ar-SY","ar-TD","ar-TN","ar-YE","as","asa","ast","az","az-Cyrl","az-Latn","bas","be","be-tarask","bem","bez","bg","bm","bn","bn-IN","bo","bo-IN","br","brx","bs","bs-Cyrl","bs-Latn","ca","ca-AD","ca-ES-valencia","ca-FR","ca-IT","ccp","ccp-IN","ce","ceb","cgg","chr","ckb","ckb-IR","cs","cy","da","da-GL","dav","de","de-AT","de-BE","de-CH","de-IT","de-LI","de-LU","dje","doi","dsb","dua","dyo","dz","ebu","ee","ee-TG","el","el-CY","en","en-001","en-150","en-AE","en-AG","en-AI","en-AS","en-AT","en-AU","en-BB","en-BE","en-BI","en-BM","en-BS","en-BW","en-BZ","en-CA","en-CC","en-CH","en-CK","en-CM","en-CX","en-CY","en-DE","en-DG","en-DK","en-DM","en-ER","en-FI","en-FJ","en-FK","en-FM","en-GB","en-GD","en-GG","en-GH","en-GI","en-GM","en-GU","en-GY","en-HK","en-IE","en-IL","en-IM","en-IN","en-IO","en-JE","en-JM","en-KE","en-KI","en-KN","en-KY","en-LC","en-LR","en-LS","en-MG","en-MH","en-MO","en-MP","en-MS","en-MT","en-MU","en-MW","en-MY","en-NA","en-NF","en-NG","en-NL","en-NR","en-NU","en-NZ","en-PG","en-PH","en-PK","en-PN","en-PR","en-PW","en-RW","en-SB","en-SC","en-SD","en-SE","en-SG","en-SH","en-SI","en-SL","en-SS","en-SX","en-SZ","en-TC","en-TK","en-TO","en-TT","en-TV","en-TZ","en-UG","en-UM","en-VC","en-VG","en-VI","en-VU","en-WS","en-ZA","en-ZM","en-ZW","eo","es","es-419","es-AR","es-BO","es-BR","es-BZ","es-CL","es-CO","es-CR","es-CU","es-DO","es-EA","es-EC","es-GQ","es-GT","es-HN","es-IC","es-MX","es-NI","es-PA","es-PE","es-PH","es-PR","es-PY","es-SV","es-US","es-UY","es-VE","et","eu","ewo","fa","fa-AF","ff","ff-Adlm","ff-Adlm-BF","ff-Adlm-CM","ff-Adlm-GH","ff-Adlm-GM","ff-Adlm-GW","ff-Adlm-LR","ff-Adlm-MR","ff-Adlm-NE","ff-Adlm-NG","ff-Adlm-SL","ff-Adlm-SN","ff-Latn","ff-Latn-BF","ff-Latn-CM","ff-Latn-GH","ff-Latn-GM","ff-Latn-GN","ff-Latn-GW","ff-Latn-LR","ff-Latn-MR","ff-Latn-NE","ff-Latn-NG","ff-Latn-SL","fi","fil","fo","fo-DK","fr","fr-BE","fr-BF","fr-BI","fr-BJ","fr-BL","fr-CA","fr-CD","fr-CF","fr-CG","fr-CH","fr-CI","fr-CM","fr-DJ","fr-DZ","fr-GA","fr-GF","fr-GN","fr-GP","fr-GQ","fr-HT","fr-KM","fr-LU","fr-MA","fr-MC","fr-MF","fr-MG","fr-ML","fr-MQ","fr-MR","fr-MU","fr-NC","fr-NE","fr-PF","fr-PM","fr-RE","fr-RW","fr-SC","fr-SN","fr-SY","fr-TD","fr-TG","fr-TN","fr-VU","fr-WF","fr-YT","fur","fy","ga","ga-GB","gd","gl","gsw","gsw-FR","gsw-LI","gu","guz","gv","ha","ha-GH","ha-NE","haw","he","hi","hr","hr-BA","hsb","hu","hy","ia","id","ig","ii","is","it","it-CH","it-SM","it-VA","ja","jgo","jmc","jv","ka","kab","kam","kde","kea","kgp","khq","ki","kk","kkj","kl","kln","km","kn","ko","ko-KP","kok","ks","ks-Arab","ksb","ksf","ksh","ku","kw","ky","lag","lb","lg","lkt","ln","ln-AO","ln-CF","ln-CG","lo","lrc","lrc-IQ","lt","lu","luo","luy","lv","mai","mas","mas-TZ","mer","mfe","mg","mgh","mgo","mi","mk","ml","mn","mni","mni-Beng","mr","ms","ms-BN","ms-ID","ms-SG","mt","mua","my","mzn","naq","nb","nb-SJ","nd","nds","nds-NL","ne","ne-IN","nl","nl-AW","nl-BE","nl-BQ","nl-CW","nl-SR","nl-SX","nmg","nn","nnh","no","nus","nyn","om","om-KE","or","os","os-RU","pa","pa-Arab","pa-Guru","pcm","pl","ps","ps-PK","pt","pt-AO","pt-CH","pt-CV","pt-GQ","pt-GW","pt-LU","pt-MO","pt-MZ","pt-PT","pt-ST","pt-TL","qu","qu-BO","qu-EC","rm","rn","ro","ro-MD","rof","ru","ru-BY","ru-KG","ru-KZ","ru-MD","ru-UA","rw","rwk","sa","sah","saq","sat","sat-Olck","sbp","sc","sd","sd-Arab","sd-Deva","se","se-FI","se-SE","seh","ses","sg","shi","shi-Latn","shi-Tfng","si","sk","sl","smn","sn","so","so-DJ","so-ET","so-KE","sq","sq-MK","sq-XK","sr","sr-Cyrl","sr-Cyrl-BA","sr-Cyrl-ME","sr-Cyrl-XK","sr-Latn","sr-Latn-BA","sr-Latn-ME","sr-Latn-XK","su","su-Latn","sv","sv-AX","sv-FI","sw","sw-CD","sw-KE","sw-UG","ta","ta-LK","ta-MY","ta-SG","te","teo","teo-KE","tg","th","ti","ti-ER","tk","to","tr","tr-CY","tt","twq","tzm","ug","uk","und","ur","ur-IN","uz","uz-Arab","uz-Cyrl","uz-Latn","vai","vai-Latn","vai-Vaii","vi","vun","wae","wo","xh","xog","yav","yi","yo","yo-BJ","yrl","yrl-CO","yrl-VE","yue","yue-Hans","yue-Hant","zgh","zh","zh-Hans","zh-Hans-HK","zh-Hans-MO","zh-Hans-SG","zh-Hant","zh-Hant-HK","zh-Hant-MO","zu"]},68118:(e,t,n)=>{"use strict";function r(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}n.d(t,{Z:()=>r})},49193:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(68118);function i(e){return(0,r.Z)({},e)}},4725:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(21381).Z},18667:(e,t,n)=>{"use strict";n.d(t,{j:()=>i});var r={};function i(){return r}},1645:(e,t,n)=>{"use strict";function r(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}n.d(t,{Z:()=>r})},19785:(e,t,n)=>{"use strict";function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:()=>r})},52329:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(66700),i=n(19785),o=n(42765),a=n(18667);function s(e,t){var n,s,l,u,c,d,h,f;(0,i.Z)(1,arguments);var p=(0,a.j)(),m=(0,o.Z)(null!==(n=null!==(s=null!==(l=null!==(u=null==t?void 0:t.weekStartsOn)&&void 0!==u?u:null==t||null===(c=t.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==l?l:p.weekStartsOn)&&void 0!==s?s:null===(h=p.locale)||void 0===h||null===(f=h.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=(0,r.Z)(e),y=g.getUTCDay(),v=(y<m?7:0)+y-m;return g.setUTCDate(g.getUTCDate()-v),g.setUTCHours(0,0,0,0),g}},42765:(e,t,n)=>{"use strict";function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{Z:()=>r})},2463:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(66700),i=n(19785);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.Z)(e),o=(0,r.Z)(t),a=n.getTime()-o.getTime();return a<0?-1:a>0?1:a}},64312:(e,t,n)=>{"use strict";n.d(t,{vh:()=>i,yJ:()=>r}),Math.pow(10,8);var r=6e4,i=36e5},93898:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(18667),i=n(2463),o=n(66700),a=n(19785);function s(e,t){(0,a.Z)(2,arguments);var n=(0,o.Z)(e),r=(0,o.Z)(t),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return 12*i+s}function l(e){(0,a.Z)(1,arguments);var t=(0,o.Z)(e);return t.setHours(23,59,59,999),t}function u(e){(0,a.Z)(1,arguments);var t=(0,o.Z)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function c(e){(0,a.Z)(1,arguments);var t=(0,o.Z)(e);return l(t).getTime()===u(t).getTime()}function d(e,t){(0,a.Z)(2,arguments);var n,r=(0,o.Z)(e),l=(0,o.Z)(t),u=(0,i.Z)(r,l),d=Math.abs(s(r,l));if(d<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-u*d);var h=(0,i.Z)(r,l)===-u;c((0,o.Z)(e))&&1===d&&1===(0,i.Z)(e,l)&&(h=!1),n=u*(d-Number(h))}return 0===n?0:n}function h(e,t){return(0,a.Z)(2,arguments),(0,o.Z)(e).getTime()-(0,o.Z)(t).getTime()}var f={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function p(e){return e?f[e]:f.trunc}function m(e,t,n){(0,a.Z)(2,arguments);var r=h(e,t)/1e3;return p(null==n?void 0:n.roundingMethod)(r)}var g=n(4725),y=n(49193),v=n(68118),_=n(1645),b=1440,x=43200;function w(e,t,n){var s,l;(0,a.Z)(2,arguments);var u=(0,r.j)(),c=null!==(s=null!==(l=null==n?void 0:n.locale)&&void 0!==l?l:u.locale)&&void 0!==s?s:g.Z;if(!c.formatDistance)throw new RangeError("locale must contain formatDistance property");var h=(0,i.Z)(e,t);if(isNaN(h))throw new RangeError("Invalid time value");var f,p,w=(0,v.Z)((0,y.Z)(n),{addSuffix:Boolean(null==n?void 0:n.addSuffix),comparison:h});h>0?(f=(0,o.Z)(t),p=(0,o.Z)(e)):(f=(0,o.Z)(e),p=(0,o.Z)(t));var E,S=m(p,f),T=((0,_.Z)(p)-(0,_.Z)(f))/1e3,M=Math.round((S-T)/60);if(M<2)return null!=n&&n.includeSeconds?S<5?c.formatDistance("lessThanXSeconds",5,w):S<10?c.formatDistance("lessThanXSeconds",10,w):S<20?c.formatDistance("lessThanXSeconds",20,w):S<40?c.formatDistance("halfAMinute",0,w):S<60?c.formatDistance("lessThanXMinutes",1,w):c.formatDistance("xMinutes",1,w):0===M?c.formatDistance("lessThanXMinutes",1,w):c.formatDistance("xMinutes",M,w);if(M<45)return c.formatDistance("xMinutes",M,w);if(M<90)return c.formatDistance("aboutXHours",1,w);if(M<b){var k=Math.round(M/60);return c.formatDistance("aboutXHours",k,w)}if(M<2520)return c.formatDistance("xDays",1,w);if(M<x){var C=Math.round(M/b);return c.formatDistance("xDays",C,w)}if(M<86400)return E=Math.round(M/x),c.formatDistance("aboutXMonths",E,w);if((E=d(p,f))<12){var P=Math.round(M/x);return c.formatDistance("xMonths",P,w)}var A=E%12,O=Math.floor(E/12);return A<3?c.formatDistance("aboutXYears",O,w):A<9?c.formatDistance("overXYears",O,w):c.formatDistance("almostXYears",O+1,w)}function E(e,t){return(0,a.Z)(1,arguments),w(e,Date.now(),t)}},80666:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(18667),i=n(1645),o=n(2463),a=n(66700),s=n(49193),l=n(68118),u=n(4725),c=n(19785),d=6e4,h=1440,f=43200,p=525600;function m(e,t,n){var m,g,y;(0,c.Z)(2,arguments);var v=(0,r.j)(),_=null!==(m=null!==(g=null==n?void 0:n.locale)&&void 0!==g?g:v.locale)&&void 0!==m?m:u.Z;if(!_.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var b=(0,o.Z)(e,t);if(isNaN(b))throw new RangeError("Invalid time value");var x,w,E=(0,l.Z)((0,s.Z)(n),{addSuffix:Boolean(null==n?void 0:n.addSuffix),comparison:b});b>0?(x=(0,a.Z)(t),w=(0,a.Z)(e)):(x=(0,a.Z)(e),w=(0,a.Z)(t));var S,T=String(null!==(y=null==n?void 0:n.roundingMethod)&&void 0!==y?y:"round");if("floor"===T)S=Math.floor;else if("ceil"===T)S=Math.ceil;else{if("round"!==T)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");S=Math.round}var M,k=w.getTime()-x.getTime(),C=k/d,P=(0,i.Z)(w)-(0,i.Z)(x),A=(k-P)/d,O=null==n?void 0:n.unit;if("second"===(M=O?String(O):C<1?"second":C<60?"minute":C<h?"hour":A<f?"day":A<p?"month":"year")){var I=S(k/1e3);return _.formatDistance("xSeconds",I,E)}if("minute"===M){var L=S(C);return _.formatDistance("xMinutes",L,E)}if("hour"===M){var D=S(C/60);return _.formatDistance("xHours",D,E)}if("day"===M){var R=S(A/h);return _.formatDistance("xDays",R,E)}if("month"===M){var N=S(A/f);return 12===N&&"month"!==O?_.formatDistance("xYears",1,E):_.formatDistance("xMonths",N,E)}if("year"===M){var z=S(A/p);return _.formatDistance("xYears",z,E)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function g(e,t){return(0,c.Z)(1,arguments),m(e,Date.now(),t)}},95569:(e,t,n)=>{"use strict";function r(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}n.d(t,{Z:()=>r})},75100:(e,t,n)=>{"use strict";function r(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!=n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var a=e.defaultWidth,s=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}}n.d(t,{Z:()=>r})},87204:(e,t,n)=>{"use strict";function r(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;var l,u=s[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(c)?o(c,(function(e){return e.test(u)})):i(c,(function(e){return e.test(u)}));l=e.valueCallback?e.valueCallback(d):d,l=n.valueCallback?n.valueCallback(l):l;var h=t.slice(u.length);return{value:l,rest:h}}}function i(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function o(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}n.d(t,{Z:()=>r})},13701:(e,t,n)=>{"use strict";function r(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var i=r[0],o=t.match(e.parsePattern);if(!o)return null;var a=e.valueCallback?e.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;var s=t.slice(i.length);return{value:a,rest:s}}}n.d(t,{Z:()=>r})},98269:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const i=function(e,t,n){var i,o=r[e];return i="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i}},68649:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const i=function(e,t,n,i){return r[e]}},91089:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(75100);const i={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,r.Z)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,r.Z)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,r.Z)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,r.Z)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,r.Z)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})}},91935:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(87204);const i={ordinalNumber:(0,n(13701).Z)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,r.Z)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,r.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,r.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,r.Z)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,r.Z)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})}},21381:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(98269),i=n(95569);const o={date:(0,i.Z)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,i.Z)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,i.Z)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var a=n(68649),s=n(91089),l=n(91935);const u={code:"en-US",formatDistance:r.Z,formatLong:o,formatRelative:a.Z,localize:s.Z,match:l.Z,options:{weekStartsOn:0,firstWeekContainsDate:1}}},37934:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(19785),i=n(64312);function o(e){(0,r.Z)(1,arguments);var t=e/i.vh;return Math.floor(t)}},65255:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(19785),i=n(64312);function o(e){(0,r.Z)(1,arguments);var t=e/i.yJ;return Math.floor(t)}},31807:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(64312),i=n(19785),o=n(42765);function a(e,t){var n;(0,i.Z)(1,arguments);var r=(0,o.Z)(null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var a,s=d(e);if(s.date){var l=h(s.date,r);a=f(l.restDateString,l.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var u,c=a.getTime(),p=0;if(s.time&&(p=m(s.time),isNaN(p)))return new Date(NaN);if(!s.timezone){var g=new Date(c+p),v=new Date(0);return v.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),v.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),v}return u=y(s.timezone),isNaN(u)?new Date(NaN):new Date(c+p+u)}var s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,u=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c=/^([+-])(\d{2})(?::?(\d{2}))?$/;function d(e){var t,n={},r=e.split(s.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],s.timeZoneDelimiter.test(n.date)&&(n.date=e.split(s.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var i=s.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}function h(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}function f(e,t){if(null===t)return new Date(NaN);var n=e.match(l);if(!n)return new Date(NaN);var r=!!n[4],i=p(n[1]),o=p(n[2])-1,a=p(n[3]),s=p(n[4]),u=p(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,u)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}(t,s,u):new Date(NaN);var c=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(v[t]||(_(e)?29:28))}(t,o,a)&&function(e,t){return t>=1&&t<=(_(e)?366:365)}(t,i)?(c.setUTCFullYear(t,o,Math.max(i,a)),c):new Date(NaN)}function p(e){return e?parseInt(e):1}function m(e){var t=e.match(u);if(!t)return NaN;var n=g(t[1]),i=g(t[2]),o=g(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,i,o)?n*r.vh+i*r.yJ+1e3*o:NaN}function g(e){return e&&parseFloat(e.replace(",","."))||0}function y(e){if("Z"===e)return 0;var t=e.match(c);if(!t)return 0;var n="+"===t[1]?-1:1,i=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?n*(i*r.vh+o*r.yJ):NaN}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function _(e){return e%400==0||e%4==0&&e%100!=0}},66700:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(19785);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){(0,r.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===i(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},22569:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={Danish:"da-DK",Dutch:"nl-NL",English:"en-US",EnglishGB:"en-GB",French:"fr-FR",German:"de-DE",Italian:"it-IT",Norwegian:"nb-NO",Polish:"pl-PL",Portuguese:"pt-PT",PortugueseBrazilian:"pt-BR",Spanish:"es-ES",SpanishLatAm:"es-MX",Swedish:"sv-SE"}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{adjustFromSameNominalTimeForUser:()=>Je,adjustToSameNominalTimeForUser:()=>Ye,betweenHours:()=>Xe,dateString:()=>He,formattedDate:()=>Ge,formattedTimestamp:()=>Ke,humanizeTimeSpan:()=>Qe,isHumanizedTimeStamp:()=>nt,isToday:()=>$e,localeMap:()=>Be,localizedFormat:()=>qe,localizedRelativeWeekDay:()=>Ve,monthDayYear:()=>Ue,parseISO:()=>i.Z,photoTimeStamp:()=>tt,timeAgo:()=>We,toZonedISOString:()=>et}),n(53502),n(80562),n(47730),n(26033),n(42680),n(28775),n(29258),n(84075),n(28588),n(66941),n(12750),n(98306);var e=n(93898),t=n(80666),i=n(31807),o=n(21381),a={lessThanXSeconds:{one:"moins d\u2019une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d\u2019une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d\u2019un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu\u2019un an",other:"presque {{count}} ans"}},s=n(95569);const l={date:(0,s.Z)({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} '\xe0' {{time}}",long:"{{date}} '\xe0' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var u={lastWeek:"eeee 'dernier \xe0' p",yesterday:"'hier \xe0' p",today:"'aujourd\u2019hui \xe0' p",tomorrow:"'demain \xe0' p'",nextWeek:"eeee 'prochain \xe0' p",other:"P"},c=n(75100);const d={ordinalNumber:function(e,t){var n=Number(e),r=null==t?void 0:t.unit;return 0===n?"0":n+(1===n?r&&["year","week","hour","minute","second"].includes(r)?"\xe8re":"er":"\xe8me")},era:(0,c.Z)({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]},defaultWidth:"wide"}),quarter:(0,c.Z)({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2\xe8me trim.","3\xe8me trim.","4\xe8me trim."],wide:["1er trimestre","2\xe8me trimestre","3\xe8me trimestre","4\xe8me trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,c.Z)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],wide:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]},defaultWidth:"wide"}),day:(0,c.Z)({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:(0,c.Z)({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"apr\xe8s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l\u2019apr\xe8s-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})};var h=n(87204),f=n(13701);const p={code:"fr",formatDistance:function(e,t,n){var r,i=a[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},formatLong:l,formatRelative:function(e,t,n,r){return u[e]},localize:d,match:{ordinalNumber:(0,f.Z)({matchPattern:/^(\d+)(i\xe8me|\xe8re|\xe8me|er|e)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e)}}),era:(0,h.Z)({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant J\xe9sus-Christ|apr\xe8s J\xe9sus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|\xe8me|e)? trim\.?/i,wide:/^[1234](er|\xe8me|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|f\xe9vr|mars|avr|mai|juin|juill|juil|ao\xfbt|sept|oct|nov|d\xe9c)\.?/i,wide:/^(janvier|f\xe9vrier|mars|avril|mai|juin|juillet|ao\xfbt|septembre|octobre|novembre|d\xe9cembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'apr\xe8s[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var m={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"halbe Minute",withPreposition:"halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},g={date:(0,s.Z)({formats:{full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},y={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},v={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},_={narrow:v.narrow,abbreviated:["Jan.","Feb.","M\xe4rz","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:v.wide};const b={code:"de",formatDistance:function(e,t,n){var r,i=null!=n&&n.addSuffix?m[e].withPreposition:m[e].standalone;return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:"vor "+r:r},formatLong:g,formatRelative:function(e,t,n,r){return y[e]},localize:{ordinalNumber:function(e){return Number(e)+"."},era:(0,c.Z)({values:{narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},defaultWidth:"wide"}),quarter:(0,c.Z)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,c.Z)({values:v,formattingValues:_,defaultWidth:"wide"}),day:(0,c.Z)({values:{narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},defaultWidth:"wide"}),dayPeriod:(0,c.Z)({values:{narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},defaultWidth:"wide",formattingValues:{narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(0,f.Z)({matchPattern:/^(\d+)(\.)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e)}}),era:(0,h.Z)({matchPatterns:{narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^v/i,/^n/i]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(j[a\xe4]n|feb|m\xe4r[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|m\xe4rz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[a\xe4]/i,/^f/i,/^m\xe4r/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},defaultMatchWidth:"wide",parsePatterns:{any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var x={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 d\xeda",other:"{{count}} d\xedas"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 a\xf1o",other:"alrededor de {{count}} a\xf1os"},xYears:{one:"1 a\xf1o",other:"{{count}} a\xf1os"},overXYears:{one:"m\xe1s de 1 a\xf1o",other:"m\xe1s de {{count}} a\xf1os"},almostXYears:{one:"casi 1 a\xf1o",other:"casi {{count}} a\xf1os"}},w={date:(0,s.Z)({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},E={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'ma\xf1ana a la' p",nextWeek:"eeee 'a la' p",other:"P"},S={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'ma\xf1ana a las' p",nextWeek:"eeee 'a las' p",other:"P"};const T={code:"es",formatDistance:function(e,t,n){var r,i=x[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},formatLong:w,formatRelative:function(e,t,n,r){return 1!==t.getUTCHours()?S[e]:E[e]},localize:{ordinalNumber:function(e,t){return Number(e)+"\xba"},era:(0,c.Z)({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despu\xe9s de cristo"]},defaultWidth:"wide"}),quarter:(0,c.Z)({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xba trimestre","2\xba trimestre","3\xba trimestre","4\xba trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:(0,c.Z)({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:(0,c.Z)({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s\xe1"],abbreviated:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],wide:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"]},defaultWidth:"wide"}),dayPeriod:(0,c.Z)({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(0,f.Z)({matchPattern:/^(\d+)(\xba)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,h.Z)({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u\xfa]n|despu[e\xe9]s de cristo|era com[u\xfa]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u\xfa]n)/i,/^(despu[e\xe9]s de cristo|era com[u\xfa]n)/i]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](\xba)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[\xe1a])/i,abbreviated:/^(dom|lun|mar|mi[\xe9e]|jue|vie|s[\xe1a]b)/i,wide:/^(domingo|lunes|martes|mi[\xe9e]rcoles|jueves|viernes|s[\xe1a]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (ma\xf1ana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (ma\xf1ana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/ma\xf1ana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};var M=n(98269),k=n(68649),C=n(91089),P=n(91935);const A={date:(0,s.Z)({formats:{full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"dd/MM/yyyy"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},O={code:"en-GB",formatDistance:M.Z,formatLong:A,formatRelative:k.Z,localize:C.Z,match:P.Z,options:{weekStartsOn:1,firstWeekContainsDate:4}};var I={lessThanXSeconds:{one:"meno di un secondo",other:"meno di {{count}} secondi"},xSeconds:{one:"un secondo",other:"{{count}} secondi"},halfAMinute:"alcuni secondi",lessThanXMinutes:{one:"meno di un minuto",other:"meno di {{count}} minuti"},xMinutes:{one:"un minuto",other:"{{count}} minuti"},aboutXHours:{one:"circa un'ora",other:"circa {{count}} ore"},xHours:{one:"un'ora",other:"{{count}} ore"},xDays:{one:"un giorno",other:"{{count}} giorni"},aboutXWeeks:{one:"circa una settimana",other:"circa {{count}} settimane"},xWeeks:{one:"una settimana",other:"{{count}} settimane"},aboutXMonths:{one:"circa un mese",other:"circa {{count}} mesi"},xMonths:{one:"un mese",other:"{{count}} mesi"},aboutXYears:{one:"circa un anno",other:"circa {{count}} anni"},xYears:{one:"un anno",other:"{{count}} anni"},overXYears:{one:"pi\xf9 di un anno",other:"pi\xf9 di {{count}} anni"},almostXYears:{one:"quasi un anno",other:"quasi {{count}} anni"}};const L={date:(0,s.Z)({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})};var D=n(19785),R=n(52329);function N(e,t,n){(0,D.Z)(2,arguments);var r=(0,R.Z)(e,n),i=(0,R.Z)(t,n);return r.getTime()===i.getTime()}var z=["domenica","luned\xec","marted\xec","mercoled\xec","gioved\xec","venerd\xec","sabato"];function j(e){return"'"+z[e]+" alle' p"}var B={lastWeek:function(e,t,n){var r=e.getUTCDay();return N(e,t,n)?j(r):function(e){return 0===e?"'domenica scorsa alle' p":"'"+z[e]+" scorso alle' p"}(r)},yesterday:"'ieri alle' p",today:"'oggi alle' p",tomorrow:"'domani alle' p",nextWeek:function(e,t,n){var r=e.getUTCDay();return N(e,t,n)?j(r):function(e){return 0===e?"'domenica prossima alle' p":"'"+z[e]+" prossimo alle' p"}(r)},other:"P"};const F={code:"it",formatDistance:function(e,t,n){var r,i=I[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"tra "+r:r+" fa":r},formatLong:L,formatRelative:function(e,t,n,r){var i=B[e];return"function"==typeof i?i(t,n,r):i},localize:{ordinalNumber:function(e,t){var n=Number(e);return String(n)},era:(0,c.Z)({values:{narrow:["aC","dC"],abbreviated:["a.C.","d.C."],wide:["avanti Cristo","dopo Cristo"]},defaultWidth:"wide"}),quarter:(0,c.Z)({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xba trimestre","2\xba trimestre","3\xba trimestre","4\xba trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,c.Z)({values:{narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],abbreviated:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],wide:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},defaultWidth:"wide"}),day:(0,c.Z)({values:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],abbreviated:["dom","lun","mar","mer","gio","ven","sab"],wide:["domenica","luned\xec","marted\xec","mercoled\xec","gioved\xec","venerd\xec","sabato"]},defaultWidth:"wide"}),dayPeriod:(0,c.Z)({values:{narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"}},defaultWidth:"wide",formattingValues:{narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(0,f.Z)({matchPattern:/^(\d+)(\xba)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,h.Z)({matchPatterns:{narrow:/^(aC|dC)/i,abbreviated:/^(a\.?\s?C\.?|a\.?\s?e\.?\s?v\.?|d\.?\s?C\.?|e\.?\s?v\.?)/i,wide:/^(avanti Cristo|avanti Era Volgare|dopo Cristo|Era Volgare)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^a/i,/^(d|e)/i]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^t[1234]/i,wide:/^[1234](\xba)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[gfmalsond]/i,abbreviated:/^(gen|feb|mar|apr|mag|giu|lug|ago|set|ott|nov|dic)/i,wide:/^(gennaio|febbraio|marzo|aprile|maggio|giugno|luglio|agosto|settembre|ottobre|novembre|dicembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^g/i,/^f/i,/^m/i,/^a/i,/^m/i,/^g/i,/^l/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ge/i,/^f/i,/^mar/i,/^ap/i,/^mag/i,/^gi/i,/^l/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[dlmgvs]/i,short:/^(do|lu|ma|me|gi|ve|sa)/i,abbreviated:/^(dom|lun|mar|mer|gio|ven|sab)/i,wide:/^(domenica|luned[i|\xec]|marted[i|\xec]|mercoled[i|\xec]|gioved[i|\xec]|venerd[i|\xec]|sabato)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^g/i,/^v/i,/^s/i],any:[/^d/i,/^l/i,/^ma/i,/^me/i,/^g/i,/^v/i,/^s/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{narrow:/^(a|m\.|p|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i,any:/^([ap]\.?\s?m\.?|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mezza/i,noon:/^mezzo/i,morning:/mattina/i,afternoon:/pomeriggio/i,evening:/sera/i,night:/notte/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var U={lessThanXSeconds:{one:"mindre end \xe9t sekund",other:"mindre end {{count}} sekunder"},xSeconds:{one:"1 sekund",other:"{{count}} sekunder"},halfAMinute:"\xe9t halvt minut",lessThanXMinutes:{one:"mindre end \xe9t minut",other:"mindre end {{count}} minutter"},xMinutes:{one:"1 minut",other:"{{count}} minutter"},aboutXHours:{one:"cirka 1 time",other:"cirka {{count}} timer"},xHours:{one:"1 time",other:"{{count}} timer"},xDays:{one:"1 dag",other:"{{count}} dage"},aboutXWeeks:{one:"cirka 1 uge",other:"cirka {{count}} uger"},xWeeks:{one:"1 uge",other:"{{count}} uger"},aboutXMonths:{one:"cirka 1 m\xe5ned",other:"cirka {{count}} m\xe5neder"},xMonths:{one:"1 m\xe5ned",other:"{{count}} m\xe5neder"},aboutXYears:{one:"cirka 1 \xe5r",other:"cirka {{count}} \xe5r"},xYears:{one:"1 \xe5r",other:"{{count}} \xe5r"},overXYears:{one:"over 1 \xe5r",other:"over {{count}} \xe5r"},almostXYears:{one:"n\xe6sten 1 \xe5r",other:"n\xe6sten {{count}} \xe5r"}},G={date:(0,s.Z)({formats:{full:"EEEE 'den' d. MMMM y",long:"d. MMMM y",medium:"d. MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} 'kl'. {{time}}",long:"{{date}} 'kl'. {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},H={lastWeek:"'sidste' eeee 'kl.' p",yesterday:"'i g\xe5r kl.' p",today:"'i dag kl.' p",tomorrow:"'i morgen kl.' p",nextWeek:"'p\xe5' eeee 'kl.' p",other:"P"};const V={code:"da",formatDistance:function(e,t,n){var r,i=U[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"om "+r:r+" siden":r},formatLong:G,formatRelative:function(e,t,n,r){return H[e]},localize:{ordinalNumber:function(e,t){return Number(e)+"."},era:(0,c.Z)({values:{narrow:["fvt","vt"],abbreviated:["f.v.t.","v.t."],wide:["f\xf8r vesterlandsk tidsregning","vesterlandsk tidsregning"]},defaultWidth:"wide"}),quarter:(0,c.Z)({values:{narrow:["1","2","3","4"],abbreviated:["1. kvt.","2. kvt.","3. kvt.","4. kvt."],wide:["1. kvartal","2. kvartal","3. kvartal","4. kvartal"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,c.Z)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["jan.","feb.","mar.","apr.","maj","jun.","jul.","aug.","sep.","okt.","nov.","dec."],wide:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"]},defaultWidth:"wide"}),day:(0,c.Z)({values:{narrow:["S","M","T","O","T","F","L"],short:["s\xf8","ma","ti","on","to","fr","l\xf8"],abbreviated:["s\xf8n.","man.","tir.","ons.","tor.","fre.","l\xf8r."],wide:["s\xf8ndag","mandag","tirsdag","onsdag","torsdag","fredag","l\xf8rdag"]},defaultWidth:"wide"}),dayPeriod:(0,c.Z)({values:{narrow:{am:"a",pm:"p",midnight:"midnat",noon:"middag",morning:"morgen",afternoon:"eftermiddag",evening:"aften",night:"nat"},abbreviated:{am:"AM",pm:"PM",midnight:"midnat",noon:"middag",morning:"morgen",afternoon:"eftermiddag",evening:"aften",night:"nat"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnat",noon:"middag",morning:"morgen",afternoon:"eftermiddag",evening:"aften",night:"nat"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"midnat",noon:"middag",morning:"om morgenen",afternoon:"om eftermiddagen",evening:"om aftenen",night:"om natten"},abbreviated:{am:"AM",pm:"PM",midnight:"midnat",noon:"middag",morning:"om morgenen",afternoon:"om eftermiddagen",evening:"om aftenen",night:"om natten"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnat",noon:"middag",morning:"om morgenen",afternoon:"om eftermiddagen",evening:"om aftenen",night:"om natten"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(0,f.Z)({matchPattern:/^(\d+)(\.)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,h.Z)({matchPatterns:{narrow:/^(fKr|fvt|eKr|vt)/i,abbreviated:/^(f\.Kr\.?|f\.v\.t\.?|e\.Kr\.?|v\.t\.)/i,wide:/^(f.Kr.|f\xf8r vesterlandsk tidsregning|e.Kr.|vesterlandsk tidsregning)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^f/i,/^(v|e)/i]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^[1234]. kvt\./i,wide:/^[1234]\.? kvartal/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan.|feb.|mar.|apr.|maj|jun.|jul.|aug.|sep.|okt.|nov.|dec.)/i,wide:/^(januar|februar|marts|april|maj|juni|juli|august|september|oktober|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^maj/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[smtofl]/i,short:/^(s\xf8n.|man.|tir.|ons.|tor.|fre.|l\xf8r.)/i,abbreviated:/^(s\xf8n|man|tir|ons|tor|fre|l\xf8r)/i,wide:/^(s\xf8ndag|mandag|tirsdag|onsdag|torsdag|fredag|l\xf8rdag)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^o/i,/^t/i,/^f/i,/^l/i],any:[/^s/i,/^m/i,/^ti/i,/^o/i,/^to/i,/^f/i,/^l/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{narrow:/^(a|p|midnat|middag|(om) (morgenen|eftermiddagen|aftenen|natten))/i,any:/^([ap]\.?\s?m\.?|midnat|middag|(om) (morgenen|eftermiddagen|aftenen|natten))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/midnat/i,noon:/middag/i,morning:/morgen/i,afternoon:/eftermiddag/i,evening:/aften/i,night:/nat/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var q={lessThanXSeconds:{one:"minder dan een seconde",other:"minder dan {{count}} seconden"},xSeconds:{one:"1 seconde",other:"{{count}} seconden"},halfAMinute:"een halve minuut",lessThanXMinutes:{one:"minder dan een minuut",other:"minder dan {{count}} minuten"},xMinutes:{one:"een minuut",other:"{{count}} minuten"},aboutXHours:{one:"ongeveer 1 uur",other:"ongeveer {{count}} uur"},xHours:{one:"1 uur",other:"{{count}} uur"},xDays:{one:"1 dag",other:"{{count}} dagen"},aboutXWeeks:{one:"ongeveer 1 week",other:"ongeveer {{count}} weken"},xWeeks:{one:"1 week",other:"{{count}} weken"},aboutXMonths:{one:"ongeveer 1 maand",other:"ongeveer {{count}} maanden"},xMonths:{one:"1 maand",other:"{{count}} maanden"},aboutXYears:{one:"ongeveer 1 jaar",other:"ongeveer {{count}} jaar"},xYears:{one:"1 jaar",other:"{{count}} jaar"},overXYears:{one:"meer dan 1 jaar",other:"meer dan {{count}} jaar"},almostXYears:{one:"bijna 1 jaar",other:"bijna {{count}} jaar"}},$={date:(0,s.Z)({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd-MM-y"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} 'om' {{time}}",long:"{{date}} 'om' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},W={lastWeek:"'afgelopen' eeee 'om' p",yesterday:"'gisteren om' p",today:"'vandaag om' p",tomorrow:"'morgen om' p",nextWeek:"eeee 'om' p",other:"P"};const Z={code:"nl",formatDistance:function(e,t,n){var r,i=q[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"over "+r:r+" geleden":r},formatLong:$,formatRelative:function(e,t,n,r){return W[e]},localize:{ordinalNumber:function(e,t){return Number(e)+"e"},era:(0,c.Z)({values:{narrow:["v.C.","n.C."],abbreviated:["v.Chr.","n.Chr."],wide:["voor Christus","na Christus"]},defaultWidth:"wide"}),quarter:(0,c.Z)({values:{narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["1e kwartaal","2e kwartaal","3e kwartaal","4e kwartaal"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,c.Z)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],wide:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"]},defaultWidth:"wide"}),day:(0,c.Z)({values:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],abbreviated:["zon","maa","din","woe","don","vri","zat"],wide:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},defaultWidth:"wide"}),dayPeriod:(0,c.Z)({values:{narrow:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"},abbreviated:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"},wide:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"}},defaultWidth:"wide"})},match:{ordinalNumber:(0,f.Z)({matchPattern:/^(\d+)e?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,h.Z)({matchPatterns:{narrow:/^([vn]\.? ?C\.?)/,abbreviated:/^([vn]\. ?Chr\.?)/,wide:/^((voor|na) Christus)/},defaultMatchWidth:"wide",parsePatterns:{any:[/^v/,/^n/]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^K[1234]/i,wide:/^[1234]e kwartaal/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan.|feb.|mrt.|apr.|mei|jun.|jul.|aug.|sep.|okt.|nov.|dec.)/i,wide:/^(januari|februari|maart|april|mei|juni|juli|augustus|september|oktober|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^jan/i,/^feb/i,/^m(r|a)/i,/^apr/i,/^mei/i,/^jun/i,/^jul/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[zmdwv]/i,short:/^(zo|ma|di|wo|do|vr|za)/i,abbreviated:/^(zon|maa|din|woe|don|vri|zat)/i,wide:/^(zondag|maandag|dinsdag|woensdag|donderdag|vrijdag|zaterdag)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^z/i,/^m/i,/^d/i,/^w/i,/^d/i,/^v/i,/^z/i],any:[/^zo/i,/^ma/i,/^di/i,/^wo/i,/^do/i,/^vr/i,/^za/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{any:/^(am|pm|middernacht|het middaguur|'s (ochtends|middags|avonds|nachts))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^am/i,pm:/^pm/i,midnight:/^middernacht/i,noon:/^het middaguur/i,morning:/ochtend/i,afternoon:/middag/i,evening:/avond/i,night:/nacht/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var X={lessThanXSeconds:{one:"mindre enn ett sekund",other:"mindre enn {{count}} sekunder"},xSeconds:{one:"ett sekund",other:"{{count}} sekunder"},halfAMinute:"et halvt minutt",lessThanXMinutes:{one:"mindre enn ett minutt",other:"mindre enn {{count}} minutter"},xMinutes:{one:"ett minutt",other:"{{count}} minutter"},aboutXHours:{one:"omtrent en time",other:"omtrent {{count}} timer"},xHours:{one:"en time",other:"{{count}} timer"},xDays:{one:"en dag",other:"{{count}} dager"},aboutXWeeks:{one:"omtrent en uke",other:"omtrent {{count}} uker"},xWeeks:{one:"en uke",other:"{{count}} uker"},aboutXMonths:{one:"omtrent en m\xe5ned",other:"omtrent {{count}} m\xe5neder"},xMonths:{one:"en m\xe5ned",other:"{{count}} m\xe5neder"},aboutXYears:{one:"omtrent ett \xe5r",other:"omtrent {{count}} \xe5r"},xYears:{one:"ett \xe5r",other:"{{count}} \xe5r"},overXYears:{one:"over ett \xe5r",other:"over {{count}} \xe5r"},almostXYears:{one:"nesten ett \xe5r",other:"nesten {{count}} \xe5r"}},Y={date:(0,s.Z)({formats:{full:"EEEE d. MMMM y",long:"d. MMMM y",medium:"d. MMM y",short:"dd.MM.y"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"'kl'. HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} 'kl.' {{time}}",long:"{{date}} 'kl.' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},K={lastWeek:"'forrige' eeee 'kl.' p",yesterday:"'i g\xe5r kl.' p",today:"'i dag kl.' p",tomorrow:"'i morgen kl.' p",nextWeek:"EEEE 'kl.' p",other:"P"};const J={code:"nb",formatDistance:function(e,t,n){var r,i=X[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"om "+r:r+" siden":r},formatLong:Y,formatRelative:function(e,t,n,r){return K[e]},localize:{ordinalNumber:function(e,t){return Number(e)+"."},era:(0,c.Z)({values:{narrow:["f.Kr.","e.Kr."],abbreviated:["f.Kr.","e.Kr."],wide:["f\xf8r Kristus","etter Kristus"]},defaultWidth:"wide"}),quarter:(0,c.Z)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. kvartal","2. kvartal","3. kvartal","4. kvartal"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,c.Z)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["jan.","feb.","mars","apr.","mai","juni","juli","aug.","sep.","okt.","nov.","des."],wide:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"]},defaultWidth:"wide"}),day:(0,c.Z)({values:{narrow:["S","M","T","O","T","F","L"],short:["s\xf8","ma","ti","on","to","fr","l\xf8"],abbreviated:["s\xf8n","man","tir","ons","tor","fre","l\xf8r"],wide:["s\xf8ndag","mandag","tirsdag","onsdag","torsdag","fredag","l\xf8rdag"]},defaultWidth:"wide"}),dayPeriod:(0,c.Z)({values:{narrow:{am:"a",pm:"p",midnight:"midnatt",noon:"middag",morning:"p\xe5 morg.",afternoon:"p\xe5 etterm.",evening:"p\xe5 kvelden",night:"p\xe5 natten"},abbreviated:{am:"a.m.",pm:"p.m.",midnight:"midnatt",noon:"middag",morning:"p\xe5 morg.",afternoon:"p\xe5 etterm.",evening:"p\xe5 kvelden",night:"p\xe5 natten"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnatt",noon:"middag",morning:"p\xe5 morgenen",afternoon:"p\xe5 ettermiddagen",evening:"p\xe5 kvelden",night:"p\xe5 natten"}},defaultWidth:"wide"})},match:{ordinalNumber:(0,f.Z)({matchPattern:/^(\d+)\.?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,h.Z)({matchPatterns:{narrow:/^(f\.? ?Kr\.?|fvt\.?|e\.? ?Kr\.?|evt\.?)/i,abbreviated:/^(f\.? ?Kr\.?|fvt\.?|e\.? ?Kr\.?|evt\.?)/i,wide:/^(f\xf8r Kristus|f\xf8r v\xe5r tid|etter Kristus|v\xe5r tid)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^f/i,/^e/i]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? kvartal/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mars?|apr|mai|juni?|juli?|aug|sep|okt|nov|des)\.?/i,wide:/^(januar|februar|mars|april|mai|juni|juli|august|september|oktober|november|desember)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^aug/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[smtofl]/i,short:/^(s\xf8|ma|ti|on|to|fr|l\xf8)/i,abbreviated:/^(s\xf8n|man|tir|ons|tor|fre|l\xf8r)/i,wide:/^(s\xf8ndag|mandag|tirsdag|onsdag|torsdag|fredag|l\xf8rdag)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^s/i,/^m/i,/^ti/i,/^o/i,/^to/i,/^f/i,/^l/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{narrow:/^(midnatt|middag|(p\xe5) (morgenen|ettermiddagen|kvelden|natten)|[ap])/i,any:/^([ap]\.?\s?m\.?|midnatt|middag|(p\xe5) (morgenen|ettermiddagen|kvelden|natten))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a(\.?\s?m\.?)?$/i,pm:/^p(\.?\s?m\.?)?$/i,midnight:/^midn/i,noon:/^midd/i,morning:/morgen/i,afternoon:/ettermiddag/i,evening:/kveld/i,night:/natt/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var Q={lessThanXSeconds:{one:{regular:"mniej ni\u017c sekunda",past:"mniej ni\u017c sekund\u0119",future:"mniej ni\u017c sekund\u0119"},twoFour:"mniej ni\u017c {{count}} sekundy",other:"mniej ni\u017c {{count}} sekund"},xSeconds:{one:{regular:"sekunda",past:"sekund\u0119",future:"sekund\u0119"},twoFour:"{{count}} sekundy",other:"{{count}} sekund"},halfAMinute:{one:"p\xf3\u0142 minuty",twoFour:"p\xf3\u0142 minuty",other:"p\xf3\u0142 minuty"},lessThanXMinutes:{one:{regular:"mniej ni\u017c minuta",past:"mniej ni\u017c minut\u0119",future:"mniej ni\u017c minut\u0119"},twoFour:"mniej ni\u017c {{count}} minuty",other:"mniej ni\u017c {{count}} minut"},xMinutes:{one:{regular:"minuta",past:"minut\u0119",future:"minut\u0119"},twoFour:"{{count}} minuty",other:"{{count}} minut"},aboutXHours:{one:{regular:"oko\u0142o godziny",past:"oko\u0142o godziny",future:"oko\u0142o godzin\u0119"},twoFour:"oko\u0142o {{count}} godziny",other:"oko\u0142o {{count}} godzin"},xHours:{one:{regular:"godzina",past:"godzin\u0119",future:"godzin\u0119"},twoFour:"{{count}} godziny",other:"{{count}} godzin"},xDays:{one:{regular:"dzie\u0144",past:"dzie\u0144",future:"1 dzie\u0144"},twoFour:"{{count}} dni",other:"{{count}} dni"},aboutXWeeks:{one:"oko\u0142o tygodnia",twoFour:"oko\u0142o {{count}} tygodni",other:"oko\u0142o {{count}} tygodni"},xWeeks:{one:"tydzie\u0144",twoFour:"{{count}} tygodnie",other:"{{count}} tygodni"},aboutXMonths:{one:"oko\u0142o miesi\u0105c",twoFour:"oko\u0142o {{count}} miesi\u0105ce",other:"oko\u0142o {{count}} miesi\u0119cy"},xMonths:{one:"miesi\u0105c",twoFour:"{{count}} miesi\u0105ce",other:"{{count}} miesi\u0119cy"},aboutXYears:{one:"oko\u0142o rok",twoFour:"oko\u0142o {{count}} lata",other:"oko\u0142o {{count}} lat"},xYears:{one:"rok",twoFour:"{{count}} lata",other:"{{count}} lat"},overXYears:{one:"ponad rok",twoFour:"ponad {{count}} lata",other:"ponad {{count}} lat"},almostXYears:{one:"prawie rok",twoFour:"prawie {{count}} lata",other:"prawie {{count}} lat"}};function ee(e,t,n){var r=function(e,t){if(1===t)return e.one;var n=t%100;if(n<=20&&n>10)return e.other;var r=n%10;return r>=2&&r<=4?e.twoFour:e.other}(e,t);return("string"==typeof r?r:r[n]).replace("{{count}}",String(t))}var te={date:(0,s.Z)({formats:{full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ne={masculine:"ostatni",feminine:"ostatnia"},re={masculine:"ten",feminine:"ta"},ie={masculine:"nast\u0119pny",feminine:"nast\u0119pna"},oe={0:"feminine",1:"masculine",2:"masculine",3:"feminine",4:"masculine",5:"masculine",6:"feminine"};function ae(e,t,n,r){var i;if(N(t,n,r))i=re;else if("lastWeek"===e)i=ne;else{if("nextWeek"!==e)throw new Error("Cannot determine adjectives for token ".concat(e));i=ie}var o=t.getUTCDay(),a=i[oe[o]];return"'".concat(a,"' eeee 'o' p")}var se={lastWeek:ae,yesterday:"'wczoraj o' p",today:"'dzisiaj o' p",tomorrow:"'jutro o' p",nextWeek:ae,other:"P"};const le={code:"pl",formatDistance:function(e,t,n){var r=Q[e];return null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"za "+ee(r,t,"future"):ee(r,t,"past")+" temu":ee(r,t,"regular")},formatLong:te,formatRelative:function(e,t,n,r){var i=se[e];return"function"==typeof i?i(e,t,n,r):i},localize:{ordinalNumber:function(e,t){return String(e)},era:(0,c.Z)({values:{narrow:["p.n.e.","n.e."],abbreviated:["p.n.e.","n.e."],wide:["przed nasz\u0105 er\u0105","naszej ery"]},defaultWidth:"wide"}),quarter:(0,c.Z)({values:{narrow:["1","2","3","4"],abbreviated:["I kw.","II kw.","III kw.","IV kw."],wide:["I kwarta\u0142","II kwarta\u0142","III kwarta\u0142","IV kwarta\u0142"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,c.Z)({values:{narrow:["S","L","M","K","M","C","L","S","W","P","L","G"],abbreviated:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],wide:["stycze\u0144","luty","marzec","kwiecie\u0144","maj","czerwiec","lipiec","sierpie\u0144","wrzesie\u0144","pa\u017adziernik","listopad","grudzie\u0144"]},defaultWidth:"wide",formattingValues:{narrow:["s","l","m","k","m","c","l","s","w","p","l","g"],abbreviated:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],wide:["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","wrze\u015bnia","pa\u017adziernika","listopada","grudnia"]},defaultFormattingWidth:"wide"}),day:(0,c.Z)({values:{narrow:["N","P","W","\u015a","C","P","S"],short:["nie","pon","wto","\u015bro","czw","pi\u0105","sob"],abbreviated:["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],wide:["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"]},defaultWidth:"wide",formattingValues:{narrow:["n","p","w","\u015b","c","p","s"],short:["nie","pon","wto","\u015bro","czw","pi\u0105","sob"],abbreviated:["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],wide:["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"]},defaultFormattingWidth:"wide"}),dayPeriod:(0,c.Z)({values:{narrow:{am:"a",pm:"p",midnight:"p\xf3\u0142n.",noon:"po\u0142",morning:"rano",afternoon:"popo\u0142.",evening:"wiecz.",night:"noc"},abbreviated:{am:"AM",pm:"PM",midnight:"p\xf3\u0142noc",noon:"po\u0142udnie",morning:"rano",afternoon:"popo\u0142udnie",evening:"wiecz\xf3r",night:"noc"},wide:{am:"AM",pm:"PM",midnight:"p\xf3\u0142noc",noon:"po\u0142udnie",morning:"rano",afternoon:"popo\u0142udnie",evening:"wiecz\xf3r",night:"noc"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"o p\xf3\u0142n.",noon:"w po\u0142.",morning:"rano",afternoon:"po po\u0142.",evening:"wiecz.",night:"w nocy"},abbreviated:{am:"AM",pm:"PM",midnight:"o p\xf3\u0142nocy",noon:"w po\u0142udnie",morning:"rano",afternoon:"po po\u0142udniu",evening:"wieczorem",night:"w nocy"},wide:{am:"AM",pm:"PM",midnight:"o p\xf3\u0142nocy",noon:"w po\u0142udnie",morning:"rano",afternoon:"po po\u0142udniu",evening:"wieczorem",night:"w nocy"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(0,f.Z)({matchPattern:/^(\d+)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,h.Z)({matchPatterns:{narrow:/^(p\.?\s*n\.?\s*e\.?\s*|n\.?\s*e\.?\s*)/i,abbreviated:/^(p\.?\s*n\.?\s*e\.?\s*|n\.?\s*e\.?\s*)/i,wide:/^(przed\s*nasz(\u0105|a)\s*er(\u0105|a)|naszej\s*ery)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^p/i,/^n/i]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^(I|II|III|IV)\s*kw\.?/i,wide:/^(I|II|III|IV)\s*kwarta(\u0142|l)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/1/i,/2/i,/3/i,/4/i],any:[/^I kw/i,/^II kw/i,/^III kw/i,/^IV kw/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[slmkcwpg]/i,abbreviated:/^(sty|lut|mar|kwi|maj|cze|lip|sie|wrz|pa(\u017a|z)|lis|gru)/i,wide:/^(stycznia|stycze(\u0144|n)|lutego|luty|marca|marzec|kwietnia|kwiecie(\u0144|n)|maja|maj|czerwca|czerwiec|lipca|lipiec|sierpnia|sierpie(\u0144|n)|wrze(\u015b|s)nia|wrzesie(\u0144|n)|pa(\u017a|z)dziernika|pa(\u017a|z)dziernik|listopada|listopad|grudnia|grudzie(\u0144|n))/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^l/i,/^m/i,/^k/i,/^m/i,/^c/i,/^l/i,/^s/i,/^w/i,/^p/i,/^l/i,/^g/i],any:[/^st/i,/^lu/i,/^mar/i,/^k/i,/^maj/i,/^c/i,/^lip/i,/^si/i,/^w/i,/^p/i,/^lis/i,/^g/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[npw\u015bcs]/i,short:/^(nie|pon|wto|(\u015b|s)ro|czw|pi(\u0105|a)|sob)/i,abbreviated:/^(niedz|pon|wt|(\u015b|s)r|czw|pt|sob)\.?/i,wide:/^(niedziela|poniedzia(\u0142|l)ek|wtorek|(\u015b|s)roda|czwartek|pi(\u0105|a)tek|sobota)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^n/i,/^p/i,/^w/i,/^\u015b/i,/^c/i,/^p/i,/^s/i],abbreviated:[/^n/i,/^po/i,/^w/i,/^(\u015b|s)r/i,/^c/i,/^pt/i,/^so/i],any:[/^n/i,/^po/i,/^w/i,/^(\u015b|s)r/i,/^c/i,/^pi/i,/^so/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{narrow:/^(^a$|^p$|p\xf3(\u0142|l)n\.?|o\s*p\xf3(\u0142|l)n\.?|po(\u0142|l)\.?|w\s*po(\u0142|l)\.?|po\s*po(\u0142|l)\.?|rano|wiecz\.?|noc|w\s*nocy)/i,any:/^(am|pm|p\xf3(\u0142|l)noc|o\s*p\xf3(\u0142|l)nocy|po(\u0142|l)udnie|w\s*po(\u0142|l)udnie|popo(\u0142|l)udnie|po\s*po(\u0142|l)udniu|rano|wiecz\xf3r|wieczorem|noc|w\s*nocy)/i},defaultMatchWidth:"any",parsePatterns:{narrow:{am:/^a$/i,pm:/^p$/i,midnight:/p\xf3(\u0142|l)n/i,noon:/po(\u0142|l)/i,morning:/rano/i,afternoon:/po\s*po(\u0142|l)/i,evening:/wiecz/i,night:/noc/i},any:{am:/^am/i,pm:/^pm/i,midnight:/p\xf3(\u0142|l)n/i,noon:/po(\u0142|l)/i,morning:/rano/i,afternoon:/po\s*po(\u0142|l)/i,evening:/wiecz/i,night:/noc/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var ue={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"aproximadamente 1 hora",other:"aproximadamente {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"aproximadamente 1 semana",other:"aproximadamente {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"aproximadamente 1 m\xeas",other:"aproximadamente {{count}} meses"},xMonths:{one:"1 m\xeas",other:"{{count}} meses"},aboutXYears:{one:"aproximadamente 1 ano",other:"aproximadamente {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},ce={date:(0,s.Z)({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d 'de' MMM 'de' y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} '\xe0s' {{time}}",long:"{{date}} '\xe0s' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},de={lastWeek:function(e){var t=e.getUTCDay();return"'"+(0===t||6===t?"\xfaltimo":"\xfaltima")+"' eeee '\xe0s' p"},yesterday:"'ontem \xe0s' p",today:"'hoje \xe0s' p",tomorrow:"'amanh\xe3 \xe0s' p",nextWeek:"eeee '\xe0s' p",other:"P"};const he={code:"pt",formatDistance:function(e,t,n){var r,i=ue[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"daqui a "+r:"h\xe1 "+r:r},formatLong:ce,formatRelative:function(e,t,n,r){var i=de[e];return"function"==typeof i?i(t):i},localize:{ordinalNumber:function(e,t){return Number(e)+"\xba"},era:(0,c.Z)({values:{narrow:["aC","dC"],abbreviated:["a.C.","d.C."],wide:["antes de Cristo","depois de Cristo"]},defaultWidth:"wide"}),quarter:(0,c.Z)({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xba trimestre","2\xba trimestre","3\xba trimestre","4\xba trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,c.Z)({values:{narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},defaultWidth:"wide"}),day:(0,c.Z)({values:{narrow:["d","s","t","q","q","s","s"],short:["dom","seg","ter","qua","qui","sex","s\xe1b"],abbreviated:["dom","seg","ter","qua","qui","sex","s\xe1b"],wide:["domingo","segunda-feira","ter\xe7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xe1bado"]},defaultWidth:"wide"}),dayPeriod:(0,c.Z)({values:{narrow:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh\xe3",afternoon:"tarde",evening:"noite",night:"madrugada"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh\xe3",afternoon:"tarde",evening:"noite",night:"madrugada"},wide:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh\xe3",afternoon:"tarde",evening:"noite",night:"madrugada"}},defaultWidth:"wide",formattingValues:{narrow:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh\xe3",afternoon:"da tarde",evening:"da noite",night:"da madrugada"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh\xe3",afternoon:"da tarde",evening:"da noite",night:"da madrugada"},wide:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh\xe3",afternoon:"da tarde",evening:"da noite",night:"da madrugada"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(0,f.Z)({matchPattern:/^(\d+)(\xba|\xaa)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,h.Z)({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes da era comum|depois de cristo|era comum)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes da era comum)/i,/^(depois de cristo|era comum)/i]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](\xba|\xaa)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|mar\xe7o|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ab/i,/^mai/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[dstq]/i,short:/^(dom|seg|ter|qua|qui|sex|s[\xe1a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[\xe1a]b)/i,wide:/^(domingo|segunda-?\s?feira|ter\xe7a-?\s?feira|quarta-?\s?feira|quinta-?\s?feira|sexta-?\s?feira|s[\xe1a]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^s/i,/^t/i,/^q/i,/^q/i,/^s/i,/^s/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[\xe1a]/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{narrow:/^(a|p|meia-?\s?noite|meio-?\s?dia|(da) (manh[\xe3a]|tarde|noite|madrugada))/i,any:/^([ap]\.?\s?m\.?|meia-?\s?noite|meio-?\s?dia|(da) (manh[\xe3a]|tarde|noite|madrugada))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^meia/i,noon:/^meio/i,morning:/manh[\xe3a]/i,afternoon:/tarde/i,evening:/noite/i,night:/madrugada/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var fe={lessThanXSeconds:{one:"mindre \xe4n en sekund",other:"mindre \xe4n {{count}} sekunder"},xSeconds:{one:"en sekund",other:"{{count}} sekunder"},halfAMinute:"en halv minut",lessThanXMinutes:{one:"mindre \xe4n en minut",other:"mindre \xe4n {{count}} minuter"},xMinutes:{one:"en minut",other:"{{count}} minuter"},aboutXHours:{one:"ungef\xe4r en timme",other:"ungef\xe4r {{count}} timmar"},xHours:{one:"en timme",other:"{{count}} timmar"},xDays:{one:"en dag",other:"{{count}} dagar"},aboutXWeeks:{one:"ungef\xe4r en vecka",other:"ungef\xe4r {{count}} vecka"},xWeeks:{one:"en vecka",other:"{{count}} vecka"},aboutXMonths:{one:"ungef\xe4r en m\xe5nad",other:"ungef\xe4r {{count}} m\xe5nader"},xMonths:{one:"en m\xe5nad",other:"{{count}} m\xe5nader"},aboutXYears:{one:"ungef\xe4r ett \xe5r",other:"ungef\xe4r {{count}} \xe5r"},xYears:{one:"ett \xe5r",other:"{{count}} \xe5r"},overXYears:{one:"\xf6ver ett \xe5r",other:"\xf6ver {{count}} \xe5r"},almostXYears:{one:"n\xe4stan ett \xe5r",other:"n\xe4stan {{count}} \xe5r"}},pe=["noll","en","tv\xe5","tre","fyra","fem","sex","sju","\xe5tta","nio","tio","elva","tolv"],me={date:(0,s.Z)({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"y-MM-dd"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"'kl'. HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} 'kl.' {{time}}",long:"{{date}} 'kl.' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},ge={lastWeek:"'i' EEEE's kl.' p",yesterday:"'ig\xe5r kl.' p",today:"'idag kl.' p",tomorrow:"'imorgon kl.' p",nextWeek:"EEEE 'kl.' p",other:"P"};const ye={code:"sv",formatDistance:function(e,t,n){var r,i=fe[e];return r="string"==typeof i?i:1===t?i.one:n&&n.onlyNumeric?i.other.replace("{{count}}",String(t)):i.other.replace("{{count}}",t<13?pe[t]:String(t)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"om "+r:r+" sedan":r},formatLong:me,formatRelative:function(e,t,n,r){return ge[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:case 2:return n+":a"}return n+":e"},era:(0,c.Z)({values:{narrow:["f.Kr.","e.Kr."],abbreviated:["f.Kr.","e.Kr."],wide:["f\xf6re Kristus","efter Kristus"]},defaultWidth:"wide"}),quarter:(0,c.Z)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1:a kvartalet","2:a kvartalet","3:e kvartalet","4:e kvartalet"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,c.Z)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["jan.","feb.","mars","apr.","maj","juni","juli","aug.","sep.","okt.","nov.","dec."],wide:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"]},defaultWidth:"wide"}),day:(0,c.Z)({values:{narrow:["S","M","T","O","T","F","L"],short:["s\xf6","m\xe5","ti","on","to","fr","l\xf6"],abbreviated:["s\xf6n","m\xe5n","tis","ons","tors","fre","l\xf6r"],wide:["s\xf6ndag","m\xe5ndag","tisdag","onsdag","torsdag","fredag","l\xf6rdag"]},defaultWidth:"wide"}),dayPeriod:(0,c.Z)({values:{narrow:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"morg.",afternoon:"efterm.",evening:"kv\xe4ll",night:"natt"},abbreviated:{am:"f.m.",pm:"e.m.",midnight:"midnatt",noon:"middag",morning:"morgon",afternoon:"efterm.",evening:"kv\xe4ll",night:"natt"},wide:{am:"f\xf6rmiddag",pm:"eftermiddag",midnight:"midnatt",noon:"middag",morning:"morgon",afternoon:"eftermiddag",evening:"kv\xe4ll",night:"natt"}},defaultWidth:"wide",formattingValues:{narrow:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"p\xe5 morg.",afternoon:"p\xe5 efterm.",evening:"p\xe5 kv\xe4llen",night:"p\xe5 natten"},abbreviated:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"p\xe5 morg.",afternoon:"p\xe5 efterm.",evening:"p\xe5 kv\xe4llen",night:"p\xe5 natten"},wide:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"p\xe5 morgonen",afternoon:"p\xe5 eftermiddagen",evening:"p\xe5 kv\xe4llen",night:"p\xe5 natten"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(0,f.Z)({matchPattern:/^(\d+)(:a|:e)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,h.Z)({matchPatterns:{narrow:/^(f\.? ?Kr\.?|f\.? ?v\.? ?t\.?|e\.? ?Kr\.?|v\.? ?t\.?)/i,abbreviated:/^(f\.? ?Kr\.?|f\.? ?v\.? ?t\.?|e\.? ?Kr\.?|v\.? ?t\.?)/i,wide:/^(f\xf6re Kristus|f\xf6re v\xe5r tid|efter Kristus|v\xe5r tid)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^f/i,/^[ev]/i]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](:a|:e)? kvartalet/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar[s]?|apr|maj|jun[i]?|jul[i]?|aug|sep|okt|nov|dec)\.?/i,wide:/^(januari|februari|mars|april|maj|juni|juli|augusti|september|oktober|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^maj/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[smtofl]/i,short:/^(s\xf6|m\xe5|ti|on|to|fr|l\xf6)/i,abbreviated:/^(s\xf6n|m\xe5n|tis|ons|tors|fre|l\xf6r)/i,wide:/^(s\xf6ndag|m\xe5ndag|tisdag|onsdag|torsdag|fredag|l\xf6rdag)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^s/i,/^m/i,/^ti/i,/^o/i,/^to/i,/^f/i,/^l/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{any:/^([fe]\.?\s?m\.?|midn(att)?|midd(ag)?|(p\xe5) (morgonen|eftermiddagen|kv\xe4llen|natten))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^f/i,pm:/^e/i,midnight:/^midn/i,noon:/^midd/i,morning:/morgon/i,afternoon:/eftermiddag/i,evening:/kv\xe4ll/i,night:/natt/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var ve,_e,be,xe,we,Ee,Se,Te,Me,ke,Ce,Pe,Ae,Oe,Ie,Le,De,Re=n(37934),Ne=n(65255),ze=n(22569),je=864e5,Be=((ve={})[ze.default.English]=o.Z,ve[ze.default.French]=p,ve[ze.default.German]=b,ve[ze.default.Spanish]=T,ve[ze.default.SpanishLatAm]=T,ve[ze.default.EnglishGB]=O,ve[ze.default.Italian]=F,ve[ze.default.Danish]=V,ve[ze.default.Dutch]=Z,ve[ze.default.Norwegian]=J,ve[ze.default.Polish]=le,ve[ze.default.Portuguese]=he,ve[ze.default.PortugueseBrazilian]=he,ve[ze.default.Swedish]=ye,ve);!function(e){e.DayMonthYear="dayMonthYear",e.DayShortMonthYear="dayShortMonthYear",e.WeekdayDayMonth="weekdayDayMonth",e.TodayDayMonth="todayDayMonth"}(De||(De={}));var Fe=((_e={})[ze.default.English]=((be={})[De.DayMonthYear]="MMMM dd, yyyy",be[De.DayShortMonthYear]="MMM. dd, yyyy",be[De.WeekdayDayMonth]="eee, MMM dd",be[De.TodayDayMonth]="'{today}', MMM dd",be),_e[ze.default.French]=((xe={})[De.DayMonthYear]="dd MMMM yyyy",xe[De.DayShortMonthYear]="dd MMM. yyyy",xe[De.WeekdayDayMonth]="eee dd MMM",xe[De.TodayDayMonth]="'{today}' dd MMM",xe),_e[ze.default.German]=((we={})[De.DayMonthYear]="dd. MMMM yyyy",we[De.DayShortMonthYear]="dd. MMM. yyyy",we[De.WeekdayDayMonth]="eee, dd. MMM",we[De.TodayDayMonth]="'{today}', dd. MMM",we),_e[ze.default.Spanish]=((Ee={})[De.DayMonthYear]="dd 'de' MMMM 'de' yyyy",Ee[De.DayShortMonthYear]="dd 'de' MMM. 'de' yyyy",Ee[De.WeekdayDayMonth]="eee, dd 'de' MMM",Ee[De.TodayDayMonth]="'{today}', dd 'de' MMM",Ee),_e[ze.default.SpanishLatAm]=((Se={})[De.DayMonthYear]="dd 'de' MMMM 'de' yyyy",Se[De.DayShortMonthYear]="dd 'de' MMM. 'de' yyyy",Se[De.WeekdayDayMonth]="eee, dd 'de' MMM",Se[De.TodayDayMonth]="'{today}', dd 'de' MMM",Se),_e[ze.default.EnglishGB]=((Te={})[De.DayMonthYear]="MMMM dd, yyyy",Te[De.DayShortMonthYear]="MMM. dd, yyyy",Te[De.WeekdayDayMonth]="eee, MMM dd",Te[De.TodayDayMonth]="'{today}', MMM dd",Te),_e[ze.default.Italian]=((Me={})[De.DayMonthYear]="dd MMMM yyyy",Me[De.DayShortMonthYear]="dd MMM. yyyy",Me[De.WeekdayDayMonth]="eee dd MMM",Me[De.TodayDayMonth]="'{today}' dd MMM",Me),_e[ze.default.Danish]=((ke={})[De.DayMonthYear]="dd. MMMM yyyy",ke[De.DayShortMonthYear]="dd. MMM yyyy",ke[De.WeekdayDayMonth]="eee dd. MMM",ke[De.TodayDayMonth]="'{today}'. dd. MMM",ke),_e[ze.default.Dutch]=((Ce={})[De.DayMonthYear]="dd MMMM yyyy",Ce[De.DayShortMonthYear]="dd MMM yyyy",Ce[De.WeekdayDayMonth]="eee dd MMM",Ce[De.TodayDayMonth]="'{today}' dd MMM",Ce),_e[ze.default.Norwegian]=((Pe={})[De.DayMonthYear]="dd. MMMM yyyy",Pe[De.DayShortMonthYear]="dd. MMM. yyyy",Pe[De.WeekdayDayMonth]="eee. dd. MMM",Pe[De.TodayDayMonth]="'{today}'. dd. MMM",Pe),_e[ze.default.Polish]=((Ae={})[De.DayMonthYear]="dd MMMM yyyy",Ae[De.DayShortMonthYear]="dd MMM. yyyy",Ae[De.WeekdayDayMonth]="eee, dd MMM",Ae[De.TodayDayMonth]="'{today}', dd MMM",Ae),_e[ze.default.Portuguese]=((Oe={})[De.DayMonthYear]="dd 'de' MMMM 'de' yyyy",Oe[De.DayShortMonthYear]="dd 'de' MMM. 'de' yyyy",Oe[De.WeekdayDayMonth]="eee, dd 'de' MMM",Oe[De.TodayDayMonth]="'{today}', dd 'de' MMM",Oe),_e[ze.default.PortugueseBrazilian]=((Ie={})[De.DayMonthYear]="dd 'de' MMMM 'de' yyyy",Ie[De.DayShortMonthYear]="dd 'de' MMM. 'de' yyyy",Ie[De.WeekdayDayMonth]="eee, dd 'de' MMM",Ie[De.TodayDayMonth]="'{today}', dd 'de' MMM",Ie),_e[ze.default.Swedish]=((Le={})[De.DayMonthYear]="dd MMMM yyyy",Le[De.DayShortMonthYear]="dd MMM. yyyy",Le[De.WeekdayDayMonth]="eee dd MMM",Le[De.TodayDayMonth]="'{today}' dd MMM",Le),_e),Ue=function(e,t,n){return void 0===t&&(t=ze.default.English),void 0===n&&(n=!0),new Date(e).toLocaleDateString(t,{month:n?"long":"short",day:"numeric",year:"numeric"})},Ge=function(e,t,n){return void 0===n&&(n=ze.default.English),t?e.toLocaleDateString(n,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:t,timeZoneName:"short"}):e.toLocaleDateString(n,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},He=function(e,t,n){return void 0===e&&(e=new Date),void 0===t&&(t=null),void 0===n&&(n=ze.default.English),t?new Date(e).toLocaleDateString(n,{month:"short",day:"numeric",hour:"numeric",minute:"numeric",timeZone:t,timeZoneName:"short"}):new Date(e).toLocaleDateString(n,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},Ve=function(e,t){var n=(new Date).toLocaleDateString(t,{weekday:"short"}),r=new Intl.RelativeTimeFormat(t,{numeric:"auto"}).format(e,"day");return n[0]===n[0].toUpperCase()&&(r=r[0].toUpperCase()+r.slice(1)),r},qe=function(e,t,n,r,i){void 0===e&&(e=!1),void 0===t&&(t=ze.default.English),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1);var o=Fe[t];if(!o)throw Error("Unsupported languageRegionCode: ".concat(t));var a=e?De.DayShortMonthYear:De.DayMonthYear;r&&(a=i?De.TodayDayMonth:De.WeekdayDayMonth);var s=o[a];return i&&(s=s.replace("{today}",Ve(0,t))),n&&(s=t===ze.default.English?"".concat(s," hh:mm a z"):"".concat(s," HH:mm")),s},$e=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&!!t.getFullYear()&&!!n.getFullYear()},We=function(t,n){void 0===n&&(n=ze.default.English);var r=(0,i.Z)(t),o={addSuffix:!0,locale:Be[n]};return(0,e.Z)(r,o)},Ze=function(e){return parseInt(e.split(":")[0],10)},Xe=function(e,t){var n=[Ze(e),Ze(t)],r=n[0],i=n[1],o=(new Date).getHours();return r>=i?o>=r:o>=r&&o<i},Ye=function(e,t){void 0===t&&(t=0);var n=new Date(e);return n.setTime(n.getTime()+6e4*n.getTimezoneOffset()+t),n},Ke=function(e,t){var n=(0,i.Z)(e),r=new Date(n);return Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}).format(r)},Je=function(e,t){return void 0===t&&(t=0),new Date(e.getTime()-6e4*e.getTimezoneOffset()-t)},Qe=function(e,n){var r=new Date(e),i=n||ze.default.English;return+new Date(Date.now())-+r>31536e6?r.toLocaleDateString(i,{year:"numeric",month:"long"}):(0,t.Z)(r,{addSuffix:!0,locale:Be[i]})};function et(e,t){if(0===t)return e.toISOString();var n=new Date(e.getTime()+6e4*e.getTimezoneOffset()+t),r=t>0?"+":"-",i=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return"".concat(n.getFullYear(),"-").concat(i(n.getMonth()+1),"-").concat(i(n.getDate()),"T").concat(i(n.getHours()),":").concat(i(n.getMinutes()),":").concat(i(n.getSeconds())).concat(r).concat(i((0,Re.Z)(Math.abs(t))),":").concat(i((0,Ne.Z)(Math.abs(t))%60))}var tt=function(e,t){var n=new Date(e),r=new Date(Date.now()),i=Ke(e,t);return(+r-+n)/je<7&&(i=Qe(e.toString(),t)),i},nt=function(e){var t=new Date(e);return!!((+new Date(Date.now())-+t)/je<7)}})(),r})(),e.exports=t()},87757:function(e,t,n){e.exports=n(35666)},97748:function(e){e.exports=function(){var e,t=["navigation","request","process","log","user","state","error","manual"],n=function(e,t,n){for(var r=n,i=0,o=e.length;i<o;i++)r=t(r,e[i],i,e);return r},r=function(e,t){return n(e,(function(e,n,r,i){return t(n,r,i)?e.concat(n):e}),[])},i=function(e,t){return n(e,(function(e,n,r,i){return!0===e||n===t}),!1)},o=function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=!{toString:null}.propertyIsEnumerable("toString"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);if(!a)return n;for(var r=0,i=s.length;r<i;r++)Object.prototype.hasOwnProperty.call(e,s[r])&&n.push(s[r]);return n},u=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=1/0),function(n){return"number"===typeof n&&parseInt(""+n,10)===n&&n>=e&&n<=t}},c=function(e){return"function"===typeof e||o(e)&&r(e,(function(e){return"function"===typeof e})).length===e.length},d=function(e){return"string"===typeof e&&!!e.length},h={},f=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};h.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:d},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(e){return void 0===e||d(e)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(e){return void 0===e||d(e)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}},enabledErrorTypes:{defaultValue:function(){return f()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(e){if("object"!==typeof e||!e)return!1;var t=l(e),n=l(f());return!(r(t,(function(e){return i(n,e)})).length<t.length)&&!(r(l(e),(function(t){return"boolean"!==typeof e[t]})).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:c},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:c},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:c},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(e){return e&&"object"===typeof e&&d(e.notify)&&d(e.sessions)&&0===r(l(e),(function(e){return!i(["notify","sessions"],e)})).length}},autoTrackSessions:{defaultValue:function(e){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(e){return null===e||o(e)&&r(e,(function(e){return"string"===typeof e})).length===e.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(e){return"string"===typeof e&&e.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number \u2264100",validate:function(e){return u(0,100)(e)}},enabledBreadcrumbTypes:{defaultValue:function(){return t},message:"should be null or a list of available breadcrumb types ("+t.join(",")+")",validate:function(e){return null===e||o(e)&&n(e,(function(e,n){return!1===e?e:i(t,n)}),!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(e){return void 0===e||"string"===typeof e}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(e){return null===e||e&&n(l(e),(function(e,t){return e&&i(["id","email","name"],t)}),!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(e){return"object"===typeof e&&null!==e}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(e){return!e||e&&n(["debug","info","warn","error"],(function(t,n){return t&&"function"===typeof e[n]}),!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(e){return o(e)&&e.length===r(e,(function(e){return"string"===typeof e||e&&"function"===typeof e.test})).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(e){return o(e)&&e.length===r(e,(function(e){return e&&"object"===typeof e&&"function"===typeof e.load})).length}},featureFlags:{defaultValue:function(){return[]},message:'should be an array of objects that have a "name" property',validate:function(e){return o(e)&&e.length===r(e,(function(e){return e&&"object"===typeof e&&"string"===typeof e.name})).length}}};var p=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(e,t){return n(e,(function(e,n,r,i){return e.concat(t(n,r,i))}),[])};function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}var y=h.schema,v={releaseStage:p({},y.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:g({},y.appType,{defaultValue:function(){return"browser"}}),logger:p({},y.logger,{defaultValue:function(){return"undefined"!==typeof console&&"function"===typeof console.debug?_():void 0}})},_=function(){var e={},t=console.log;return m(["debug","info","warn","error"],(function(n){var r=console[n];e[n]="function"===typeof r?r.bind(console,"[bugsnag]"):t.bind(console,"[bugsnag]")})),e},b=function(){function e(e,t,n,r){void 0===r&&(r=new Date),this.type=n,this.message=e,this.metadata=t,this.timestamp=r}return e.prototype.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},e}(),x={};!function(t,n){"use strict";"function"===typeof e&&e.amd?e("stackframe",[],n):"object"===typeof x?x=n():t.StackFrame=n()}(this,(function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}var r=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],o=["fileName","functionName","source"],a=["args"],s=r.concat(i,o,a);function l(e){if(e instanceof Object)for(var n=0;n<s.length;n++)e.hasOwnProperty(s[n])&&void 0!==e[s[n]]&&this["set"+t(s[n])](e[s[n]])}l.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof l)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new l(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var u=0;u<r.length;u++)l.prototype["get"+t(r[u])]=n(r[u]),l.prototype["set"+t(r[u])]=function(e){return function(t){this[e]=Boolean(t)}}(r[u]);for(var c=0;c<i.length;c++)l.prototype["get"+t(i[c])]=n(i[c]),l.prototype["set"+t(i[c])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(i[c]);for(var d=0;d<o.length;d++)l.prototype["get"+t(o[d])]=n(o[d]),l.prototype["set"+t(o[d])]=function(e){return function(t){this[e]=String(t)}}(o[d]);return l}));var w={};!function(t,n){"use strict";"function"===typeof e&&e.amd?e("error-stack-parser",["stackframe"],n):"object"===typeof w?w=n(x):t.ErrorStackParser=n(t.StackFrame)}(this,(function(e){"use strict";var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if("undefined"!==typeof e.stacktrace||"undefined"!==typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(e){return!!e.match(n)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"("),r=n.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(n=r?n.replace(r[0],""):n).split(/\s+/).slice(1),o=this.extractLocation(r?r[1]:i.pop()),a=i.join(" ")||void 0,s=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new e({functionName:a,fileName:s,lineNumber:o[1],columnNumber:o[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(e){return!e.match(r)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=t.match(n),i=r&&r[1]?r[1]:void 0,o=this.extractLocation(t.replace(n,""));return new e({functionName:i,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),i=[],o=2,a=r.length;o<a;o+=2){var s=n.exec(r[o]);s&&i.push(new e({fileName:s[2],lineNumber:s[1],source:r[o]}))}return i},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),i=[],o=0,a=r.length;o<a;o+=2){var s=n.exec(r[o]);s&&i.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:r[o]}))}return i},parseOpera11:function(n){return n.stack.split("\n").filter((function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this).map((function(t){var n,r=t.split("@"),i=this.extractLocation(r.pop()),o=r.shift()||"",a=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(n=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:a,args:s,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}),this)}}}));var E=w,S=function(e,t,n,r){var i=r&&r.redactedKeys?r.redactedKeys:[],o=r&&r.redactedPaths?r.redactedPaths:[];return JSON.stringify(N(e,i,o),t,n)},T=20,M=25e3,k=8,C="...";function P(e){return e instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(e))}function A(e){return"[Throws: "+(e?e.message:"?")+"]"}function O(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1}function I(e,t){for(var n=0,r=e.length;n<r;n++)if(0===t.indexOf(e[n]))return!0;return!1}function L(e,t){for(var n=0,r=e.length;n<r;n++){if("string"===typeof e[n]&&e[n].toLowerCase()===t.toLowerCase())return!0;if(e[n]&&"function"===typeof e[n].test&&e[n].test(t))return!0}return!1}function D(e){return"[object Array]"===Object.prototype.toString.call(e)}function R(e,t){try{return e[t]}catch(n){return A(n)}}function N(e,t,n){var r=[],i=0;function o(e,a){function s(){return a.length>k&&i>M}if(i++,a.length>T)return C;if(s())return C;if(null===e||"object"!==typeof e)return e;if(O(r,e))return"[Circular]";if(r.push(e),"function"===typeof e.toJSON)try{i--;var l=o(e.toJSON(),a);return r.pop(),l}catch(m){return A(m)}if(P(e)){i--;var u=o({name:e.name,message:e.message},a);return r.pop(),u}if(D(e)){for(var c=[],d=0,h=e.length;d<h;d++){if(s()){c.push(C);break}c.push(o(e[d],a.concat("[]")))}return r.pop(),c}var f={};try{for(var p in e)if(Object.prototype.hasOwnProperty.call(e,p))if(I(n,a.join("."))&&L(t,p))f[p]="[REDACTED]";else{if(s()){f[p]=C;break}f[p]=o(R(e,p),a.concat(p))}}catch(g){}return r.pop(),f}return o(e,[])}function z(e,t,n){"string"===typeof t&&(void 0===n?n=null:null!==n&&"string"!==typeof n&&(n=S(n)),e[t]=n)}function j(e,t){if(o(t))for(var n=0;n<t.length;++n){var r=t[n];null!==r&&"object"===typeof r&&z(e,r.name,r.variant)}}function B(e){return m(l(e),(function(t){var n={featureFlag:t};return"string"===typeof e[t]&&(n.variant=e[t]),n}))}var F={add:z,merge:j,toEventApi:B},U=function(e){return!!e&&(!!e.stack||!!e.stacktrace||!!e["opera#sourceloc"])&&"string"===typeof(e.stack||e.stacktrace||e["opera#sourceloc"])&&e.stack!==e.name+": "+e.message};function G(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}var H=G,V=function(e,t,n,r){var i;if(t){var o;if(null===n)return q(e,t);"object"===typeof n&&(o=n),"string"===typeof n&&((i={})[n]=r,o=i),o&&(e[t]||(e[t]={}),e[t]=p({},e[t],o))}},q=function(e,t,n){"string"===typeof t&&(n?e[t]&&delete e[t][n]:delete e[t])},$={add:V,get:function(e,t,n){if("string"===typeof t)return n?e[t]?e[t][n]:void 0:e[t]},clear:q},W={};!function(t,n){"use strict";"function"===typeof e&&e.amd?e("stack-generator",["stackframe"],n):"object"===typeof W?W=n(x):t.StackGenerator=n(t.StackFrame)}(this,(function(e){return{backtrace:function(t){var n=[],r=10;"object"===typeof t&&"number"===typeof t.maxStackSize&&(r=t.maxStackSize);for(var i=arguments.callee;i&&n.length<r&&i.arguments;){for(var o=new Array(i.arguments.length),a=0;a<o.length;++a)o[a]=i.arguments[a];/function(?:\s+([\w$]+))+\s*\(/.test(i.toString())?n.push(new e({functionName:RegExp.$1||void 0,args:o})):n.push(new e({args:o}));try{i=i.caller}catch(s){break}}return n}}}));var Z=function(){function e(t,r,i,o,a){void 0===i&&(i=[]),void 0===o&&(o=K()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=a,this._handledState=o,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features={},this._user={},this._session=void 0,this.errors=[{errorClass:J(t),errorMessage:J(r),type:e.__type,stacktrace:n(i,(function(e,t){var n=X(t);try{return"{}"===JSON.stringify(n)?e:e.concat(n)}catch(r){return e}}),[])}]}var t=e.prototype;return t.addMetadata=function(e,t,n){return $.add(this._metadata,e,t,n)},t.getMetadata=function(e,t){return $.get(this._metadata,e,t)},t.clearMetadata=function(e,t){return $.clear(this._metadata,e,t)},t.addFeatureFlag=function(e,t){void 0===t&&(t=null),F.add(this._features,e,t)},t.addFeatureFlags=function(e){F.merge(this._features,e)},t.clearFeatureFlag=function(e){delete this._features[e]},t.clearFeatureFlags=function(){this._features={}},t.getUser=function(){return this._user},t.setUser=function(e,t,n){this._user={id:e,email:t,name:n}},t.toJSON=function(){return{payloadVersion:"4",exceptions:m(this.errors,(function(e){return p({},e,{message:e.errorMessage})})),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:F.toEventApi(this._features)}},e}(),X=function(e){var t={file:e.fileName,method:Y(e.functionName),lineNumber:e.lineNumber,columnNumber:e.columnNumber,code:void 0,inProject:void 0};return t.lineNumber>-1&&!t.file&&!t.method&&(t.file="global code"),t},Y=function(e){return/^global code$/i.test(e)?"global code":e},K=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},J=function(e){return"string"===typeof e?e:""};Z.getStacktrace=function(e,t,n){if(U(e))return E.parse(e).slice(t);try{return r(W.backtrace(),(function(e){return-1===(e.functionName||"").indexOf("StackGenerator$$")})).slice(1+n)}catch(i){return[]}},Z.create=function(e,t,n,r,i,o){void 0===i&&(i=0);var a,s=ee(e,t,r,o),l=s[0],u=s[1];try{var c=Z.getStacktrace(l,u>0?1+u+i:0,1+i);a=new Z(l.name,l.message,c,n,e)}catch(d){a=new Z(l.name,l.message,[],n,e)}return"InvalidError"===l.name&&a.addMetadata(""+r,"non-error parameter",Q(e)),a};var Q=function(e){return null===e?"null":void 0===e?"undefined":e},ee=function(e,t,n,r){var i,o=0,a=function(e){r&&r.warn(n+' received a non-error: "'+e+'"');var t=new Error(n+' received a non-error. See "'+n+'" tab for more detail.');return t.name="InvalidError",t};if(t)switch(typeof e){case"string":case"number":case"boolean":i=new Error(String(e)),o+=1;break;case"function":i=a("function"),o+=2;break;case"object":null!==e&&H(e)?i=e:null!==e&&te(e)?((i=new Error(e.message||e.errorMessage)).name=e.name||e.errorClass,o+=1):(i=a(null===e?"null":"unsupported object"),o+=2);break;default:i=a("nothing"),o+=2}else H(e)?i=e:(i=a(typeof e),o+=2);if(!U(i))try{throw i}catch(s){U(s)&&(i=s,o=1)}return[i,o]};Z.__type="browserjs";var te=function(e){return("string"===typeof e.name||"string"===typeof e.errorClass)&&("string"===typeof e.message||"string"===typeof e.errorMessage)},ne=Z,re=function(e,t,n){var r=0,i=function(){if(r>=e.length)return n(null,!0);t(e[r],(function(e,t){return e?n(e):!1===t?n(null,!1):(r++,void i())}))};i()},ie=function(e,t,n,r){var i=function(e,r){if("function"!==typeof e)return r(null);try{if(2!==e.length){var i=e(t);return i&&"function"===typeof i.then?i.then((function(e){return setTimeout((function(){return r(null,e)}))}),(function(e){setTimeout((function(){return n(e),r(null,!0)}))})):r(null,i)}e(t,(function(e,t){if(e)return n(e),r(null);r(null,t)}))}catch(o){n(o),r(null)}};re(e,i,r)},oe=function(e,t,n,r){for(var i=!1,o=e.slice();!i&&o.length;)try{i=!1===o.pop()(t)}catch(a){r.error("Error occurred in "+n+" callback, continuing anyway\u2026"),r.error(a)}return i},ae=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},se="object"===typeof window?window:self,le=0;for(var ue in se)Object.hasOwnProperty.call(se,ue)&&le++;var ce=("undefined"!==typeof navigator?navigator:{userAgent:""}).mimeTypes?("undefined"!==typeof navigator?navigator:{userAgent:""}).mimeTypes.length:0,de=ae((ce+("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgent.length).toString(36)+le.toString(36),4),he=function(){return de},fe=0,pe=4,me=36,ge=Math.pow(me,pe);function ye(){return ae((Math.random()*ge<<0).toString(me),pe)}function ve(){return fe=fe<ge?fe:0,++fe-1}function _e(){return"c"+(new Date).getTime().toString(me)+ae(ve().toString(me),pe)+he()+(ye()+ye())}_e.fingerprint=he;var be=_e,xe=function(){function e(){this.id=be(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var t=e.prototype;return t.getUser=function(){return this._user},t.setUser=function(e,t,n){this._user={id:e,email:t,name:n}},t.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},t._track=function(e){this[e._handledState.unhandled?"_unhandled":"_handled"]+=1},e}(),we=xe,Ee=function(){},Se=function(){function e(t,n,r,i){var o=this;void 0===n&&(n=h.schema),void 0===r&&(r=[]),this._notifier=i,this._config={},this._schema=n,this._delivery={sendSession:Ee,sendEvent:Ee},this._logger={debug:Ee,info:Ee,warn:Ee,error:Ee},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._features={},this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=e,this.Event=ne,this.Breadcrumb=b,this.Session=we,this._config=this._configure(t,r),m(r.concat(this._config.plugins),(function(e){e&&o._loadPlugin(e)})),this._depth=1;var a=this,s=this.notify;this.notify=function(){return s.apply(a,arguments)}}var o=e.prototype;return o.addMetadata=function(e,t,n){return $.add(this._metadata,e,t,n)},o.getMetadata=function(e,t){return $.get(this._metadata,e,t)},o.clearMetadata=function(e,t){return $.clear(this._metadata,e,t)},o.addFeatureFlag=function(e,t){void 0===t&&(t=null),F.add(this._features,e,t)},o.addFeatureFlags=function(e){F.merge(this._features,e)},o.clearFeatureFlag=function(e){delete this._features[e]},o.clearFeatureFlags=function(){this._features={}},o.getContext=function(){return this._context},o.setContext=function(e){this._context=e},o._configure=function(e,t){var r=n(t,(function(e,t){return t&&t.configSchema?p({},e,t.configSchema):e}),this._schema),i=n(l(r),(function(t,n){var i=r[n].defaultValue(e[n]);return void 0!==e[n]?r[n].validate(e[n])?r[n].allowPartialObject?t.config[n]=p(i,e[n]):t.config[n]=e[n]:(t.errors[n]=r[n].message,t.config[n]=i):t.config[n]=i,t}),{errors:{},config:{}}),o=i.errors,a=i.config;if(r.apiKey){if(!a.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(a.apiKey)||(o.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=p({},a.metadata),F.merge(this._features,a.featureFlags),this._user=p({},a.user),this._context=a.context,a.logger&&(this._logger=a.logger),a.onError&&(this._cbs.e=this._cbs.e.concat(a.onError)),a.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(a.onBreadcrumb)),a.onSession&&(this._cbs.s=this._cbs.s.concat(a.onSession)),l(o).length&&this._logger.warn(Te(o,e)),a},o.getUser=function(){return this._user},o.setUser=function(e,t,n){this._user={id:e,email:t,name:n}},o._loadPlugin=function(e){var t=e.load(this);return e.name&&(this._plugins["~"+e.name+"~"]=t),this},o.getPlugin=function(e){return this._plugins["~"+e+"~"]},o._setDelivery=function(e){this._delivery=e(this)},o.startSession=function(){var e=new we;return e.app.releaseStage=this._config.releaseStage,e.app.version=this._config.appVersion,e.app.type=this._config.appType,e._user=p({},this._user),oe(this._cbs.s,e,"onSession",this._logger)?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,e)},o.addOnError=function(e,t){void 0===t&&(t=!1),this._cbs.e[t?"unshift":"push"](e)},o.removeOnError=function(e){this._cbs.e=r(this._cbs.e,(function(t){return t!==e}))},o._addOnSessionPayload=function(e){this._cbs.sp.push(e)},o.addOnSession=function(e){this._cbs.s.push(e)},o.removeOnSession=function(e){this._cbs.s=r(this._cbs.s,(function(t){return t!==e}))},o.addOnBreadcrumb=function(e,t){void 0===t&&(t=!1),this._cbs.b[t?"unshift":"push"](e)},o.removeOnBreadcrumb=function(e){this._cbs.b=r(this._cbs.b,(function(t){return t!==e}))},o.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},o.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},o.leaveBreadcrumb=function(e,n,r){if(e="string"===typeof e?e:"",r="string"===typeof r&&i(t,r)?r:"manual",n="object"===typeof n&&null!==n?n:{},e){var o=new b(e,n,r);oe(this._cbs.b,o,"onBreadcrumb",this._logger)?this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback"):(this._breadcrumbs.push(o),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs)))}},o._isBreadcrumbTypeEnabled=function(e){var t=this._config.enabledBreadcrumbTypes;return null===t||i(t,e)},o.notify=function(e,t,n){void 0===n&&(n=Ee);var r=ne.create(e,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(r,t,n)},o._notify=function(t,n,r){var o=this;if(void 0===r&&(r=Ee),t.app=p({},t.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),t.context=t.context||this._context,t._metadata=p({},t._metadata,this._metadata),t._features=p({},t._features,this._features),t._user=p({},t._user,this._user),t.breadcrumbs=this._breadcrumbs.slice(),null!==this._config.enabledReleaseStages&&!i(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),r(null,t);var a=t.severity,s=function(e){o._logger.error("Error occurred in onError callback, continuing anyway\u2026"),o._logger.error(e)},l=[].concat(this._cbs.e).concat(n);ie(l,t,s,(function(n,i){if(n&&s(n),!i)return o._logger.debug("Event not sent due to onError callback"),r(null,t);o._isBreadcrumbTypeEnabled("error")&&e.prototype.leaveBreadcrumb.call(o,t.errors[0].errorClass,{errorClass:t.errors[0].errorClass,errorMessage:t.errors[0].errorMessage,severity:t.severity},"error"),a!==t.severity&&(t._handledState.severityReason={type:"userCallbackSetSeverity"}),t.unhandled!==t._handledState.unhandled&&(t._handledState.severityReason.unhandledOverridden=!0,t._handledState.unhandled=t.unhandled),o._session&&(o._session._track(t),t._session=o._session),o._delivery.sendEvent({apiKey:t.apiKey||o._config.apiKey,notifier:o._notifier,events:[t]},(function(e){return r(e,t)}))}))},e}(),Te=function(e,t){return new Error("Invalid configuration\n"+m(l(e),(function(n){return"  - "+n+" "+e[n]+", got "+Me(t[n])})).join("\n\n"))},Me=function(e){switch(typeof e){case"string":case"number":case"object":return JSON.stringify(e);default:return String(e)}},ke=Se,Ce={},Pe=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];Ce.event=function(e,t){var n=S(e,null,null,{redactedPaths:Pe,redactedKeys:t});if(n.length>1e6&&(e.events[0]._metadata={notifier:"WARNING!\nSerialized payload was "+n.length/1e6+"MB (limit = 1MB)\nmetadata was removed"},(n=S(e,null,null,{redactedPaths:Pe,redactedKeys:t})).length>1e6))throw new Error("payload exceeded 1MB limit");return n},Ce.session=function(e,t){var n=S(e,null,null);if(n.length>1e6)throw new Error("payload exceeded 1MB limit");return n};var Ae={};Ae=function(e,t){return void 0===t&&(t=window),{sendEvent:function(n,r){void 0===r&&(r=function(){});var i=Oe(e._config,"notify","4",t),o=new t.XDomainRequest;o.onload=function(){r(null)},o.open("POST",i),setTimeout((function(){try{o.send(Ce.event(n,e._config.redactedKeys))}catch(t){e._logger.error(t),r(t)}}),0)},sendSession:function(n,r){void 0===r&&(r=function(){});var i=Oe(e._config,"sessions","1",t),o=new t.XDomainRequest;o.onload=function(){r(null)},o.open("POST",i),setTimeout((function(){try{o.send(Ce.session(n,e._config.redactedKeys))}catch(t){e._logger.error(t),r(t)}}),0)}}};var Oe=function(e,t,n,r){var i=JSON.parse(JSON.stringify(new Date));return Ie(e.endpoints[t],r.location.protocol)+"?apiKey="+encodeURIComponent(e.apiKey)+"&payloadVersion="+n+"&sentAt="+encodeURIComponent(i)},Ie=Ae._matchPageProtocol=function(e,t){return"http:"===t?e.replace(/^https:/,"http:"):e},Le=function(e,t){return void 0===t&&(t=window),{sendEvent:function(n,r){void 0===r&&(r=function(){});try{var i=e._config.endpoints.notify,o=new t.XMLHttpRequest;o.onreadystatechange=function(){o.readyState===t.XMLHttpRequest.DONE&&r(null)},o.open("POST",i),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Bugsnag-Api-Key",n.apiKey||e._config.apiKey),o.setRequestHeader("Bugsnag-Payload-Version","4"),o.setRequestHeader("Bugsnag-Sent-At",(new Date).toISOString()),o.send(Ce.event(n,e._config.redactedKeys))}catch(a){e._logger.error(a)}},sendSession:function(n,r){void 0===r&&(r=function(){});try{var i=e._config.endpoints.sessions,o=new t.XMLHttpRequest;o.onreadystatechange=function(){o.readyState===t.XMLHttpRequest.DONE&&r(null)},o.open("POST",i),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Bugsnag-Api-Key",e._config.apiKey),o.setRequestHeader("Bugsnag-Payload-Version","1"),o.setRequestHeader("Bugsnag-Sent-At",(new Date).toISOString()),o.send(Ce.session(n,e._config.redactedKeys))}catch(a){e._logger.error(a)}}}},De=new Date,Re=function(){De=new Date},Ne={name:"appDuration",load:function(e){return e.addOnError((function(e){var t=new Date;e.app.duration=t-De}),!0),{reset:Re}}},ze=function(e){return void 0===e&&(e=window),{load:function(t){t.addOnError((function(t){void 0===t.context&&(t.context=e.location.pathname)}),!0)}}},je=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},Be="object"===typeof window?window:self,Fe=0;for(var Ue in Be)Object.hasOwnProperty.call(Be,Ue)&&Fe++;var Ge=("undefined"!==typeof navigator?navigator:{userAgent:""}).mimeTypes?("undefined"!==typeof navigator?navigator:{userAgent:""}).mimeTypes.length:0,He=je((Ge+("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgent.length).toString(36)+Fe.toString(36),4),Ve=function(){return He},qe=0,$e=4,We=36,Ze=Math.pow(We,$e);function Xe(){return je((Math.random()*Ze<<0).toString(We),$e)}function Ye(){return qe=qe<Ze?qe:0,++qe-1}function Ke(){return"c"+(new Date).getTime().toString(We)+je(Ye().toString(We),$e)+Ve()+(Xe()+Xe())}Ke.fingerprint=Ve;var Je=Ke,Qe="bugsnag-anonymous-id",et=function(){try{var e=window.localStorage,t=e.getItem(Qe);return t&&/^c[a-z0-9]{20,32}$/.test(t)||(t=Je(),e.setItem(Qe,t)),t}catch(n){}},tt=function(e,t){return void 0===e&&(e="undefined"!==typeof navigator?navigator:{userAgent:""}),void 0===t&&(t=window.screen),{load:function(n){var r={locale:e.browserLanguage||e.systemLanguage||e.userLanguage||e.language,userAgent:e.userAgent};t&&t.orientation&&t.orientation.type?r.orientation=t.orientation.type:r.orientation=document.documentElement.clientWidth>document.documentElement.clientHeight?"landscape":"portrait",n._config.generateAnonymousId&&(r.id=et()),n.addOnSession((function(e){e.device=p({},e.device,r),n._config.collectUserIp||nt(e)})),n.addOnError((function(e){e.device=p({},e.device,r,{time:new Date}),n._config.collectUserIp||nt(e)}),!0)},configSchema:{generateAnonymousId:{validate:function(e){return!0===e||!1===e},defaultValue:function(){return!0},message:"should be true|false"}}}},nt=function(e){var t=e.getUser();t&&t.id||e.setUser(e.device.id)},rt=function(e){return void 0===e&&(e=window),{load:function(t){t.addOnError((function(t){t.request&&t.request.url||(t.request=p({},t.request,{url:e.location.href}))}),!0)}}},it={load:function(e){e._sessionDelegate=ot}},ot={startSession:function(e,t){var n=e;return n._session=t,n._pausedSession=null,null===n._config.enabledReleaseStages||i(n._config.enabledReleaseStages,n._config.releaseStage)?(n._delivery.sendSession({notifier:n._notifier,device:t.device,app:t.app,sessions:[{id:t.id,startedAt:t.startedAt,user:t._user}]}),n):(n._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),n)},resumeSession:function(e){return e._session?e:e._pausedSession?(e._session=e._pausedSession,e._pausedSession=null,e):e.startSession()},pauseSession:function(e){e._pausedSession=e._session,e._session=null}},at={load:function(e){e._config.collectUserIp||e.addOnError((function(e){e._user&&"undefined"===typeof e._user.id&&delete e._user.id,e._user=p({id:"[REDACTED]"},e._user),e.request=p({clientIp:"[REDACTED]"},e.request)}))},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}}}},st={load:function(e){!/^(local-)?dev(elopment)?$/.test(e._config.releaseStage)&&e._isBreadcrumbTypeEnabled("log")&&m(lt,(function(t){var r=console[t];console[t]=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];e.leaveBreadcrumb("Console output",n(o,(function(e,t,n){var r="[Unknown value]";try{r=String(t)}catch(i){}if("[object Object]"===r)try{r=JSON.stringify(t)}catch(i){}return e["["+n+"]"]=r,e}),{severity:0===t.indexOf("group")?"log":t}),"log"),r.apply(console,o)},console[t]._restore=function(){console[t]=r}}))}},lt=r(["log","debug","info","warn","error"],(function(e){return"undefined"!==typeof console&&"function"===typeof console[e]})),ut=200,ct=5e5,dt=function(e,t){return void 0===e&&(e=document),void 0===t&&(t=window),{load:function(i){if(i._config.trackInlineScripts){var o=t.location.href,a="",s=e.attachEvent?"complete"===e.readyState:"loading"!==e.readyState,l=function(){return e.documentElement.outerHTML};a=l();var u=e.onreadystatechange;e.onreadystatechange=function(){"interactive"===e.readyState&&(a=l(),s=!0);try{u.apply(this,arguments)}catch(t){}};var c=null,d=function(e){c=e},h=function(){var t=e.currentScript||c;if(!t&&!s){var n=e.scripts||e.getElementsByTagName("script");t=n[n.length-1]}return t},f=function(e){s&&a||(a=l());var t=["\x3c!-- DOC START --\x3e"].concat(a.split("\n")),r=e-1,i=Math.max(r-3,0),o=Math.min(r+3,t.length);return n(t.slice(i,o),(function(e,t,n){return e[i+1+n]=t.length<=ut?t:t.substr(0,ut),e}),{})};i.addOnError((function(e){e.errors[0].stacktrace=r(e.errors[0].stacktrace,(function(e){return!/__trace__$/.test(e.method)}));var t=e.errors[0].stacktrace[0];if(!t||!t.file||t.file.replace(/#.*$/,"")===o.replace(/#.*$/,"")){var n=h();if(n){var i=n.innerHTML;e.addMetadata("script","content",i.length<=ct?i:i.substr(0,ct)),t&&t.lineNumber&&(t.code=f(t.lineNumber))}}}),!0);var p=m(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],(function(e){return ht(t,e,(function(e){return g(e,(function(e){return{get:function(){return e[0]},replace:function(t){e[0]=t}}}))}))}))[0];m(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],(function(e){t[e]&&t[e].prototype&&Object.prototype.hasOwnProperty.call(t[e].prototype,"addEventListener")&&(ht(t[e].prototype,"addEventListener",(function(e){return g(e,ft)})),ht(t[e].prototype,"removeEventListener",(function(e){return g(e,ft,!0)})))}))}function g(e,t,n){return void 0===n&&(n=!1),function(){var r=[].slice.call(arguments);try{var i=t(r),o=i.get();if(n&&e.apply(this,r),"function"!==typeof o)return e.apply(this,r);if(o.__trace__)i.replace(o.__trace__);else{var a=h();o.__trace__=function(){d(a),p((function(){d(null)}),0);var e=o.apply(this,arguments);return d(null),e},o.__trace__.__trace__=o.__trace__,i.replace(o.__trace__)}}catch(s){}if(e.apply)return e.apply(this,r);switch(r.length){case 1:return e(r[0]);case 2:return e(r[0],r[1]);default:return e()}}}},configSchema:{trackInlineScripts:{validate:function(e){return!0===e||!1===e},defaultValue:function(){return!0},message:"should be true|false"}}}};function ht(e,t,n){var r=e[t];if(!r)return r;var i=n(r);return e[t]=i,r}function ft(e){var t=!!e[1]&&"function"===typeof e[1].handleEvent;return{get:function(){return t?e[1].handleEvent:e[1]},replace:function(n){t?e[1].handleEvent=n:e[1]=n}}}var pt=function(e){return void 0===e&&(e=window),{load:function(t){"addEventListener"in e&&t._isBreadcrumbTypeEnabled("user")&&e.addEventListener("click",(function(n){var r,i;try{r=mt(n.target),i=gt(n.target,e)}catch(o){r="[hidden]",i="[hidden]",t._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}t.leaveBreadcrumb("UI click",{targetText:r,targetSelector:i},"user")}),!0)}}},mt=function(e){var t=e.textContent||e.innerText||"";return t||"submit"!==e.type&&"button"!==e.type||(t=e.value),yt(t=t.replace(/^\s+|\s+$/g,""),140)};function gt(e,t){var n=[e.tagName];if(e.id&&n.push("#"+e.id),e.className&&e.className.length&&n.push("."+e.className.split(" ").join(".")),!t.document.querySelectorAll||!Array.prototype.indexOf)return n.join("");try{if(1===t.document.querySelectorAll(n.join("")).length)return n.join("")}catch(i){return n.join("")}if(e.parentNode.childNodes.length>1){var r=Array.prototype.indexOf.call(e.parentNode.childNodes,e)+1;n.push(":nth-child("+r+")")}return 1===t.document.querySelectorAll(n.join("")).length?n.join(""):e.parentNode?gt(e.parentNode,t)+" > "+n.join(""):n.join("")}function yt(e,t){var n="(...)";return e&&e.length<=t?e:e.slice(0,t-n.length)+n}var vt={};vt=function(e){void 0===e&&(e=window);var t={load:function(t){if("addEventListener"in e&&t._isBreadcrumbTypeEnabled("navigation")){var n=function(e){return function(){return t.leaveBreadcrumb(e,{},"navigation")}};e.addEventListener("pagehide",n("Page hidden"),!0),e.addEventListener("pageshow",n("Page shown"),!0),e.addEventListener("load",n("Page loaded"),!0),e.document.addEventListener("DOMContentLoaded",n("DOMContentLoaded"),!0),e.addEventListener("load",(function(){return e.addEventListener("popstate",n("Navigated back"),!0)})),e.addEventListener("hashchange",(function(n){var r=n.oldURL?{from:_t(n.oldURL,e),to:_t(n.newURL,e),state:wt(e)}:{to:_t(e.location.href,e)};t.leaveBreadcrumb("Hash changed",r,"navigation")}),!0),e.history.replaceState&&xt(t,e.history,"replaceState",e),e.history.pushState&&xt(t,e.history,"pushState",e)}}};return t};var _t=function(e,t){var n=t.document.createElement("A");return n.href=e,""+n.pathname+n.search+n.hash},bt=function(e,t,n,r){var i=_t(e.location.href,e);return{title:n,state:t,prevState:wt(e),to:r||i,from:i}},xt=function(e,t,n,r){var i=t[n];t[n]=function(o,a,s){e.leaveBreadcrumb("History "+n,bt(r,o,a,s),"navigation"),"function"===typeof e.resetEventCount&&e.resetEventCount(),e._config.autoTrackSessions&&e.startSession(),i.apply(t,[o,a].concat(void 0!==s?s:[]))}},wt=function(e){try{return e.history.state}catch(t){}},Et="request",St="BS~~S",Tt="BS~~U",Mt="BS~~M",kt=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=window);var n={load:function(n){if(n._isBreadcrumbTypeEnabled("request")){var r=[n._config.endpoints.notify,n._config.endpoints.sessions].concat(e);s(),c();var o=function(e,t,r){var i={status:e.status,request:t+" "+r};e.status>=400?n.leaveBreadcrumb("fetch() failed",i,Et):n.leaveBreadcrumb("fetch() succeeded",i,Et)},a=function(e,t){n.leaveBreadcrumb("fetch() error",{request:e+" "+t},Et)}}function s(){if("addEventListener"in t.XMLHttpRequest.prototype){var e=t.XMLHttpRequest.prototype.open;t.XMLHttpRequest.prototype.open=function(t,n){this[Tt]=n,this[Mt]=t,this[St]&&(this.removeEventListener("load",l),this.removeEventListener("error",u)),this.addEventListener("load",l),this.addEventListener("error",u),this[St]=!0,e.apply(this,arguments)}}}function l(){var e=this[Tt];if(void 0!==e){if("string"!==typeof e||!i(r,e.replace(/\?.*$/,""))){var t={status:this.status,request:this[Mt]+" "+this[Tt]};this.status>=400?n.leaveBreadcrumb("XMLHttpRequest failed",t,Et):n.leaveBreadcrumb("XMLHttpRequest succeeded",t,Et)}}else n._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.")}function u(){var e=this[Tt];void 0!==e?"string"===typeof e&&i(r,e.replace(/\?.*$/,""))||n.leaveBreadcrumb("XMLHttpRequest error",{request:this[Mt]+" "+this[Tt]},Et):n._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.")}function c(){if("fetch"in t&&!t.fetch.polyfill){var e=t.fetch;t.fetch=function(){var t,n=arguments,r=arguments[0],i=arguments[1],s=null;return r&&"object"===typeof r?(s=r.url,i&&"method"in i?t=i.method:r&&"method"in r&&(t=r.method)):(s=r,i&&"method"in i&&(t=i.method)),void 0===t&&(t="GET"),new Promise((function(r,i){e.apply(void 0,n).then((function(e){o(e,t,s),r(e)})).catch((function(e){a(t,s),i(e)}))}))}}}}};return n},Ct={load:function(e){var t=0;e.addOnError((function(n){if(t>=e._config.maxEvents)return!1;t++})),e.resetEventCount=function(){t=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer \u2264100",validate:function(e){return u(1,100)(e)}}}},Pt={},At=(Pt={load:function(e){e.addOnError((function(e){var t=n(e.errors,(function(e,t){return e.concat(t.stacktrace)}),[]);m(t,(function(e){e.file=At(e.file)}))}))}})._strip=function(e){return"string"===typeof e?e.replace(/\?.*$/,"").replace(/#.*$/,""):e},Ot=function(e){return void 0===e&&(e=window),{load:function(t){if(t._config.autoDetectErrors&&t._config.enabledErrorTypes.unhandledExceptions){var n=e.onerror;e.onerror=r}function r(e,r,i,o,a){if(0===i&&/Script error\.?/.test(e))t._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var s,l={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}};if(a)s=t.Event.create(a,!0,l,"window onerror",1),It(s.errors[0].stacktrace,r,i,o);else if("object"!==typeof e||null===e||r&&"string"===typeof r||i||o||a)s=t.Event.create(e,!0,l,"window onerror",1),It(s.errors[0].stacktrace,r,i,o);else{var u=e.type?"Event: "+e.type:"Error",c=e.message||e.detail||"";(s=t.Event.create({name:u,message:c},!0,l,"window onerror",1)).originalError=e,s.addMetadata("window onerror",{event:e,extraParameters:r})}t._notify(s)}"function"===typeof n&&n.apply(this,arguments)}}}},It=function(e,t,n,r){e[0]||e.push({});var i=e[0];i.file||"string"!==typeof t||(i.file=t),!i.lineNumber&&Lt(n)&&(i.lineNumber=n),i.columnNumber||(Lt(r)?i.columnNumber=r:window.event&&Lt(window.event.errorCharacter)&&(i.columnNumber=window.event.errorCharacter))},Lt=function(e){return"number"===typeof e&&"NaN"!==String.call(e)},Dt=function(e){return void 0===e&&(e=window),{load:function(t){if(t._config.autoDetectErrors&&t._config.enabledErrorTypes.unhandledRejections){var n=function(e){var n=e.reason,r=!1;try{e.detail&&e.detail.reason&&(n=e.detail.reason,r=!0)}catch(o){}var i=t.Event.create(n,!1,{severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,t._logger);r&&m(i.errors[0].stacktrace,Rt(n)),t._notify(i,(function(e){var t;H(e.originalError)&&!e.originalError.stack&&e.addMetadata("unhandledRejection handler",((t={})[Object.prototype.toString.call(e.originalError)]={name:e.originalError.name,message:e.originalError.message,code:e.originalError.code},t))}))};"addEventListener"in e?e.addEventListener("unhandledrejection",n):e.onunhandledrejection=function(e,t){n({detail:{reason:e,promise:t}})}}}}},Rt=function(e){return function(t){t.file!==e.toString()&&t.method&&(t.method=t.method.replace(/^\s+/,""))}},Nt={},zt="Bugsnag JavaScript",jt="7.16.1",Bt="https://github.com/bugsnag/bugsnag-js",Ft=p({},h.schema,v),Ut={_client:null,createClient:function(e){"string"===typeof e&&(e={apiKey:e}),e||(e={});var t=[Ne,tt(),ze(),rt(),Ct,it,at,Pt,Ot(),Dt(),vt(),pt(),kt(),st,dt()],n=new ke(e,Ft,t,{name:zt,version:jt,url:Bt});return n._setDelivery(window.XDomainRequest?Ae:Le),n._logger.debug("Loaded!"),n.leaveBreadcrumb("Bugsnag loaded",{},"state"),n._config.autoTrackSessions?n.startSession():n},start:function(e){return Ut._client?(Ut._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),Ut._client):(Ut._client=Ut.createClient(e),Ut._client)}};return m(["resetEventCount"].concat(l(ke.prototype)),(function(e){/^_/.test(e)||(Ut[e]=function(){if(!Ut._client)return console.log("Bugsnag."+e+"() was called before Bugsnag.start()");Ut._client._depth+=1;var t=Ut._client[e].apply(Ut._client,arguments);return Ut._client._depth-=1,t})})),(Nt=Ut).Client=ke,Nt.Event=ne,Nt.Session=we,Nt.Breadcrumb=b,Nt.default=Ut,Nt}()},64061:function(e,t,n){e.exports=n(97748)},63362:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z}});var r=n(63457)},63457:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(87462),i=n(67294),o=n(159),a=n(93869);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,o.Z)(),s=(0,a.Z)({theme:n,name:"MuiUseMediaQuery",props:{}});var l="function"===typeof e?e(n):e;l=l.replace(/^@media( ?)/m,"");var u="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,c=(0,r.Z)({},s,t),d=c.defaultMatches,h=void 0!==d&&d,f=c.matchMedia,p=void 0===f?u?window.matchMedia:null:f,m=c.noSsr,g=void 0!==m&&m,y=c.ssrMatchMedia,v=void 0===y?null:y,_=i.useState((function(){return g&&u?p(l).matches:v?v(l).matches:h})),b=_[0],x=_[1];return i.useEffect((function(){var e=!0;if(u){var t=p(l),n=function(){e&&x(t.matches)};return n(),t.addListener(n),function(){e=!1,t.removeListener(n)}}}),[l,p,u]),b}},93869:function(e,t,n){"use strict";function r(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,o=t.props[n];for(i in o)void 0===r[i]&&(r[i]=o[i]);return r}n.d(t,{Z:function(){return r}})},83800:function(e,t,n){"use strict";var r=n(67294).createContext(null);t.Z=r},159:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(67294),i=n(83800);function o(){return r.useContext(i.Z)}},61019:function(e,t,n){"use strict";n.r(t)},29829:function(e,t,n){"use strict";n.d(t,{oM:function(){return w},xC:function(){return _}});var r,i=n(3937),o=n(83105),a=n(65139),s=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},u=Object.defineProperty,c=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,f=function(e,t,n){return t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},p=function(e,t){for(var n in t||(t={}))d.call(t,n)&&f(e,n,t[n]);if(c)for(var r=0,i=c(t);r<i.length;r++){n=i[r];h.call(t,n)&&f(e,n,t[n])}return e},m="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?o.qC:o.qC.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function g(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var y=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return s(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,l([void 0],e[0].concat(this)))):new(t.bind.apply(t,l([void 0],e.concat(this))))},t}(Array);function v(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new y);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(a.Z.withExtraArgument(n.extraArgument)):r.push(a.Z));0;return r}(e)}}function _(e){var t,n=v(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,s=r.middleware,u=void 0===s?n():s,c=r.devTools,d=void 0===c||c,h=r.preloadedState,f=void 0===h?void 0:h,y=r.enhancers,_=void 0===y?void 0:y;if("function"===typeof a)t=a;else{if(!g(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,o.UY)(a)}var b=u;"function"===typeof b&&(b=b(n));var x=o.md.apply(void 0,b),w=o.qC;d&&(w=m(p({trace:!1},"object"===typeof d&&d)));var E=[x];Array.isArray(_)?E=l([x],_):"function"===typeof _&&(E=_(E));var S=w.apply(void 0,E);return(0,o.MT)(t,f,S)}function b(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return p(p({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function x(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function w(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:(0,i.ZP)(e.initialState,(function(){})),o=e.reducers||{},a=Object.keys(o),s={},u={},c={};function d(){var t="function"===typeof e.extraReducers?x(e.extraReducers):[e.extraReducers],n=t[0],o=void 0===n?{}:n,a=t[1],s=void 0===a?[]:a,c=t[2],d=void 0===c?void 0:c,h=p(p({},o),u);return function(e,t,n,r){void 0===n&&(n=[]);var o,a="function"===typeof t?x(t):[t,n,r],s=a[0],u=a[1],c=a[2];if(function(e){return"function"===typeof e}(e))o=function(){return(0,i.ZP)(e(),(function(){}))};else{var d=(0,i.ZP)(e,(function(){}));o=function(){return d}}function h(e,t){void 0===e&&(e=o());var n=l([s[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var r;if((0,i.mv)(e))return"undefined"===typeof(r=n(e,t))?e:r;if((0,i.o$)(e))return(0,i.ZP)(e,(function(e){return n(e,t)}));if("undefined"===typeof(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return h.getInitialState=o,h}(r,h,s,d)}return a.forEach((function(e){var n,r,i=o[e],a=function(e,t){return e+"/"+t}(t,e);"reducer"in i?(n=i.reducer,r=i.prepare):n=i,s[e]=n,u[a]=n,c[e]=r?b(a,r):b(a)})),{name:t,reducer:function(e,t){return n||(n=d()),n(e,t)},actions:c,caseReducers:s,getInitialState:function(){return n||(n=d()),n.getInitialState()}}}(0,i.pV)()},3937:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[W]}function o(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Z}(e)||Array.isArray(e)||!!e[$]||!!e.constructor[$]||h(e)||f(e))}function a(e,t,n){void 0===n&&(n=!1),0===s(e)?(n?Object.keys:X)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function s(e){var t=e[W];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:h(e)?2:f(e)?3:0}function l(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){return 2===s(e)?e.get(t):e[t]}function c(e,t,n){var r=s(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){return G&&e instanceof Map}function f(e){return H&&e instanceof Set}function p(e){return e.o||e.t}function m(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Y(e);delete t[W];for(var n=X(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){return void 0===t&&(t=!1),v(e)||i(e)||!o(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=y),Object.freeze(e),t&&a(e,(function(e,t){return g(t,!0)}),!0)),e}function y(){r(2)}function v(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function _(e){var t=K[e];return t||r(18,e),t}function b(e,t){K[e]||(K[e]=t)}function x(){return F}function w(e,t){t&&(_("Patches"),e.u=[],e.s=[],e.v=t)}function E(e){S(e),e.p.forEach(M),e.p=null}function S(e){e===F&&(F=e.l)}function T(e){return F={p:[],l:F,h:e,m:!0,_:0}}function M(e){var t=e[W];0===t.i||1===t.i?t.j():t.O=!0}function k(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.g||_("ES5").S(t,e,i),i?(n[W].P&&(E(t),r(4)),o(e)&&(e=C(t,e),t.l||A(t,e)),t.u&&_("Patches").M(n[W].t,e,t.u,t.s)):e=C(t,n,[]),E(t),t.u&&t.v(t.u,t.s),e!==q?e:void 0}function C(e,t,n){if(v(t))return t;var r=t[W];if(!r)return a(t,(function(i,o){return P(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return A(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=m(r.k):r.o;a(3===r.i?new Set(i):i,(function(t,o){return P(e,r,i,t,o,n)})),A(e,i,!1),n&&e.u&&_("Patches").R(r,n,e.u,e.s)}return r.o}function P(e,t,n,r,a,s){if(i(a)){var u=C(e,a,s&&t&&3!==t.i&&!l(t.D,r)?s.concat(r):void 0);if(c(n,r,u),!i(u))return;e.m=!1}if(o(a)&&!v(a)){if(!e.h.F&&e._<1)return;C(e,a),t&&t.A.l||A(e,a)}}function A(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&g(t,n)}function O(e,t){var n=e[W];return(n?p(n):e)[t]}function I(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function L(e){e.P||(e.P=!0,e.l&&L(e.l))}function D(e){e.o||(e.o=m(e.t))}function R(e,t,n){var r=h(t)?_("MapSet").N(t,n):f(t)?_("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:x(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=J;n&&(i=[r],o=Q);var a=Proxy.revocable(i,o),s=a.revoke,l=a.proxy;return r.k=l,r.j=s,l}(t,n):_("ES5").J(t,n);return(n?n.A:x()).p.push(r),r}function N(e){return i(e)||r(22,e),function e(t){if(!o(t))return t;var n,r=t[W],i=s(t);if(r){if(!r.P&&(r.i<4||!_("ES5").K(r)))return r.t;r.I=!0,n=z(t,i),r.I=!1}else n=z(t,i);return a(n,(function(t,i){r&&u(r.t,t)===i||c(n,t,e(i))})),3===i?new Set(n):n}(e)}function z(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return m(e)}function j(){function e(e,t){var n=o[e];return n?n.enumerable=t:o[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[W];return J.get(t,e)},set:function(t){var n=this[W];J.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][W];if(!i.P)switch(i.i){case 5:r(i)&&L(i);break;case 4:n(i)&&L(i)}}}function n(e){for(var t=e.t,n=e.k,r=X(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==W){var a=t[o];if(void 0===a&&!l(t,o))return!0;var s=n[o],u=s&&s[W];if(u?u.t!==a:!d(s,a))return!0}}var c=!!t[W];return r.length!==X(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var o={};b("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=Y(n);delete o[W];for(var a=X(o),s=0;s<a.length;s++){var l=a[s];o[l]=e(l,t||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:x(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,W,{value:o,writable:!0}),i},S:function(e,n,o){o?i(n)&&n[W].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[W];if(n){var i=n.t,o=n.k,s=n.D,u=n.i;if(4===u)a(o,(function(t){t!==W&&(void 0!==i[t]||l(i,t)?s[t]||e(o[t]):(s[t]=!0,L(n)))})),a(i,(function(e){void 0!==o[e]||l(o,e)||(s[e]=!1,L(n))}));else if(5===u){if(r(n)&&(L(n),s.length=!0),o.length<i.length)for(var c=o.length;c<i.length;c++)s[c]=!1;else for(var d=i.length;d<o.length;d++)s[d]=!0;for(var h=Math.min(o.length,i.length),f=0;f<h;f++)o.hasOwnProperty(f)||(s[f]=!0),void 0===s[f]&&e(o[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}n.d(t,{mv:function(){return i},o$:function(){return o},pV:function(){return j}});var B,F,U="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),G="undefined"!=typeof Map,H="undefined"!=typeof Set,V="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,q=U?Symbol.for("immer-nothing"):((B={})["immer-nothing"]=!0,B),$=U?Symbol.for("immer-draftable"):"__$immer_draftable",W=U?Symbol.for("immer-state"):"__$immer_state",Z=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),X="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Y=Object.getOwnPropertyDescriptors||function(e){var t={};return X(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},K={},J={get:function(e,t){if(t===W)return e;var n=p(e);if(!l(n,t))return function(e,t,n){var r,i=I(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!o(r)?r:r===O(e.t,t)?(D(e),e.o[t]=R(e.A.h,r,e)):r},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,n){var r=I(p(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=O(p(e),t),o=null==i?void 0:i[W];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(d(n,i)&&(void 0!==n||l(e.t,t)))return!0;D(e),L(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==O(e.t,t)||t in e.t?(e.D[t]=!1,D(e),L(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=p(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},Q={};a(J,(function(e,t){Q[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Q.deleteProperty=function(e,t){return Q.set.call(this,e,t,void 0)},Q.set=function(e,t,n){return J.set.call(this,e[0],t,n,e[0])};var ee=function(){function e(e){var t=this;this.g=V,this.F=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var a=n;n=e;var s=t;return function(e){var t=this;void 0===e&&(e=a);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return s.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))}))}}var l;if("function"!=typeof n&&r(6),void 0!==i&&"function"!=typeof i&&r(7),o(e)){var u=T(t),c=R(t,e,void 0),d=!0;try{l=n(c),d=!1}finally{d?E(u):S(u)}return"undefined"!=typeof Promise&&l instanceof Promise?l.then((function(e){return w(u,i),k(e,u)}),(function(e){throw E(u),e})):(w(u,i),k(l,u))}if(!e||"object"!=typeof e){if(void 0===(l=n(e))&&(l=e),l===q&&(l=void 0),t.F&&g(l,!0),i){var h=[],f=[];_("Patches").M(e,l,h,f),i(h,f)}return l}r(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){o(e)||r(8),i(e)&&(e=N(e));var t=T(this),n=R(this,e,void 0);return n[W].C=!0,S(t),n},t.finishDraft=function(e,t){var n=(e&&e[W]).A;return w(n,t),k(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!V&&r(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=_("Patches").$;return i(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),te=new ee,ne=te.produce;te.produceWithPatches.bind(te),te.setAutoFreeze.bind(te),te.setUseProxies.bind(te),te.applyPatches.bind(te),te.createDraft.bind(te),te.finishDraft.bind(te);t.ZP=ne},65139:function(e,t){"use strict";function n(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var r=n();r.withExtraArgument=n,t.Z=r},83105:function(e,t,n){"use strict";n.d(t,{MT:function(){return u},UY:function(){return c},md:function(){return h},qC:function(){return d}});var r=n(71834);function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var o="function"===typeof Symbol&&Symbol.observable||"@@observable",a=function(){return Math.random().toString(36).substring(7).split("").join(".")},s={INIT:"@@redux/INIT"+a(),REPLACE:"@@redux/REPLACE"+a(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+a()}};function l(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function u(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(i(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(i(1));return n(u)(e,t)}if("function"!==typeof e)throw new Error(i(2));var a=e,c=t,d=[],h=d,f=!1;function p(){h===d&&(h=d.slice())}function m(){if(f)throw new Error(i(3));return c}function g(e){if("function"!==typeof e)throw new Error(i(4));if(f)throw new Error(i(5));var t=!0;return p(),h.push(e),function(){if(t){if(f)throw new Error(i(6));t=!1,p();var n=h.indexOf(e);h.splice(n,1),d=null}}}function y(e){if(!l(e))throw new Error(i(7));if("undefined"===typeof e.type)throw new Error(i(8));if(f)throw new Error(i(9));try{f=!0,c=a(c,e)}finally{f=!1}for(var t=d=h,n=0;n<t.length;n++){(0,t[n])()}return e}function v(e){if("function"!==typeof e)throw new Error(i(10));a=e,y({type:s.REPLACE})}function _(){var e,t=g;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(i(11));function n(){e.next&&e.next(m())}return n(),{unsubscribe:t(n)}}})[o]=function(){return this},e}return y({type:s.INIT}),(r={dispatch:y,subscribe:g,getState:m,replaceReducer:v})[o]=_,r}function c(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];0,"function"===typeof e[o]&&(n[o]=e[o])}var a,l=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:s.INIT}))throw new Error(i(12));if("undefined"===typeof n(void 0,{type:s.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,o={},s=0;s<l.length;s++){var u=l[s],c=n[u],d=e[u],h=c(d,t);if("undefined"===typeof h){t&&t.type;throw new Error(i(14))}o[u]=h,r=r||h!==d}return(r=r||l.length!==Object.keys(e).length)?o:e}}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),o=function(){throw new Error(i(15))},a={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map((function(e){return e(a)}));return o=d.apply(void 0,s)(n.dispatch),(0,r.Z)((0,r.Z)({},n),{},{dispatch:o})}}}},24955:function(e){e.exports=function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach((function(t){e(n,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}))}return n}function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){var t,n="algoliasearch-client-js-".concat(e.key),r=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},o=function(){return JSON.parse(r().getItem(n)||"{}")};return{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){var n=JSON.stringify(e),r=o()[n];return Promise.all([r||t(),void 0!==r])})).then((function(e){var t=i(e,2),r=t[0],o=t[1];return Promise.all([r,o||n.miss(r)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var i=o();return i[JSON.stringify(e)]=t,r().setItem(n,JSON.stringify(i)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=o();delete t[JSON.stringify(e)],r().setItem(n,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){r().removeItem(n)}))}}}function s(e){var t=o(e.caches),n=t.shift();return void 0===n?{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return t().then((function(e){return Promise.all([e,n.miss(e)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return n.get(e,r,i).catch((function(){return s({caches:t}).get(e,r,i)}))},set:function(e,r){return n.set(e,r).catch((function(){return s({caches:t}).set(e,r)}))},delete:function(e){return n.delete(e).catch((function(){return s({caches:t}).delete(e)}))},clear:function(){return n.clear().catch((function(){return s({caches:t}).clear()}))}}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},o=JSON.stringify(n);if(o in t)return Promise.resolve(e.serializable?JSON.parse(t[o]):t[o]);var a=r(),s=i&&i.miss||function(){return Promise.resolve()};return a.then((function(e){return s(e)})).then((function(){return a}))},set:function(n,r){return t[JSON.stringify(n)]=e.serializable?JSON.stringify(r):r,Promise.resolve(r)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function u(e,t,n){var r={"x-algolia-api-key":n,"x-algolia-application-id":t};return{headers:function(){return e===m.WithinHeaders?r:{}},queryParameters:function(){return e===m.WithinQueryParameters?r:{}}}}function c(e){var t=0;return e((function n(){return t++,new Promise((function(r){setTimeout((function(){r(e(n))}),Math.min(100*t,1e3))}))}))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Promise.resolve()};return Object.assign(e,{wait:function(n){return d(e.then((function(e){return Promise.all([t(e,n),e])})).then((function(e){return e[1]})))}})}function h(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}function f(e,t){return t?(Object.keys(t).forEach((function(n){e[n]=t[n](e)})),e):e}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0;return e.replace(/%s/g,(function(){return encodeURIComponent(n[i++])}))}var m={WithinQueryParameters:0,WithinHeaders:1};function g(e,t){var n=e||{},r=n.data||{};return Object.keys(n).forEach((function(e){-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(e)&&(r[e]=n[e])})),{data:Object.entries(r).length>0?r:void 0,timeout:n.timeout||t,headers:n.headers||{},queryParameters:n.queryParameters||{},cacheable:n.cacheable}}var y={Read:1,Write:2,Any:3},v=1,_=2,b=3;function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;return n(n({},e),{},{status:t,lastUpdate:Date.now()})}function w(e){return"string"==typeof e?{protocol:"https",url:e,accept:y.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||y.Any}}var E="DELETE",S="GET",T="POST",M="PUT";function k(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(x(t))}))}))).then((function(e){var n=e.filter((function(e){return function(e){return e.status===v||Date.now()-e.lastUpdate>12e4}(e)})),r=e.filter((function(e){return function(e){return e.status===b&&Date.now()-e.lastUpdate<=12e4}(e)})),i=[].concat(o(n),o(r));return{getTimeout:function(e,t){return(0===r.length&&0===e?1:r.length+3+e)*t},statelessHosts:i.length>0?i.map((function(e){return w(e)})):t}}))}function C(e,t,r,i){var a=[],s=function(e,t){if(e.method!==S&&(void 0!==e.data||void 0!==t.data)){var r=Array.isArray(e.data)?e.data:n(n({},e.data),t.data);return JSON.stringify(r)}}(r,i),l=function(e,t){var r=n(n({},e.headers),t.headers),i={};return Object.keys(r).forEach((function(e){var t=r[e];i[e.toLowerCase()]=t})),i}(e,i),u=r.method,c=r.method!==S?{}:n(n({},r.data),i.data),d=n(n(n({"x-algolia-agent":e.userAgent.value},e.queryParameters),c),i.queryParameters),h=0,f=function t(n,o){var c=n.pop();if(void 0===c)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:L(a)};var f={data:s,headers:l,method:u,url:O(c,r.path,d),connectTimeout:o(h,e.timeouts.connect),responseTimeout:o(h,i.timeout)},p=function(e){var t={request:f,response:e,host:c,triesLeft:n.length};return a.push(t),t},m={onSuccess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:"DeserializationError",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(r){var i=p(r);return r.isTimedOut&&h++,Promise.all([e.logger.info("Retryable failure",D(i)),e.hostsCache.set(c,x(c,r.isTimedOut?b:_))]).then((function(){return t(n,o)}))},onFail:function(e){throw p(e),function(e,t){var n=e.content,r=e.status,i=n;try{i=JSON.parse(n).message}catch(e){}return function(e,t,n){return{name:"ApiError",message:e,status:t,transporterStackTrace:n}}(i,r,t)}(e,L(a))}};return e.requester.send(f).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,n=e.status;return!t&&0==~~n}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSuccess(e):t.onFail(e)}(e,m)}))};return k(e.hostsCache,t).then((function(e){return f(o(e.statelessHosts).reverse(),e.getTimeout)}))}function P(e){var t=e.hostsCache,n=e.logger,r=e.requester,o=e.requestsCache,a=e.responsesCache,s=e.timeouts,l=e.userAgent,u=e.hosts,c=e.queryParameters,d={hostsCache:t,logger:n,requester:r,requestsCache:o,responsesCache:a,timeouts:s,userAgent:l,headers:e.headers,queryParameters:c,hosts:u.map((function(e){return w(e)})),read:function(e,t){var n=g(t,d.timeouts.read),r=function(){return C(d,d.hosts.filter((function(e){return 0!=(e.accept&y.Read)})),e,n)};if(!0!==(void 0!==n.cacheable?n.cacheable:e.cacheable))return r();var o={request:e,mappedRequestOptions:n,transporter:{queryParameters:d.queryParameters,headers:d.headers}};return d.responsesCache.get(o,(function(){return d.requestsCache.get(o,(function(){return d.requestsCache.set(o,r()).then((function(e){return Promise.all([d.requestsCache.delete(o),e])}),(function(e){return Promise.all([d.requestsCache.delete(o),Promise.reject(e)])})).then((function(e){var t=i(e,2);return t[0],t[1]}))}))}),{miss:function(e){return d.responsesCache.set(o,e)}})},write:function(e,t){return C(d,d.hosts.filter((function(e){return 0!=(e.accept&y.Write)})),e,g(t,d.timeouts.write))}};return d}function A(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(e){var n="; ".concat(e.segment).concat(void 0!==e.version?" (".concat(e.version,")"):"");return-1===t.value.indexOf(n)&&(t.value="".concat(t.value).concat(n)),t}};return t}function O(e,t,n){var r=I(n),i="".concat(e.protocol,"://").concat(e.url,"/").concat("/"===t.charAt(0)?t.substr(1):t);return r.length&&(i+="?".concat(r)),i}function I(e){return Object.keys(e).map((function(t){return p("%s=%s",t,(n=e[t],"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?JSON.stringify(e[t]):e[t]));var n})).join("&")}function L(e){return e.map((function(e){return D(e)}))}function D(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return n(n({},e),{},{request:n(n({},e.request),{},{headers:n(n({},e.request.headers),t)})})}var R=function(e){return function(t,n){return e.transporter.write({method:T,path:"2/abtests",data:t},n)}},N=function(e){return function(t,n){return e.transporter.write({method:E,path:p("2/abtests/%s",t)},n)}},z=function(e){return function(t,n){return e.transporter.read({method:S,path:p("2/abtests/%s",t)},n)}},j=function(e){return function(t){return e.transporter.read({method:S,path:"2/abtests"},t)}},B=function(e){return function(t,n){return e.transporter.write({method:T,path:p("2/abtests/%s/stop",t)},n)}},F=function(e){return function(t){return e.transporter.read({method:S,path:"1/strategies/personalization"},t)}},U=function(e){return function(t,n){return e.transporter.write({method:T,path:"1/strategies/personalization",data:t},n)}};function G(e){return function t(n){return e.request(n).then((function(r){if(void 0!==e.batch&&e.batch(r.hits),!e.shouldStop(r))return r.cursor?t({cursor:r.cursor}):t({page:(n.page||0)+1})}))}({})}var H=function(e){return function(t,i){var o=i||{},a=o.queryParameters,s=r(o,["queryParameters"]),l=n({acl:t},void 0!==a?{queryParameters:a}:{});return d(e.transporter.write({method:T,path:"1/keys",data:l},s),(function(t,n){return c((function(r){return K(e)(t.key,n).catch((function(e){if(404!==e.status)throw e;return r()}))}))}))}},V=function(e){return function(t,n,r){var i=g(r);return i.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:T,path:"1/clusters/mapping",data:{cluster:n}},i)}},q=function(e){return function(t,n,r){return e.transporter.write({method:T,path:"1/clusters/mapping/batch",data:{users:t,cluster:n}},r)}},$=function(e){return function(t,n,r){return d(e.transporter.write({method:T,path:p("1/indexes/%s/operation",t),data:{operation:"copy",destination:n}},r),(function(n,r){return ne(e)(t,{methods:{waitTask:tt}}).waitTask(n.taskID,r)}))}},W=function(e){return function(t,r,i){return $(e)(t,r,n(n({},i),{},{scope:[rt.Rules]}))}},Z=function(e){return function(t,r,i){return $(e)(t,r,n(n({},i),{},{scope:[rt.Settings]}))}},X=function(e){return function(t,r,i){return $(e)(t,r,n(n({},i),{},{scope:[rt.Synonyms]}))}},Y=function(e){return function(t,n){return d(e.transporter.write({method:E,path:p("1/keys/%s",t)},n),(function(n,r){return c((function(n){return K(e)(t,r).then(n).catch((function(e){if(404!==e.status)throw e}))}))}))}},K=function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/keys/%s",t)},n)}},J=function(e){return function(t){return e.transporter.read({method:S,path:"1/logs"},t)}},Q=function(e){return function(t){return e.transporter.read({method:S,path:"1/clusters/mapping/top"},t)}},ee=function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/clusters/mapping/%s",t)},n)}},te=function(e){return function(t){var n=t||{},i=n.retrieveMappings,o=r(n,["retrieveMappings"]);return!0===i&&(o.getClusters=!0),e.transporter.read({method:S,path:"1/clusters/mapping/pending"},o)}},ne=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f({transporter:e.transporter,appId:e.appId,indexName:t},n.methods)}},re=function(e){return function(t){return e.transporter.read({method:S,path:"1/keys"},t)}},ie=function(e){return function(t){return e.transporter.read({method:S,path:"1/clusters"},t)}},oe=function(e){return function(t){return e.transporter.read({method:S,path:"1/indexes"},t)}},ae=function(e){return function(t){return e.transporter.read({method:S,path:"1/clusters/mapping"},t)}},se=function(e){return function(t,n,r){return d(e.transporter.write({method:T,path:p("1/indexes/%s/operation",t),data:{operation:"move",destination:n}},r),(function(n,r){return ne(e)(t,{methods:{waitTask:tt}}).waitTask(n.taskID,r)}))}},le=function(e){return function(t,n){return d(e.transporter.write({method:T,path:"1/indexes/*/batch",data:{requests:t}},n),(function(t,n){return Promise.all(Object.keys(t.taskID).map((function(r){return ne(e)(r,{methods:{waitTask:tt}}).waitTask(t.taskID[r],n)})))}))}},ue=function(e){return function(t,n){return e.transporter.read({method:T,path:"1/indexes/*/objects",data:{requests:t}},n)}},ce=function(e){return function(t,r){var i=t.map((function(e){return n(n({},e),{},{params:I(e.params||{})})}));return e.transporter.read({method:T,path:"1/indexes/*/queries",data:{requests:i},cacheable:!0},r)}},de=function(e){return function(t,i){return Promise.all(t.map((function(t){var o=t.params,a=o.facetName,s=o.facetQuery,l=r(o,["facetName","facetQuery"]);return ne(e)(t.indexName,{methods:{searchForFacetValues:Ke}}).searchForFacetValues(a,s,n(n({},i),l))})))}},he=function(e){return function(t,n){var r=g(n);return r.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:E,path:"1/clusters/mapping"},r)}},fe=function(e){return function(t,n){return d(e.transporter.write({method:T,path:p("1/keys/%s/restore",t)},n),(function(n,r){return c((function(n){return K(e)(t,r).catch((function(e){if(404!==e.status)throw e;return n()}))}))}))}},pe=function(e){return function(t,n){return e.transporter.read({method:T,path:"1/clusters/mapping/search",data:{query:t}},n)}},me=function(e){return function(t,n){var i=Object.assign({},n),o=n||{},a=o.queryParameters,s=r(o,["queryParameters"]),l=a?{queryParameters:a}:{},u=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return d(e.transporter.write({method:M,path:p("1/keys/%s",t),data:l},s),(function(n,r){return c((function(n){return K(e)(t,r).then((function(e){return function(e){return Object.keys(i).filter((function(e){return-1!==u.indexOf(e)})).every((function(t){return e[t]===i[t]}))}(e)?Promise.resolve():n()}))}))}))}},ge=function(e){return function(t,n){return d(e.transporter.write({method:T,path:p("1/indexes/%s/batch",e.indexName),data:{requests:t}},n),(function(t,n){return tt(e)(t.taskID,n)}))}},ye=function(e){return function(t){return G(n(n({shouldStop:function(e){return void 0===e.cursor}},t),{},{request:function(n){return e.transporter.read({method:T,path:p("1/indexes/%s/browse",e.indexName),data:n},t)}}))}},ve=function(e){return function(t){var r=n({hitsPerPage:1e3},t);return G(n(n({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return Je(e)("",n(n({},r),t)).then((function(e){return n(n({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},_e=function(e){return function(t){var r=n({hitsPerPage:1e3},t);return G(n(n({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return Qe(e)("",n(n({},r),t)).then((function(e){return n(n({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},be=function(e){return function(t,n,i){var o=i||{},a=o.batchSize,s=r(o,["batchSize"]),l={taskIDs:[],objectIDs:[]};return d(function r(){var i,o=[];for(i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i<t.length&&(o.push(t[i]),o.length!==(a||1e3));i++);return 0===o.length?Promise.resolve(l):ge(e)(o.map((function(e){return{action:n,body:e}})),s).then((function(e){return l.objectIDs=l.objectIDs.concat(e.objectIDs),l.taskIDs.push(e.taskID),i++,r(i)}))}(),(function(t,n){return Promise.all(t.taskIDs.map((function(t){return tt(e)(t,n)})))}))}},xe=function(e){return function(t){return d(e.transporter.write({method:T,path:p("1/indexes/%s/clear",e.indexName)},t),(function(t,n){return tt(e)(t.taskID,n)}))}},we=function(e){return function(t){var n=t||{},i=n.forwardToReplicas,o=g(r(n,["forwardToReplicas"]));return i&&(o.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:T,path:p("1/indexes/%s/rules/clear",e.indexName)},o),(function(t,n){return tt(e)(t.taskID,n)}))}},Ee=function(e){return function(t){var n=t||{},i=n.forwardToReplicas,o=g(r(n,["forwardToReplicas"]));return i&&(o.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:T,path:p("1/indexes/%s/synonyms/clear",e.indexName)},o),(function(t,n){return tt(e)(t.taskID,n)}))}},Se=function(e){return function(t,n){return d(e.transporter.write({method:T,path:p("1/indexes/%s/deleteByQuery",e.indexName),data:t},n),(function(t,n){return tt(e)(t.taskID,n)}))}},Te=function(e){return function(t){return d(e.transporter.write({method:E,path:p("1/indexes/%s",e.indexName)},t),(function(t,n){return tt(e)(t.taskID,n)}))}},Me=function(e){return function(t,n){return d(ke(e)([t],n).then((function(e){return{taskID:e.taskIDs[0]}})),(function(t,n){return tt(e)(t.taskID,n)}))}},ke=function(e){return function(t,n){var r=t.map((function(e){return{objectID:e}}));return be(e)(r,nt.DeleteObject,n)}},Ce=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,a=g(r(i,["forwardToReplicas"]));return o&&(a.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:E,path:p("1/indexes/%s/rules/%s",e.indexName,t)},a),(function(t,n){return tt(e)(t.taskID,n)}))}},Pe=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,a=g(r(i,["forwardToReplicas"]));return o&&(a.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:E,path:p("1/indexes/%s/synonyms/%s",e.indexName,t)},a),(function(t,n){return tt(e)(t.taskID,n)}))}},Ae=function(e){return function(t){return ze(e)(t).then((function(){return!0})).catch((function(e){if(404!==e.status)throw e;return!1}))}},Oe=function(e){return function(t,n,r){return e.transporter.read({method:T,path:p("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:n},cacheable:!0},r)}},Ie=function(e){return function(t,o){var a=o||{},s=a.query,l=a.paginate,u=r(a,["query","paginate"]),c=0;return function r(){return Ye(e)(s||"",n(n({},u),{},{page:c})).then((function(e){for(var n=0,o=Object.entries(e.hits);n<o.length;n++){var a=i(o[n],2),s=a[0],u=a[1];if(t(u))return{object:u,position:parseInt(s,10),page:c}}if(c++,!1===l||c>=e.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return r()}))}()}},Le=function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/indexes/%s/%s",e.indexName,t)},n)}},De=function(){return function(e,t){for(var n=0,r=Object.entries(e.hits);n<r.length;n++){var o=i(r[n],2),a=o[0];if(o[1].objectID===t)return parseInt(a,10)}return-1}},Re=function(e){return function(t,i){var o=i||{},a=o.attributesToRetrieve,s=r(o,["attributesToRetrieve"]),l=t.map((function(t){return n({indexName:e.indexName,objectID:t},a?{attributesToRetrieve:a}:{})}));return e.transporter.read({method:T,path:"1/indexes/*/objects",data:{requests:l}},s)}},Ne=function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/indexes/%s/rules/%s",e.indexName,t)},n)}},ze=function(e){return function(t){return e.transporter.read({method:S,path:p("1/indexes/%s/settings",e.indexName),data:{getVersion:2}},t)}},je=function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/indexes/%s/synonyms/%s",e.indexName,t)},n)}},Be=function(e){return function(t,n){return d(Fe(e)([t],n).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,n){return tt(e)(t.taskID,n)}))}},Fe=function(e){return function(t,n){var i=n||{},o=i.createIfNotExists,a=r(i,["createIfNotExists"]),s=o?nt.PartialUpdateObject:nt.PartialUpdateObjectNoCreate;return be(e)(t,s,a)}},Ue=function(e){return function(t,a){var s=a||{},l=s.safe,u=s.autoGenerateObjectIDIfNotExist,c=s.batchSize,h=r(s,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),f=function(t,n,r,i){return d(e.transporter.write({method:T,path:p("1/indexes/%s/operation",t),data:{operation:r,destination:n}},i),(function(t,n){return tt(e)(t.taskID,n)}))},m=Math.random().toString(36).substring(7),g="".concat(e.indexName,"_tmp_").concat(m),y=qe({appId:e.appId,transporter:e.transporter,indexName:g}),v=[],_=f(e.indexName,g,"copy",n(n({},h),{},{scope:["settings","synonyms","rules"]}));return v.push(_),d((l?_.wait(h):_).then((function(){var e=y(t,n(n({},h),{},{autoGenerateObjectIDIfNotExist:u,batchSize:c}));return v.push(e),l?e.wait(h):e})).then((function(){var t=f(g,e.indexName,"move",h);return v.push(t),l?t.wait(h):t})).then((function(){return Promise.all(v)})).then((function(e){var t=i(e,3),n=t[0],r=t[1],a=t[2];return{objectIDs:r.objectIDs,taskIDs:[n.taskID].concat(o(r.taskIDs),[a.taskID])}})),(function(e,t){return Promise.all(v.map((function(e){return e.wait(t)})))}))}},Ge=function(e){return function(t,r){return We(e)(t,n(n({},r),{},{clearExistingRules:!0}))}},He=function(e){return function(t,r){return Xe(e)(t,n(n({},r),{},{clearExistingSynonyms:!0}))}},Ve=function(e){return function(t,n){return d(qe(e)([t],n).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,n){return tt(e)(t.taskID,n)}))}},qe=function(e){return function(t,n){var i=n||{},o=i.autoGenerateObjectIDIfNotExist,a=r(i,["autoGenerateObjectIDIfNotExist"]),s=o?nt.AddObject:nt.UpdateObject;if(s===nt.UpdateObject){var l=!0,u=!1,c=void 0;try{for(var h,f=t[Symbol.iterator]();!(l=(h=f.next()).done);l=!0)if(void 0===h.value.objectID)return d(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}}return be(e)(t,s,a)}},$e=function(e){return function(t,n){return We(e)([t],n)}},We=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,a=i.clearExistingRules,s=g(r(i,["forwardToReplicas","clearExistingRules"]));return o&&(s.queryParameters.forwardToReplicas=1),a&&(s.queryParameters.clearExistingRules=1),d(e.transporter.write({method:T,path:p("1/indexes/%s/rules/batch",e.indexName),data:t},s),(function(t,n){return tt(e)(t.taskID,n)}))}},Ze=function(e){return function(t,n){return Xe(e)([t],n)}},Xe=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,a=i.clearExistingSynonyms,s=i.replaceExistingSynonyms,l=g(r(i,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return o&&(l.queryParameters.forwardToReplicas=1),(s||a)&&(l.queryParameters.replaceExistingSynonyms=1),d(e.transporter.write({method:T,path:p("1/indexes/%s/synonyms/batch",e.indexName),data:t},l),(function(t,n){return tt(e)(t.taskID,n)}))}},Ye=function(e){return function(t,n){return e.transporter.read({method:T,path:p("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},n)}},Ke=function(e){return function(t,n,r){return e.transporter.read({method:T,path:p("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:n},cacheable:!0},r)}},Je=function(e){return function(t,n){return e.transporter.read({method:T,path:p("1/indexes/%s/rules/search",e.indexName),data:{query:t}},n)}},Qe=function(e){return function(t,n){return e.transporter.read({method:T,path:p("1/indexes/%s/synonyms/search",e.indexName),data:{query:t}},n)}},et=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,a=g(r(i,["forwardToReplicas"]));return o&&(a.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:M,path:p("1/indexes/%s/settings",e.indexName),data:t},a),(function(t,n){return tt(e)(t.taskID,n)}))}},tt=function(e){return function(t,n){return c((function(r){return function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/indexes/%s/task/%s",e.indexName,t.toString())},n)}}(e)(t,n).then((function(e){return"published"!==e.status?r():void 0}))}))}},nt={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},rt={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},it=1,ot=2,at=3;function st(e,t,r){var i,o={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var n=new XMLHttpRequest;n.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return n.setRequestHeader(t,e.headers[t])}));var r,i=function(e,r){return setTimeout((function(){n.abort(),t({status:0,content:r,isTimedOut:!0})}),1e3*e)},o=i(e.connectTimeout,"Connection timeout");n.onreadystatechange=function(){n.readyState>n.OPENED&&void 0===r&&(clearTimeout(o),r=i(e.responseTimeout,"Socket timeout"))},n.onerror=function(){0===n.status&&(clearTimeout(o),clearTimeout(r),t({content:n.responseText||"Network request failed",status:n.status,isTimedOut:!1}))},n.onload=function(){clearTimeout(o),clearTimeout(r),t({content:n.responseText,status:n.status,isTimedOut:!1})},n.send(e.data)}))}},logger:(i=at,{debug:function(e,t){return it>=i&&console.debug(e,t),Promise.resolve()},info:function(e,t){return ot>=i&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:l(),requestsCache:l({serializable:!1}),hostsCache:s({caches:[a({key:"".concat("4.8.6","-").concat(e)}),l()]}),userAgent:A("4.8.6").add({segment:"Browser"})};return function(e){var t=e.appId,r=u(void 0!==e.authMode?e.authMode:m.WithinHeaders,t,e.apiKey),i=P(n(n({hosts:[{url:"".concat(t,"-dsn.algolia.net"),accept:y.Read},{url:"".concat(t,".algolia.net"),accept:y.Write}].concat(h([{url:"".concat(t,"-1.algolianet.com")},{url:"".concat(t,"-2.algolianet.com")},{url:"".concat(t,"-3.algolianet.com")}]))},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return f({transporter:i,appId:t,addAlgoliaAgent:function(e,t){i.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([i.requestsCache.clear(),i.responsesCache.clear()]).then((function(){}))}},e.methods)}(n(n(n({},o),r),{},{methods:{search:ce,searchForFacetValues:de,multipleBatch:le,multipleGetObjects:ue,multipleQueries:ce,copyIndex:$,copySettings:Z,copySynonyms:X,copyRules:W,moveIndex:se,listIndices:oe,getLogs:J,listClusters:ie,multipleSearchForFacetValues:de,getApiKey:K,addApiKey:H,listApiKeys:re,updateApiKey:me,deleteApiKey:Y,restoreApiKey:fe,assignUserID:V,assignUserIDs:q,getUserID:ee,searchUserIDs:pe,listUserIDs:ae,getTopUserIDs:Q,removeUserID:he,hasPendingMappings:te,initIndex:function(e){return function(t){return ne(e)(t,{methods:{batch:ge,delete:Te,findAnswers:Oe,getObject:Le,getObjects:Re,saveObject:Ve,saveObjects:qe,search:Ye,searchForFacetValues:Ke,waitTask:tt,setSettings:et,getSettings:ze,partialUpdateObject:Be,partialUpdateObjects:Fe,deleteObject:Me,deleteObjects:ke,deleteBy:Se,clearObjects:xe,browseObjects:ye,getObjectPosition:De,findObject:Ie,exists:Ae,saveSynonym:Ze,saveSynonyms:Xe,getSynonym:je,searchSynonyms:Qe,browseSynonyms:_e,deleteSynonym:Pe,clearSynonyms:Ee,replaceAllObjects:Ue,replaceAllSynonyms:He,searchRules:Je,getRule:Ne,deleteRule:Ce,saveRule:$e,saveRules:We,replaceAllRules:Ge,browseRules:ve,clearRules:we}})}},initAnalytics:function(){return function(e){return function(e){var t=e.region||"us",r=u(m.WithinHeaders,e.appId,e.apiKey),i=P(n(n({hosts:[{url:"analytics.".concat(t,".algolia.com")}]},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return f({appId:e.appId,transporter:i},e.methods)}(n(n(n({},o),e),{},{methods:{addABTest:R,getABTest:z,getABTests:j,stopABTest:B,deleteABTest:N}}))}},initRecommendation:function(){return function(e){return function(e){var t=e.region||"us",r=u(m.WithinHeaders,e.appId,e.apiKey),i=P(n(n({hosts:[{url:"recommendation.".concat(t,".algolia.com")}]},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return f({appId:e.appId,transporter:i},e.methods)}(n(n(n({},o),e),{},{methods:{getPersonalizationStrategy:F,setPersonalizationStrategy:U}}))}}}}))}return st.version="4.8.6",st}()},21030:function(e,t,n){"use strict";var r=n(55077),i=n(50533),o=n(17738),a=n.n(o),s=n(13967),l=n.n(s),u=n(66881),c=n(85893);t.Z=function(e){var t=e.children,o=e.store,s=void 0===o?(0,u.Z)():o,d=a()(),h=n.g.__TRANSLATION_JSON__;return(0,c.jsx)(i.Provider,{store:s,children:(0,c.jsx)(r.IntlProvider,{defaultLocale:l().English,locale:d,messages:h,children:t})})}},66736:function(e,t,n){"use strict";var r=(0,n(29829).oM)({name:"experiments",initialState:null,reducers:{setExperiments:function(e,t){return t.payload}}});r.actions.setExperiments;t.Z=r.reducer},24139:function(e,t,n){"use strict";var r=(0,n(29829).oM)({name:"formAuthenticityToken",initialState:null,reducers:{setFormAuthenticityToken:function(e,t){return t.payload}}});r.actions.setFormAuthenticityToken;t.Z=r.reducer},66881:function(e,t,n){"use strict";var r,i=n(29829),o=n(66736),a=n(55884),s=n(24139),l={experiments:o.Z,formAuthenticityToken:s.Z,user:a.Z},u=(0,i.xC)({preloadedState:null===(r=n.g.__AT_DATA__)||void 0===r?void 0:r.store,reducer:l});t.Z=function(){var e;return"undefined"!==typeof window?u:(0,i.xC)({preloadedState:null===(e=n.g.__AT_DATA__)||void 0===e?void 0:e.store,reducer:l})}},55884:function(e,t,n){"use strict";var r=(0,n(29829).oM)({name:"user",initialState:null,reducers:{setUser:function(e,t){return t.payload}}});r.actions.setUser;t.Z=r.reducer},21403:function(e,t,n){"use strict";n.d(t,{Q:function(){return o},d:function(){return a}});var r=n(64061),i=n.n(r);function o(){var e,t;if(null===(e=window)||void 0===e?void 0:e.Bugsnag)return window.Bugsnag;var r=n.g.__AT_DATA__;if(!r)return console.warn("useBugsnag: not starting Bugsnag as the global store is not defined"),null;var o=null,a={is_pro_user:"false",is_logged_in_user:"false",is_admin_user:"false"};if(null===r||void 0===r||null===(t=r.store)||void 0===t?void 0:t.user){var s=r.store.user;o={id:s.id.toString()},a.is_pro_user=s.pro.toString(),a.is_logged_in_user="true",a.is_admin_user=s.admin.toString()}return i().start({apiKey:r.BUGSNAG_KEY,appVersion:r.BUILD_DATE,releaseStage:r.RAILS_ENV,user:o,metadata:a}),window.Bugsnag=i(),i()}function a(){var e;return null===(e=window)||void 0===e?void 0:e.Bugsnag}},99434:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(21403);function i(e,t){var n=(0,r.d)();n&&n.notify(e,t),console.error(e)}},36511:function(e,t,n){"use strict";var r=n(27418),i={};function o(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}var a="mixins";e.exports=function(e,t,n){var s=[],l={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},u={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},c={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)h(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=r({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=r({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=p(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=r({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(!t)return;for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){if(o(!(n in c),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n),n in e)return o("DEFINE_MANY_MERGED"===(u.hasOwnProperty(n)?u[n]:null),"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(e[n]=p(e[n],r));e[n]=r}}}(e,t)},autobind:function(){}};function d(e,t){var n=l.hasOwnProperty(t)?l[t]:null;_.hasOwnProperty(t)&&o("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&o("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function h(e,n){if(n){o("function"!==typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),o(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,i=r.__reactAutoBindPairs;for(var s in n.hasOwnProperty(a)&&c.mixins(e,n.mixins),n)if(n.hasOwnProperty(s)&&s!==a){var u=n[s],h=r.hasOwnProperty(s);if(d(h,s),c.hasOwnProperty(s))c[s](e,u);else{var f=l.hasOwnProperty(s);if("function"===typeof u&&!f&&!h&&!1!==n.autobind)i.push(s,u),r[s]=u;else if(h){var g=l[s];o(f&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,s),"DEFINE_MANY_MERGED"===g?r[s]=p(r[s],u):"DEFINE_MANY"===g&&(r[s]=m(r[s],u))}else r[s]=u}}}else;}function f(e,t){for(var n in o(e&&t&&"object"===typeof e&&"object"===typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(n)&&(o(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function p(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return f(i,n),f(i,r),i}}function m(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function g(e,t){return t.bind(e)}var y={componentDidMount:function(){this.__isMounted=!0}},v={componentWillUnmount:function(){this.__isMounted=!1}},_={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},b=function(){};return r(b.prototype,e.prototype,_),function(e){var t=function(e,r,a){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e[r]=g(e,i)}}(this),this.props=e,this.context=r,this.refs=i,this.updater=a||n,this.state=null;var s=this.getInitialState?this.getInitialState():null;o("object"===typeof s&&!Array.isArray(s),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=s};for(var r in t.prototype=new b,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],s.forEach(h.bind(null,t)),h(t,y),h(t,e),h(t,v),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),o(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),l)t.prototype[r]||(t.prototype[r]=null);return t}}},72555:function(e,t,n){"use strict";var r=n(67294),i=n(36511);if("undefined"===typeof r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var o=(new r.Component).updater;e.exports=i(r.Component,r.isValidElement,o)},8679:function(e,t,n){"use strict";var r=n(59864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var a=c(n);d&&(a=a.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!s||!s[y])){var v=h(n,y);try{u(t,y,v)}catch(_){}}}}return t}},6158:function(e){e.exports=function(){"use strict";var e,t,n;function r(r,i){if(e)if(t){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",a={};e(a),n=i(a),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=i;else e=i}return r(["exports"],(function(e){var t="undefined"!=typeof self?self:{},n="2.15.0";let r;const i={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==r){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{r=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):e}catch(t){r=e}}return r},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!i.API_URL)return null;try{const e=new URL(i.API_URL);return"api.mapbox.cn"===e.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===e.hostname?"https://events.mapbox.com/events/v2":null}catch(e){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},o={supported:!1,testSupport:function(e){!l&&s&&(u?c(e):a=e)}};let a,s,l=!1,u=!1;function c(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s),e.isContextLost())return;o.supported=!0}catch(e){}e.deleteTexture(t),l=!0}t.document&&(s=t.document.createElement("img"),s.onload=function(){a&&c(a),a=null,u=!0},s.onerror=function(){l=!0,a=null},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const d="01";function h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var f=p;function p(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}p.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var a=0,s=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var m=h(f),g=y;function y(e,t){this.x=e,this.y=t}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},y.convert=function(e){return e instanceof y?e:Array.isArray(e)?new y(e[0],e[1]):e};var v=h(g);const _=Math.PI/180,b=180/Math.PI;function x(e){return e*_}function w(e){return e*b}const E=[[0,0],[1,0],[1,1],[0,1]];function S(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function T(e,t,n,r){const i=new m(e,t,n,r);return function(e){return i.solve(e)}}const M=T(.25,.1,.25,1);function k(e,t,n){return Math.min(n,Math.max(t,e))}function C(e,t,n){return(n=k((n-e)/(t-e),0,1))*n*(3-2*n)}function P(e,t,n){const r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function A(e,t,n){if(!e.length)return n(null,[]);let r=e.length;const i=new Array(e.length);let o=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(o=e),i[a]=t,0==--r&&n(o,i)}))}))}function O(e){const t=[];for(const n in e)t.push(e[n]);return t}function I(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}let L=1;function D(){return L++}function R(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function N(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function z(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function j(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function B(e,t){return-1!==e.indexOf(t,e.length-t.length)}function F(e,t,n){const r={};for(const i in e)r[i]=t.call(n||this,e[i],i,e);return r}function U(e,t,n){const r={};for(const i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function G(e){return Array.isArray(e)?e.map(G):"object"==typeof e&&e?F(e,G):e}const H={};function V(e){H[e]||("undefined"!=typeof console&&console.warn(e),H[e]=!0)}function q(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function $(e){let t=0;for(let n,r,i=0,o=e.length,a=o-1;i<o;a=i++)n=e[i],r=e[a],t+=(r.x-n.x)*(n.y+r.y);return t}function W(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Z(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,n,r,i)=>{const o=r||i;return t[n]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let X=null;function Y(e){if(null==X){const t=e.navigator?e.navigator.userAgent:null;X=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return X}function K(e){try{const n=t[e];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function J(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}const Q="mapbox-tiles";let ee,te,ne=500,re=50;function ie(){try{return t.caches}catch(e){}}function oe(){ie()&&!ee&&(ee=t.caches.open(Q))}function ae(e){const t=e.indexOf("?");if(t<0)return e;const n=function(e){const t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),r=n.filter((e=>{const t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return r.length?`${e.slice(0,t)}?${r.join("&")}`:e.slice(0,t)}let se=1/0;const le={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(le);class ue extends Error{constructor(e,t,n){401===t&&be(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ce=W()?()=>self.worker&&self.worker.referrer:()=>("blob:"===t.location.protocol?t.parent:t).location.href,de=function(e,n){if(!(/^file:/.test(r=e.url)||/^file:/.test(ce())&&!/^\w+:/.test(r))){if(t.fetch&&t.Request&&t.AbortController&&t.Request.prototype.hasOwnProperty("signal"))return function(e,n){const r=new t.AbortController,i=new t.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:ce(),referrerPolicy:e.referrerPolicy,signal:r.signal});let o=!1,a=!1;const s=(l=i.url).indexOf("sku=")>0&&be(l);var l;"json"===e.type&&i.headers.set("Accept","application/json");const u=(r,o,l)=>{if(a)return;if(r&&"SecurityError"!==r.message&&V(r.toString()),o&&l)return c(o);const u=Date.now();t.fetch(i).then((t=>{if(t.ok){const e=s?t.clone():null;return c(t,e,u)}return n(new ue(t.statusText,t.status,e.url))})).catch((t=>{"AbortError"!==t.name&&n(new Error(`${t.message} ${e.url}`))}))},c=(r,s,l)=>{("arrayBuffer"===e.type?r.arrayBuffer():"json"===e.type?r.json():r.text()).then((e=>{a||(s&&l&&function(e,n,r){if(oe(),!ee)return;const i={status:n.status,statusText:n.statusText,headers:new t.Headers};n.headers.forEach(((e,t)=>i.headers.set(t,e)));const o=Z(n.headers.get("Cache-Control")||"");if(o["no-store"])return;o["max-age"]&&i.headers.set("Expires",new Date(r+1e3*o["max-age"]).toUTCString());const a=i.headers.get("Expires");a&&(new Date(a).getTime()-r<42e4||function(e,t){if(void 0===te)try{new Response(new ReadableStream),te=!0}catch(e){te=!1}te?t(e.body):e.blob().then(t)}(n,(n=>{const r=new t.Response(n,i);oe(),ee&&ee.then((t=>t.put(ae(e.url),r))).catch((e=>V(e.message)))})))}(i,s,l),o=!0,n(null,e,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((e=>{a||n(new Error(e.message))}))};return s?function(e,t){if(oe(),!ee)return t(null);const n=ae(e.url);ee.then((e=>{e.match(n).then((r=>{const i=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),n=Z(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(i,u):u(null,null),{cancel:()=>{a=!0,o||r.abort()}}}(e,n);if(W()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,n,void 0,!0)}var r;return function(e,n){const r=new t.XMLHttpRequest;r.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(r.responseType="arraybuffer");for(const t in e.headers)r.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===e.credentials,r.onerror=()=>{n(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){let t=r.response;if("json"===e.type)try{t=JSON.parse(r.response)}catch(e){return n(e)}n(null,t,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else n(new ue(r.statusText,r.status,e.url))},r.send(e.body),{cancel:()=>r.abort()}}(e,n)},he=function(e,t){return de(I(e,{type:"arrayBuffer"}),t)};function fe(e){const n=t.document.createElement("a");return n.href=e,n.protocol===t.document.location.protocol&&n.host===t.document.location.host}const pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let me,ge;me=[],ge=0;const ye=function(e,n){if(o.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ge>=i.MAX_PARALLEL_IMAGE_REQUESTS){const t={requestParameters:e,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return me.push(t),t}ge++;let r=!1;const a=()=>{if(!r)for(r=!0,ge--;me.length&&ge<i.MAX_PARALLEL_IMAGE_REQUESTS;){const e=me.shift(),{requestParameters:t,callback:n,cancelled:r}=e;r||(e.cancel=ye(t,n).cancel)}},s=he(e,((e,r,i,o)=>{a(),e?n(e):r&&(t.createImageBitmap?function(e,n){const r=new t.Blob([new Uint8Array(e)],{type:"image/png"});t.createImageBitmap(r).then((e=>{n(null,e)})).catch((e=>{n(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(r,((e,t)=>n(e,t,i,o))):function(e,n){const r=new t.Image,i=t.URL;r.onload=()=>{n(null,r),i.revokeObjectURL(r.src),r.onload=null,t.requestAnimationFrame((()=>{r.src=pe}))},r.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const o=new t.Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?i.createObjectURL(o):pe}(r,((e,t)=>n(e,t,i,o))))}));return{cancel:()=>{s.cancel(),a()}}},ve="NO_ACCESS_TOKEN";function _e(e){return 0===e.indexOf("mapbox:")}function be(e){return i.API_URL_REGEX.test(e)}function xe(e){return i.API_CDN_URL_REGEX.test(e)}function we(e){return i.API_STYLE_REGEX.test(e)&&!Ee(e)}function Ee(e){return i.API_SPRITE_REGEX.test(e)}const Se=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Te(e){const t=e.match(Se);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Me(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}const ke="mapbox.eventData";function Ce(e){if(!e)return null;const n=e.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(t.atob(n[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class Pe{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const n=Ce(i.ACCESS_TOKEN);let r="";return r=n&&n.u?t.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):i.ACCESS_TOKEN||"",e?`${ke}.${e}:${r}`:`${ke}:${r}`}fetchEventData(){const e=K("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{const e=t.localStorage.getItem(n);e&&(this.eventData=JSON.parse(e));const i=t.localStorage.getItem(r);i&&(this.anonId=i)}catch(e){V("Unable to read from LocalStorage")}}saveEventData(){const e=K("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{t.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&t.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(e){V("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,n,r){if(!i.EVENTS_URL)return;const o=Te(i.EVENTS_URL);o.params.push(`access_token=${r||i.ACCESS_TOKEN||""}`);const a={event:this.type,created:new Date(e).toISOString()},s=t?I(a,t):a,l={url:Me(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return de(I(e,{method:"POST"}),t)}(l,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const Ae=new class extends Pe{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){i.EVENTS_URL&&i.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>_e(e)||be(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Ce(i.ACCESS_TOKEN),r=t?t.u:i.ACCESS_TOKEN;let o=r!==this.eventData.tokenU;z(this.anonId)||(this.anonId=R(),o=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(a),n=(a-this.eventData.lastSuccess)/864e5;o=o||n>=1||n<-1||e.getDate()!==t.getDate()}else o=!0;o?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:d,"enabled.telemetry":!1,userId:this.anonId},(e=>{e||(this.eventData.lastSuccess=a,this.eventData.tokenU=r)}),e):this.processRequests()}},Oe=Ae.postTurnstileEvent.bind(Ae),Ie=new class extends Pe{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,n,r){this.skuToken=t,this.errorCb=r,i.EVENTS_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ve)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:r}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),z(this.anonId)||(this.anonId=R()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:d,skuToken:this.skuToken,userId:this.anonId},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},Le=Ie.postMapLoadEvent.bind(Ie),De=new class extends Pe{constructor(){super("gljs.performance")}postPerformanceEvent(e,t){i.EVENTS_URL&&(e||i.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:r,performanceData:i}=this.queue.shift(),o=function(e){const r=t.performance.getEntriesByType("resource"),i=t.performance.getEntriesByType("mark"),o=function(e){const t={};if(e)for(const n in e)if("other"!==n)for(const r of e[n]){const e=`${n}ResolveRangeMin`,i=`${n}ResolveRangeMax`,o=`${n}RequestCount`,a=`${n}RequestCachedCount`;t[e]=Math.min(t[e]||1/0,r.startTime),t[i]=Math.max(t[i]||-1/0,r.responseEnd);const s=e=>{void 0===t[e]&&(t[e]=0),++t[e]};void 0!==r.transferSize&&0===r.transferSize&&s(a),s(o)}return t}(function(e,t){const n={};if(e)for(const r of e){const e=t(r);void 0===n[e]&&(n[e]=[]),n[e].push(r)}return n}(r,Ue)),a=t.devicePixelRatio,s=t.navigator.connection||t.navigator.mozConnection||t.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},u=(e,t,n)=>{null!=n&&e.push({name:t,value:n.toString()})};for(const t in o)u(l.counters,t,o[t]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(u(l.counters,"interactionRangeMin",e.interactionRange[0]),u(l.counters,"interactionRangeMax",e.interactionRange[1])),i)for(const t of Object.keys(Be)){const e=Be[t],n=i.find((t=>t.name===e));n&&u(l.counters,e,n.startTime)}return u(l.counters,"visibilityHidden",e.visibilityHidden),u(l.attributes,"style",function(e){if(e)for(const t of e){const e=t.name.split("?")[0];if(we(e)){const t=e.split("/").slice(-2);if(2===t.length)return`mapbox://styles/${t[0]}/${t[1]}`}}}(r)),u(l.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),u(l.attributes,"fogEnabled",e.fogEnabled?"true":"false"),u(l.attributes,"projection",e.projection),u(l.attributes,"zoom",e.zoom),u(l.metadata,"devicePixelRatio",a),u(l.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),u(l.metadata,"navigatorUserAgent",t.navigator.userAgent),u(l.metadata,"screenWidth",t.screen.width),u(l.metadata,"screenHeight",t.screen.height),u(l.metadata,"windowWidth",t.innerWidth),u(l.metadata,"windowHeight",t.innerHeight),u(l.metadata,"mapWidth",e.width/a),u(l.metadata,"mapHeight",e.height/a),u(l.metadata,"webglRenderer",e.renderer),u(l.metadata,"webglVendor",e.vendor),u(l.metadata,"sdkVersion",n),u(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(i);for(const t of o.metadata);for(const t of o.counters);for(const t of o.attributes);this.postEvent(r,o,(()=>{}),e)}},Re=De.postPerformanceEvent.bind(De),Ne=new class extends Pe{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,n,r){if(!i.API_URL||!i.SESSION_PATH)return;const o=Te(i.API_URL+i.SESSION_PATH);o.params.push(`sku=${t||""}`),o.params.push(`access_token=${r||i.ACCESS_TOKEN||""}`);const a={url:Me(o),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return de(I(e,{method:"GET"}),t)}(a,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}getSessionAPI(e,t,n,r){this.skuToken=t,this.errorCb=r,i.SESSION_PATH&&i.API_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ve)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||this.getSession(n,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},ze=Ne.getSessionAPI.bind(Ne),je=new Set,Be={create:"create",load:"load",fullLoad:"fullLoad"},Fe={mark(e){t.performance.mark(e)},measure(e,n,r){t.performance.measure(e,n,r)}};function Ue(e){const t=e.name.split("?")[0];return xe(t)&&t.includes("mapbox-gl.js")?"javascript":xe(t)&&t.includes("mapbox-gl.css")?"css":function(e){return i.API_FONTS_REGEX.test(e)}(t)?"fontRange":Ee(t)?"sprite":we(t)?"style":function(e){return i.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}const Ge=t.performance;function He(e){const t=e?e.url.toString():void 0;return Ge.getEntriesByName(t)}let Ve,qe,$e,We;const Ze={now:()=>void 0!==$e?$e:t.performance.now(),setNow(e){$e=e},restoreNow(){$e=void 0},frame(e){const n=t.requestAnimationFrame(e);return{cancel:()=>t.cancelAnimationFrame(n)}},getImageData(e,n=0){const{width:r,height:i}=e;We||(We=t.document.createElement("canvas"));const o=We.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return(r>We.width||i>We.height)&&(We.width=r,We.height=i),o.clearRect(-n,-n,r+2*n,i+2*n),o.drawImage(e,0,0,r,i),o.getImageData(-n,-n,r+2*n,i+2*n)},resolveURL:e=>(Ve||(Ve=t.document.createElement("a")),Ve.href=e,Ve.href),get devicePixelRatio(){return t.devicePixelRatio},get prefersReducedMotion(){return!!t.matchMedia&&(null==qe&&(qe=t.matchMedia("(prefers-reduced-motion: reduce)")),qe.matches)}};function Xe(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function Ye(e,t,n){if(n&&n[e]){const r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}class Ke{constructor(e,t={}){I(this,t),this.type=e}}class Je extends Ke{constructor(e,t={}){super("error",I({error:e},t))}}class Qe{on(e,t){return this._listeners=this._listeners||{},Xe(e,t,this._listeners),this}off(e,t){return Ye(e,t,this._listeners),Ye(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},Xe(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new Ke(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of r)Ye(n,o,this._oneTimeListeners),o.call(this,e);const i=this._eventedParent;i&&(I(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof Je&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var et=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function tt(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}function nt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function rt(e){if(Array.isArray(e))return e.map(rt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=rt(e[n]);return t}return nt(e)}class it extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var ot=it;class at{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[n,r]of t)this.bindings[n]=r}concat(e){return new at(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var st=at;const lt={kind:"null"},ut={kind:"number"},ct={kind:"string"},dt={kind:"boolean"},ht={kind:"color"},ft={kind:"object"},pt={kind:"value"},mt={kind:"collator"},gt={kind:"formatted"},yt={kind:"resolvedImage"};function vt(e,t){return{kind:"array",itemType:e,N:t}}function _t(e){if("array"===e.kind){const t=_t(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const bt=[lt,ut,ct,dt,ht,gt,ft,vt(pt),yt];function xt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!xt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of bt)if(!xt(e,t))return null}return`Expected ${_t(e)} but found ${_t(t)} instead.`}function wt(e,t){return t.some((t=>t.kind===e.kind))}function Et(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}var St,Tt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Mt(e){return(e=Math.round(e))<0?0:e>255?255:e}function kt(e){return Mt("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Ct(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function Pt(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{St={}.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in Tt)return Tt[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=Ct(a.pop());case"rgb":return 3!==a.length?null:[kt(a[0]),kt(a[1]),kt(a[2]),s];case"hsla":if(4!==a.length)return null;s=Ct(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=Ct(a[1]),c=Ct(a[2]),d=c<=.5?c*(u+1):c+u-c*u,h=2*c-d;return[Mt(255*Pt(h,d,l+1/3)),Mt(255*Pt(h,d,l)),Mt(255*Pt(h,d,l-1/3)),s];default:return null}}return null}}catch(e){}class At{constructor(e,t,n,r=1){this.r=e,this.g=t,this.b=n,this.a=r}static parse(e){if(!e)return;if(e instanceof At)return e;if("string"!=typeof e)return;const t=St(e);return t?new At(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,n,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(n)},${r})`}toArray(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}toArray01(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[e/r,t/r,n/r,r]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:n,a:r}=this;return[e,t,n,r]}}At.black=new At(0,0,0,1),At.white=new At(1,1,1,1),At.transparent=new At(0,0,0,0),At.red=new At(1,0,0,1),At.blue=new At(0,0,1,1);var Ot=At;class It{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Lt{constructor(e,t,n,r,i){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i}}class Dt{constructor(e){this.sections=e}static fromString(e){return new Dt([new Lt(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Dt?e:Dt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const n={};t.fontStack&&(n["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(n["font-scale"]=t.scale),t.textColor&&(n["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(n)}return e}}class Rt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Rt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Nt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function zt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Ot)return!0;if(e instanceof It)return!0;if(e instanceof Dt)return!0;if(e instanceof Rt)return!0;if(Array.isArray(e)){for(const t of e)if(!zt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!zt(e[t]))return!1;return!0}return!1}function jt(e){if(null===e)return lt;if("string"==typeof e)return ct;if("boolean"==typeof e)return dt;if("number"==typeof e)return ut;if(e instanceof Ot)return ht;if(e instanceof It)return mt;if(e instanceof Dt)return gt;if(e instanceof Rt)return yt;if(Array.isArray(e)){const t=e.length;let n;for(const r of e){const e=jt(r);if(n){if(n===e)continue;n=pt;break}n=e}return vt(n||pt,t)}return ft}function Bt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Ot||e instanceof Dt||e instanceof Rt?e.toString():JSON.stringify(e)}class Ft{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!zt(e[1]))return t.error("invalid value");const n=e[1];let r=jt(n);const i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Ft(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ot?["rgba"].concat(this.value.toArray()):this.value instanceof Dt?this.value.serialize():this.value}}var Ut=Ft,Gt=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const Ht={string:ct,number:ut,boolean:dt,object:ft};class Vt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,r=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in Ht)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=Ht[n],r++}else i=pt;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=vt(i,o)}else n=Ht[i];const o=[];for(;r<e.length;r++){const n=t.parse(e[r],r,pt);if(!n)return null;o.push(n)}return new Vt(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!xt(this.type,jt(n)))return n;if(t===this.args.length-1)throw new Gt(`Expected value to be of type ${_t(this.type)}, but found ${_t(jt(n))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);const r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((e=>e.serialize())))}}var qt=Vt;class $t{constructor(e){this.type=gt,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const r=[];let i=!1;for(let o=1;o<=e.length-1;++o){const n=e[o];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let e=null;if(n["font-scale"]&&(e=t.parse(n["font-scale"],1,ut),!e))return null;let o=null;if(n["text-font"]&&(o=t.parse(n["text-font"],1,vt(ct)),!o))return null;let a=null;if(n["text-color"]&&(a=t.parse(n["text-color"],1,ht),!a))return null;const s=r[r.length-1];s.scale=e,s.font=o,s.textColor=a}else{const n=t.parse(e[o],1,pt);if(!n)return null;const a=n.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null})}}return new $t(r)}evaluate(e){return new Dt(this.sections.map((t=>{const n=t.content.evaluate(e);return jt(n)===yt?new Lt("",n,null,null,null):new Lt(Bt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const n={};t.scale&&(n["font-scale"]=t.scale.serialize()),t.font&&(n["text-font"]=t.font.serialize()),t.textColor&&(n["text-color"]=t.textColor.serialize()),e.push(n)}return e}}class Wt{constructor(e){this.type=yt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ct);return n?new Wt(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Rt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Zt={"to-boolean":dt,"to-color":ht,"to-number":ut,"to-string":ct};class Xt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const r=Zt[n],i=[];for(let o=1;o<e.length;o++){const n=t.parse(e[o],o,pt);if(!n)return null;i.push(n)}return new Xt(r,i)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof Ot)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Nt(t[0],t[1],t[2],t[3]),!n))return new Ot(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Gt(n||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Gt(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?Dt.fromString(Bt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Rt.fromString(Bt(this.args[0].evaluate(e))):Bt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new $t([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Wt(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild((t=>{e.push(t.serialize())})),e}}var Yt=Xt;const Kt=["Unknown","Point","LineString","Polygon"];var Jt=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Kt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*t-e[0])+this.featureDistanceData.bearing[1]*(r*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ot.parse(e)),t}};class Qt{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const n=e[0],r=Qt.definitions[n];if(!r)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[l,u]of a){s=new kn(t.registry,t.path,null,t.scope);const r=[];let o=!1;for(let t=1;t<e.length;t++){const n=e[t],i=Array.isArray(l)?l[t-1]:l.type,a=s.parse(n,1+r.length,i);if(!a){o=!0;break}r.push(a)}if(!o)if(Array.isArray(l)&&l.length!==r.length)s.error(`Expected ${l.length} arguments, but found ${r.length} instead.`);else{for(let e=0;e<r.length;e++){const t=Array.isArray(l)?l[e]:l.type,n=r[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new Qt(n,i,u,r)}}if(1===a.length)t.errors.push(...s.errors);else{const n=(a.length?a:o).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(_t).join(", ")})`:`(${_t(t.type)}...)`;var t})).join(" | "),r=[];for(let i=1;i<e.length;i++){const n=t.parse(e[i],1+r.length);if(!n)return null;r.push(_t(n.type))}t.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){Qt.definitions=t;for(const n in t)e[n]=Qt}}var en=Qt;class tn{constructor(e,t,n){this.type=mt,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,dt);if(!r)return null;const i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,dt);if(!i)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,ct),!o)?null:new tn(r,i,o)}evaluate(e){return new It(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const nn=8192;function rn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function on(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function an(e,t){const n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*nn),Math.round(r*i*nn)]}function sn(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],o=e[0]-n[0],a=e[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function ln(e,t){let n=!1;for(let a=0,s=t.length;a<s;a++){const s=t[a];for(let t=0,a=s.length;t<a-1;t++){if(sn(e,s[t],s[t+1]))return!1;(i=s[t])[1]>(r=e)[1]!=(o=s[t+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function un(e,t){for(let n=0;n<t.length;n++)if(ln(e,t[n]))return!0;return!1}function cn(e,t,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(e[0]-n[0])*o-i*(e[1]-n[1]),s=(t[0]-n[0])*o-i*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function dn(e,t,n){for(const u of n)for(let n=0;n<u.length-1;++n)if(0!=(s=[(a=u[n+1])[0]-(o=u[n])[0],a[1]-o[1]])[0]*(l=[(i=t)[0]-(r=e)[0],i[1]-r[1]])[1]-s[1]*l[0]&&cn(r,i,o,a)&&cn(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function hn(e,t){for(let n=0;n<e.length;++n)if(!ln(e[n],t))return!1;for(let n=0;n<e.length-1;++n)if(dn(e[n],e[n+1],t))return!1;return!0}function fn(e,t){for(let n=0;n<t.length;n++)if(hn(e,t[n]))return!0;return!1}function pn(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=[];for(let r=0;r<e[i].length;r++){const a=an(e[i][r],n);rn(t,a),o.push(a)}r.push(o)}return r}function mn(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=pn(e[i],t,n);r.push(o)}return r}function gn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const t=.5*r;let i=e[0]-n[0]>t?-r:n[0]-e[0]>t?r:0;0===i&&(i=e[0]-n[2]>t?-r:n[2]-e[0]>t?r:0),e[0]+=i}rn(t,e)}function yn(e,t,n,r){const i=Math.pow(2,r.z)*nn,o=[r.x*nn,r.y*nn],a=[];if(!e)return a;for(const s of e)for(const e of s){const r=[e.x+o[0],e.y+o[1]];gn(r,t,n,i),a.push(r)}return a}function vn(e,t,n,r){const i=Math.pow(2,r.z)*nn,o=[r.x*nn,r.y*nn],a=[];if(!e)return a;for(const l of e){const e=[];for(const n of l){const r=[n.x+o[0],n.y+o[1]];rn(t,r),e.push(r)}a.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const r of e)gn(r,t,n,i)}var s;return a}class _n{constructor(e,t){this.type=dt,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(zt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const n=t.features[e].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new _n(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new _n(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new _n(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=pn(t.coordinates,r,i),a=yn(e.geometry(),n,r,i);if(!on(n,r))return!1;for(const e of a)if(!ln(e,o))return!1}if("MultiPolygon"===t.type){const o=mn(t.coordinates,r,i),a=yn(e.geometry(),n,r,i);if(!on(n,r))return!1;for(const e of a)if(!un(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=pn(t.coordinates,r,i),a=vn(e.geometry(),n,r,i);if(!on(n,r))return!1;for(const e of a)if(!hn(e,o))return!1}if("MultiPolygon"===t.type){const o=mn(t.coordinates,r,i),a=vn(e.geometry(),n,r,i);if(!on(n,r))return!1;for(const e of a)if(!fn(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var bn=_n;function xn(e){if(e instanceof en){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof bn)return!1;let t=!0;return e.eachChild((e=>{t&&!xn(e)&&(t=!1)})),t}function wn(e){if(e instanceof en&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!wn(e)&&(t=!1)})),t}function En(e,t){if(e instanceof en&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild((e=>{n&&!En(e,t)&&(n=!1)})),n}class Sn{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new Sn(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Tn=Sn;class Mn{constructor(e,t=[],n,r=new st,i=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(e,t,n,r,i={}){return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}_parse(e,t){function n(e,t,n){return"assert"===n?new qt(t,[e]):"coerce"===n?new Yt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(e,this);if(!r)return null;if(this.expectedType){const e=this.expectedType,i=r.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(e,i))return null}else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"assert")}if(!(r instanceof Ut)&&"resolvedImage"!==r.type.kind&&Cn(r)){const t=new Jt;try{r=new Ut(r.type,r.evaluate(t))}catch(e){return this.error(e.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new Mn(this.registry,r,t||null,i,this.errors)}error(e,...t){const n=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new ot(n,e))}checkSubtype(e,t){const n=xt(e,t);return n&&this.error(n),n}}var kn=Mn;function Cn(e){if(e instanceof Tn)return Cn(e.boundExpression);if(e instanceof en&&"error"===e.name)return!1;if(e instanceof tn)return!1;if(e instanceof bn)return!1;const t=e instanceof Yt||e instanceof qt;let n=!0;return e.eachChild((e=>{n=t?n&&Cn(e):n&&e instanceof Ut})),!!n&&xn(e)&&En(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Pn(e,t){const n=e.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=e[s],i=e[s+1],r<=t){if(s===n||t<i)return s;o=s+1}else{if(!(r>t))throw new Gt("Input is not a number.");a=s-1}return 0}class An{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,ut);if(!n)return null;const r=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let o=1;o<e.length;o+=2){const n=1===o?-1/0:e[o],a=e[o+1],s=o,l=o+1;if("number"!=typeof n)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=n)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const u=t.parse(a,l,i);if(!u)return null;i=i||u.type,r.push([n,u])}return new An(i,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[Pn(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var On=An;function In(e,t,n){return e*(1-n)+t*n}var Ln=Object.freeze({__proto__:null,array:function(e,t,n){return e.map(((e,r)=>In(e,t[r],n)))},color:function(e,t,n){return new Ot(In(e.r,t.r,n),In(e.g,t.g,n),In(e.b,t.b,n),In(e.a,t.a,n))},number:In});const Dn=.95047,Rn=1.08883,Nn=4/29,zn=6/29,jn=3*zn*zn,Bn=zn*zn*zn,Fn=Math.PI/180,Un=180/Math.PI;function Gn(e){return e>Bn?Math.pow(e,1/3):e/jn+Nn}function Hn(e){return e>zn?e*e*e:jn*(e-Nn)}function Vn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function qn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function $n(e){const t=qn(e.r),n=qn(e.g),r=qn(e.b),i=Gn((.4124564*t+.3575761*n+.1804375*r)/Dn),o=Gn((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Gn((.0193339*t+.119192*n+.9503041*r)/Rn)),alpha:e.a}}function Wn(e){let t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Hn(t),n=Dn*Hn(n),r=Rn*Hn(r),new Ot(Vn(3.2404542*n-1.5371385*t-.4985314*r),Vn(-.969266*n+1.8760108*t+.041556*r),Vn(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function Zn(e,t,n){const r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const Xn={forward:$n,reverse:Wn,interpolate:function(e,t,n){return{l:In(e.l,t.l,n),a:In(e.a,t.a,n),b:In(e.b,t.b,n),alpha:In(e.alpha,t.alpha,n)}}},Yn={forward:function(e){const{l:t,a:n,b:r}=$n(e),i=Math.atan2(r,n)*Un;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Fn,n=e.c;return Wn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Zn(e.h,t.h,n),c:In(e.c,t.c,n),l:In(e.l,t.l,n),alpha:In(e.alpha,t.alpha,n)}}};var Kn=Object.freeze({__proto__:null,hcl:Yn,lab:Xn});class Jn{constructor(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of i)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,n,r){let i=0;if("exponential"===e.name)i=Qn(t,e.base,n,r);else if("linear"===e.name)i=Qn(t,1,n,r);else if("cubic-bezier"===e.name){const o=e.controlPoints;i=new m(o[0],o[1],o[2],o[3]).solve(Qn(t,1,n,r))}return i}static parse(e,t){let[n,r,i,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,ut),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=ht:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let l=0;l<o.length;l+=2){const e=o[l],n=o[l+1],r=l+3,i=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const u=t.parse(n,i,s);if(!u)return null;s=s||u.type,a.push([e,u])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Jn(s,n,r,i,a):t.error(`Type ${_t(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);const o=Pn(t,r),a=Jn.interpolationFactor(this.interpolation,r,t[o],t[o+1]),s=n[o].evaluate(e),l=n[o+1].evaluate(e);return"interpolate"===this.operator?Ln[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?Yn.reverse(Yn.interpolate(Yn.forward(s),Yn.forward(l),a)):Xn.reverse(Xn.interpolate(Xn.forward(s),Xn.forward(l),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}function Qn(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var er=Jn;class tr{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const r=t.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const a of e.slice(1)){const e=t.parse(a,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,i.push(e)}const o=r&&i.some((e=>xt(r,e.type)));return new tr(o?pt:n,i)}evaluate(e){let t,n=null,r=0;for(const i of this.args){if(r++,n=i.evaluate(e),n&&n instanceof Rt&&!n.available&&(t||(t=n),n=null,r===this.args.length))return t;if(null!==n)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var nr=tr;class rr{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let i=1;i<e.length-1;i+=2){const r=e[i];if("string"!=typeof r)return t.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=t.parse(e[i+1],i+1);if(!o)return null;n.push([r,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new rr(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,n]of this.bindings)e.push(t,n.serialize());return e.push(this.result.serialize()),e}}var ir=rr;class or{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ut),r=t.parse(e[2],2,vt(t.expectedType||pt));return n&&r?new or(r.type.itemType,n,r):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Gt(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new Gt(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new Gt(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ar=or;class sr{constructor(e,t){this.type=dt,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,pt),r=t.parse(e[2],2,pt);return n&&r?wt(n.type,[dt,ct,ut,lt,pt])?new sr(n,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${_t(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!Et(t,["boolean","string","number","null"]))throw new Gt(`Expected first argument to be of type boolean, string, number or null, but found ${_t(jt(t))} instead.`);if(!Et(n,["string","array"]))throw new Gt(`Expected second argument to be of type array or string, but found ${_t(jt(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var lr=sr;class ur{constructor(e,t,n){this.type=ut,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,pt),r=t.parse(e[2],2,pt);if(!n||!r)return null;if(!wt(n.type,[dt,ct,ut,lt,pt]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${_t(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ut);return i?new ur(n,r,i):null}return new ur(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Et(t,["boolean","string","number","null"]))throw new Gt(`Expected first argument to be of type boolean, string, number or null, but found ${_t(jt(t))} instead.`);if(!Et(n,["string","array"]))throw new Gt(`Expected second argument to be of type array or string, but found ${_t(jt(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var cr=ur;class dr{constructor(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i={},o=[];for(let l=2;l<e.length-1;l+=2){let a=e[l];const s=e[l+1];Array.isArray(a)||(a=[a]);const u=t.concat(l);if(0===a.length)return u.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return u.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,jt(e)))return null}else n=jt(e);if(void 0!==i[String(e)])return u.error("Branch labels must be unique.");i[String(e)]=o.length}const c=t.parse(s,l,r);if(!c)return null;r=r||c.type,o.push(c)}const a=t.parse(e[1],1,pt);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(n,a.type)?null:new dr(n,r,a,i,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(jt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),n=[],r={};for(const o of t){const e=r[this.cases[o]];void 0===e?(r[this.cases[o]]=n.length,n.push([this.cases[o],[o]])):n[e][1].push(o)}const i=e=>"number"===this.inputType.kind?Number(e):e;for(const[o,a]of n)e.push(1===a.length?i(a[0]):a.map(i)),e.push(this.outputs[o].serialize());return e.push(this.otherwise.serialize()),e}}var hr=dr;class fr{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r=[];for(let o=1;o<e.length-1;o+=2){const i=t.parse(e[o],o,dt);if(!i)return null;const a=t.parse(e[o+1],o+1,n);if(!a)return null;r.push([i,a]),n=n||a.type}const i=t.parse(e[e.length-1],e.length-1,n);return i?new fr(n,r,i):null}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var pr=fr;class mr{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,pt),r=t.parse(e[2],2,ut);if(!n||!r)return null;if(!wt(n.type,[vt(pt),ct,pt]))return t.error(`Expected first argument to be of type array or string, but found ${_t(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ut);return i?new mr(n.type,n,r,i):null}return new mr(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Et(t,["string","array"]))throw new Gt(`Expected first argument to be of type array or string, but found ${_t(jt(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var gr=mr;function yr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function vr(e,t,n,r){return 0===r.compare(t,n)}function _r(e,t,n){const r="=="!==e&&"!="!==e;return class i{constructor(e,t,n){this.type=dt,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,pt);if(!o)return null;if(!yr(n,o.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${_t(o.type)}'.`);let a=t.parse(e[2],2,pt);if(!a)return null;if(!yr(n,a.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${_t(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${_t(o.type)}' and '${_t(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new qt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new qt(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,mt),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const t=jt(o),n=jt(a);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new Gt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=jt(o),n=jt(a);if("string"!==e.kind||"string"!==n.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const br=_r("==",(function(e,t,n){return t===n}),vr),xr=_r("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!vr(0,t,n,r)})),wr=_r("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),Er=_r(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),Sr=_r("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),Tr=_r(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0}));class Mr{constructor(e,t,n,r,i,o){this.type=ct,this.number=e,this.locale=t,this.currency=n,this.unit=r,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ut);if(!n)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=t.parse(r.locale,1,ct),!i))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,ct),!o))return null;let a=null;if(r.unit&&(a=t.parse(r.unit,1,ct),!a))return null;let s=null;if(r["min-fraction-digits"]&&(s=t.parse(r["min-fraction-digits"],1,ut),!s))return null;let l=null;return r["max-fraction-digits"]&&(l=t.parse(r["max-fraction-digits"],1,ut),!l)?null:new Mr(n,i,o,a,s,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class kr{constructor(e){this.type=ut,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${_t(n.type)} instead.`):new kr(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Gt(`Expected value to be of type string or array, but found ${_t(jt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const Cr={"==":br,"!=":xr,">":Er,"<":wr,">=":Tr,"<=":Sr,array:qt,at:ar,boolean:qt,case:pr,coalesce:nr,collator:tn,format:$t,image:Wt,in:lr,"index-of":cr,interpolate:er,"interpolate-hcl":er,"interpolate-lab":er,length:kr,let:ir,literal:Ut,match:hr,number:qt,"number-format":Mr,object:qt,slice:gr,step:On,string:qt,"to-boolean":Yt,"to-color":Yt,"to-number":Yt,"to-string":Yt,var:Tn,within:bn};function Pr(e,[t,n,r,i]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const o=i?i.evaluate(e):1,a=Nt(t,n,r,o);if(a)throw new Gt(a);return new Ot(t/255*o,n/255*o,r/255*o,o)}function Ar(e,t){return e in t}function Or(e,t){const n=t[e];return void 0===n?null:n}function Ir(e){return{type:e}}en.register(Cr,{error:[{kind:"error"},[ct],(e,[t])=>{throw new Gt(t.evaluate(e))}],typeof:[ct,[pt],(e,[t])=>_t(jt(t.evaluate(e)))],"to-rgba":[vt(ut,4),[ht],(e,[t])=>t.evaluate(e).toArray()],rgb:[ht,[ut,ut,ut],Pr],rgba:[ht,[ut,ut,ut,ut],Pr],has:{type:dt,overloads:[[[ct],(e,[t])=>Ar(t.evaluate(e),e.properties())],[[ct,ft],(e,[t,n])=>Ar(t.evaluate(e),n.evaluate(e))]]},get:{type:pt,overloads:[[[ct],(e,[t])=>Or(t.evaluate(e),e.properties())],[[ct,ft],(e,[t,n])=>Or(t.evaluate(e),n.evaluate(e))]]},"feature-state":[pt,[ct],(e,[t])=>Or(t.evaluate(e),e.featureState||{})],properties:[ft,[],e=>e.properties()],"geometry-type":[ct,[],e=>e.geometryType()],id:[pt,[],e=>e.id()],zoom:[ut,[],e=>e.globals.zoom],pitch:[ut,[],e=>e.globals.pitch||0],"distance-from-center":[ut,[],e=>e.distanceFromCenter()],"heatmap-density":[ut,[],e=>e.globals.heatmapDensity||0],"line-progress":[ut,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[ut,[],e=>e.globals.skyRadialProgress||0],accumulated:[pt,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ut,Ir(ut),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[ut,Ir(ut),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:ut,overloads:[[[ut,ut],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[ut],(e,[t])=>-t.evaluate(e)]]},"/":[ut,[ut,ut],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[ut,[ut,ut],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[ut,[],()=>Math.LN2],pi:[ut,[],()=>Math.PI],e:[ut,[],()=>Math.E],"^":[ut,[ut,ut],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[ut,[ut],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[ut,[ut],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[ut,[ut],(e,[t])=>Math.log(t.evaluate(e))],log2:[ut,[ut],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[ut,[ut],(e,[t])=>Math.sin(t.evaluate(e))],cos:[ut,[ut],(e,[t])=>Math.cos(t.evaluate(e))],tan:[ut,[ut],(e,[t])=>Math.tan(t.evaluate(e))],asin:[ut,[ut],(e,[t])=>Math.asin(t.evaluate(e))],acos:[ut,[ut],(e,[t])=>Math.acos(t.evaluate(e))],atan:[ut,[ut],(e,[t])=>Math.atan(t.evaluate(e))],min:[ut,Ir(ut),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[ut,Ir(ut),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[ut,[ut],(e,[t])=>Math.abs(t.evaluate(e))],round:[ut,[ut],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[ut,[ut],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[ut,[ut],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[dt,[ct,pt],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[dt,[pt],(e,[t])=>e.id()===t.value],"filter-type-==":[dt,[ct],(e,[t])=>e.geometryType()===t.value],"filter-<":[dt,[ct,pt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[dt,[pt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[dt,[ct,pt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[dt,[pt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[dt,[ct,pt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[dt,[pt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[dt,[ct,pt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[dt,[pt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[dt,[pt],(e,[t])=>t.value in e.properties()],"filter-has-id":[dt,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[dt,[vt(ct)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[dt,[vt(pt)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[dt,[ct,vt(pt)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[dt,[ct,vt(pt)],(e,[t,n])=>function(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:dt,overloads:[[[dt,dt],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[Ir(dt),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:dt,overloads:[[[dt,dt],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[Ir(dt),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[dt,[dt],(e,[t])=>!t.evaluate(e)],"is-supported-script":[dt,[ct],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return!n||n(t.evaluate(e))}],upcase:[ct,[ct],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[ct,[ct],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[ct,Ir(pt),(e,t)=>t.map((t=>Bt(t.evaluate(e)))).join("")],"resolved-locale":[ct,[mt],(e,[t])=>t.evaluate(e).resolvedLocale()]});var Lr=Cr;function Dr(e){return{result:"success",value:e}}function Rr(e){return{result:"error",value:e}}function Nr(e){return"data-driven"===e["property-type"]}function zr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function jr(e){return!!e.expression&&e.expression.interpolated}function Br(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Fr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Ur(e){return e}function Gr(e,t){const n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],i=r||!(r||void 0!==e.property),o=e.type||(jr(t)?"exponential":"interval");if(n&&((e=tt({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],Ot.parse(e[1])]))),e.default=Ot.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Kn[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let a,s,l;if("exponential"===o)a=$r;else if("interval"===o)a=qr;else if("categorical"===o){a=Vr,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=Wr}if(r){const n={},r=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const e of r)i.push([n[e].zoom,Gr(n[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:er.interpolationFactor.bind(void 0,o),zoomStops:i.map((e=>e[0])),evaluate:({zoom:n},r)=>$r({stops:i,base:e.base},t,n).evaluate(n,r)}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:er.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:n})=>a(e,t,n,s,l)}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?Hr(e.default,t.default):a(e,t,i,s,l)}}}function Hr(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Vr(e,t,n,r,i){return Hr(typeof n===i?r[n]:void 0,e.default,t.default)}function qr(e,t,n){if("number"!==Br(n))return Hr(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const i=Pn(e.stops.map((e=>e[0])),n);return e.stops[i][1]}function $r(e,t,n){const r=void 0!==e.base?e.base:1;if("number"!==Br(n))return Hr(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const o=Pn(e.stops.map((e=>e[0])),n),a=function(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1];let u=Ln[t.type]||Ur;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Kn[e.colorSpace];u=(e,n)=>t.reverse(t.interpolate(t.forward(e),t.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),n=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==n)return u(t,n,a)}}:u(s,l,a)}function Wr(e,t,n){return"color"===t.type?n=Ot.parse(n):"formatted"===t.type?n=Dt.fromString(n.toString()):"resolvedImage"===t.type?n=Rt.fromString(n.toString()):Br(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Hr(n,e.default,t.default)}class Zr{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Jt,this._defaultValue=t?function(e){return"color"===e.type&&(Fr(e.default)||Array.isArray(e.default))?new Ot(0,0,0,0):"color"===e.type?Ot.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,i,o,a,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,i,o,a,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Gt(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Xr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Lr}function Yr(e,t){const n=new kn(Lr,[],t?function(e){const t={color:ht,string:ct,number:ut,enum:ct,boolean:dt,formatted:gt,resolvedImage:yt};return"array"===e.type?vt(t[e.value]||pt,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Dr(new Zr(r,t)):Rr(n.errors)}class Kr{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!wn(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}}class Jr{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!wn(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}interpolationFactor(e,t,n){return this.interpolationType?er.interpolationFactor(this.interpolationType,e,t,n):0}}function Qr(e,t){if("error"===(e=Yr(e,t)).result)return e;const n=e.value.expression,r=xn(n);if(!r&&!Nr(t))return Rr([new ot("","data expressions not supported")]);const i=En(n,["zoom","pitch","distance-from-center"]);if(!i&&!zr(t))return Rr([new ot("","zoom expressions not supported")]);const o=ti(n);return o||i?o instanceof ot?Rr([o]):o instanceof er&&!jr(t)?Rr([new ot("",'"interpolate" expressions cannot be used with this property')]):Dr(o?new Jr(r?"camera":"composite",e.value,o.labels,o instanceof er?o.interpolation:void 0):new Kr(r?"constant":"source",e.value)):Rr([new ot("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ei{constructor(e,t){this._parameters=e,this._specification=t,tt(this,Gr(this._parameters,this._specification))}static deserialize(e){return new ei(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ti(e){let t=null;if(e instanceof ir)t=ti(e.result);else if(e instanceof nr){for(const n of e.args)if(t=ti(n),t)break}else(e instanceof On||e instanceof er)&&e.input instanceof en&&"zoom"===e.input.name&&(t=e);return t instanceof ot||e.eachChild((e=>{const n=ti(e);n instanceof ot?t=n:!t&&n?t=new ot("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new ot("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}class ni{constructor(e,t,n,r){this.message=(e?`${e}: `:"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function ri(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec;let s=[];const l=Br(n);if("object"!==l)return[new ni(t,n,`object expected, ${l} found`)];for(const u in n){const e=u.split(".")[0];let l;i[e]?l=i[e]:r[e]?l=zi:i["*"]?l=i["*"]:r["*"]&&(l=zi),l?s=s.concat(l({key:(t?`${t}.`:t)+u,value:n[u],valueSpec:r[e]||r["*"],style:o,styleSpec:a,object:n,objectKey:u},n)):s.push(new ni(t,n[u],`unknown property "${u}"`))}for(const u in r)i[u]||r[u].required&&void 0===r[u].default&&void 0===n[u]&&s.push(new ni(t,n,`missing required property "${u}"`));return s}function ii(e){const t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||zi;if("array"!==Br(t))return[new ni(o,t,`array expected, ${Br(t)} found`)];if(n.length&&t.length!==n.length)return[new ni(o,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new ni(o,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(s.function=n.function),"object"===Br(n.value)&&(s=n.value);let l=[];for(let u=0;u<t.length;u++)l=l.concat(a({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:r,styleSpec:i,key:`${o}[${u}]`}));return l}function oi(e){const t=e.key,n=e.value,r=e.valueSpec;let i=Br(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new ni(t,n,`number expected, ${i} found`)];if("minimum"in r){let i=r.minimum;if("array"===Br(r.minimum)&&(i=r.minimum[e.arrayIndex]),n<i)return[new ni(t,n,`${n} is less than the minimum value ${i}`)]}if("maximum"in r){let i=r.maximum;if("array"===Br(r.maximum)&&(i=r.maximum[e.arrayIndex]),n>i)return[new ni(t,n,`${n} is greater than the maximum value ${i}`)]}return[]}function ai(e){const t=e.valueSpec,n=nt(e.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===e.value.property,l=!s,u="array"===Br(e.value.stops)&&"array"===Br(e.value.stops[0])&&"object"===Br(e.value.stops[0][0]),c=ri({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new ni(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat(ii({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:d})),"array"===Br(r)&&0===r.length&&t.push(new ni(e.key,r,"array must have at least one stop")),t},default:function(e){return zi({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&c.push(new ni(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||c.push(new ni(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!jr(e.valueSpec)&&c.push(new ni(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Nr(e.valueSpec)?c.push(new ni(e.key,e.value,"property functions not supported")):s&&!zr(e.valueSpec)&&c.push(new ni(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!u||void 0!==e.value.property||c.push(new ni(e.key,e.value,'"property" property is required')),c;function d(e){let n=[];const r=e.value,s=e.key;if("array"!==Br(r))return[new ni(s,r,`array expected, ${Br(r)} found`)];if(2!==r.length)return[new ni(s,r,`array length 2 expected, length ${r.length} found`)];if(u){if("object"!==Br(r[0]))return[new ni(s,r,`object expected, ${Br(r[0])} found`)];if(void 0===r[0].zoom)return[new ni(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new ni(s,r,"object stop key must have value")];const t=nt(r[0].zoom);if("number"!=typeof t)return[new ni(s,r[0].zoom,"stop zoom values must be numbers")];if(o&&o>t)return[new ni(s,r[0].zoom,"stop zoom values must appear in ascending order")];t!==o&&(o=t,i=void 0,a={}),n=n.concat(ri({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:oi,value:h}}))}else n=n.concat(h({key:`${s}[0]`,value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return Xr(rt(r[1]))?n.concat([new ni(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(zi({key:`${s}[1]`,value:r[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function h(e,o){const s=Br(e.value),l=nt(e.value),u=null!==e.value?e.value:o;if(r){if(s!==r)return[new ni(e.key,u,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new ni(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return Nr(t)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ni(e.key,u,r)]}return"categorical"!==n||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&"number"==typeof l&&"number"==typeof i&&void 0!==i&&l<i?[new ni(e.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new ni(e.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new ni(e.key,u,`integer expected, found ${String(l)}`)]}}function si(e){const t=("property"===e.expressionContext?Qr:Yr)(rt(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new ni(`${e.key}${t.key}`,e.value,t.message)));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new ni(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!wn(n))return[new ni(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return li(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!En(n,["zoom","feature-state"]))return[new ni(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!xn(n))return[new ni(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function li(e,t){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const i of t.valueSpec.expression.parameters)n.delete(i);if(0===n.size)return[];const r=[];return e instanceof en&&n.has(e.name)?[new ni(t.key,t.value,`["${e.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(e.eachChild((e=>{r.push(...li(e,t))})),r)}function ui(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(nt(n))&&i.push(new ni(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(nt(n))&&i.push(new ni(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function ci(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ci(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function di(e,t="fill"){if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ci(e)||(e=vi(e));const n=e;let r=!0;try{r=function(e){if(!pi(e))return e;let t=rt(e);return fi(t),t=hi(t),t}(n)}catch(e){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const i=et[`filter_${t}`],o=Yr(r,i);let a=null;if("error"===o.result)throw new Error(o.value.map((e=>`${e.key}: ${e.message}`)).join(", "));a=(e,t,n)=>o.value.evaluate(e,t,{},n);let s=null,l=null;if(r!==n){const e=Yr(n,i);if("error"===e.result)throw new Error(e.value.map((e=>`${e.key}: ${e.message}`)).join(", "));s=(t,n,r,i,o)=>e.value.evaluate(t,n,{},r,void 0,void 0,i,o),l=!xn(e.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:yi(r),needFeature:!!l}}function hi(e){if(!Array.isArray(e))return e;const t=function(e){if(mi.has(e[0]))for(let t=1;t<e.length;t++)if(pi(e[t]))return!0;return e}(e);return!0===t?t:t.map((e=>hi(e)))}function fi(e){let t=!1;const n=[];if("case"===e[0]){for(let r=1;r<e.length-1;r+=2)t=t||pi(e[r]),n.push(e[r+1]);n.push(e[e.length-1])}else if("match"===e[0]){t=t||pi(e[1]);for(let t=2;t<e.length-1;t+=2)n.push(e[t+1]);n.push(e[e.length-1])}else if("step"===e[0]){t=t||pi(e[1]);for(let t=1;t<e.length-1;t+=2)n.push(e[t+1])}t&&(e.length=0,e.push("any",...n));for(let r=1;r<e.length;r++)fi(e[r])}function pi(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let n=1;n<e.length;n++)if(pi(e[n]))return!0;return!1}const mi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function gi(e,t){return e<t?-1:e>t?1:0}function yi(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(yi(e[t]))return!0;return!1}function vi(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?_i(e[1],e[2],"=="):"!="===t?wi(_i(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?_i(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(vi))):"all"===t?["all"].concat(e.slice(1).map(vi)):"none"===t?["all"].concat(e.slice(1).map(vi).map(wi)):"in"===t?bi(e[1],e.slice(2)):"!in"===t?wi(bi(e[1],e.slice(2))):"has"===t?xi(e[1]):"!has"===t?wi(xi(e[1])):"within"!==t||e;var n}function _i(e,t,n){switch(e){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,e,t]}}function bi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(gi)]]:["filter-in-small",e,["literal",t]]}}function xi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function wi(e){return["!",e]}function Ei(e){return ci(rt(e.value))?si(tt({},e,{expressionContext:"filter",valueSpec:e.styleSpec[`filter_${e.layerType||"fill"}`]})):Si(e)}function Si(e){const t=e.value,n=e.key;if("array"!==Br(t))return[new ni(n,t,`array expected, ${Br(t)} found`)];const r=e.styleSpec;let i,o=[];if(t.length<1)return[new ni(n,t,"filter array must have at least 1 element")];switch(o=o.concat(ui({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),nt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===nt(t[1])&&o.push(new ni(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new ni(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Br(t[1]),"string"!==i&&o.push(new ni(`${n}[1]`,t[1],`string expected, ${i} found`)));for(let a=2;a<t.length;a++)i=Br(t[a]),"$type"===nt(t[1])?o=o.concat(ui({key:`${n}[${a}]`,value:t[a],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new ni(`${n}[${a}]`,t[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)o=o.concat(Si({key:`${n}[${r}]`,value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Br(t[1]),2!==t.length?o.push(new ni(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new ni(`${n}[1]`,t[1],`string expected, ${i} found`));break;case"within":i=Br(t[1]),2!==t.length?o.push(new ni(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new ni(`${n}[1]`,t[1],`object expected, ${i} found`))}return o}function Ti(e,t){const n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[`${t}_${e.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return zi({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const u=e.valueSpec||s[a];if(!u)return[new ni(n,o,`unknown property "${a}"`)];let c;if("string"===Br(o)&&Nr(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(o))){const e=`\`{ "type": "identity", "property": ${c?JSON.stringify(c[1]):'"_"'} }\``;return[new ni(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: ${e}.`)]}const d=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&d.push(new ni(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Fr(rt(o))&&"identity"===nt(o.type)&&d.push(new ni(n,o,'"text-font" does not support identity functions'))),d.concat(zi({key:e.key,value:o,valueSpec:u,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function Mi(e){return Ti(e,"paint")}function ki(e){return Ti(e,"layout")}function Ci(e){let t=[];const n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new ni(r,n,'either "type" or "ref" is required'));let a=nt(n.type);const s=nt(n.ref);if(n.id){const o=nt(n.id);for(let a=0;a<e.arrayIndex;a++){const e=i.layers[a];nt(e.id)===o&&t.push(new ni(r,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in n&&t.push(new ni(r,n[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{nt(t.id)===s&&(e=t)})),e?e.ref?t.push(new ni(r,n.ref,"ref cannot reference another ref layer")):a=nt(e.type):"string"==typeof s&&t.push(new ni(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(n.source){const e=i.sources&&i.sources[n.source],o=e&&nt(e.type);e?"vector"===o&&"raster"===a?t.push(new ni(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?t.push(new ni(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new ni(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===o&&e.lineMetrics||t.push(new ni(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ni(r,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new ni(r,n.source,`source "${n.source}" not found`))}else t.push(new ni(r,n,'missing required property "source"'));return t=t.concat(ri({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>zi({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"}),filter:e=>Ei(tt({layerType:a},e)),layout:e=>ri({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>ki(tt({layerType:a},e))}}),paint:e=>ri({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Mi(tt({layerType:a},e))}})}})),t}function Pi(e){const t=e.value,n=e.key,r=Br(t);return"string"!==r?[new ni(n,t,`string expected, ${r} found`)]:[]}const Ai={promoteId:function({key:e,value:t}){if("string"===Br(t))return Pi({key:e,value:t});{const n=[];for(const r in t)n.push(...Pi({key:`${e}.${r}`,value:t[r]}));return n}}};function Oi(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new ni(n,t,'"type" is required')];const o=nt(t.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=ri({key:n,value:t,valueSpec:r[`source_${o.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:Ai}),a;case"geojson":if(a=ri({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Ai}),t.cluster)for(const e in t.clusterProperties){const[r,i]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...si({key:`${n}.${e}.map`,value:i,expressionContext:"cluster-map"})),a.push(...si({key:`${n}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return ri({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return ri({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new ni(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ui({key:`${n}.type`,value:t.type,valueSpec:{values:Ii(r)},style:i,styleSpec:r})}}function Ii(e){return e.source.reduce(((t,n)=>{const r=e[n];return"enum"===r.type.type&&(t=t.concat(Object.keys(r.type.values))),t}),[])}function Li(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let o=[];const a=Br(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new ni("light",t,`object expected, ${a} found`)]),o;for(const s in t){const e=s.match(/^(.*)-transition$/);o=o.concat(e&&r[e[1]]&&r[e[1]].transition?zi({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?zi({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new ni(s,t[s],`unknown property "${s}"`)])}return o}function Di(e){const t=e.value,n=e.key,r=e.style,i=e.styleSpec,o=i.terrain;let a=[];const s=Br(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new ni("terrain",t,`object expected, ${s} found`)]),a;for(const l in t){const e=l.match(/^(.*)-transition$/);a=a.concat(e&&o[e[1]]&&o[e[1]].transition?zi({key:l,value:t[l],valueSpec:i.transition,style:r,styleSpec:i}):o[l]?zi({key:l,value:t[l],valueSpec:o[l],style:r,styleSpec:i}):[new ni(l,t[l],`unknown property "${l}"`)])}if(t.source){const e=r.sources&&r.sources[t.source],i=e&&nt(e.type);e?"raster-dem"!==i&&a.push(new ni(n,t.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a "raster-dem" source type`)):a.push(new ni(n,t.source,`source "${t.source}" not found`))}else a.push(new ni(n,t,'terrain is missing required property "source"'));return a}function Ri(e){const t=e.value,n=e.style,r=e.styleSpec,i=r.fog;let o=[];const a=Br(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new ni("fog",t,`object expected, ${a} found`)]),o;for(const s in t){const e=s.match(/^(.*)-transition$/);o=o.concat(e&&i[e[1]]&&i[e[1]].transition?zi({key:s,value:t[s],valueSpec:r.transition,style:n,styleSpec:r}):i[s]?zi({key:s,value:t[s],valueSpec:i[s],style:n,styleSpec:r}):[new ni(s,t[s],`unknown property "${s}"`)])}return o}const Ni={"*":()=>[],array:ii,boolean:function(e){const t=e.value,n=e.key,r=Br(t);return"boolean"!==r?[new ni(n,t,`boolean expected, ${r} found`)]:[]},number:oi,color:function(e){const t=e.key,n=e.value,r=Br(n);return"string"!==r?[new ni(t,n,`color expected, ${r} found`)]:null===St(n)?[new ni(t,n,`color expected, "${n}" found`)]:[]},enum:ui,filter:Ei,function:ai,layer:Ci,object:ri,source:Oi,light:Li,terrain:Di,fog:Ri,string:Pi,formatted:function(e){return 0===Pi(e).length?[]:si(e)},resolvedImage:function(e){return 0===Pi(e).length?[]:si(e)},projection:function(e){const t=e.value,n=e.styleSpec,r=n.projection,i=e.style;let o=[];const a=Br(t);if("object"===a)for(const s in t)o=o.concat(zi({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}));else"string"!==a&&(o=o.concat([new ni("projection",t,`object or string expected, ${a} found`)]));return o}};function zi(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Fr(nt(t))?ai(e):n.expression&&Xr(rt(t))?si(e):n.type&&Ni[n.type]?Ni[n.type](e):ri(tt({},e,{valueSpec:n.type?r[n.type]:n}))}function ji(e){const t=e.value,n=e.key,r=Pi(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new ni(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new ni(n,t,'"glyphs" url must include a "{range}" token'))),r}function Bi(e,t=et){return Gi(zi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:ji,"*":()=>[]}}))}const Fi=e=>Gi(Mi(e)),Ui=e=>Gi(ki(e));function Gi(e){return e.slice().sort(((e,t)=>e.line&&t.line?e.line-t.line:0))}function Hi(e,t){let n=!1;if(t&&t.length)for(const r of t)e.fire(new Je(new Error(r.message))),n=!0;return n}var Vi=$i,qi=3;function $i(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[qi+o],s=i[qi+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[qi+r.length+1];this.keys=i.subarray(i[qi+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var u=0;u<this.d*this.d;u++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var c=n/t*e;this.min=-c,this.max=e+c}$i.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},$i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},$i.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},$i.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},$i.prototype._queryCell=function(e,t,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,d=0;d<l.length;d++){var h=l[d];if(void 0===a[h]){var f=4*h;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):e<=c[f+2]&&t<=c[f+3]&&n>=c[f+0]&&r>=c[f+1])?(a[h]=!0,o.push(u[h])):a[h]=!1}}},$i.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(n),d=this._convertToCellCoord(r),h=l;h<=c;h++)for(var f=u;f<=d;f++){var p=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,e,t,n,r,p,o,a,s))return}},$i.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},$i.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},$i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=qi+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[qi+a]=o,i.set(s,o),o+=s.length}return i[qi+e.length]=o,i.set(this.keys,o),i[qi+e.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Wi=h(Vi);const Zi={};function Xi(e,t,n={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Zi[t]={klass:e,omit:n.omit||[]}}Xi(Object,"Object"),Wi.serialize=function(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Wi.deserialize=function(e){return new Wi(e.buffer)},Object.defineProperty(Wi,"name",{value:"Grid"}),Xi(Wi,"Grid"),Xi(Ot,"Color"),Xi(Error,"Error"),Xi(ue,"AJAXError"),Xi(Rt,"ResolvedImage"),Xi(ei,"StylePropertyFunction"),Xi(Zr,"StyleExpression",{omit:["_evaluator"]}),Xi(Jr,"ZoomDependentExpression"),Xi(Kr,"ZoomConstantExpression"),Xi(en,"CompoundExpression",{omit:["_evaluate"]});for(const Em in Lr)Zi[Lr[Em]._classRegistryKey]||Xi(Lr[Em],`Expression${Em}`);function Yi(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Ki(e){return t.ImageBitmap&&e instanceof t.ImageBitmap}function Ji(e,n){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Yi(e)||Ki(e))return n&&n.push(e),e;if(ArrayBuffer.isView(e)){const t=e;return n&&n.push(t.buffer),t}if(e instanceof t.ImageData)return n&&n.push(e.data.buffer),e;if(Array.isArray(e)){const t=[];for(const r of e)t.push(Ji(r,n));return t}if("object"==typeof e){const t=e.constructor,r=t._classRegistryKey;if(!r)throw new Error(`can't serialize object of unregistered class ${r}`);const i=t.serialize?t.serialize(e,n):{};if(!t.serialize){for(const t in e)e.hasOwnProperty(t)&&(Zi[r].omit.indexOf(t)>=0||(i[t]=Ji(e[t],n)));e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof e)}function Qi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Yi(e)||Ki(e)||ArrayBuffer.isView(e)||e instanceof t.ImageData)return e;if(Array.isArray(e))return e.map(Qi);if("object"==typeof e){const t=e.$name||"Object",{klass:n}=Zi[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(e);const r=Object.create(n.prototype);for(const i of Object.keys(e))"$name"!==i&&(r[i]=Qi(e[i]));return r}throw new Error("can't deserialize object of type "+typeof e)}const eo={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function to(e){for(const t of e)if(io(t.charCodeAt(0)))return!0;return!1}function no(e){for(const t of e)if(!ro(t.charCodeAt(0)))return!1;return!0}function ro(e){return!(eo.Arabic(e)||eo["Arabic Supplement"](e)||eo["Arabic Extended-A"](e)||eo["Arabic Presentation Forms-A"](e)||eo["Arabic Presentation Forms-B"](e))}function io(e){return!(746!==e&&747!==e&&(e<4352||!(eo["Bopomofo Extended"](e)||eo.Bopomofo(e)||eo["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||eo["CJK Compatibility Ideographs"](e)||eo["CJK Compatibility"](e)||eo["CJK Radicals Supplement"](e)||eo["CJK Strokes"](e)||!(!eo["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||eo["CJK Unified Ideographs Extension A"](e)||eo["CJK Unified Ideographs"](e)||eo["Enclosed CJK Letters and Months"](e)||eo["Hangul Compatibility Jamo"](e)||eo["Hangul Jamo Extended-A"](e)||eo["Hangul Jamo Extended-B"](e)||eo["Hangul Jamo"](e)||eo["Hangul Syllables"](e)||eo.Hiragana(e)||eo["Ideographic Description Characters"](e)||eo.Kanbun(e)||eo["Kangxi Radicals"](e)||eo["Katakana Phonetic Extensions"](e)||eo.Katakana(e)&&12540!==e||!(!eo["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!eo["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||eo["Unified Canadian Aboriginal Syllabics"](e)||eo["Unified Canadian Aboriginal Syllabics Extended"](e)||eo["Vertical Forms"](e)||eo["Yijing Hexagram Symbols"](e)||eo["Yi Syllables"](e)||eo["Yi Radicals"](e))))}function oo(e){return!(io(e)||function(e){return!!(eo["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||eo["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||eo["Letterlike Symbols"](e)||eo["Number Forms"](e)||eo["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||eo["Control Pictures"](e)&&9251!==e||eo["Optical Character Recognition"](e)||eo["Enclosed Alphanumerics"](e)||eo["Geometric Shapes"](e)||eo["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||eo["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||eo["CJK Symbols and Punctuation"](e)||eo.Katakana(e)||eo["Private Use Area"](e)||eo["CJK Compatibility Forms"](e)||eo["Small Form Variants"](e)||eo["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function ao(e){return e>=1424&&e<=2303||eo["Arabic Presentation Forms-A"](e)||eo["Arabic Presentation Forms-B"](e)}function so(e,t){return!(!t&&ao(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||eo.Khmer(e))}function lo(e){for(const t of e)if(ao(t.charCodeAt(0)))return!0;return!1}const uo="deferred",co="loading",ho="loaded";let fo=null,po="unavailable",mo=null;const go=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(po="error"),fo&&fo(e)};function yo(){vo.fire(new Ke("pluginStateChange",{pluginStatus:po,pluginURL:mo}))}const vo=new Qe,_o=function(){return po},bo=function(){if(po!==uo||!mo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");po=co,yo(),mo&&he({url:mo},(e=>{e?go(e):(po=ho,yo())}))},xo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>po===ho||null!=xo.applyArabicShaping,isLoading:()=>po===co,setState(e){po=e.pluginStatus,mo=e.pluginURL},isParsed:()=>null!=xo.applyArabicShaping&&null!=xo.processBidirectionalText&&null!=xo.processStyledBidirectionalText,getPluginURL:()=>mo};class wo{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const n of e)if(!so(n.charCodeAt(0),t))return!1;return!0}(e,xo.isLoaded())}}class Eo{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Fr(e))return new ei(e,t);if(Xr(e)){const n=Qr(e,t);if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return n.value}{let n=e;return"string"==typeof e&&"color"===t.type&&(n=Ot.parse(e)),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class So{constructor(e){this.property=e,this.value=new Eo(e,void 0)}transitioned(e,t){return new Mo(this.property,this.value,t,I({},e.transition,this.transition),e.now)}untransitioned(){return new Mo(this.property,this.value,null,{},0)}}class To{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return G(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new So(this._values[e].property)),this._values[e].value=new Eo(this._values[e].property,null===t?void 0:G(t))}getTransition(e){return G(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new So(this._values[e].property)),this._values[e].transition=G(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const r=this.getTransition(t);void 0!==r&&(e[`${t}-transition`]=r)}return e}transitioned(e,t){const n=new ko(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(e,t._values[r]);return n}untransitioned(){const e=new ko(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Mo{constructor(e,t,n,r,i){const o=r.delay||0,a=r.duration||0;i=i||0,this.property=e,this.value=t,this.begin=i+o,this.end=this.begin+a,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(e,t,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),i,S(a))}}return i}}class ko{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const r=new Ao(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Co{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return G(this._values[e].value)}setValue(e,t){this._values[e]=new Eo(this._values[e].property,null===t?void 0:G(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const r=new Ao(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}}class Po{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}class Ao{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Oo{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,n){const r=Ln[this.specification.type];return r?r(e,t,n):e}}class Io{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,r){return new Po(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Po(this,{kind:"constant",value:void 0},e.parameters);const r=Ln[this.specification.type];return r?new Po(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}evaluate(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)}}class Lo{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}interpolate(){return!1}}class Do{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const t=new wo(0,{});for(const n in e){const r=e[n];r.specification.overridable&&this.overridableProperties.push(n);const i=this.defaultPropertyValues[n]=new Eo(r,void 0),o=this.defaultTransitionablePropertyValues[n]=new So(r);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate(t)}}}function Ro(e,t){return 256*(e=k(Math.floor(e),0,255))+k(Math.floor(t),0,255)}Xi(Io,"DataDrivenProperty"),Xi(Oo,"DataConstantProperty"),Xi(Lo,"ColorRampProperty");const No={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zo{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class jo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Bo(e,t=1){let n=0,r=0;return{members:e.map((e=>{const i=No[e.type].BYTES_PER_ELEMENT,o=n=Fo(n,Math.max(t,i)),a=e.components||1;return r=Math.max(r,i),n+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:Fo(n,Math.max(r,t)),alignment:t}}function Fo(e,t){return Math.ceil(e/t)*t}class Uo extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}Uo.prototype.bytesPerElement=4,Xi(Uo,"StructArrayLayout2i4");class Go extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}Go.prototype.bytesPerElement=6,Xi(Go,"StructArrayLayout3i6");class Ho extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e}}Ho.prototype.bytesPerElement=8,Xi(Ho,"StructArrayLayout4i8");class Vo extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=6*e,u=12*e,c=3*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.uint8[u+4]=r,this.uint8[u+5]=i,this.uint8[u+6]=o,this.uint8[u+7]=a,this.float32[c+2]=s,e}}Vo.prototype.bytesPerElement=12,Xi(Vo,"StructArrayLayout2i4ub1f12");class qo extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e}}qo.prototype.bytesPerElement=16,Xi(qo,"StructArrayLayout4f16");class $o extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=6*e,s=3*e;return this.uint16[a+0]=t,this.uint16[a+1]=n,this.uint16[a+2]=r,this.uint16[a+3]=i,this.float32[s+2]=o,e}}$o.prototype.bytesPerElement=12,Xi($o,"StructArrayLayout4ui1f12");class Wo extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.uint16[o+0]=t,this.uint16[o+1]=n,this.uint16[o+2]=r,this.uint16[o+3]=i,e}}Wo.prototype.bytesPerElement=8,Xi(Wo,"StructArrayLayout4ui8");class Zo extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}Zo.prototype.bytesPerElement=12,Xi(Zo,"StructArrayLayout6i12");class Xo extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,u,c,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,t,n,r,i,o,a,s,l,u,c,d)}emplace(e,t,n,r,i,o,a,s,l,u,c,d,h){const f=12*e;return this.int16[f+0]=t,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=u,this.int16[f+9]=c,this.int16[f+10]=d,this.int16[f+11]=h,e}}Xo.prototype.bytesPerElement=24,Xi(Xo,"StructArrayLayout4i4ui4i24");class Yo extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.float32[l+2]=i,this.float32[l+3]=o,this.float32[l+4]=a,e}}Yo.prototype.bytesPerElement=20,Xi(Yo,"StructArrayLayout3i3f20");class Ko extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}Ko.prototype.bytesPerElement=4,Xi(Ko,"StructArrayLayout1ul4");class Jo extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,u,c,d,h){const f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,r,i,o,a,s,l,u,c,d,h)}emplace(e,t,n,r,i,o,a,s,l,u,c,d,h,f){const p=20*e,m=10*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.int16[p+4]=o,this.float32[m+3]=a,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=u,this.int16[p+14]=c,this.uint32[m+8]=d,this.uint16[p+18]=h,this.uint16[p+19]=f,e}}Jo.prototype.bytesPerElement=40,Xi(Jo,"StructArrayLayout5i4f1i1ul2ui40");class Qo extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+4]=i,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,e}}Qo.prototype.bytesPerElement=16,Xi(Qo,"StructArrayLayout3i2i2i16");class ea extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,e}}ea.prototype.bytesPerElement=16,Xi(ea,"StructArrayLayout2f1f2i16");class ta extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,e}}ta.prototype.bytesPerElement=12,Xi(ta,"StructArrayLayout2ub2f12");class na extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}na.prototype.bytesPerElement=12,Xi(na,"StructArrayLayout3f12");class ra extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}ra.prototype.bytesPerElement=6,Xi(ra,"StructArrayLayout3ui6");class ia extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,y,v,_,b){const x=this.length;return this.resize(x+1),this.emplace(x,e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,y,v,_,b)}emplace(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,y,v,_,b,x){const w=30*e,E=15*e,S=60*e;return this.int16[w+0]=t,this.int16[w+1]=n,this.int16[w+2]=r,this.float32[E+2]=i,this.float32[E+3]=o,this.uint16[w+8]=a,this.uint16[w+9]=s,this.uint32[E+5]=l,this.uint32[E+6]=u,this.uint32[E+7]=c,this.uint16[w+16]=d,this.uint16[w+17]=h,this.uint16[w+18]=f,this.float32[E+10]=p,this.float32[E+11]=m,this.uint8[S+48]=g,this.uint8[S+49]=y,this.uint8[S+50]=v,this.uint32[E+13]=_,this.int16[w+28]=b,this.uint8[S+58]=x,e}}ia.prototype.bytesPerElement=60,Xi(ia,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class oa extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,y,v,_,b,x,w,E,S,T,M,k,C,P){const A=this.length;return this.resize(A+1),this.emplace(A,e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,y,v,_,b,x,w,E,S,T,M,k,C,P)}emplace(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,y,v,_,b,x,w,E,S,T,M,k,C,P,A){const O=38*e,I=19*e;return this.int16[O+0]=t,this.int16[O+1]=n,this.int16[O+2]=r,this.float32[I+2]=i,this.float32[I+3]=o,this.int16[O+8]=a,this.int16[O+9]=s,this.int16[O+10]=l,this.int16[O+11]=u,this.int16[O+12]=c,this.int16[O+13]=d,this.uint16[O+14]=h,this.uint16[O+15]=f,this.uint16[O+16]=p,this.uint16[O+17]=m,this.uint16[O+18]=g,this.uint16[O+19]=y,this.uint16[O+20]=v,this.uint16[O+21]=_,this.uint16[O+22]=b,this.uint16[O+23]=x,this.uint16[O+24]=w,this.uint16[O+25]=E,this.uint16[O+26]=S,this.uint16[O+27]=T,this.uint16[O+28]=M,this.uint32[I+15]=k,this.float32[I+16]=C,this.float32[I+17]=P,this.float32[I+18]=A,e}}oa.prototype.bytesPerElement=76,Xi(oa,"StructArrayLayout3i2f6i15ui1ul3f76");class aa extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}aa.prototype.bytesPerElement=4,Xi(aa,"StructArrayLayout1f4");class sa extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=5*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,this.float32[a+4]=o,e}}sa.prototype.bytesPerElement=20,Xi(sa,"StructArrayLayout5f20");class la extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=6*e;return this.uint32[3*e+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,e}}la.prototype.bytesPerElement=12,Xi(la,"StructArrayLayout1ul3ui12");class ua extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}ua.prototype.bytesPerElement=4,Xi(ua,"StructArrayLayout2ui4");class ca extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}ca.prototype.bytesPerElement=2,Xi(ca,"StructArrayLayout1ui2");class da extends jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}da.prototype.bytesPerElement=8,Xi(da,"StructArrayLayout2f8");class ha extends zo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ha.prototype.size=40;class fa extends Jo{get(e){return new ha(this,e)}}Xi(fa,"CollisionBoxArray");class pa extends zo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}pa.prototype.size=60;class ma extends ia{get(e){return new pa(this,e)}}Xi(ma,"PlacedSymbolArray");class ga extends zo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ga.prototype.size=76;class ya extends oa{get(e){return new ga(this,e)}}Xi(ya,"SymbolInstanceArray");class va extends aa{getoffsetX(e){return this.float32[1*e+0]}}Xi(va,"GlyphOffsetArray");class _a extends Uo{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}Xi(_a,"SymbolLineVertexArray");class ba extends zo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ba.prototype.size=12;class xa extends la{get(e){return new ba(this,e)}}Xi(xa,"FeatureIndexArray");class wa extends ua{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}Xi(wa,"FillExtrusionCentroidArray");const Ea=Bo([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Sa=Bo([{name:"a_dash",components:4,type:"Uint16"}]);var Ta={exports:{}},Ma={exports:{}};Ma.exports=function(e,t){var n,r,i,o,a,s,l,u;for(r=e.length-(n=3&e.length),i=t,a=3432918353,s=461845907,u=0;u<r;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var ka=Ma.exports,Ca={exports:{}};Ca.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Pa=ka,Aa=Ca.exports;Ta.exports=Pa,Ta.exports.murmur3=Pa,Ta.exports.murmur2=Aa;var Oa=h(Ta.exports);class Ia{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,r){this.ids.push(La(e)),this.positions.push(t,n,r)}getPositions(e){const t=La(e);let n=0,r=this.ids.length-1;for(;n<r;){const e=n+r>>1;this.ids[e]>=t?r=e:n=e+1}const i=[];for(;this.ids[n]===t;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(e,t){const n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return Da(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(e){const t=new Ia;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function La(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Oa(String(e))}function Da(e,t,n,r){for(;n<r;){const i=e[n+r>>1];let o=n-1,a=r+1;for(;;){do{o++}while(e[o]<i);do{a--}while(e[a]>i);if(o>=a)break;Ra(e,o,a),Ra(t,3*o,3*a),Ra(t,3*o+1,3*a+1),Ra(t,3*o+2,3*a+2)}a-n<r-a?(Da(e,t,n,a),n=a+1):(Da(e,t,a+1,r),r=a)}}function Ra(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}Xi(Ia,"FeaturePositionMap");class Na{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}class za extends Na{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ja extends Na{constructor(e){super(e),this.current=[0,0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}class Ba extends Na{constructor(e){super(e),this.current=Ot.transparent}set(e,t,n){this.fetchUniformLocation(e,t)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}const Fa=new Float32Array(16),Ua=new Float32Array(9),Ga=new Float32Array(4);function Ha(e){return[Ro(255*e.r,255*e.g),Ro(255*e.b,255*e.a)]}class Va{constructor(e,t,n){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=n}setUniform(e,t,n,r,i){t.set(e,i,r.constantOr(this.value))}getBinding(e,t){return"color"===this.type?new Ba(e):new za(e)}}class qa{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,t,n,r,i){const o="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;o&&t.set(e,i,o)}getBinding(e,t){return"u_pattern"===t||"u_dash"===t?new ja(e):new za(e)}}class $a{constructor(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(e,t,n,r,i,o){const a=this.paintVertexArray.length,s=this.expression.evaluate(new wo(0),t,{},i,r,o);this.paintVertexArray.resize(e),this._setPaintValue(a,e,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(e,t,o)}_setPaintValue(e,t,n){if("color"===this.type){const r=Ha(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Wa{constructor(e,t,n,r,i,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,n,r,i,o){const a=this.expression.evaluate(new wo(this.zoom),t,{},i,r,o),s=this.expression.evaluate(new wo(this.zoom+1),t,{},i,r,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,a,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(e,t,o,a)}_setPaintValue(e,t,n,r){if("color"===this.type){const i=Ha(n),o=Ha(r);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t,n,r,i){const o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,a=k(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);t.set(e,i,a)}getBinding(e,t){return new za(e)}}class Za{constructor(e,t,n,r,i){this.expression=e,this.layerId=i,this.paintVertexAttributes=("array"===n?Sa:Ea).members;for(let o=0;o<t.length;++o);this.paintVertexArray=new r}populatePaintArray(e,t,n){const r=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,r,i,o){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(e,t,n,r){if(!r||!n)return;const i=r[n];if(!i)return;const{tl:o,br:a,pixelRatio:s}=i;for(let l=e;l<t;l++)this.paintVertexArray.emplace(l,o[0],o[1],a[0],a[1],s)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Xa{constructor(e,t,n=(()=>!0)){this.binders={},this._buffers=[];const r=[];for(const i in e.paint._values){if(!n(i))continue;const o=e.paint.get(i);if(!(o instanceof Po&&Nr(o.property.specification)))continue;const a=Ja(i,e.type),s=o.value,l=o.property.specification.type,u=!!o.property.useIntegerZoom,c="line-dasharray"===i||i.endsWith("pattern"),d="line-dasharray"===i&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||c){const t=ts(i,l,"source");this.binders[i]=c?new Za(s,a,l,t,e.id):new $a(s,a,l,t),r.push(`/a_${i}`)}else{const e=ts(i,l,"composite");this.binders[i]=new Wa(s,a,l,u,t,e),r.push(`/z_${i}`)}else this.binders[i]=c?new qa(s.value,a):new Va(s.value,a,l),r.push(`/u_${i}`)}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof $a||t instanceof Wa?t.maxValue:0}populatePaintArrays(e,t,n,r,i,o){for(const a in this.binders){const s=this.binders[a];(s instanceof $a||s instanceof Wa||s instanceof Za)&&s.populatePaintArray(e,t,n,r,i,o)}}setConstantPatternPositions(e){for(const t in this.binders){const n=this.binders[t];n instanceof qa&&n.setConstantPatternPositions(e)}}updatePaintArrays(e,t,n,r,i,o){let a=!1;for(const s in e){const l=t.getPositions(s);for(const t of l){const l=n.feature(t.index);for(const n in this.binders){const u=this.binders[n];if((u instanceof $a||u instanceof Wa||u instanceof Za)&&!0===u.expression.isStateDependent){const c=r.paint.get(n);u.expression=c.value,u.updatePaintArray(t.start,t.end,l,e[s],i,o),a=!0}}}}return a}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof Va||n instanceof qa)&&e.push(...n.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof $a||n instanceof Wa||n instanceof Za)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Va||n instanceof qa||n instanceof Wa)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const t=[];for(const n in this.binders){const r=this.binders[n];if(r instanceof Va||r instanceof qa||r instanceof Wa)for(const i of r.uniformNames)t.push({name:i,property:n,binding:r.getBinding(e,i)})}return t}setUniforms(e,t,n,r,i){for(const{name:o,property:a,binding:s}of n)this.binders[a].setUniform(e,s,i,r.get(a),o)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const t=this.binders[e];(t instanceof $a||t instanceof Wa||t instanceof Za)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof $a||n instanceof Wa||n instanceof Za)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof $a||t instanceof Wa||t instanceof Za)&&t.destroy()}}}class Ya{constructor(e,t,n=(()=>!0)){this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new Xa(r,t,n);this.needsUpload=!1,this._featureMap=new Ia,this._bufferOffset=0}populatePaintArrays(e,t,n,r,i,o,a){for(const s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,r,i,o,a);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,r,i){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,r,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Ka={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Ja(e,t){return Ka[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}const Qa={"line-pattern":{source:$o,composite:$o},"fill-pattern":{source:$o,composite:$o},"fill-extrusion-pattern":{source:$o,composite:$o},"line-dasharray":{source:Wo,composite:Wo}},es={color:{source:da,composite:qo},number:{source:aa,composite:da}};function ts(e,t,n){const r=Qa[e];return r&&r[n]||es[t][n]}Xi(Va,"ConstantBinder"),Xi(qa,"PatternConstantBinder"),Xi($a,"SourceExpressionBinder"),Xi(Za,"PatternCompositeBinder"),Xi(Wa,"CompositeExpressionBinder"),Xi(Xa,"ProgramConfiguration",{omit:["_buffers"]}),Xi(Ya,"ProgramConfigurationSet");const ns="-transition";class rs extends Qe{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Co(t.layout)),t.paint)){this._transitionablePaint=new To(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ao(t.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,n={}){null!=t&&this._validate(Ui,`layers.${this.id}.layout.${e}`,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return B(e,ns)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,n={}){if(null!=t&&this._validate(Fi,`layers.${this.id}.paint.${e}`,e,t,n))return!1;if(B(e,ns))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const n=this._transitionablePaint._values[e],r=n.value.isDataDriven(),i=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const o=this._transitionablePaint._values[e].value,a=o.isDataDriven(),s=B(e,"pattern")||"line-dasharray"===e;return a||r||s||this._handleOverridablePaintPropertyUpdate(e,i,o)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),U(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,n,r,i={}){return(!i||!1!==i.validate)&&Hi(this,e.call(Bi,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Po&&Nr(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=di(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const is=Bo([{name:"a_pos",components:2,type:"Int16"}],4),os=Bo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class as{constructor(e=[]){this.segments=e}prepareSegment(e,t,n,r){let i=this.segments[this.segments.length-1];return e>as.MAX_VERTEX_ARRAY_LENGTH&&V(`Max vertices per segment is ${as.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>as.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,r){return new as([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}as.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xi(as,"SegmentVector");var ss=8192;class ls{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Gl?new Gl(e.lng,e.lat):Gl.convert(e),this}setSouthWest(e){return this._sw=e instanceof Gl?new Gl(e.lng,e.lat):Gl.convert(e),this}extend(e){const t=this._sw,n=this._ne;let r,i;if(e instanceof Gl)r=e,i=e;else{if(!(e instanceof ls))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(ls.convert(e)):this.extend(Gl.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(Gl.convert(e)):this;if(r=e._sw,i=e._ne,!r||!i)return this}return t||n?(t.lng=Math.min(r.lng,t.lng),t.lat=Math.min(r.lat,t.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Gl(r.lng,r.lat),this._ne=new Gl(i.lng,i.lat)),this}getCenter(){return new Gl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Gl(this.getWest(),this.getNorth())}getSouthEast(){return new Gl(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:n}=Gl.convert(e);let r=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(e){return!e||e instanceof ls?e:new ls(e)}}var us=1e-6,cs="undefined"!=typeof Float32Array?Float32Array:Array;function ds(){var e=new cs(9);return cs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function hs(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=n[0],f=n[1],p=n[2],m=n[3],g=n[4],y=n[5],v=n[6],_=n[7],b=n[8];return e[0]=h*r+f*a+p*u,e[1]=h*i+f*s+p*c,e[2]=h*o+f*l+p*d,e[3]=m*r+g*a+y*u,e[4]=m*i+g*s+y*c,e[5]=m*o+g*l+y*d,e[6]=v*r+_*a+b*u,e[7]=v*i+_*s+b*c,e[8]=v*o+_*l+b*d,e}function fs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ps(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*a,_=n*l-i*a,b=n*u-o*a,x=r*l-i*s,w=r*u-o*s,E=i*u-o*l,S=c*m-d*p,T=c*g-h*p,M=c*y-f*p,k=d*g-h*m,C=d*y-f*m,P=h*y-f*g,A=v*P-_*C+b*k+x*M-w*T+E*S;return A?(e[0]=(s*P-l*C+u*k)*(A=1/A),e[1]=(i*C-r*P-o*k)*A,e[2]=(m*E-g*w+y*x)*A,e[3]=(h*w-d*E-f*x)*A,e[4]=(l*M-a*P-u*T)*A,e[5]=(n*P-i*M+o*T)*A,e[6]=(g*b-p*E-y*_)*A,e[7]=(c*E-h*b+f*_)*A,e[8]=(a*C-s*M+u*S)*A,e[9]=(r*M-n*C-o*S)*A,e[10]=(p*w-m*b+y*v)*A,e[11]=(d*b-c*w-f*v)*A,e[12]=(s*T-a*k-l*S)*A,e[13]=(n*k-r*T+i*S)*A,e[14]=(m*_-p*x-g*v)*A,e[15]=(c*x-d*_+h*v)*A,e):null}function ms(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*d+w*m,e[1]=_*i+b*l+x*h+w*g,e[2]=_*o+b*u+x*f+w*y,e[3]=_*a+b*c+x*p+w*v,e[4]=(_=n[4])*r+(b=n[5])*s+(x=n[6])*d+(w=n[7])*m,e[5]=_*i+b*l+x*h+w*g,e[6]=_*o+b*u+x*f+w*y,e[7]=_*a+b*c+x*p+w*v,e[8]=(_=n[8])*r+(b=n[9])*s+(x=n[10])*d+(w=n[11])*m,e[9]=_*i+b*l+x*h+w*g,e[10]=_*o+b*u+x*f+w*y,e[11]=_*a+b*c+x*p+w*v,e[12]=(_=n[12])*r+(b=n[13])*s+(x=n[14])*d+(w=n[15])*m,e[13]=_*i+b*l+x*h+w*g,e[14]=_*o+b*u+x*f+w*y,e[15]=_*a+b*c+x*p+w*v,e}function gs(e,t,n){var r,i,o,a,s,l,u,c,d,h,f,p,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=h,e[10]=f,e[11]=p,e[12]=r*m+s*g+d*y+t[12],e[13]=i*m+l*g+h*y+t[13],e[14]=o*m+u*g+f*y+t[14],e[15]=a*m+c*g+p*y+t[15]),e}function ys(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function vs(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*r,e[5]=a*i+c*r,e[6]=s*i+d*r,e[7]=l*i+h*r,e[8]=u*i-o*r,e[9]=c*i-a*r,e[10]=d*i-s*r,e[11]=h*i-l*r,e}function _s(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*r,e[1]=a*i-c*r,e[2]=s*i-d*r,e[3]=l*i-h*r,e[8]=o*r+u*i,e[9]=a*r+c*i,e[10]=s*r+d*i,e[11]=l*r+h*i,e}function bs(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xs(e,t,n){var r,i,o,a=n[0],s=n[1],l=n[2],u=Math.hypot(a,s,l);return u<us?null:(a*=u=1/u,s*=u,l*=u,r=Math.sin(t),i=Math.cos(t),e[0]=a*a*(o=1-i)+i,e[1]=s*a*o+l*r,e[2]=l*a*o-s*r,e[3]=0,e[4]=a*s*o-l*r,e[5]=s*s*o+i,e[6]=l*s*o+a*r,e[7]=0,e[8]=a*l*o+s*r,e[9]=s*l*o-a*r,e[10]=l*l*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ws=ms;function Es(){var e=new cs(3);return cs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ss(e){var t=new cs(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ts(e){return Math.hypot(e[0],e[1],e[2])}function Ms(e,t,n){var r=new cs(3);return r[0]=e,r[1]=t,r[2]=n,r}function ks(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Cs(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ps(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function As(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Os(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Is(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Ls(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Ds(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Rs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ns(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}function zs(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function js(e,t,n){var r=n[0],i=n[1],o=n[2],a=t[0],s=t[1],l=t[2],u=i*l-o*s,c=o*a-r*l,d=r*s-i*a,h=i*d-o*c,f=o*u-r*d,p=r*c-i*u,m=2*n[3];return c*=m,d*=m,f*=2,p*=2,e[0]=a+(u*=m)+(h*=2),e[1]=s+c+f,e[2]=l+d+p,e}var Bs,Fs=Cs,Us=Ps,Gs=Ts;function Hs(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Vs(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e}function qs(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function $s(){var e=new cs(4);return cs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ws(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Zs(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s,e}function Xs(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s,e}Es(),Bs=new cs(4),cs!=Float32Array&&(Bs[0]=0,Bs[1]=0,Bs[2]=0,Bs[3]=0);var Ys=Vs;Es(),Ms(1,0,0),Ms(0,1,0),$s(),$s(),ds();const Ks=Bo([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Js}=Ks,Qs=Bo([{name:"a_pos_3",components:3,type:"Int16"}]);var el=Bo([{name:"a_pos",type:"Int16",components:2}]);class tl{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,n){const r=Rs(t,this.dir);if(Math.abs(r)<1e-6)return!1;const i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(e,t,n){if(function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return Math.abs(n-o)<=us*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=us*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=us*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;const[r,i,o]=this.dir,a=this.pos[0]-e[0],s=this.pos[1]-e[1],l=this.pos[2]-e[2],u=r*r+i*i+o*o,c=2*(a*r+s*i+l*o),d=c*c-4*u*(a*a+s*s+l*l-t*t);if(d<0){const e=Math.max(-c/2,0),u=a+r*e,d=s+i*e,h=l+o*e,f=Math.hypot(u,d,h);return n[0]=u*t/f,n[1]=d*t/f,n[2]=h*t/f,!1}{const e=(-c-Math.sqrt(d))/(2*u);if(e<0){const e=Math.hypot(a,s,l);return n[0]=a*t/e,n[1]=s*t/e,n[2]=l*t/e,!1}return n[0]=a+r*e,n[1]=s+i*e,n[2]=l+o*e,!0}}}class nl{constructor(e,t,n,r,i){this.TL=e,this.TR=t,this.BR=n,this.BL=r,this.horizon=i}static fromInvProjectionMatrix(e,t,n){const r=[-1,1,1],i=[1,1,1],o=[1,-1,1],a=[-1,-1,1],s=zs(r,r,e),l=zs(i,i,e),u=zs(o,o,e),c=zs(a,a,e);return new nl(s,l,u,c,t/n)}}class rl{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,n,r){const i=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=qs([],n,e),a=1/o[3]/t*i;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(o,o,[a,a,r?1/o[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=Ds([],Ns([],Fs([],o[e[0]],o[e[1]]),Fs([],o[e[2]],o[e[1]]))),n=-Rs(t,o[e[1]]);return t.concat(n)}));return new rl(o,a)}}class il{static fromPoints(e){const t=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(const r of e)As(t,t,r),Os(n,n,r);return new il(t,n)}static applyTransform(e,t){const n=e.getCorners();for(let r=0;r<n.length;++r)zs(n[r],n[r],t);return il.fromPoints(n)}constructor(e,t){this.min=e,this.max=t,this.center=Is([],ks([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],n=Ss(this.min),r=Ss(this.max);for(let i=0;i<t.length;i++)n[i]=t[i]?this.min[i]:this.center[i],r[i]=t[i]?this.center[i]:this.max[i];return r[2]=this.max[2],new il(n,r)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let n=!0;for(let r=0;r<e.planes.length;r++){const i=e.planes[r];let o=0;for(let e=0;e<t.length;e++)o+=Rs(i,t[e])+i[3]>=0;if(0===o)return 0;o!==t.length&&(n=!1)}if(n)return 2;for(let r=0;r<3;r++){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][r]-this.min[r];t=Math.min(t,o),n=Math.max(n,o)}if(n<0||t>this.max[r]-this.min[r])return 0}return 1}}const ol=5,al=6,sl=ss/Math.PI/2,ll=16383,ul=64,cl=[ul,32,16],dl=-sl,hl=sl,fl=[new il([dl,dl,dl],[hl,hl,hl]),new il([dl,dl,dl],[0,0,hl]),new il([0,dl,dl],[hl,0,hl]),new il([dl,0,dl],[0,hl,hl]),new il([0,0,dl],[hl,hl,hl])];function pl(e){return e*sl/Bl}function ml(e,t,n,r=!0){const i=Is([],e._camera.position,e.worldSize),o=[t,n,1,1];qs(o,o,e.pixelMatrixInverse),Hs(o,o,1/o[3]);const a=Ds([],Fs([],o,i)),s=e.globeMatrix,l=[s[12],s[13],s[14]],u=Fs([],l,i),c=Ts(u),d=Ds([],u),h=e.worldSize/(2*Math.PI),f=Rs(d,a),p=Math.asin(h/c);if(p<Math.acos(f)){if(!r)return null;const e=[],t=[];Is(e,a,c/f),Ds(t,Fs(t,e,u)),Ds(a,ks(a,u,Is(a,t,Math.tan(p)*c)))}const m=[];new tl(i,a).closestPointOnSphere(l,h,m);const g=Ds([],J(s,0)),y=Ds([],J(s,1)),v=Ds([],J(s,2)),_=Rs(g,m),b=Rs(y,m),x=Rs(v,m),E=w(Math.asin(-b/h));let S=w(Math.atan2(_,x));S=e.center.lng+function(e,t){const n=(t-e+180)%360-180;return n<-180?n+360:n}(e.center.lng,S);const T=Vl(S),M=k(ql(E),0,1);return new Jl(T,M)}class gl{constructor(e,t,n){this.a=Fs([],e,n),this.b=Fs([],t,n),this.center=n;const r=Ds([],this.a),i=Ds([],this.b);this.angle=Math.acos(Rs(r,i))}}function yl(e,t){if(0===e.angle)return null;let n;return n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),n<0||n>1?null:function(e,t,n,r){const i=Math.sin(n);return e*(Math.sin((1-r)*n)/i)+t*(Math.sin(r*n)/i)}(e.a[t],e.b[t],e.angle,k(n,0,1))+e.center[t]}function vl(e){if(e.z<=1)return fl[e.z+2*e.y+e.x];const t=Sl(El(e));return il.fromPoints(t)}function _l(e,t,n){return Is(e,e,1-n),Ls(e,e,t,n)}function bl(e,t){const n=Ll(t.zoom);if(0===n)return vl(e);const r=El(e),i=Sl(r),o=Vl(r.getWest())*t.worldSize,a=Vl(r.getEast())*t.worldSize,s=ql(r.getNorth())*t.worldSize,l=ql(r.getSouth())*t.worldSize,u=[o,s,0],c=[a,s,0],d=[o,l,0],h=[a,l,0],f=ps([],t.globeMatrix);return zs(u,u,f),zs(c,c,f),zs(d,d,f),zs(h,h,f),i[0]=_l(i[0],d,n),i[1]=_l(i[1],h,n),i[2]=_l(i[2],c,n),i[3]=_l(i[3],u,n),il.fromPoints(i)}function xl(e,t,n){for(const r of e)zs(r,r,t),Is(r,r,n)}function wl(e,t,n){const r=t/e.worldSize,i=e.globeMatrix;if(n.z<=1){const e=vl(n).getCorners();return xl(e,i,r),il.fromPoints(e)}const o=El(n),a=Sl(o);xl(a,i,r);const s=Number.MAX_VALUE,l=[-s,-s,-s],u=[s,s,s];if(o.contains(e.center)){for(const e of a)As(u,u,e),Os(l,l,e);l[2]=0;const t=e.point,n=[t.x*r,t.y*r,0];return As(u,u,n),Os(l,l,n),new il(u,l)}const c=[i[12]*r,i[13]*r,i[14]*r],d=o.getCenter(),h=k(e.center.lat,-Yl,Yl),f=k(d.lat,-Yl,Yl),p=Vl(e.center.lng),m=ql(h);let g=p-Vl(d.lng);const y=m-ql(f);g>.5?g-=1:g<-.5&&(g+=1);let v=0;Math.abs(g)>Math.abs(y)?v=g>=0?1:3:(v=y>=0?0:2,Ls(c,c,[i[4]*r,i[5]*r,i[6]*r],-Math.sin(x(y>=0?o.getSouth():o.getNorth()))*sl));const _=a[v],b=a[(v+1)%4],w=new gl(_,b,c),E=[yl(w,0)||_[0],yl(w,1)||_[1],yl(w,2)||_[2]],S=Ll(e.zoom);if(S>0){const r=function({x:e,y:t,z:n},r,i,o,a){const s=1/(1<<n);let l=e*s,u=l+s,c=t*s,d=c+s,h=0;const f=(l+u)/2-o;return f>.5?h=-1:f<-.5&&(h=1),l=((l+h)*r-(o*=r))*i+o,u=((u+h)*r-o)*i+o,c=(c*r-(a*=r))*i+a,d=(d*r-a)*i+a,[[l,d,0],[u,d,0],[u,c,0],[l,c,0]]}(n,t,e._pixelsPerMercatorPixel,p,m);for(let e=0;e<a.length;e++)_l(a[e],r[e],S);const i=ks([],r[v],r[(v+1)%4]);Is(i,i,.5),_l(E,i,S)}for(const x of a)As(u,u,x),Os(l,l,x);return u[2]=Math.min(_[2],b[2]),As(u,u,E),Os(l,l,E),new il(u,l)}function El({x:e,y:t,z:n}){const r=1/(1<<n),i=new Gl(Wl(e*r),Zl((t+1)*r)),o=new Gl(Wl((e+1)*r),Zl(t*r));return new ls(i,o)}function Sl(e){const t=x(e.getNorth()),n=x(e.getSouth()),r=Math.cos(t),i=Math.cos(n),o=Math.sin(t),a=Math.sin(n),s=e.getWest(),l=e.getEast();return[Tl(i,a,s),Tl(i,a,l),Tl(r,o,l),Tl(r,o,s)]}function Tl(e,t,n,r=sl){return n=x(n),[e*Math.sin(n)*r,-t*r,e*Math.cos(n)*r]}function Ml(e,t,n){return Tl(Math.cos(x(e)),Math.sin(x(e)),t,n)}function kl(e,t,n,r){const i=1<<n.z,o=(e/ss+n.x)/i;return Ml(Zl((t/ss+n.y)/i),Wl(o),r)}function Cl({min:e,max:t}){return ll/Math.max(t[0]-e[0],t[1]-e[1],t[2]-e[2])}const Pl=new Float64Array(16);function Al(e){const t=Cl(e),n=bs(Pl,[t,t,t]);return gs(n,n,((r=[])[0]=-(i=e.min)[0],r[1]=-i[1],r[2]=-i[2],r));var r,i}function Ol(e){const t=(r=e.min,(n=Pl)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n);var n,r;const i=1/Cl(e);return ys(t,t,[i,i,i])}function Il(e,t,n,r,i){const o=function(e){const t=ss/(2*Math.PI);return e/(2*Math.PI)/t}(n),a=[e,t,-n/(2*Math.PI)],s=fs(new Float64Array(16));return gs(s,s,a),ys(s,s,[o,o,o]),vs(s,s,x(-i)),_s(s,s,x(-r)),s}function Ll(e){return C(ol,al,e)}function Dl(e,t){const n=Ml(t.lat,t.lng),r=function(e){const t=Ml(e._center.lat,e._center.lng);let n=Ns([],Ms(0,1,0),t);const r=xs([],-e.angle,t);n=zs(n,n,r),xs(r,-e._pitch,n);const i=Ds([],t);return Is(i,i,pl(e.cameraToCenterDistance/e.pixelsPerMeter)),zs(i,i,r),ks([],t,i)}(e);return a=(i=Cs([],r,n))[0],s=i[1],l=i[2],u=(o=n)[0],c=o[1],d=o[2],f=(h=Math.sqrt(a*a+s*s+l*l)*Math.sqrt(u*u+c*c+d*d))&&Rs(i,o)/h,Math.acos(Math.min(Math.max(f,-1),1));var i,o,a,s,l,u,c,d,h,f}function Rl(e,t){return Dl(e,t)>Math.PI/2*1.01}const Nl=x(85),zl=Math.cos(Nl),jl=Math.sin(Nl),Bl=6371008.8,Fl=2*Math.PI*Bl;class Ul{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ul(P(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return Bl*Math.acos(Math.min(i,1))}toBounds(e=0){const t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new ls(new Ul(this.lng-n,this.lat-t),new Ul(this.lng+n,this.lat+t))}toEcef(e){const t=pl(e);return Ml(this.lat,this.lng,sl+t)}static convert(e){if(e instanceof Ul)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Ul(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Ul(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Gl=Ul;function Hl(e){return Fl*Math.cos(e*Math.PI/180)}function Vl(e){return(180+e)/360}function ql(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function $l(e,t){return e/Hl(t)}function Wl(e){return 360*e-180}function Zl(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Xl(e,t){return e*Hl(Zl(t))}const Yl=85.051129;function Kl(e){return 1/Math.cos(e*Math.PI/180)}class Jl{constructor(e,t,n=0){this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e,t=0){const n=Gl.convert(e);return new Jl(Vl(n.lng),ql(n.lat),$l(t,n.lat))}toLngLat(){return new Gl(Wl(this.x),Zl(this.y))}toAltitude(){return Xl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Fl*Kl(Zl(this.y))}}function Ql(e,t,n,r,i,o,a,s,l){const u=(t+r)/2,c=(n+i)/2,d=new v(u,c);s(d),function(e,t,n,r,i,o){const a=n-i,s=r-o;return Math.abs((r-t)*a-(n-e)*s)/Math.hypot(a,s)}(d.x,d.y,o.x,o.y,a.x,a.y)>=l?(Ql(e,t,n,u,c,o,d,s,l),Ql(e,u,c,r,i,d,a,s,l)):e.push(a)}function eu(e,t,n){let r=e[0],i=r.x,o=r.y;t(r);const a=[r];for(let s=1;s<e.length;s++){const l=e[s],{x:u,y:c}=l;t(l),Ql(a,i,o,u,c,r,l,t,n),i=u,o=c,r=l}return a}function tu(e,t,n,r){if(r(t,n)){const i=t.add(n)._mult(.5);tu(e,t,i,r),tu(e,i,n,r)}else e.push(n)}function nu(e,t){let n=e[0];const r=[n];for(let i=1;i<e.length;i++){const o=e[i];tu(r,n,o,t),n=o}return r}const ru=Math.pow(2,14)-1,iu=-ru-1;function ou(e,t){const n=Math.round(e.x*t),r=Math.round(e.y*t);return e.x=k(n,iu,ru),e.y=k(r,iu,ru),(n<e.x||n>e.x+1||r<e.y||r>e.y+1)&&V("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function au(e,t,n){const r=e.loadGeometry(),i=e.extent,o=ss/i;if(t&&n&&n.projection.isReprojectedInTileSpace){const o=1<<t.z,{scale:a,x:s,y:l,projection:u}=n,c=e=>{const n=Wl((t.x+e.x/i)/o),r=Zl((t.y+e.y/i)/o),c=u.project(n,r);e.x=(c.x*a-s)*i,e.y=(c.y*a-l)*i};for(let t=0;t<r.length;t++)if(1!==e.type)r[t]=eu(r[t],c,1);else{const e=[];for(const n of r[t])n.x<0||n.x>=i||n.y<0||n.y>=i||(c(n),e.push(n));r[t]=e}}for(const a of r)for(const e of a)ou(e,o);return r}function su(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?au(e):[]}}function lu(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}function uu(e,t,n){const r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}class cu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Uo,this.indexArray=new ra,this.segments=new as,this.programConfigurations=new Ya(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){const i=this.layers[0],o=[];let a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));for(const{feature:l,id:u,index:c,sourceLayerIndex:d}of e){const e=this.layers[0]._featureFilter.needGeometry,t=su(l,e);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),t,n))continue;const i=a?a.evaluate(t,{},n):void 0,s={id:u,properties:l.properties,type:l.type,sourceLayerIndex:d,index:c,geometry:e?t.geometry:au(l,n,r),patterns:{},sortKey:i};o.push(s)}a&&o.sort(((e,t)=>e.sortKey-t.sortKey));let s=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new Zo,s=r.projection);for(const l of o){const{geometry:r,index:i,sourceLayerIndex:o}=l,a=e[i].feature;this.addFeature(l,r,i,t.availableImages,n,s),t.featureIndex.insert(a,r,i,o,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,is.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,os.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,t,n,r,i,o){for(const a of t)for(const t of a){const n=t.x,r=t.y;if(n<0||n>=ss||r<0||r>=ss)continue;if(o){const e=o.projectTilePoint(n,r,i),t=o.upVector(i,n,r),a=this.globeExtVertexArray;uu(a,e,t),uu(a,e,t),uu(a,e,t),uu(a,e,t)}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),s=a.vertexLength;lu(this.layoutVertexArray,n,r,-1,-1),lu(this.layoutVertexArray,n,r,1,-1),lu(this.layoutVertexArray,n,r,1,1),lu(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r,i)}}function du(e,t){for(let n=0;n<e.length;n++)if(bu(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(bu(e,t[n]))return!0;return!!mu(e,t)}function hu(e,t,n){return!!bu(e,t)||!!yu(t,e,n)}function fu(e,t){if(1===e.length)return _u(t,e[0]);for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++)if(bu(e,r[t]))return!0}for(let n=0;n<e.length;n++)if(_u(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(mu(e,t[n]))return!0;return!1}function pu(e,t,n){if(e.length>1){if(mu(e,t))return!0;for(let r=0;r<t.length;r++)if(yu(t[r],e,n))return!0}for(let r=0;r<e.length;r++)if(yu(e[r],t,n))return!0;return!1}function mu(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)if(gu(r,i,t[e],t[e+1]))return!0}return!1}function gu(e,t,n,r){return q(e,n,r)!==q(t,n,r)&&q(e,t,n)!==q(e,t,r)}function yu(e,t,n){const r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(let i=1;i<t.length;i++)if(vu(e,t[i-1],t[i])<r)return!0;return!1}function vu(e,t,n){const r=t.distSqr(n);if(0===r)return e.distSqr(t);const i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function _u(e,t){let n,r,i,o=!1;for(let a=0;a<e.length;a++){n=e[a];for(let e=0,a=n.length-1;e<n.length;a=e++)r=n[e],i=n[a],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function bu(e,t){let n=!1;for(let r=0,i=e.length-1;r<e.length;i=r++){const o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function xu(e,t,n,r,i){for(const a of e)if(t<=a.x&&n<=a.y&&r>=a.x&&i>=a.y)return!0;const o=[new v(t,n),new v(t,i),new v(r,i),new v(r,n)];if(e.length>2)for(const a of o)if(bu(e,a))return!0;for(let a=0;a<e.length-1;a++)if(wu(e[a],e[a+1],o))return!0;return!1}function wu(e,t,n){const r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;const o=q(e,t,n[0]);return o!==q(e,t,n[1])||o!==q(e,t,n[2])||o!==q(e,t,n[3])}function Eu(e,t,n){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Su(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Tu(e,t,n,r,i){if(!t[0]&&!t[1])return e;const o=v.convert(t)._mult(i);"viewport"===n&&o._rotate(-r);const a=[];for(let s=0;s<e.length;s++)a.push(e[s].sub(o));return a}function Mu(e,t,n,r){const i=v.convert(e)._mult(r);return"viewport"===t&&i._rotate(-n),i}Xi(cu,"CircleBucket",{omit:["layers"]});const ku=new Do({"circle-sort-key":new Io(et.layout_circle["circle-sort-key"])});var Cu={paint:new Do({"circle-radius":new Io(et.paint_circle["circle-radius"]),"circle-color":new Io(et.paint_circle["circle-color"]),"circle-blur":new Io(et.paint_circle["circle-blur"]),"circle-opacity":new Io(et.paint_circle["circle-opacity"]),"circle-translate":new Oo(et.paint_circle["circle-translate"]),"circle-translate-anchor":new Oo(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Oo(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Oo(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Io(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Io(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Io(et.paint_circle["circle-stroke-opacity"])}),layout:ku};function Pu(e,t,n,r,i,o,a,s,l){if(o&&e.queryGeometry.isAboveHorizon)return!1;o&&(l*=e.pixelToTileUnitsFactor);const u=e.tileID.canonical,c=n.projection.upVectorScale(u,n.center.lat,n.worldSize).metersToTile;for(const d of t)for(const t of d){const d=t.add(s),h=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(d.x,d.y,!0):0,f=n.projection.projectTilePoint(d.x,d.y,u);if(h>0){const e=n.projection.upVector(u,d.x,d.y);f.x+=e[0]*c*h,f.y+=e[1]*c*h,f.z+=e[2]*c*h}const p=o?d:Au(f.x,f.y,f.z,r),m=o?e.tilespaceRays.map((e=>Lu(e,h))):e.queryGeometry.screenGeometry,g=qs([],[f.x,f.y,f.z,1],r);if(!a&&o?l*=g[3]/n.cameraToCenterDistance:a&&!o&&(l*=n.cameraToCenterDistance/g[3]),o){const e=Zl((t.y/ss+u.y)/(1<<u.z));l/=n.projection.pixelsPerMeter(e,1)/$l(1,e)}if(hu(m,p,l))return!0}return!1}function Au(e,t,n,r){const i=qs([],[e,t,n,1],r);return new v(i[0]/i[3],i[1]/i[3])}const Ou=Ms(0,0,0),Iu=Ms(0,0,1);function Lu(e,t){const n=Es();return Ou[2]=t,e.intersectsPlane(Ou,Iu,n),new v(n[0],n[1])}class Du extends cu{}function Ru(e,{width:t,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*n*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(t*n*r);return e.width=t,e.height=n,e.data=i,e}function Nu(e,t,n){const{width:r,height:i}=t;r===e.width&&i===e.height||(zu(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=t.data)}function zu(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;for(let l=0;l<i.height;l++){const u=((n.y+l)*e.width+n.x)*o,c=((r.y+l)*t.width+r.x)*o;for(let e=0;e<i.width*o;e++)s[c+e]=a[u+e]}return t}Xi(Du,"HeatmapBucket",{omit:["layers"]});class ju{constructor(e,t){Ru(this,e,1,t)}resize(e){Nu(this,new ju(e),1)}clone(){return new ju({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){zu(e,t,n,r,i,1)}}class Bu{constructor(e,t){Ru(this,e,4,t)}resize(e){Nu(this,new Bu(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Bu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){zu(e,t,n,r,i,4)}}Xi(ju,"AlphaImage"),Xi(Bu,"RGBAImage");var Fu={paint:new Do({"heatmap-radius":new Io(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Io(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Oo(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Lo(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Oo(et.paint_heatmap["heatmap-opacity"])})};function Uu(e){const t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new Bu({width:n,height:r}),o=(n,r,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(e.clips)for(let a=0,s=0;a<r;++a,s+=4*n)for(let t=0,r=0;t<n;t++,r+=4){const i=t/(n-1),{start:l,end:u}=e.clips[a];o(s,r,l*(1-i)+u*i)}else for(let a=0,s=0;a<n;a++,s+=4)o(0,s,a/(n-1));return i}var Gu={paint:new Do({"hillshade-illumination-direction":new Oo(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Oo(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Oo(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Oo(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Oo(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Oo(et.paint_hillshade["hillshade-accent-color"])})};const Hu=Bo([{name:"a_pos",components:2,type:"Int16"}],4),{members:Vu}=Hu;var qu={exports:{}};function $u(e,t,n){n=n||2;var r,i,o,a,s,l,u,c=t&&t.length,d=c?t[0]*n:e.length,h=Wu(e,0,d,n,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Wu(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(ic(a));for(s.sort(ec),i=0;i<s.length;i++)n=tc(s[i],n);return n}(e,t,h,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<d;p+=n)(s=e[p])<r&&(r=s),(l=e[p+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?32767/u:0}return Xu(h,f,n,r,i,u,0),f}function Wu(e,t,n,r,i){var o,a;if(i===yc(e,t,n,r)>0)for(o=t;o<n;o+=r)a=pc(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=pc(o,e[o],e[o+1],a);return a&&lc(a,a.next)&&(mc(a),a=a.next),a}function Zu(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!lc(r,r.next)&&0!==sc(r.prev,r,r.next))r=r.next;else{if(mc(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Xu(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=rc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Ku(e,r,i,o):Yu(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),mc(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?Xu(e=Ju(Zu(e),t,n),t,n,r,i,o,2):2===a&&Qu(e,t,n,r,i,o):Xu(Zu(e),t,n,r,i,o,1);break}}}function Yu(e){var t=e.prev,n=e,r=e.next;if(sc(t,n,r)>=0)return!1;for(var i=t.x,o=n.x,a=r.x,s=t.y,l=n.y,u=r.y,c=i<o?i<a?i:a:o<a?o:a,d=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,f=s>l?s>u?s:u:l>u?l:u,p=r.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=d&&p.y<=f&&oc(i,s,o,l,a,u,p.x,p.y)&&sc(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Ku(e,t,n,r){var i=e.prev,o=e,a=e.next;if(sc(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,d=o.y,h=a.y,f=s<l?s<u?s:u:l<u?l:u,p=c<d?c<h?c:h:d<h?d:h,m=s>l?s>u?s:u:l>u?l:u,g=c>d?c>h?c:h:d>h?d:h,y=rc(f,p,t,n,r),v=rc(m,g,t,n,r),_=e.prevZ,b=e.nextZ;_&&_.z>=y&&b&&b.z<=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&oc(s,c,l,d,u,h,_.x,_.y)&&sc(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==a&&oc(s,c,l,d,u,h,b.x,b.y)&&sc(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&oc(s,c,l,d,u,h,_.x,_.y)&&sc(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=v;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==a&&oc(s,c,l,d,u,h,b.x,b.y)&&sc(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Ju(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!lc(i,o)&&uc(i,r,r.next,o)&&hc(i,o)&&hc(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),mc(r),mc(r.next),r=e=o),r=r.next}while(r!==e);return Zu(r)}function Qu(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&ac(a,s)){var l=fc(a,s);return a=Zu(a,a.next),l=Zu(l,l.next),Xu(a,t,n,r,i,o,0),void Xu(l,t,n,r,i,o,0)}s=s.next}a=a.next}while(a!==e)}function ec(e,t){return e.x-t.x}function tc(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,u=n,c=n.x,d=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&oc(o<d?i:a,o,c,d,o<d?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),hc(r,e)&&(l<h||l===h&&(r.x>n.x||r.x===n.x&&nc(n,r)))&&(n=r,h=l)),r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var r=fc(n,e);return Zu(r,r.next),Zu(n,n.next)}function nc(e,t){return sc(e.prev,e,t.prev)<0&&sc(t.next,e,e.next)<0}function rc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ic(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function oc(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function ac(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&uc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(hc(e,t)&&hc(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(sc(e.prev,e,t.prev)||sc(e,t.prev,t))||lc(e,t)&&sc(e.prev,e,e.next)>0&&sc(t.prev,t,t.next)>0)}function sc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function lc(e,t){return e.x===t.x&&e.y===t.y}function uc(e,t,n,r){var i=dc(sc(e,t,n)),o=dc(sc(e,t,r)),a=dc(sc(n,r,e)),s=dc(sc(n,r,t));return i!==o&&a!==s||!(0!==i||!cc(e,n,t))||!(0!==o||!cc(e,r,t))||!(0!==a||!cc(n,e,r))||!(0!==s||!cc(n,t,r))}function cc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function dc(e){return e>0?1:e<0?-1:0}function hc(e,t){return sc(e.prev,e,e.next)<0?sc(e,t,e.next)>=0&&sc(e,e.prev,t)>=0:sc(e,t,e.prev)<0||sc(e,e.next,t)<0}function fc(e,t){var n=new gc(e.i,e.x,e.y),r=new gc(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function pc(e,t,n,r){var i=new gc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function mc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function gc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yc(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}qu.exports=$u,qu.exports.default=$u,$u.deviation=function(e,t,n,r){var i=t&&t.length,o=Math.abs(yc(e,0,i?t[0]*n:e.length,n));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(yc(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n));var l=0;for(a=0;a<r.length;a+=3){var u=r[a]*n,c=r[a+1]*n,d=r[a+2]*n;l+=Math.abs((e[u]-e[d])*(e[c+1]-e[u+1])-(e[u]-e[c])*(e[d+1]-e[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},$u.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&n.holes.push(r+=e[i-1].length)}return n};var vc=h(qu.exports);function _c(e,t,n,r,i){bc(e,t,n||0,r||e.length-1,i||wc)}function bc(e,t,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);bc(e,t,Math.max(n,Math.floor(t-a*l/o+u)),Math.min(r,Math.floor(t+(o-a)*l/o+u)),i)}var c=e[t],d=n,h=r;for(xc(e,n,t),i(e[r],c)>0&&xc(e,n,r);d<h;){for(xc(e,d,h),d++,h--;i(e[d],c)<0;)d++;for(;i(e[h],c)>0;)h--}0===i(e[n],c)?xc(e,n,h):xc(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function xc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function wc(e,t){return e<t?-1:e>t?1:0}function Ec(e,t){const n=e.length;if(n<=1)return[e];const r=[];let i,o;for(let a=0;a<n;a++){const t=$(e[a]);0!==t&&(e[a].area=Math.abs(t),void 0===o&&(o=t<0),o===t<0?(i&&r.push(i),i=[e[a]]):i.push(e[a]))}if(i&&r.push(i),t>1)for(let a=0;a<r.length;a++)r[a].length<=t||(_c(r[a],t,1,r[a].length-1,Sc),r[a]=r[a].slice(0,t));return r}function Sc(e,t){return t.area-e.area}function Tc(e,t,n){const r=n.patternDependencies;let i=!1;for(const o of t){const t=o.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const n=t.constantOr(null);n&&(i=!0,r[n]=!0)}return i}function Mc(e,t,n,r,i){const o=i.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r},n,{},i.availableImages);e=e&&e.name?e.name:e,o[e]=!0,n.patterns[a.id]=e}}return n}class kc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Uo,this.indexArray=new ra,this.indexArray2=new ua,this.programConfigurations=new Ya(e.layers,e.zoom),this.segments=new as,this.segments2=new as,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.projection=e.projection}populate(e,t,n,r){this.hasPattern=Tc("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:u}of e){const e=this.layers[0]._featureFilter.needGeometry,c=su(a,e);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),c,n))continue;const d=i?i.evaluate(c,{},n,t.availableImages):void 0,h={id:s,properties:a.properties,type:a.type,sourceLayerIndex:u,index:l,geometry:e?c.geometry:au(a,n,r),patterns:{},sortKey:d};o.push(h)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const a of o){const{geometry:r,index:i,sourceLayerIndex:o}=a;if(this.hasPattern){const e=Mc("fill",this.layers,a,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(a,r,i,n,{},t.availableImages);t.featureIndex.insert(e[i].feature,r,i,o,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Vu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,r,i,o=[]){for(const a of Ec(t,500)){let e=0;for(const s of a)e+=s.length;const t=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=t.vertexLength,r=[],i=[];for(const s of a){if(0===s.length)continue;s!==a[0]&&i.push(r.length/2);const e=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),t=e.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(t+s.length-1,t),r.push(s[0].x),r.push(s[0].y);for(let n=1;n<s.length;n++)this.layoutVertexArray.emplaceBack(s[n].x,s[n].y),this.indexArray2.emplaceBack(t+n-1,t+n),r.push(s[n].x),r.push(s[n].y);e.vertexLength+=s.length,e.primitiveLength+=s.length}const o=vc(r,i);for(let a=0;a<o.length;a+=3)this.indexArray.emplaceBack(n+o[a],n+o[a+1],n+o[a+2]);t.vertexLength+=e,t.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}}Xi(kc,"FillBucket",{omit:["layers","patternFeatures"]});const Cc=new Do({"fill-sort-key":new Io(et.layout_fill["fill-sort-key"])});var Pc={paint:new Do({"fill-antialias":new Oo(et.paint_fill["fill-antialias"]),"fill-opacity":new Io(et.paint_fill["fill-opacity"]),"fill-color":new Io(et.paint_fill["fill-color"]),"fill-outline-color":new Io(et.paint_fill["fill-outline-color"]),"fill-translate":new Oo(et.paint_fill["fill-translate"]),"fill-translate-anchor":new Oo(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Io(et.paint_fill["fill-pattern"])}),layout:Cc};const Ac=Bo([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Oc=Bo([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Ic=Bo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Lc}=Ac;var Dc={},Rc=g,Nc=zc;function zc(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(jc,this,t)}function jc(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Bc(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)r+=((n=e[a]).x-(t=e[i]).x)*(t.y+n.y);return r}zc.types=["Unknown","Point","LineString","Polygon"],zc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=[];e.pos<n;){if(i<=0){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new Rc(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},zc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},zc.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=zc.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(r=0;r<l.length;r++)d[r]=l[r][0];c(l=d);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=Bc(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)c(l[r][i])}1===l.length?l=l[0]:u="Multi"+u;var h={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Fc=Nc,Uc=Gc;function Gc(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Hc,this,t),this.length=this._features.length}function Hc(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}Gc.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Fc(this._pbf,t,this.extent,this._keys,this._values)};var Vc=Uc;function qc(e,t,n){if(3===e){var r=new Vc(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var $c=Dc.VectorTile=function(e,t){this.layers=e.readFields(qc,{},t)},Wc=Dc.VectorTileFeature=Nc;function Zc(e,t,n,r){const i=[],o=0===r?(e,t,n,r,i,o)=>{e.push(new v(o,n+(o-t)/(r-t)*(i-n)))}:(e,t,n,r,i,o)=>{e.push(new v(t+(o-n)/(i-n)*(r-t),o))};for(const a of e){const e=[];for(const i of a){if(i.length<=2)continue;const a=[];for(let e=0;e<i.length-1;e++){const s=i[e].x,l=i[e].y,u=i[e+1].x,c=i[e+1].y,d=0===r?s:l,h=0===r?u:c;d<t?h>t&&o(a,s,l,u,c,t):d>n?h<n&&o(a,s,l,u,c,n):a.push(i[e]),h<t&&d>=t&&o(a,s,l,u,c,t),h>n&&d<=n&&o(a,s,l,u,c,n)}let s=i[i.length-1];const l=0===r?s.x:s.y;l>=t&&l<=n&&a.push(s),a.length&&(s=a[a.length-1],a[0].x===s.x&&a[0].y===s.y||a.push(a[0]),e.push(a))}e.length&&i.push(e)}return i}Dc.VectorTileLayer=Uc;const Xc=Wc.types,Yc=Math.pow(2,13);function Kc(e,t,n,r,i,o,a,s){e.emplaceBack((t<<1)+a,(n<<1)+o,(Math.floor(r*Yc)<<1)+i,Math.round(s))}function Jc(e,t,n){const r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}class Qc{constructor(){this.acc=new v(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new v(e.x,e.y),this.max=new v(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);const n=this.min,r=this.max;e.x<n.x?n.x=e.x:e.x>r.x&&(r.x=e.x),e.y<n.y?n.y=e.y:e.y>r.y&&(r.y=e.y),((0===e.x||e.x===ss)&&e.x===t.x)!=((0===e.y||e.y===ss)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,In(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>ss!=e.x>ss&&this.addBorderIntersection(1,In(t.y,e.y,(ss-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,In(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>ss!=e.y>ss&&this.addBorderIntersection(3,In(t.x,e.x,(ss-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{const n=0===e.y?2:3;this.addBorderIntersection(n,t.x),this.addBorderIntersection(n,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new v(0,0)}span(){return new v(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class ed{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new Ho,this.centroidVertexArray=new wa,this.indexArray=new ra,this.programConfigurations=new Ya(e.layers,e.zoom),this.segments=new as,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,n,r){this.features=[],this.hasPattern=Tc("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/ss/(1<<e.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:o,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=su(i,e);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),l,n))continue;const u={id:o,sourceLayerIndex:s,index:a,geometry:e?l.geometry:au(i,n,r),properties:i.properties,type:i.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(Mc("fill-extrusion",this.layers,u,this.zoom,t)):this.addFeature(u,u.geometry,a,n,{},t.availableImages,r),t.featureIndex.insert(i,u.geometry,a,s,this.index,c)}this.sortBorders()}addFeatures(e,t,n,r,i){for(const o of this.features){const{geometry:e}=o;this.addFeature(o,e,o.index,t,n,r,i)}this.sortBorders()}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Lc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Ic.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Oc.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r,i,o,a){const s=[new v(0,0),new v(ss,ss)],l=a.projection,u="globe"===l.name,c=this.enableTerrain&&!u?new Qc:null,d="Polygon"===Xc[e.type];u&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Zo);const h=Ec(t,500);for(let g=h.length-1;g>=0;g--){const e=h[g];(0===e.length||(f=e[0]).every((e=>e.x<=0))||f.every((e=>e.x>=ss))||f.every((e=>e.y<=0))||f.every((e=>e.y>=ss)))&&h.splice(g,1)}var f;let p;if(u)p=ld(h,s,r);else{p=[];for(const e of h)p.push({polygon:e,bounds:s})}const m=d?this.edgeRadius:0;for(const{polygon:g,bounds:y}of p){let e=0,t=0;for(const r of g)d&&!r[0].equals(r[r.length-1])&&r.push(r[0]),t+=d?r.length-1:r.length;const n=this.segments.prepareSegment((d?5:4)*t,this.layoutVertexArray,this.indexArray);if(d){const t=[],i=[];e=n.vertexLength;for(const e of g){let o,a;e.length&&e!==g[0]&&i.push(t.length/2),o=e[1].sub(e[0])._perp()._unit();for(let i=1;i<e.length;i++){const s=e[i],c=e[i===e.length-1?1:i+1];let{x:d,y:h}=s;if(m){a=c.sub(s)._perp()._unit();const e=o.add(a)._unit(),t=m*Math.min(4,1/(o.x*e.x+o.y*e.y));d+=t*e.x,h+=t*e.y,o=a}Kc(this.layoutVertexArray,d,h,0,0,1,1,0),n.vertexLength++,t.push(s.x,s.y),u&&Jc(this.layoutVertexExtArray,l.projectTilePoint(d,h,r),l.upVector(r,d,h))}}const o=vc(t,i);for(let r=0;r<o.length;r+=3)this.indexArray.emplaceBack(e+o[r],e+o[r+2],e+o[r+1]),n.primitiveLength++}for(const i of g){c&&i.length&&c.startRing(i[0]);let t,o,a,s=i.length>4&&od(i[i.length-2],i[0],i[1]),h=m?nd(i[i.length-2],i[0],i[1],m):0;o=i[1].sub(i[0])._perp()._unit();let f=!0;for(let p=1,g=0;p<i.length;p++){let v=i[p-1],_=i[p];const b=i[p===i.length-1?1:p+1];if(c&&d&&c.currentPolyCount.top++,id(_,v,y)){m&&(o=b.sub(_)._perp()._unit(),f=!f);continue}c&&c.append(_,v);const x=_.sub(v)._perp(),w=x.x/(Math.abs(x.x)+Math.abs(x.y)),E=x.y>0?1:0,S=v.dist(_);if(g+S>32768&&(g=0),m){a=b.sub(_)._perp()._unit();let e=rd(v,_,b,td(o,a),m);isNaN(e)&&(e=0);const t=_.sub(v)._unit();v=v.add(t.mult(h))._round(),_=_.add(t.mult(-e))._round(),h=e,o=a}const T=n.vertexLength,M=i.length>4&&od(v,_,b);let k=ad(g,s,f);if(Kc(this.layoutVertexArray,v.x,v.y,w,E,0,0,k),Kc(this.layoutVertexArray,v.x,v.y,w,E,0,1,k),g+=S,k=ad(g,M,!f),s=M,Kc(this.layoutVertexArray,_.x,_.y,w,E,0,0,k),Kc(this.layoutVertexArray,_.x,_.y,w,E,0,1,k),n.vertexLength+=4,this.indexArray.emplaceBack(T+0,T+1,T+2),this.indexArray.emplaceBack(T+1,T+3,T+2),n.primitiveLength+=2,m){const r=e+(1===p?i.length-2:p-2),o=1===p?e:r+1;if(this.indexArray.emplaceBack(T+1,r,T+3),this.indexArray.emplaceBack(r,o,T+3),n.primitiveLength+=2,void 0===t&&(t=T),!id(b,i[p],y)){const e=p===i.length-1?t:n.vertexLength;this.indexArray.emplaceBack(T+2,T+3,e),this.indexArray.emplaceBack(T+3,e+1,e),this.indexArray.emplaceBack(T+3,o,e+1),n.primitiveLength+=3}f=!f}if(u){const e=this.layoutVertexExtArray,t=l.projectTilePoint(v.x,v.y,r),n=l.projectTilePoint(_.x,_.y,r),i=l.upVector(r,v.x,v.y),o=l.upVector(r,_.x,_.y);Jc(e,t,i),Jc(e,t,i),Jc(e,n,o),Jc(e,n,o)}}d&&(e+=i.length-1)}}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;const e=c.borders,t=this.featuresOnBorder.push(c)-1;for(let n=0;n<4;n++)e[n][0]!==Number.MAX_VALUE&&this.borders[n].push(t)}this.encodeCentroid(c.borders?void 0:c.centroid(),c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,n)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[n].borders[e][0]))}encodeCentroid(e,t,n=!0){let r,i;if(e)if(0!==e.y){const n=t.span()._mult(this.tileToMeter);r=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(n.x/10)),i=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else r=Math.ceil(7*(e.x+450)),i=0;else r=0,i=+n;let o=n?this.centroidVertexArray.length:t.vertexArrayOffset;for(const a of t.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*a.edges+a.top);for(let e=0;e<a.top;e++)this.centroidVertexArray.emplace(o++,r,i);for(let e=0;e<2*a.edges;e++)this.centroidVertexArray.emplace(o++,0,i),this.centroidVertexArray.emplace(o++,r,i)}}}function td(e,t){const n=e.add(t)._unit();return e.x*n.x+e.y*n.y}function nd(e,t,n,r){const i=t.sub(e)._perp()._unit(),o=n.sub(t)._perp()._unit();return rd(e,t,n,td(i,o),r)}function rd(e,t,n,r,i){const o=Math.sqrt(1-r*r);return Math.min(e.dist(t)/3,t.dist(n)/3,i*o/r)}function id(e,t,n){return e.x<n[0].x&&t.x<n[0].x||e.x>n[1].x&&t.x>n[1].x||e.y<n[0].y&&t.y<n[0].y||e.y>n[1].y&&t.y>n[1].y}function od(e,t,n){if(e.x<0||e.x>=ss||t.x<0||t.x>=ss||n.x<0||n.x>=ss)return!1;const r=n.sub(t),i=r.perp(),o=e.sub(t);return(r.x*o.x+r.y*o.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(o.x*o.x+o.y*o.y))>-.866&&i.x*o.x+i.y*o.y<0}function ad(e,t,n){const r=t?2|e:-3&e;return n?1|r:-2&r}function sd(){const e=Math.PI/32,t=Math.tan(e),n=Bl;return n*Math.sqrt(1+2*t*t)-n}function ld(e,t,n){const r=1<<n.z,i=Wl(n.x/r),o=Wl((n.x+1)/r),a=Zl(n.y/r),s=Zl((n.y+1)/r);return function(e,t,n,r,i=0,o){const a=[];if(!e.length||!n||!r)return a;const s=(e,t)=>{for(const n of e)a.push({polygon:n,bounds:t})},l=Math.ceil(Math.log2(n)),u=Math.ceil(Math.log2(r)),c=l-u,d=[];for(let p=0;p<Math.abs(c);p++)d.push(c>0?0:1);for(let p=0;p<Math.min(l,u);p++)d.push(0),d.push(1);let h=e;if(h=Zc(h,t[0].y-i,t[1].y+i,1),h=Zc(h,t[0].x-i,t[1].x+i,0),!h.length)return a;const f=[];for(d.length?f.push({polygons:h,bounds:t,depth:0}):s(h,t);f.length;){const e=f.pop(),t=e.depth,n=d[t],r=e.bounds[0],a=e.bounds[1],l=0===n?r.x:r.y,u=0===n?a.x:a.y,c=o?o(n,l,u):.5*(l+u),h=Zc(e.polygons,l-i,c+i,n),p=Zc(e.polygons,c-i,u+i,n);if(h.length){const e=[r,new v(0===n?c:a.x,1===n?c:a.y)];d.length>t+1?f.push({polygons:h,bounds:e,depth:t+1}):s(h,e)}if(p.length){const e=[new v(0===n?c:r.x,1===n?c:r.y),a];d.length>t+1?f.push({polygons:p,bounds:e,depth:t+1}):s(p,e)}}return a}(e,t,Math.ceil((o-i)/11.25),Math.ceil((a-s)/11.25),1,((e,t,i)=>{if(0===e)return.5*(t+i);{const e=Zl((n.y+t/ss)/r);return(ql(.5*(Zl((n.y+i/ss)/r)+e))*r-n.y)*ss}}))}Xi(ed,"FillExtrusionBucket",{omit:["layers","features"]}),Xi(Qc,"PartMetadata");const ud=new Do({"fill-extrusion-edge-radius":new Oo(et["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var cd={paint:new Do({"fill-extrusion-opacity":new Oo(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Io(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Oo(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Oo(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Io(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Io(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Io(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Oo(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Oo(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Oo(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Oo(et["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:ud};function dd(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}class hd{constructor(e,t,n){this.z=e,this.x=t,this.y=n,this.key=md(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const n=function(e,t,n){var r=dd(256*e,256*(t=Math.pow(2,n)-t-1),n),i=dd(256*(e+1),256*(t+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(e,t,n){let r,i="";for(let o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class fd{constructor(e,t){this.wrap=e,this.canonical=t,this.key=md(e,t.z,t.z,t.x,t.y)}}class pd{constructor(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new hd(n,+r,+i),this.key=0===t&&e===n?this.canonical.key:md(t,e,n,r,i)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new pd(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new pd(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return md(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-e;return md(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new pd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new pd(t,this.wrap,t,n,r),new pd(t,this.wrap,t,n+1,r),new pd(t,this.wrap,t,n,r+1),new pd(t,this.wrap,t,n+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new pd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new pd(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new fd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function md(e,t,n,r,i){const o=1<<Math.min(n,22);let a=o*(i%o)+r%o;return e&&n<22&&(a+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*a+n)+(t-n)}Xi(hd,"CanonicalTileID"),Xi(pd,"OverscaledTileID",{omit:["projMatrix"]});class gd extends v{constructor(e,t,n){super(e,t),this.z=n}}function yd(e,t){return e.x*t.x+e.y*t.y}function vd(e,t){if(1===e.length){let n=0;const r=t[n++];let i;for(;!i||r.equals(i);)if(i=t[n++],!i)return 1/0;for(;n<t.length;n++){const o=t[n],a=e[0],s=i.sub(r),l=o.sub(r),u=a.sub(r),c=yd(s,s),d=yd(s,l),h=yd(l,l),f=yd(u,s),p=yd(u,l),m=c*h-d*d,g=(h*f-d*p)/m,y=(c*p-d*f)/m,v=r.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}function _d(e,t,n,r,i,o,a,s){const l=a*i.getElevationAt(e,t,!0,!0),u=0!==o[0],c=u?0===o[1]?a*(o[0]/7-450):a*function(e,t,n){const r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),o=10*(t[0]-8*r),a=10*(t[1]-8*i),s=e.getElevationAt(r,i,!0,!0),l=e.getMeterToDEM(n),u=Math.floor(.5*(o*l-1)),c=Math.floor(.5*(a*l-1)),d=e.tileCoordToPixel(r,i),h=2*u+1,f=2*c+1,p=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,d.x-u,d.y-c,h,f),m=Math.abs(p[0]-p[1]),g=Math.abs(p[2]-p[3]),y=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),v=Math.min(.25,.5*l*(m+g)/h),_=Math.min(.25,.5*l*y/f);return s+Math.max(v*o,_*a)}(i,o,s):l;return{base:l+(0===n)?-1:n,top:u?Math.max(c+r,l+n+2):l+r}}const bd=Bo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:xd}=bd,wd=Bo([{name:"a_packed",components:4,type:"Float32"}]),{members:Ed}=wd,Sd=Wc.types,Td=Math.cos(Math.PI/180*37.5);class Md{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new Vo,this.layoutVertexArray2=new qo,this.indexArray=new ra,this.programConfigurations=new Ya(e.layers,e.zoom),this.segments=new as,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){this.hasPattern=Tc("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:u,id:c,index:d,sourceLayerIndex:h}of e){const e=this.layers[0]._featureFilter.needGeometry,t=su(u,e);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),t,n))continue;const a=i?i.evaluate(t,{},n):void 0,s={id:c,properties:u.properties,type:u.type,sourceLayerIndex:h,index:d,geometry:e?t.geometry:au(u,n,r),patterns:{},sortKey:a};o.push(s)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));const{lineAtlas:a,featureIndex:s}=t,l=this.addConstantDashes(a);for(const u of o){const{geometry:r,index:i,sourceLayerIndex:o}=u;if(l&&this.addFeatureDashes(u,a),this.hasPattern){const e=Mc("line",this.layers,u,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(u,r,i,n,a.positions,t.availableImages);s.insert(e[i].feature,r,i,o,this.index)}}addConstantDashes(e){let t=!1;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==i.kind)t=!0;else{const t=i.value,n=r.value;if(!n)continue;e.addDash(n,t)}}return t}addFeatureDashes(e,t){const n=this.zoom;for(const r of this.layers){const i=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let a,s;if("constant"===i.kind){if(a=i.value,!a)continue}else a=i.evaluate({zoom:n},e);s="constant"===o.kind?o.value:o.evaluate({zoom:n},e),t.addDash(a,s),e.patterns[r.id]=t.getKey(a,s)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Ed)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,xd),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,r,i,o){const a=this.layers[0].layout,s=a.get("line-join").evaluate(e,{}),l=a.get("line-cap").evaluate(e,{}),u=a.get("line-miter-limit"),c=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const d of t)this.addLine(d,e,s,l,u,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}addLine(e,t,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Sd[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const u=this.overscaling<=16?15*ss/(512*this.overscaling):0,c=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let d,h,f,p,m;this.e1=this.e2=-1,a&&(d=e[s-2],m=e[l].sub(d)._unit()._perp());for(let g=l;g<s;g++){if(f=g===s-1?a?e[l+1]:void 0:e[g+1],f&&e[g].equals(f))continue;m&&(p=m),d&&(h=d),d=e[g],m=f?f.sub(d)._unit()._perp():p,p=p||m;let t=p.add(m);0===t.x&&0===t.y||t._unit();const y=p.x*m.x+p.y*m.y,v=t.x*m.x+t.y*m.y,_=0!==v?1/v:1/0,b=2*Math.sqrt(2-2*v),x=v<Td&&h&&f,w=p.x*m.y-p.y*m.x>0;if(x&&g>l){const e=d.dist(h);if(e>2*u){const t=d.sub(d.sub(h)._mult(u/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,p,0,0,c),h=t}}const E=h&&f;let S=E?n:a?"butt":r;if(E&&"round"===S&&(_<o?S="miter":_<=2&&(S="fakeround")),"miter"===S&&_>i&&(S="bevel"),"bevel"===S&&(_>2&&(S="flipbevel"),_<i&&(S="miter")),h&&this.updateDistance(h,d),"miter"===S)t._mult(_),this.addCurrentVertex(d,t,0,0,c);else if("flipbevel"===S){if(_>100)t=m.mult(-1);else{const e=_*p.add(m).mag()/p.sub(m).mag();t._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(d,t,0,0,c),this.addCurrentVertex(d,t.mult(-1),0,0,c)}else if("bevel"===S||"fakeround"===S){const e=-Math.sqrt(_*_-1),t=w?e:0,n=w?0:e;if(h&&this.addCurrentVertex(d,p,t,n,c),"fakeround"===S){const e=Math.round(180*b/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(p)._mult(n)._add(p)._unit()._mult(w?-1:1);this.addHalfVertex(d,r.x,r.y,!1,w,0,c)}}f&&this.addCurrentVertex(d,m,-t,-n,c)}else if("butt"===S)this.addCurrentVertex(d,t,0,0,c);else if("square"===S){const e=h?1:-1;h||this.addCurrentVertex(d,t,e,e,c),this.addCurrentVertex(d,t,0,0,c),h&&this.addCurrentVertex(d,t,e,e,c)}else"round"===S&&(h&&(this.addCurrentVertex(d,p,0,0,c),this.addCurrentVertex(d,p,1,1,c,!0)),f&&(this.addCurrentVertex(d,m,-1,-1,c,!0),this.addCurrentVertex(d,m,0,0,c)));if(x&&g<s-1){const e=d.dist(f);if(e>2*u){const t=d.add(f.sub(d)._mult(u/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,m,0,0,c),d=t}}}}addCurrentVertex(e,t,n,r,i,o=!1){const a=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,i),this.addHalfVertex(e,a,s,o,!0,-r,i)}addHalfVertex({x:e,y:t},n,r,i,o,a,s){this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Xi(Md,"LineBucket",{omit:["layers","patternFeatures"]});const kd=new Do({"line-cap":new Io(et.layout_line["line-cap"]),"line-join":new Io(et.layout_line["line-join"]),"line-miter-limit":new Oo(et.layout_line["line-miter-limit"]),"line-round-limit":new Oo(et.layout_line["line-round-limit"]),"line-sort-key":new Io(et.layout_line["line-sort-key"])});var Cd={paint:new Do({"line-opacity":new Io(et.paint_line["line-opacity"]),"line-color":new Io(et.paint_line["line-color"]),"line-translate":new Oo(et.paint_line["line-translate"]),"line-translate-anchor":new Oo(et.paint_line["line-translate-anchor"]),"line-width":new Io(et.paint_line["line-width"]),"line-gap-width":new Io(et.paint_line["line-gap-width"]),"line-offset":new Io(et.paint_line["line-offset"]),"line-blur":new Io(et.paint_line["line-blur"]),"line-dasharray":new Io(et.paint_line["line-dasharray"]),"line-pattern":new Io(et.paint_line["line-pattern"]),"line-gradient":new Lo(et.paint_line["line-gradient"]),"line-trim-offset":new Oo(et.paint_line["line-trim-offset"])}),layout:kd};const Pd=new class extends Io{possiblyEvaluate(e,t){return t=new wo(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,r){return t=I({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,r)}}(Cd.paint.properties["line-width"].specification);function Ad(e,t){return t>0?t+2*e:e}Pd.useIntegerZoom=!0;const Od=Bo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Id=Bo([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Ld=Bo([{name:"a_projected_pos",components:4,type:"Float32"}],4);Bo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Dd=Bo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Rd=Bo([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Nd=Bo([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),zd=Bo([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Bo([{name:"triangle",components:3,type:"Uint16"}]),Bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Bo([{type:"Float32",name:"offsetX"}]),Bo([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var jd=24;const Bd=128;function Fd(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new wo(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:r}=n;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let o=i;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[i],s=t[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new wo(a)),maxSize:n.evaluate(new wo(s)),interpolationType:r}}}function Ud(e,{uSize:t,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===e.kind?r/Bd:"composite"===e.kind?In(r/Bd,i/Bd,n):t}function Gd(e,t){let n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=e,s=i?k(er.interpolationFactor(i,t,o,a),0,1):0;"camera"===e.kind?r=In(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var Hd=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Bd,evaluateSizeForFeature:Ud,evaluateSizeForZoom:Gd,getSizeData:Fd});function Vd(e,t,n){return e.sections.forEach((e=>{e.text=function(e,t,n){const r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),xo.applyArabicShaping&&(e=xo.applyArabicShaping(e)),e}(e.text,t,n)})),e}const qd={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function $d(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function Wd(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var Zd=Kd,Xd=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},Yd=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+f]=255&a,f+=p,a/=256,u-=8);e[n+f-p]|=128*m};function Kd(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Kd.Varint=0,Kd.Fixed64=1,Kd.Bytes=2,Kd.Fixed32=5;var Jd=4294967296,Qd=1/Jd,eh="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function th(e){return e.type===Kd.Bytes?e.readVarint()+e.pos:e.pos+1}function nh(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function rh(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function ih(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function oh(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function ah(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function sh(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function lh(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function uh(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function ch(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function dh(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function hh(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function fh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function ph(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function mh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Kd.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=fh(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=mh(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=fh(this.buf,this.pos)+fh(this.buf,this.pos+4)*Jd;return this.pos+=8,e},readSFixed64:function(){var e=fh(this.buf,this.pos)+mh(this.buf,this.pos+4)*Jd;return this.pos+=8,e},readFloat:function(){var e=Xd(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Xd(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return nh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return nh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return nh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return nh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return nh(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return nh(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&eh?function(e,t,n){return eh.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,l=e[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Kd.Bytes)return e.push(this.readVarint(t));var n=th(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Kd.Bytes)return e.push(this.readSVarint());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Kd.Bytes)return e.push(this.readBoolean());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Kd.Bytes)return e.push(this.readFloat());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Kd.Bytes)return e.push(this.readDouble());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Kd.Bytes)return e.push(this.readFixed32());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Kd.Bytes)return e.push(this.readSFixed32());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Kd.Bytes)return e.push(this.readFixed64());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Kd.Bytes)return e.push(this.readSFixed64());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Kd.Varint)for(;this.buf[this.pos++]>127;);else if(t===Kd.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Kd.Fixed32)this.pos+=4;else{if(t!==Kd.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),ph(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),ph(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),ph(this.buf,-1&e,this.pos),ph(this.buf,Math.floor(e*Qd),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),ph(this.buf,-1&e,this.pos),ph(this.buf,Math.floor(e*Qd),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&rh(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Yd(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Yd(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&rh(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,Kd.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,ih,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,oh,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,lh,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,ah,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,sh,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,uh,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,ch,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,dh,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,hh,t)},writeBytesField:function(e,t){this.writeTag(e,Kd.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Kd.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Kd.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Kd.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Kd.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Kd.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Kd.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Kd.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Kd.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Kd.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var gh=h(Zd);const yh=3;function vh(e,t,n){t.glyphs=[],1===e&&n.readMessage(_h,t)}function _h(e,t,n){if(3===e){const{id:e,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(bh,{});t.glyphs.push({id:e,bitmap:new ju({width:i+2*yh,height:o+2*yh},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function bh(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}const xh=yh;function wh(e){let t=0,n=0;for(const a of e)t+=a.w*a.h,n=Math.max(n,a.w);e.sort(((e,t)=>t.h-e.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,o=0;for(const a of e)for(let e=r.length-1;e>=0;e--){const t=r[e];if(!(a.w>t.w||a.h>t.h)){if(a.x=t.x,a.y=t.y,o=Math.max(o,a.y+a.h),i=Math.max(i,a.x+a.w),a.w===t.w&&a.h===t.h){const t=r.pop();e<r.length&&(r[e]=t)}else a.h===t.h?(t.x+=a.w,t.w-=a.w):a.w===t.w?(t.y+=a.h,t.h-=a.h):(r.push({x:t.x+a.w,y:t.y,w:t.w-a.w,h:a.h}),t.y+=a.h,t.h-=a.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}const Eh=1;class Sh{constructor(e,{pixelRatio:t,version:n,stretchX:r,stretchY:i,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+Eh,this.paddedRect.y+Eh]}get br(){return[this.paddedRect.x+this.paddedRect.w-Eh,this.paddedRect.y+this.paddedRect.h-Eh]}get displaySize(){return[(this.paddedRect.w-2*Eh)/this.pixelRatio,(this.paddedRect.h-2*Eh)/this.pixelRatio]}}class Th{constructor(e,t){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,n,i),this.addImages(t,r,i);const{w:o,h:a}=wh(i),s=new Bu({width:o||1,height:a||1});for(const l in e){const t=e[l],r=n[l].paddedRect;Bu.copy(t.data,s,{x:0,y:0},{x:r.x+Eh,y:r.y+Eh},t.data)}for(const l in t){const e=t[l],n=r[l].paddedRect,i=n.x+Eh,o=n.y+Eh,a=e.data.width,u=e.data.height;Bu.copy(e.data,s,{x:0,y:0},{x:i,y:o},e.data),Bu.copy(e.data,s,{x:0,y:u-1},{x:i,y:o-1},{width:a,height:1}),Bu.copy(e.data,s,{x:0,y:0},{x:i,y:o+u},{width:a,height:1}),Bu.copy(e.data,s,{x:a-1,y:0},{x:i-1,y:o},{width:1,height:u}),Bu.copy(e.data,s,{x:0,y:0},{x:i+a,y:o},{width:1,height:u})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(e,t,n){for(const r in e){const i=e[r],o={x:0,y:0,w:i.data.width+2*Eh,h:i.data.height+2*Eh};n.push(o),t[r]=new Sh(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(e,t){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((t=>e.hasImage(t))),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,i]=e.tl;n.update(t.data,void 0,{x:r,y:i})}}Xi(Sh,"ImagePosition"),Xi(Th,"ImageAtlas");const Mh={horizontal:1,vertical:2,horizontalOnly:3},kh=-17;class Ch{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new Ch;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new Ch;return t.imageName=e,t}}class Ph{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new Ph;for(let r=0;r<e.sections.length;r++){const i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let n="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r+1)||null,o=e.charCodeAt(r-1)||null;n+=!t&&(i&&oo(i)&&!qd[e[r+1]]||o&&oo(o)&&!qd[e[r-1]])||!qd[e[r]]?e[r]:qd[e[r]]}return n}(this.text,e)}trim(){let e=0;for(let n=0;n<this.text.length&&Oh[this.text.charCodeAt(n)];n++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&Oh[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new Ph;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Ch.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let r=0;r<e.text.length;++r)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void V("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Ch.forImage(t)),this.sectionIndex.push(this.sections.length-1)):V("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ah(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p){const m=Ph.fromFeature(e,i);d===Mh.vertical&&m.verticalizePunctuation(h);let g=[];const y=function(e,t,n,r,i,o){if(!e)return[];const a=[],s=function(e,t,n,r,i,o){let a=0;for(let s=0;s<e.length();s++){const n=e.getSection(s);a+=Lh(e.getCharCode(s),n,r,i,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r,i,o),l=e.text.indexOf("\u200b")>=0;let u=0;for(let d=0;d<e.length();d++){const n=e.getSection(d),h=e.getCharCode(d);if(Oh[h]||(u+=Lh(h,n,r,i,t,o)),d<e.length()-1){const t=!((c=h)<11904||!(eo["Bopomofo Extended"](c)||eo.Bopomofo(c)||eo["CJK Compatibility Forms"](c)||eo["CJK Compatibility Ideographs"](c)||eo["CJK Compatibility"](c)||eo["CJK Radicals Supplement"](c)||eo["CJK Strokes"](c)||eo["CJK Symbols and Punctuation"](c)||eo["CJK Unified Ideographs Extension A"](c)||eo["CJK Unified Ideographs"](c)||eo["Enclosed CJK Letters and Months"](c)||eo["Halfwidth and Fullwidth Forms"](c)||eo.Hiragana(c)||eo["Ideographic Description Characters"](c)||eo["Kangxi Radicals"](c)||eo["Katakana Phonetic Extensions"](c)||eo.Katakana(c)||eo["Vertical Forms"](c)||eo["Yi Radicals"](c)||eo["Yi Syllables"](c)));(Ih[h]||t||n.imageName)&&a.push(Nh(d+1,u,s,a,Rh(h,e.getCharCode(d+1),t&&l),!1))}}var c;return zh(Nh(e.length(),u,s,a,0,!0))}(m,u,o,t,r,f),{processBidirectionalText:v,processStyledBidirectionalText:_}=xo;if(v&&1===m.sections.length){const e=v(m.toString(),y);for(const t of e){const e=new Ph;e.text=t,e.sections=m.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);g.push(e)}}else if(_){const e=_(m.text,m.sectionIndex,y);for(const t of e){const e=new Ph;e.text=t[0],e.sectionIndex=t[1],e.sections=m.sections,g.push(e)}}else g=function(e,t){const n=[],r=e.text;let i=0;for(const o of t)n.push(e.substring(i,o)),i=o;return i<r.length&&n.push(e.substring(i,r.length)),n}(m,y);const b=[],x={positionedLines:b,text:m.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:d,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,r,i,o,a,s,l,u,c,d){let h=0,f=0,p=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const w of i){const e=w.getSections();for(const n of e){if(n.imageName)continue;const e=t[n.fontStack];if(e&&(g=void 0!==e.ascender&&void 0!==e.descender,!g))break}if(!g)break}let y=0;for(const w of i){w.trim();const i=w.getMaxScale(),a=(i-1)*jd,s={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=s;const _=s.positionedGlyphs;let b=0;if(!w.length()){f+=o,++y;continue}let x=0,E=0;for(let o=0;o<w.length();o++){const a=w.getSection(o),s=w.getSectionIndex(o),p=w.getCharCode(o);let m=a.scale,y=null,S=null,T=null,M=jd,k=0;const C=!(l===Mh.horizontal||!c&&!io(p)||c&&(Oh[p]||(v=p,eo.Arabic(v)||eo["Arabic Supplement"](v)||eo["Arabic Extended-A"](v)||eo["Arabic Presentation Forms-A"](v)||eo["Arabic Presentation Forms-B"](v))));if(a.imageName){const t=r[a.imageName];if(!t)continue;T=a.imageName,e.iconsInText=e.iconsInText||!0,S=t.paddedRect;const n=t.displaySize;m=m*jd/d,y={width:n[0],height:n[1],left:Eh,top:-xh,advance:C?n[1]:n[0],localGlyph:!1},k=g?-y.height*m:kh+i*jd-n[1]*m,M=y.advance;const o=(C?n[0]:n[1])*m-jd*i;o>0&&o>b&&(b=o)}else{const e=n[a.fontStack];if(!e)continue;e[p]&&(S=e[p]);const r=t[a.fontStack];if(!r)continue;const o=r.glyphs[p];if(!o)continue;if(y=o.metrics,M=8203!==p?jd:0,g){const e=void 0!==r.ascender?Math.abs(r.ascender):0,t=void 0!==r.descender?Math.abs(r.descender):0,n=(e+t)*m;x<n&&(x=n,E=(e-t)/2*m),k=-e*m}else k=kh+(i-m)*jd}C?(e.verticalizable=!0,_.push({glyph:p,imageName:T,x:h,y:f+k,vertical:C,scale:m,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:S}),h+=M*m+u):(_.push({glyph:p,imageName:T,x:h,y:f+k,vertical:C,scale:m,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:S}),h+=y.advance*m+u)}0!==_.length&&(p=Math.max(h-u,p),g?Bh(_,m,b,E,o*i/2):Bh(_,m,b,0,o/2)),h=0;const S=o*i+b;s.lineOffset=Math.max(b,a),f+=S,++y}var v;const _=f,{horizontalAlign:b,verticalAlign:x}=jh(a);(function(e,t,n,r,i,o){const a=(t-n)*i,s=-o*r;for(const l of e)for(const e of l.positionedGlyphs)e.x+=a,e.y+=s})(e.positionedLines,m,b,x,p,_),e.top+=-x*_,e.bottom=e.top+_,e.left+=-b*p,e.right=e.left+p,e.hasBaseline=g}(x,t,n,r,g,a,s,l,d,u,h,p),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(b)&&x}const Oh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ih={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Lh(e,t,n,r,i,o){if(t.imageName){const e=r[t.imageName];return e?e.displaySize[0]*t.scale*jd/o+i:0}{const r=n[t.fontStack],o=r&&r.glyphs[e];return o?o.metrics.advance*t.scale+i:0}}function Dh(e,t,n,r){const i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Rh(e,t,n){let r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Nh(e,t,n,r,i,o){let a=null,s=Dh(t,n,i,o);for(const l of r){const e=Dh(t-l.x,n,i,o)+l.badness;e<=s&&(a=l,s=e)}return{index:e,x:t,priorBreak:a,badness:s}}function zh(e){return e?zh(e.priorBreak).concat(e.index):[]}function jh(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Bh(e,t,n,r,i){if(!(t||n||r||i))return;const o=e.length-1,a=e[o],s=(a.x+a.metrics.advance*a.scale)*t;for(let l=0;l<=o;l++)e[l].x-=s,e[l].y+=n+r+i}function Fh(e,t,n){const{horizontalAlign:r,verticalAlign:i}=jh(n),o=t[0]-e.displaySize[0]*r,a=t[1]-e.displaySize[1]*i;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Uh(e,t,n,r,i,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,u=t.right*o;let c,d,h,f;"width"===n||"both"===n?(f=i[0]+l-r[3],d=i[0]+u+r[1]):(f=i[0]+(l+u-a.displaySize[0])/2,d=f+a.displaySize[0]);const p=t.top*o,m=t.bottom*o;return"height"===n||"both"===n?(c=i[1]+p-r[0],h=i[1]+m+r[2]):(c=i[1]+(p+m-a.displaySize[1])/2,h=c+a.displaySize[1]),{image:a,top:c,right:d,bottom:h,left:f,collisionPadding:s}}class Gh extends v{constructor(e,t,n,r,i){super(e,t),this.angle=r,this.z=n,void 0!==i&&(this.segment=i)}clone(){return new Gh(this.x,this.y,this.z,this.angle,this.segment)}}function Hh(e,t,n,r,i){if(void 0===t.segment)return!0;let o=t,a=t.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let u=0;for(;s<n/2;){const t=e[a],n=e[a+1];if(!n)return!1;let o=e[a-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),u+=o;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>i)return!1;a++,s+=t.dist(n)}return!0}function Vh(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function qh(e,t,n){return e?.6*t*n:0}function $h(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Wh(e,t,n,r,i,o){const a=qh(n,i,o),s=$h(n,r)*o;let l=0;const u=Vh(e)/2;for(let c=0;c<e.length-1;c++){const n=e[c],r=e[c+1],i=n.dist(r);if(l+i>u){const o=(u-l)/i,d=In(n.x,r.x,o),h=In(n.y,r.y,o),f=new Gh(d,h,0,r.angleTo(n),c);return!a||Hh(e,f,s,a,t)?f:void 0}l+=i}}function Zh(e,t,n,r,i,o,a,s,l){const u=qh(r,o,a),c=$h(r,i),d=c*a,h=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-d<t/4&&(t=d+t/4),Xh(e,h?t/2*s%t:(c/2+2*o)*a*s%t,t,u,n,d,h,!1,l)}function Xh(e,t,n,r,i,o,a,s,l){const u=o/2,c=Vh(e);let d=0,h=t-n,f=[];for(let p=0;p<e.length-1;p++){const t=e[p],a=e[p+1],s=t.dist(a),m=a.angleTo(t);for(;h+n<d+s;){h+=n;const g=(h-d)/s,y=In(t.x,a.x,g),v=In(t.y,a.y,g);if(y>=0&&y<l&&v>=0&&v<l&&h-u>=0&&h+u<=c){const t=new Gh(y,v,0,m,p);t._round(),r&&!Hh(e,t,o,r,i)||f.push(t)}}d+=s}return s||f.length||a||(f=Xh(e,d/2,n,r,i,o,a,!0,l)),f}function Yh(e,t,n,r,i){const o=[];for(let a=0;a<e.length;a++){const s=e[a];let l;for(let e=0;e<s.length-1;e++){let a=s[e],u=s[e+1];a.x<t&&u.x<t||(a.x<t?a=new v(t,a.y+(t-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x<t&&(u=new v(t,a.y+(t-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y<n&&u.y<n||(a.y<n?a=new v(a.x+(n-a.y)/(u.y-a.y)*(u.x-a.x),n)._round():u.y<n&&(u=new v(a.x+(n-a.y)/(u.y-a.y)*(u.x-a.x),n)._round()),a.x>=r&&u.x>=r||(a.x>=r?a=new v(r,a.y+(r-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x>=r&&(u=new v(r,a.y+(r-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y>=i&&u.y>=i||(a.y>=i?a=new v(a.x+(i-a.y)/(u.y-a.y)*(u.x-a.x),i)._round():u.y>=i&&(u=new v(a.x+(i-a.y)/(u.y-a.y)*(u.x-a.x),i)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(u)))))}}return o}Xi(Gh,"Anchor");const Kh=1e20;function Jh(e,t,n,r,i,o,a,s,l){for(let u=t;u<t+r;u++)Qh(e,n*o+u,o,i,a,s,l);for(let u=n;u<n+i;u++)Qh(e,u*o+t,1,r,a,s,l)}function Qh(e,t,n,r,i,o,a){o[0]=0,a[0]=-Kh,a[1]=Kh,i[0]=e[t];for(let s=1,l=0,u=0;s<r;s++){i[s]=e[t+s*n];const r=s*s;do{const e=o[l];u=(i[s]-i[e]+r-e*e)/(s-e)/2}while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=Kh}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],u=s-r;e[t+s*n]=i[r]+u*u}}const ef=2,tf={none:0,ideographs:1,all:2};class nf{constructor(e,t,n){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const n=[];for(const r in e)for(const t of e[r])n.push({stack:r,id:t});A(n,(({stack:e,id:t},n)=>{let r=this.entries[e];r||(r=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=r.glyphs[t];if(void 0!==i)return void n(null,{stack:e,id:t,glyph:i});if(i=this._tinySDF(r,e,t),i)return r.glyphs[t]=i,void n(null,{stack:e,id:t,glyph:i});const o=Math.floor(t/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void n(null,{stack:e,id:t,glyph:i});let a=r.requests[o];a||(a=r.requests[o]=[],nf.loadGlyphRange(e,o,this.url,this.requestManager,((e,t)=>{if(t){r.ascender=t.ascender,r.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(r.glyphs[+e]=t.glyphs[+e]);r.ranges[o]=!0}for(const n of a)n(e,t);delete r.requests[o]}))),a.push(((r,i)=>{r?n(r):i&&n(null,{stack:e,id:t,glyph:i.glyphs[t]||null})}))}),((e,n)=>{if(e)t(e);else if(n){const e={};for(const{stack:t,id:r,glyph:i}of n)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==tf.none&&(this.localGlyphMode===tf.all?!!this.localFontFamily:!!this.localFontFamily&&(eo["CJK Unified Ideographs"](e)||eo["Hangul Syllables"](e)||eo.Hiragana(e)||eo.Katakana(e)||eo["CJK Symbols and Punctuation"](e)))}_tinySDF(e,t,n){const r=this.localFontFamily;if(!r||!this._doesCharSupportLocalGlyph(n))return;let i=e.tinySDF;if(!i){let n="400";/bold/i.test(t)?n="900":/medium/i.test(t)?n="500":/light/i.test(t)&&(n="200"),i=e.tinySDF=new nf.TinySDF({fontFamily:r,fontWeight:n,fontSize:24*ef,buffer:3*ef,radius:8*ef}),i.fontWeight=n}if(this.localGlyphs[i.fontWeight][n])return this.localGlyphs[i.fontWeight][n];const o=String.fromCharCode(n),{data:a,width:s,height:l,glyphWidth:u,glyphHeight:c,glyphLeft:d,glyphTop:h,glyphAdvance:f}=i.draw(o);return this.localGlyphs[i.fontWeight][n]={id:n,bitmap:new ju({width:s,height:l},a),metrics:{width:u/ef,height:c/ef,left:d/ef,top:h/ef-27,advance:f/ef,localGlyph:!0}}}}nf.loadGlyphRange=function(e,t,n,r,i){const o=256*t,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",`${o}-${a}`),le.Glyphs);he(s,((e,t)=>{if(e)i(e);else if(t){const e={},n=function(e){return new gh(e).readFields(vh,{})}(t);for(const t of n.glyphs)e[t.id]=t;i(null,{glyphs:e,ascender:n.ascender,descender:n.descender})}}))},nf.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=t,this.cutoff=r,this.radius=n;const s=this.size=e+4*t,l=this._createCanvas(s),u=this.ctx=l.getContext("2d",{willReadFrequently:!0});u.font=`${a} ${o} ${e}px ${i}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),u=s+2*this.buffer,c=l+2*this.buffer,d=Math.max(u*c,0),h=new Uint8ClampedArray(d),f={data:h,width:u,height:c,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return f;const{ctx:p,buffer:m,gridInner:g,gridOuter:y}=this;p.clearRect(m,m,s,l),p.fillText(e,m,m+a);const v=p.getImageData(m,m,s,l);y.fill(Kh,0,d),g.fill(0,0,d);for(let _=0;_<l;_++)for(let e=0;e<s;e++){const t=v.data[4*(_*s+e)+3]/255;if(0===t)continue;const n=(_+m)*u+e+m;if(1===t)y[n]=0,g[n]=Kh;else{const e=.5-t;y[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}Jh(y,0,0,u,c,u,this.f,this.v,this.z),Jh(g,m,m,s,l,u,this.f,this.v,this.z);for(let _=0;_<d;_++){const e=Math.sqrt(y[_])-Math.sqrt(g[_]);h[_]=Math.round(255-255*(e/this.radius+this.cutoff))}return f}};const rf=Eh;function of(e,t,n,r){const i=[],o=e.image,a=o.pixelRatio,s=o.paddedRect.w-2*rf,l=o.paddedRect.h-2*rf,u=e.right-e.left,c=e.bottom-e.top,d=o.stretchX||[[0,s]],h=o.stretchY||[[0,l]],f=(e,t)=>e+t[1]-t[0],p=d.reduce(f,0),m=h.reduce(f,0),g=s-p,y=l-m;let _=0,b=p,x=0,w=m,E=0,S=g,T=0,M=y;if(o.content&&r){const e=o.content;_=af(d,0,e[0]),x=af(h,0,e[1]),b=af(d,e[0],e[2]),w=af(h,e[1],e[3]),E=e[0]-_,T=e[1]-x,S=e[2]-e[0]-b,M=e[3]-e[1]-w}const k=(r,i,s,l)=>{const d=lf(r.stretch-_,b,u,e.left),h=uf(r.fixed-E,S,r.stretch,p),f=lf(i.stretch-x,w,c,e.top),g=uf(i.fixed-T,M,i.stretch,m),y=lf(s.stretch-_,b,u,e.left),k=uf(s.fixed-E,S,s.stretch,p),C=lf(l.stretch-x,w,c,e.top),P=uf(l.fixed-T,M,l.stretch,m),A=new v(d,f),O=new v(y,f),I=new v(y,C),L=new v(d,C),D=new v(h/a,g/a),R=new v(k/a,P/a),N=t*Math.PI/180;if(N){const e=Math.sin(N),t=Math.cos(N),n=[t,-e,e,t];A._matMult(n),O._matMult(n),L._matMult(n),I._matMult(n)}const z=r.stretch+r.fixed,j=i.stretch+i.fixed;return{tl:A,tr:O,bl:L,br:I,tex:{x:o.paddedRect.x+rf+z,y:o.paddedRect.y+rf+j,w:s.stretch+s.fixed-z,h:l.stretch+l.fixed-j},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:R,minFontScaleX:S/a/u,minFontScaleY:M/a/c,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const e=sf(d,g,p),t=sf(h,y,m);for(let n=0;n<e.length-1;n++){const r=e[n],o=e[n+1];for(let e=0;e<t.length-1;e++)i.push(k(r,t[e],o,t[e+1]))}}else i.push(k({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function af(e,t,n){let r=0;for(const i of e)r+=Math.max(t,Math.min(n,i[1]))-Math.max(t,Math.min(n,i[0]));return r}function sf(e,t,n){const r=[{fixed:-rf,stretch:0}];for(const[i,o]of e){const e=r[r.length-1];r.push({fixed:i-e.stretch,stretch:e.stretch}),r.push({fixed:i-e.stretch,stretch:e.stretch+(o-i)})}return r.push({fixed:t+rf,stretch:n}),r}function lf(e,t,n,r){return e/t*n+r}function uf(e,t,n,r){return e-t*n/r}function cf(e,t,n,r){const i=t+e.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(t+e.positionedLines[r-1].lineOffset))/2}class df{constructor(e=[],t=hf){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1),o=t[r];const a=r+1;if(a<this.length&&n(t[a],o)<0&&(r=a,o=t[a]),n(o,i)>=0)break;t[e]=o,e=r}t[e]=i}}function hf(e,t){return e<t?-1:e>t?1:0}function ff(e,t=1,n=!1){let r=1/0,i=1/0,o=-1/0,a=-1/0;const s=e[0];for(let f=0;f<s.length;f++){const e=s[f];(!f||e.x<r)&&(r=e.x),(!f||e.y<i)&&(i=e.y),(!f||e.x>o)&&(o=e.x),(!f||e.y>a)&&(a=e.y)}const l=Math.min(o-r,a-i);let u=l/2;const c=new df([],pf);if(0===l)return new v(r,i);for(let f=r;f<o;f+=l)for(let t=i;t<a;t+=l)c.push(new mf(f+u,t+u,u,e));let d=function(e){let t=0,n=0,r=0;const i=e[0];for(let o=0,a=i.length,s=a-1;o<a;s=o++){const e=i[o],a=i[s],l=e.x*a.y-a.x*e.y;n+=(e.x+a.x)*l,r+=(e.y+a.y)*l,t+=3*l}return new mf(n/t,r/t,0,e)}(e),h=c.length;for(;c.length;){const r=c.pop();(r.d>d.d||!d.d)&&(d=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,h)),r.max-d.d<=t||(u=r.h/2,c.push(new mf(r.p.x-u,r.p.y-u,u,e)),c.push(new mf(r.p.x+u,r.p.y-u,u,e)),c.push(new mf(r.p.x-u,r.p.y+u,u,e)),c.push(new mf(r.p.x+u,r.p.y+u,u,e)),h+=4)}return n&&(console.log(`num probes: ${h}`),console.log(`best distance: ${d.d}`)),d.p}function pf(e,t){return t.max-e.max}class mf{constructor(e,t,n,r){this.p=new v(e,t),this.h=n,this.d=function(e,t){let n=!1,r=1/0;for(let i=0;i<t.length;i++){const o=t[i];for(let t=0,i=o.length,a=i-1;t<i;a=t++){const i=o[t],s=o[a];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,vu(e,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}}const gf=7,yf=Number.POSITIVE_INFINITY,vf=Math.sqrt(2);function _f(e,[t,n]){let r=0,i=0;if(n===yf){t<0&&(t=0);const n=t/vf;switch(e){case"top-right":case"top-left":i=n-gf;break;case"bottom-right":case"bottom-left":i=-n+gf;break;case"bottom":i=-t+gf;break;case"top":i=t-gf}switch(e){case"top-right":case"bottom-right":r=-n;break;case"top-left":case"bottom-left":r=n;break;case"left":r=t;break;case"right":r=-t}}else{switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-gf;break;case"bottom-right":case"bottom-left":case"bottom":i=-n+gf}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}}return[r,i]}function bf(e,t,n,r,i,o,a,s,l,u){e.createArrays(),e.tilePixelRatio=ss/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const c=e.layers[0].layout,d=e.layers[0]._unevaluatedLayout._values,h={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.textSizeData;h.compositeTextSizes=[d["text-size"].possiblyEvaluate(new wo(t),s),d["text-size"].possiblyEvaluate(new wo(n),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.iconSizeData;h.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new wo(t),s),d["icon-size"].possiblyEvaluate(new wo(n),s)]}h.layoutTextSize=d["text-size"].possiblyEvaluate(new wo(l+1),s),h.layoutIconSize=d["icon-size"].possiblyEvaluate(new wo(l+1),s),h.textMaxSize=d["text-size"].possiblyEvaluate(new wo(18),s);const f="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),p=c.get("text-size");for(const m of e.features){const o=c.get("text-font").evaluate(m,{},s).join(","),l=p.evaluate(m,{},s),d=h.layoutTextSize.evaluate(m,{},s),g=(h.layoutIconSize.evaluate(m,{},s),{horizontal:{},vertical:void 0}),y=m.text;let v,_=[0,0];if(y){const r=y.toString(),a=c.get("text-letter-spacing").evaluate(m,{},s)*jd,u=c.get("text-line-height").evaluate(m,{},s)*jd,h=no(r)?a:0,p=c.get("text-anchor").evaluate(m,{},s),v=c.get("text-variable-anchor");if(!v){const e=c.get("text-radial-offset").evaluate(m,{},s);_=e?_f(p,[e*jd,yf]):c.get("text-offset").evaluate(m,{},s).map((e=>e*jd))}let b=f?"center":c.get("text-justify").evaluate(m,{},s);const x="point"===c.get("symbol-placement"),w=x?c.get("text-max-width").evaluate(m,{},s)*jd:1/0,E=a=>{e.allowVerticalPlacement&&to(r)&&(g.vertical=Ah(y,t,n,i,o,w,u,p,a,h,_,Mh.vertical,!0,d,l))};if(!f&&v){const e="auto"===b?v.map((e=>xf(e))):[b];let r=!1;for(let a=0;a<e.length;a++){const s=e[a];if(!g.horizontal[s])if(r)g.horizontal[s]=g.horizontal[0];else{const e=Ah(y,t,n,i,o,w,u,"center",s,h,_,Mh.horizontal,!1,d,l);e&&(g.horizontal[s]=e,r=1===e.positionedLines.length)}}E("left")}else{if("auto"===b&&(b=xf(p)),x||c.get("text-writing-mode").indexOf("horizontal")>=0||!to(r)){const e=Ah(y,t,n,i,o,w,u,p,b,h,_,Mh.horizontal,!1,d,l);e&&(g.horizontal[b]=e)}E(x?"left":b)}}let b=!1;if(m.icon&&m.icon.name){const t=r[m.icon.name];t&&(v=Fh(i[m.icon.name],c.get("icon-offset").evaluate(m,{},s),c.get("icon-anchor").evaluate(m,{},s)),b=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&V("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const x=Mf(g.horizontal)||g.vertical;e.iconsInText||(e.iconsInText=!!x&&x.iconsInText),(x||v)&&wf(e,m,g,v,r,h,d,0,_,b,a,s,u)}o&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function xf(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wf(e,t,n,r,i,o,a,s,l,u,c,d,h){let f=o.textMaxSize.evaluate(t,{},d);void 0===f&&(f=a);const p=e.layers[0].layout,m=p.get("icon-offset").evaluate(t,{},d),g=Mf(n.horizontal)||n.vertical,y="globe"===h.name,v=jd,_=a/v,b=e.tilePixelRatio*f/v,w=(A=e.overscaling,e.zoom>18&&A>2&&(A>>=1),Math.max(ss/(512*A),1)*p.get("symbol-spacing")),E=p.get("text-padding")*e.tilePixelRatio,S=p.get("icon-padding")*e.tilePixelRatio,T=x(p.get("text-max-angle")),M="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),k="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),C=p.get("symbol-placement"),P=w/2;var A;const O=p.get("icon-text-fit");let I;r&&"none"!==O&&(e.allowVerticalPlacement&&n.vertical&&(I=Uh(r,n.vertical,O,p.get("icon-text-fit-padding"),m,_)),g&&(r=Uh(r,g,O,p.get("icon-text-fit-padding"),m,_)));const L=(a,s,f)=>{if(s.x<0||s.x>=ss||s.y<0||s.y>=ss)return;let p=null;if(y){const{x:e,y:t,z:n}=h.projectTilePoint(s.x,s.y,f);p={anchor:new Gh(e,t,n,0,void 0),up:h.upVector(f,s.x,s.y)}}!function(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,y,v,_,b,x,w,E,S){const T=e.addToLineVertexArray(t,r);let M,k,C,P,A,O,I,L=0,D=0,R=0,N=0,z=-1,j=-1;const B={};let F=Oa("");const U=n?n.anchor:t;let G=0,H=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[G,H]=l.layout.get("text-offset").evaluate(b,{},S).map((e=>e*jd)):(G=l.layout.get("text-radial-offset").evaluate(b,{},S)*jd,H=yf),e.allowVerticalPlacement&&i.vertical){const e=i.vertical;if(p)O=Cf(e),s&&(I=Cf(s));else{const n=l.layout.get("text-rotate").evaluate(b,{},S)+90;C=kf(u,U,t,c,d,h,e,f,n,m),s&&(P=kf(u,U,t,c,d,h,s,y,n))}}if(o){const r=l.layout.get("icon-rotate").evaluate(b,{},S),i="none"!==l.layout.get("icon-text-fit"),a=of(o,r,w,i),f=s?of(s,r,w,i):void 0;k=kf(u,U,t,c,d,h,o,y,r),L=4*a.length;const p=e.iconSizeData;let m=null;"source"===p.kind?(m=[Bd*l.layout.get("icon-size").evaluate(b,{},S)],m[0]>Sf&&V(`${e.layerIds[0]}: Value for "icon-size" is >= ${Ef}. Reduce your "icon-size".`)):"composite"===p.kind&&(m=[Bd*x.compositeIconSizes[0].evaluate(b,{},S),Bd*x.compositeIconSizes[1].evaluate(b,{},S)],(m[0]>Sf||m[1]>Sf)&&V(`${e.layerIds[0]}: Value for "icon-size" is >= ${Ef}. Reduce your "icon-size".`)),e.addSymbols(e.icon,a,m,_,v,b,!1,n,t,T.lineStartIndex,T.lineLength,-1,E,S),z=e.icon.placedSymbolArray.length-1,f&&(D=4*f.length,e.addSymbols(e.icon,f,m,_,v,b,Mh.vertical,n,t,T.lineStartIndex,T.lineLength,-1,E,S),j=e.icon.placedSymbolArray.length-1)}for(const V in i.horizontal){const r=i.horizontal[V];M||(F=Oa(r.text),p?A=Cf(r):M=kf(u,U,t,c,d,h,r,f,l.layout.get("text-rotate").evaluate(b,{},S),m));const o=1===r.positionedLines.length;if(R+=Tf(e,n,t,r,a,l,p,b,m,T,i.vertical?Mh.horizontal:Mh.horizontalOnly,o?Object.keys(i.horizontal):[V],B,z,x,E,S),o)break}i.vertical&&(N+=Tf(e,n,t,i.vertical,a,l,p,b,m,T,Mh.vertical,["vertical"],B,j,x,E,S));let q=-1;const $=(e,t)=>e?Math.max(e,t):t;q=$(A,q),q=$(O,q),q=$(I,q);const W=q>-1?1:0;e.glyphOffsetArray.length>=sp.MAX_GLYPHS&&V("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(U.x,U.y,U.z,t.x,t.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical>=0?B.vertical:-1,z,j,F,void 0!==M?M:e.collisionBoxArray.length,void 0!==M?M+1:e.collisionBoxArray.length,void 0!==C?C:e.collisionBoxArray.length,void 0!==C?C+1:e.collisionBoxArray.length,void 0!==k?k:e.collisionBoxArray.length,void 0!==k?k+1:e.collisionBoxArray.length,P||e.collisionBoxArray.length,P?P+1:e.collisionBoxArray.length,c,R,N,L,D,W,0,G,H,q)}(e,s,p,a,n,r,i,I,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,E,M,l,0,S,k,m,t,o,u,c,d)};if("line"===C)for(const x of Yh(t.geometry,0,0,ss,ss)){const t=Zh(x,w,T,n.vertical||g,r,v,b,e.overscaling,ss);for(const n of t)g&&Pf(e,g.text,P,n)||L(x,n,d)}else if("line-center"===C){for(const x of t.geometry)if(x.length>1){const e=Wh(x,T,n.vertical||g,r,v,b);e&&L(x,e,d)}}else if("Polygon"===t.type)for(const x of Ec(t.geometry,0)){const e=ff(x,16);L(x[0],new Gh(e.x,e.y,0,0,void 0),d)}else if("LineString"===t.type)for(const x of t.geometry)L(x,new Gh(x[0].x,x[0].y,0,0,void 0),d);else if("Point"===t.type)for(const x of t.geometry)for(const e of x)L([e],new Gh(e.x,e.y,0,0,void 0),d)}const Ef=255,Sf=Ef*Bd;function Tf(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g){const y=function(e,t,n,r,i,o,a,s){const l=[];if(0===t.positionedLines.length)return l;const u=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=function(e){const t=e[0],n=e[1],r=t*n;return r>0?[t,-n]:r<0?[-t,n]:0===t?[n,t]:[n,-t]}(n);let d=Math.abs(t.top-t.bottom);for(const m of t.positionedLines)d-=m.lineOffset;const h=t.positionedLines.length,f=d/h;let p=t.top-n[1];for(let m=0;m<h;++m){const e=t.positionedLines[m];p=cf(t,f,p,m);for(const r of e.positionedGlyphs){if(!r.rect)continue;const e=r.rect||{};let o=xh+1,d=!0,h=1,f=0;if(r.imageName){const e=a[r.imageName];if(!e)continue;if(e.sdf){V("SDF images are not supported in formatted text and will be ignored.");continue}d=!1,h=e.pixelRatio,o=Eh/h}const m=(i||s)&&r.vertical,g=r.metrics.advance*r.scale/2,y=r.metrics,_=r.rect;if(null===_)continue;s&&t.verticalizable&&(f=r.imageName?g-r.metrics.width*r.scale/2:0);const b=i?[r.x+g,r.y]:[0,0];let x=[0,0],w=[0,0],E=!1;i||(m?(w=[r.x+g+c[0],r.y+c[1]-f],E=!0):x=[r.x+g+n[0],r.y+n[1]-f]);const S=_.w*r.scale/(h*(r.localGlyph?ef:1)),T=_.h*r.scale/(h*(r.localGlyph?ef:1));let M,k,C,P;if(m){const e=r.y-p,t=new v(-g,g-e),n=-Math.PI/2,i=new v(...w);M=new v(-g+x[0],x[1]),M._rotateAround(n,t)._add(i),M.x+=-e+g,M.y-=(y.left-o)*r.scale;const a=r.imageName?y.advance*r.scale:jd*r.scale,s=String.fromCharCode(r.glyph);$d(s)?M.x+=(1-o)*r.scale:Wd(s)?M.x+=a-y.height*r.scale+(-o-1)*r.scale:M.x+=r.imageName||y.width+2*o===_.w&&y.height+2*o===_.h?(a-T)/2:(a-(y.height+2*o)*r.scale)/2,k=new v(M.x,M.y-S),C=new v(M.x+T,M.y),P=new v(M.x+T,M.y-S)}else{const e=(y.left-o)*r.scale-g+x[0],t=(-y.top-o)*r.scale+x[1],n=e+S,i=t+T;M=new v(e,t),k=new v(n,t),C=new v(e,i),P=new v(n,i)}if(u){let e;e=i?new v(0,0):E?new v(c[0],c[1]):new v(n[0],n[1]),M._rotateAround(u,e),k._rotateAround(u,e),C._rotateAround(u,e),P._rotateAround(u,e)}const A=new v(0,0),O=new v(0,0);l.push({tl:M,tr:k,bl:C,br:P,tex:e,writingMode:t.writingMode,glyphOffset:b,sectionIndex:r.sectionIndex,isSDF:d,pixelOffsetTL:A,pixelOffsetBR:O,minFontScaleX:0,minFontScaleY:0})}}return l}(0,r,l,o,a,s,i,e.allowVerticalPlacement),_=e.textSizeData;let b=null;"source"===_.kind?(b=[Bd*o.layout.get("text-size").evaluate(s,{},g)],b[0]>Sf&&V(`${e.layerIds[0]}: Value for "text-size" is >= ${Ef}. Reduce your "text-size".`)):"composite"===_.kind&&(b=[Bd*p.compositeTextSizes[0].evaluate(s,{},g),Bd*p.compositeTextSizes[1].evaluate(s,{},g)],(b[0]>Sf||b[1]>Sf)&&V(`${e.layerIds[0]}: Value for "text-size" is >= ${Ef}. Reduce your "text-size".`)),e.addSymbols(e.text,y,b,l,a,s,c,t,n,u.lineStartIndex,u.lineLength,f,m,g);for(const v of d)h[v]=e.text.placedSymbolArray.length-1;return 4*y.length}function Mf(e){for(const t in e)return e[t];return null}function kf(e,t,n,r,i,o,a,s,l,u){let c=a.top,d=a.bottom,h=a.left,f=a.right;const p=a.collisionPadding;if(p&&(h-=p[0],c-=p[1],f+=p[2],d+=p[3]),l){const e=new v(h,c),t=new v(f,c),n=new v(h,d),r=new v(f,d),i=x(l);let o=new v(0,0);u&&(o=new v(u[0],u[1])),e._rotateAround(i,o),t._rotateAround(i,o),n._rotateAround(i,o),r._rotateAround(i,o),h=Math.min(e.x,t.x,n.x,r.x),f=Math.max(e.x,t.x,n.x,r.x),c=Math.min(e.y,t.y,n.y,r.y),d=Math.max(e.y,t.y,n.y,r.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,h,c,f,d,s,r,i,o),e.length-1}function Cf(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Pf(e,t,n,r){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<n)return!0}else i[t]=[];return i[t].push(r),!1}function Af(e,t){const n=e.fovAboveCenter,r=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-r)/Math.cos(e._pitch),o=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),a=Math.sin(e._pitch)*o+i;return Math.min(1.01*a,i*(1/e._horizonShift))}function Of(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const n=Math.pow(2,-e.z),r=e.x*n,i=(e.x+1)*n,o=e.y*n,a=(e.y+1)*n,s=Wl(r),l=Wl(i),u=Zl(o),c=Zl(a),d=t.project(s,u),h=t.project(l,u),f=t.project(l,c),p=t.project(s,c);let m=Math.min(d.x,h.x,f.x,p.x),g=Math.min(d.y,h.y,f.y,p.y),y=Math.max(d.x,h.x,f.x,p.x),v=Math.max(d.y,h.y,f.y,p.y);const _=n/16;function b(e,n,r,i,o,a){const s=(r+o)/2,l=(i+a)/2,u=t.project(Wl(s),Zl(l)),c=Math.max(0,m-u.x,g-u.y,u.x-y,u.y-v);m=Math.min(m,u.x),y=Math.max(y,u.x),g=Math.min(g,u.y),v=Math.max(v,u.y),c>_&&(b(e,u,r,i,s,l),b(u,n,s,l,o,a))}b(d,h,r,o,i,o),b(h,f,i,o,i,a),b(f,p,i,a,r,a),b(p,d,r,a,r,o),m-=_,g-=_,y+=_,v+=_;const x=1/Math.max(y-m,v-g);return{scale:x,x:m*x,y:g*x,x2:y*x,y2:v*x,projection:t}}const If=fs(new Float32Array(16));class Lf{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new Gl(0,0)}projectTilePoint(e,t,n){return{x:e,y:t,z:0}}locationPoint(e,t,n=!0){return e._coordinatePoint(e.locationCoordinate(t),n)}pixelsPerMeter(e,t){return $l(1,e)*t}pixelSpaceConversion(e,t,n){return 1}farthestPixelDistance(e){return Af(e,e.pixelsPerMeter)}pointCoordinate(e,t,n,r){const i=e.horizonLineFromTop(!1),o=new v(t,Math.max(i,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(o,r))}pointCoordinate3D(e,t,n){const r=new v(t,n);if(e.elevation)return e.elevation.pointCoordinate(r);{const t=this.pointCoordinate(e,r.x,r.y,0);return[t.x,t.y,t.z]}}isPointAboveHorizon(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);const n=e.horizonLineFromTop();return t.y<n}createInversionMatrix(e,t){return If}createTileMatrix(e,t,n){let r,i,o;const a=n.canonical,s=fs(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Of(a,this);r=1,i=l.x+n.wrap*l.scale,o=l.y,ys(s,s,[r/l.scale,r/l.scale,e.pixelsPerMeter/t])}else r=t/e.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*n.wrap)*r,o=a.y*r;return gs(s,s,[i,o,0]),ys(s,s,[r/ss,r/ss,1]),s}upVector(e,t,n){return[0,0,1]}upVectorScale(e,t,n){return{metersToTile:1}}}class Df extends Lf{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,n]=this.parallels=e.parallels||[29.5,45.5],r=Math.sin(x(t));this.n=(r+Math.sin(x(n)))/2,this.c=1+r*(2*this.n-r),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n:n,c:r,r0:i}=this,o=x(e-this.center[0]),a=x(t),s=Math.sqrt(r-2*n*Math.sin(a))/n;return{x:s*Math.sin(o*n),y:s*Math.cos(o*n)-i,z:0}}unproject(e,t){const{n:n,c:r,r0:i}=this,o=i+t;let a=Math.atan2(e,Math.abs(o))*Math.sign(o);o*n<0&&(a-=Math.PI*Math.sign(e)*Math.sign(o));const s=x(this.center[0])*n;a=P(a,-Math.PI-s,Math.PI-s);const l=k(w(a/n)+this.center[0],-180,180),u=Math.asin(k((r-(e*e+o*o)*n*n)/(2*n),-1,1)),c=k(w(u),-Yl,Yl);return new Gl(l,c)}}const Rf=1.340264,Nf=-.081106,zf=893e-6,jf=.003796,Bf=Math.sqrt(3)/2;class Ff extends Lf{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const n=Math.asin(Bf*Math.sin(t)),r=n*n,i=r*r*r;return{x:.5*(e*Math.cos(n)/(Bf*(Rf+3*Nf*r+i*(7*zf+9*jf*r)))/Math.PI+.5),y:1-.5*(n*(Rf+Nf*r+i*(zf+jf*r))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=n*n,i=r*r*r;for(let u,c,d,h=0;h<12&&(c=n*(Rf+Nf*r+i*(zf+jf*r))-t,d=Rf+3*Nf*r+i*(7*zf+9*jf*r),u=c/d,n=k(n-u,-Math.PI/3,Math.PI/3),r=n*n,i=r*r*r,!(Math.abs(u)<1e-12));++h);const o=Bf*e*(Rf+3*Nf*r+i*(7*zf+9*jf*r))/Math.cos(n),a=Math.asin(Math.sin(n)/Bf),s=k(180*o/Math.PI,-180,180),l=k(180*a/Math.PI,-Yl,Yl);return new Gl(s,l)}}class Uf extends Lf{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const n=360*(e-.5),r=k(360*(.5-t),-Yl,Yl);return new Gl(n,r)}}const Gf=Math.PI/2;function Hf(e){return Math.tan((Gf+e)/2)}class Vf extends Lf{constructor(e){super(e),this.center=e.center||[0,30];const[t,n]=this.parallels=e.parallels||[30,30];let r=x(t),i=x(n);this.southernCenter=r+i<0,this.southernCenter&&(r=-r,i=-i);const o=Math.cos(r),a=Hf(r);this.n=r===i?Math.sin(r):Math.log(o/Math.cos(i))/Math.log(Hf(i)/a),this.f=o*Math.pow(Hf(r),this.n)/this.n}project(e,t){t=x(t),this.southernCenter&&(t=-t),e=x(e-this.center[0]);const n=1e-6,{n:r,f:i}=this;i>0?t<-Gf+n&&(t=-Gf+n):t>Gf-n&&(t=Gf-n);const o=i/Math.pow(Hf(t),r);let a=o*Math.sin(r*e),s=i-o*Math.cos(r*e);return a=.5*(a/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:a,y:this.southernCenter?s:1-s,z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;const{n:n,f:r}=this,i=r-t,o=Math.sign(i),a=Math.sign(n)*Math.sqrt(e*e+i*i);let s=Math.atan2(e,Math.abs(i))*o;i*n<0&&(s-=Math.PI*Math.sign(e)*o);const l=k(w(s/n)+this.center[0],-180,180),u=k(w(2*Math.atan(Math.pow(r/a,1/n))-Gf),-Yl,Yl);return new Gl(l,this.southernCenter?-u:u)}}class qf extends Lf{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:Vl(e),y:ql(t),z:0}}unproject(e,t){const n=Wl(e),r=Zl(t);return new Gl(n,r)}}const $f=x(Yl);class Wf extends Lf{project(e,t){const n=(t=x(t))*t,r=n*n;return{x:.5*((e=x(e))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=25,i=0,o=n*n;do{o=n*n;const e=o*o;i=(n*(1.007226+o*(.015085+e*(.028874*o-.044475-.005916*e)))-t)/(1.007226+o*(.045255+e*(.259866*o-.311325-.005916*11*e))),n=k(n-i,-$f,$f)}while(Math.abs(i)>1e-6&&--r>0);o=n*n;const a=k(w(e/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=w(n);return new Gl(a,s)}}const Zf=x(Yl);class Xf extends Lf{project(e,t){t=x(t),e=x(e);const n=Math.cos(t),r=2/Math.PI,i=Math.acos(n*Math.cos(e/2)),o=Math.sin(i)/i,a=.5*(e*r+2*n*Math.sin(e/2)/o)||0,s=.5*(t+Math.sin(t)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(e,t){let n=e=(2*e-.5)*Math.PI,r=t=(2*(1-t)-1)*Math.PI,i=25;const o=1e-6;let a=0,s=0;do{const i=Math.cos(r),o=Math.sin(r),l=2*o*i,u=o*o,c=i*i,d=Math.cos(n/2),h=Math.sin(n/2),f=2*d*h,p=h*h,m=1-c*d*d,g=m?1/m:0,y=m?Math.acos(i*d)*Math.sqrt(1/m):0,v=.5*(2*y*i*h+2*n/Math.PI)-e,_=.5*(y*o+r)-t,b=.5*g*(c*p+y*i*d*u)+1/Math.PI,x=g*(f*l/4-y*o*h),w=.125*g*(l*h-y*o*c*f),E=.5*g*(u*d+y*p*i)+.5,S=x*w-E*b;a=(_*x-v*E)/S,s=(v*w-_*b)/S,n=k(n-a,-Math.PI,Math.PI),r=k(r-s,-Zf,Zf)}while((Math.abs(a)>o||Math.abs(s)>o)&&--i>0);return new Gl(w(n),w(r))}}class Yf extends Lf{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(x(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:n,cosPhi:r}=this;return{x:x(e)*r*n+.5,y:-Math.sin(x(t))/r*n+.5,z:0}}unproject(e,t){const{scale:n,cosPhi:r}=this,i=-(t-.5)/n,o=k(w((e-.5)/n)/r,-180,180),a=Math.asin(k(i*r,-1,1)),s=k(w(a),-Yl,Yl);return new Gl(o,s)}}class Kf extends qf{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,t,n){const r=kl(e,t,n);return zs(r,r,Al(vl(n))),{x:r[0],y:r[1],z:r[2]}}locationPoint(e,t){const n=Ml(t.lat,t.lng),r=Ds([],n),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;Ls(n,n,r,$l(1,0)*ss*i);const o=fs(new Float64Array(16));return ms(o,e.pixelMatrix,e.globeMatrix),zs(n,n,o),new v(n[0],n[1])}pixelsPerMeter(e,t){return $l(1,0)*t}pixelSpaceConversion(e,t,n){const r=$l(1,e)*t,i=In($l(1,45)*t,r,n);return this.pixelsPerMeter(e,t)/i}createTileMatrix(e,t,n){const r=Ol(vl(n.canonical));return ms(new Float64Array(16),e.globeMatrix,r)}createInversionMatrix(e,t){const{center:n}=e,r=Al(vl(t));return _s(r,r,x(n.lng)),vs(r,r,x(n.lat)),ys(r,r,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(r)}pointCoordinate(e,t,n,r){return ml(e,t,n,!0)||new Jl(0,0)}pointCoordinate3D(e,t,n){const r=this.pointCoordinate(e,t,n,0);return[r.x,r.y,r.z]}isPointAboveHorizon(e,t){return!ml(e,t.x,t.y,!1)}farthestPixelDistance(e){const t=function(e,t){const n=e.cameraToCenterDistance,r=e._centerAltitude*t,i=e._camera,o=e._camera.forward(),a=ks([],Is([],o,-n),[0,0,r]),s=e.worldSize/(2*Math.PI),l=[0,0,-s],u=e.width/e.height,c=Math.tan(e.fovAboveCenter),d=Is([],i.up(),c),h=Is([],i.right(),c*u),f=Ds([],ks([],ks([],o,d),h)),p=[];let m;if(new tl(a,f).closestPointOnSphere(l,s,p)){const t=ks([],p,l),n=Fs([],t,a);m=Math.cos(e.fovAboveCenter)*Ts(n)}else{const e=Fs([],a,l),t=Fs([],l,a);Ds(t,t);const n=Ts(e)-s;m=Math.sqrt(n*(n+2*s));const r=Math.acos(m/(s+n))-Math.acos(Rs(o,t));m*=Math.cos(r)}return 1.01*m}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),n=Ll(e.zoom);if(n>0){const r=Af(e,$l(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),o=Math.max(e.width,e.height)/e.worldSize*Math.PI;return In(t,r+i*(1-Math.cos(o)),Math.pow(n,10))}return t}upVector(e,t,n){return kl(t,n,e,1)}upVectorScale(e){return{metersToTile:pl(Cl(vl(e)))}}}function Jf(e){const t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new qf(e);case"equirectangular":return new Uf(e);case"naturalEarth":return new Wf(e);case"equalEarth":return new Ff(e);case"winkelTripel":return new Xf(e);case"albers":return n?new Yf(e):new Df(e);case"lambertConformalConic":return n?new Yf(e):new Vf(e);case"globe":return new Kf(e)}throw new Error(`Invalid projection name: ${e.name}`)}const Qf=Wc.types,ep=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function tp(e,t,n,r,i,o,a,s,l,u,c,d,h){const f=s?Math.min(Sf,Math.round(s[0])):0,p=s?Math.min(Sf,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,(f<<1)+(l?1:0),p,16*u,16*c,256*d,256*h)}function np(e,t,n,r,i,o,a){e.emplaceBack(t,n,r,i,o,a)}function rp(e,t,n,r,i){e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i)}function ip(e){for(const t of e.sections)if(lo(t.text))return!0;return!1}class op{constructor(e){this.layoutVertexArray=new Xo,this.indexArray=new ra,this.programConfigurations=e,this.segments=new as,this.dynamicLayoutVertexArray=new qo,this.opacityVertexArray=new Ko,this.placedSymbolArray=new ma,this.globeExtVertexArray=new Yo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Od.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Ld.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,ep,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Id.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Xi(op,"SymbolBuffers");class ap{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new as,this.collisionVertexArray=new ta,this.collisionVertexArrayExt=new na}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Dd.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Rd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Xi(ap,"CollisionBuffers");class sp{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fs([]),this.placementViewportMatrix=fs([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fd(this.zoom,t["text-size"]),this.iconSizeData=Fd(this.zoom,t["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((e=>Mh[e])),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new op(new Ya(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new op(new Ya(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new va,this.lineVertexArray=new _a,this.symbolInstances=new ya}calculateGlyphDependencies(e,t,n,r,i){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,r&&i){const n=qd[e.charAt(o)];n&&(t[n.charCodeAt(0)]=!0)}}populate(e,t,n,r){const i=this.layers[0],o=i.layout,a="globe"===this.projection.name,s=o.get("text-font"),l=o.get("text-field"),u=o.get("icon-image"),c=("constant"!==l.value.kind||l.value.value instanceof Dt&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),d="constant"!==u.value.kind||!!u.value.value||Object.keys(u.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!d)return;const f=t.iconDependencies,p=t.glyphDependencies,m=t.availableImages,g=new wo(this.zoom);for(const{feature:y,id:v,index:_,sourceLayerIndex:b}of e){const e=i._featureFilter.needGeometry,t=su(y,e);if(!i._featureFilter.filter(g,t,n))continue;if(e||(t.geometry=au(y,n,r)),a&&1!==y.type&&n.z<=5){const e=t.geometry,r=.98078528056,i=(e,t)=>Rs(kl(e.x,e.y,n,1),kl(t.x,t.y,n,1))<r;for(let t=0;t<e.length;t++)e[t]=nu(e[t],i)}let l,u;if(c){const e=i.getValueAndResolveTokens("text-field",t,n,m),r=Dt.factory(e);ip(r)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===_o()||this.hasRTLText&&xo.isParsed())&&(l=Vd(r,i,t))}if(d){const e=i.getValueAndResolveTokens("icon-image",t,n,m);u=e instanceof Rt?e:Rt.fromString(e)}if(!l&&!u)continue;const x=this.sortFeaturesByKey?h.evaluate(t,{},n):void 0;if(this.features.push({id:v,text:l,icon:u,index:_,sourceLayerIndex:b,geometry:t.geometry,properties:y.properties,type:Qf[y.type],sortKey:x}),u&&(f[u.name]=!0),l){const e=s.evaluate(t,{},n).join(","),r="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Mh.vertical)>=0;for(const t of l.sections)if(t.image)f[t.image.name]=!0;else{const n=to(l.toString()),i=t.fontStack||e,o=p[i]=p[i]||{};this.calculateGlyphDependencies(t.text,o,r,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},r=[];let i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){const o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){const o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(e,t,n){const r=n?t[0][t[0].length-1]:t[0][0];return`${e}:${r.x}:${r.y}`}for(let u=0;u<e.length;u++){const c=e[u],d=c.geometry,h=c.text?c.text.toString():null;if(!h){o(u);continue}const f=l(h,d),p=l(h,d,!0);if(f in n&&p in t&&n[f]!==t[p]){const e=s(f,p,d),i=a(f,p,r[e].geometry);delete t[f],delete n[p],n[l(h,r[i].geometry,!0)]=i,r[e].geometry=null}else f in n?a(f,p,d):p in t?s(f,p,d):(o(u),t[f]=i-1,n[p]=i-1)}return r.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Jf(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:r,y:i}of t)this.lineVertexArray.emplaceBack(r,i);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,t,n,r,i,o,a,s,l,u,c,d,h,f){const p=e.indexArray,m=e.layoutVertexArray,g=e.globeExtVertexArray,y=e.segments.prepareSegment(4*t.length,m,p,this.canOverlap?o.sortKey:void 0),v=this.glyphOffsetArray.length,_=y.vertexLength,b=this.allowVerticalPlacement&&a===Mh.vertical?Math.PI/2:0,x=o.text&&o.text.sections;for(let E=0;E<t.length;E++){const{tl:r,tr:i,bl:a,br:u,tex:c,pixelOffsetTL:d,pixelOffsetBR:v,minFontScaleX:_,minFontScaleY:w,glyphOffset:S,isSDF:T,sectionIndex:M}=t[E],k=y.vertexLength,C=S[1];if(tp(m,l.x,l.y,r.x,C+r.y,c.x,c.y,n,T,d.x,d.y,_,w),tp(m,l.x,l.y,i.x,C+i.y,c.x+c.w,c.y,n,T,v.x,d.y,_,w),tp(m,l.x,l.y,a.x,C+a.y,c.x,c.y+c.h,n,T,d.x,v.y,_,w),tp(m,l.x,l.y,u.x,C+u.y,c.x+c.w,c.y+c.h,n,T,v.x,v.y,_,w),s){const{x:t,y:n,z:r}=s.anchor,[i,o,a]=s.up;np(g,t,n,r,i,o,a),np(g,t,n,r,i,o,a),np(g,t,n,r,i,o,a),np(g,t,n,r,i,o,a),rp(e.dynamicLayoutVertexArray,t,n,r,b)}else rp(e.dynamicLayoutVertexArray,l.x,l.y,l.z,b);p.emplaceBack(k,k+1,k+2),p.emplaceBack(k+1,k+2,k+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(S[0]),E!==t.length-1&&M===t[E+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,o,o.index,{},h,f,x&&x[M])}const w=s?s.anchor:l;e.placedSymbolArray.emplaceBack(w.x,w.y,w.z,l.x,l.y,v,this.glyphOffsetArray.length-v,_,u,c,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,d,0)}_commitLayoutVertex(e,t,n,r,i,o,a){e.emplaceBack(t,n,r,i,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(e,t,n,r,i,o,a){const s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,u=a.tileAnchorX,c=a.tileAnchorY;for(let h=0;h<4;h++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,u,c,new v(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,u,c,new v(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,u,c,new v(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,u,c,new v(e.x1,e.y2)),s.vertexLength+=4;const d=n.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),s.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(e,t,o.placedIconSymbolIndex);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ap(Qo,Nd.members,ua),this.iconCollisionBox=new ap(Qo,Nd.members,ua);const n=Gd(this.iconSizeData,e),r=Gd(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(e,t,n,r){const i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),o=Ud(this.textSizeData,e,i)/jd;return this.tilePixelRatio*o}getSymbolInstanceIconSize(e,t,n){const r=this.icon.placedSymbolArray.get(n),i=Ud(this.iconSizeData,e,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}_updateTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,r.padding)}}_updateIconDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(e,t,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,r.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=Gd(this.iconSizeData,e),r=Gd(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,n,r,i,o,a,s,l){const u={};if(t<n){const{x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:h,featureIndex:f}=e.get(t);u.textBox={x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:h},u.textFeatureIndex=f}if(r<i){const{x1:t,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:h,featureIndex:f}=e.get(r);u.verticalTextBox={x1:t,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:h},u.verticalTextFeatureIndex=f}if(o<a){const{x1:t,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:h,featureIndex:f}=e.get(o);u.iconBox={x1:t,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:h},u.iconFeatureIndex=f}if(s<l){const{x1:t,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:h,featureIndex:f}=e.get(s);u.verticalIconBox={x1:t,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:h},u.verticalIconFeatureIndex=f}return u}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs;for(let i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const e=this.symbolInstances.get(a);r.push(0|Math.round(t*e.tileAnchorX+n*e.tileAnchorY)),i.push(e.featureIndex)}return o.sort(((e,t)=>r[e]-r[t]||i[t]-i[e])),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:r,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:o,placedIconSymbolIndex:a,verticalPlacedIconSymbolIndex:s}=t;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),r>=0&&r!==n&&this.addIndicesForPlacedSymbol(this.text,r),i>=0&&i!==r&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),o>=0&&this.addIndicesForPlacedSymbol(this.text,o),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Xi(sp,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sp.MAX_GLYPHS=65535,sp.addDynamicAttributes=rp;const lp=new Do({"symbol-placement":new Oo(et.layout_symbol["symbol-placement"]),"symbol-spacing":new Oo(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Oo(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Io(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Oo(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Oo(et.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Oo(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Oo(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Oo(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new Io(et.layout_symbol["icon-size"]),"icon-text-fit":new Oo(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Oo(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new Io(et.layout_symbol["icon-image"]),"icon-rotate":new Io(et.layout_symbol["icon-rotate"]),"icon-padding":new Oo(et.layout_symbol["icon-padding"]),"icon-keep-upright":new Oo(et.layout_symbol["icon-keep-upright"]),"icon-offset":new Io(et.layout_symbol["icon-offset"]),"icon-anchor":new Io(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Oo(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Oo(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Oo(et.layout_symbol["text-rotation-alignment"]),"text-field":new Io(et.layout_symbol["text-field"]),"text-font":new Io(et.layout_symbol["text-font"]),"text-size":new Io(et.layout_symbol["text-size"]),"text-max-width":new Io(et.layout_symbol["text-max-width"]),"text-line-height":new Io(et.layout_symbol["text-line-height"]),"text-letter-spacing":new Io(et.layout_symbol["text-letter-spacing"]),"text-justify":new Io(et.layout_symbol["text-justify"]),"text-radial-offset":new Io(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Oo(et.layout_symbol["text-variable-anchor"]),"text-anchor":new Io(et.layout_symbol["text-anchor"]),"text-max-angle":new Oo(et.layout_symbol["text-max-angle"]),"text-writing-mode":new Oo(et.layout_symbol["text-writing-mode"]),"text-rotate":new Io(et.layout_symbol["text-rotate"]),"text-padding":new Oo(et.layout_symbol["text-padding"]),"text-keep-upright":new Oo(et.layout_symbol["text-keep-upright"]),"text-transform":new Io(et.layout_symbol["text-transform"]),"text-offset":new Io(et.layout_symbol["text-offset"]),"text-allow-overlap":new Oo(et.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Oo(et.layout_symbol["text-ignore-placement"]),"text-optional":new Oo(et.layout_symbol["text-optional"])});var up={paint:new Do({"icon-opacity":new Io(et.paint_symbol["icon-opacity"]),"icon-color":new Io(et.paint_symbol["icon-color"]),"icon-halo-color":new Io(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new Io(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Io(et.paint_symbol["icon-halo-blur"]),"icon-translate":new Oo(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Oo(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new Io(et.paint_symbol["text-opacity"]),"text-color":new Io(et.paint_symbol["text-color"],{runtimeType:ht,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Io(et.paint_symbol["text-halo-color"]),"text-halo-width":new Io(et.paint_symbol["text-halo-width"]),"text-halo-blur":new Io(et.paint_symbol["text-halo-blur"]),"text-translate":new Oo(et.paint_symbol["text-translate"]),"text-translate-anchor":new Oo(et.paint_symbol["text-translate-anchor"])}),layout:lp};class cp{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:lt,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xi(cp,"FormatSectionOverride",{omit:["defaultValue"]});class dp extends rs{constructor(e){super(e,up)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const e=[];for(const t of n)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,r){const i=this.layout.get(e).evaluate(t,{},n,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||Xr(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,n)=>n in e?String(e[n]):""))}(t.properties,i)}createBucket(e){return new sp(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of up.paint.overridableProperties){if(!dp.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new cp(t),r=new Zr(n,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new Kr("source",r):new Jr("composite",r,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new Po(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&dp.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),r=up.paint.properties[t];let i=!1;const o=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Dt)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{i||(t instanceof Ut&&jt(t.value)===gt?o(t.value.sections):t instanceof $t?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return i}getProgramConfiguration(e){return new Xa(this,e)}}var hp={paint:new Do({"background-color":new Oo(et.paint_background["background-color"]),"background-pattern":new Oo(et.paint_background["background-pattern"]),"background-opacity":new Oo(et.paint_background["background-opacity"])})},fp={paint:new Do({"raster-opacity":new Oo(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Oo(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Oo(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Oo(et.paint_raster["raster-brightness-max"]),"raster-saturation":new Oo(et.paint_raster["raster-saturation"]),"raster-contrast":new Oo(et.paint_raster["raster-contrast"]),"raster-resampling":new Oo(et.paint_raster["raster-resampling"]),"raster-fade-duration":new Oo(et.paint_raster["raster-fade-duration"])})};class pp extends rs{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var mp={paint:new Do({"sky-type":new Oo(et.paint_sky["sky-type"]),"sky-atmosphere-sun":new Oo(et.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Oo(et.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Oo(et.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Oo(et.paint_sky["sky-gradient-radius"]),"sky-gradient":new Lo(et.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Oo(et.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Oo(et.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Oo(et.paint_sky["sky-opacity"])})};function gp(e,t,n){const r=[0,0,1],i=Ws([]);return Xs(i,i,n?-x(e)+Math.PI:x(e)),Zs(i,i,-x(t)),js(r,r,i),Ds(r,r)}const yp={circle:class extends rs{constructor(e){super(e,Cu)}createBucket(e){return new cu(e)}queryRadius(e){const t=e;return Eu("circle-radius",this,t)+Eu("circle-stroke-width",this,t)+Su(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,r,i,o,a,s){const l=Mu(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return Pu(e,r,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,u)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new Xa(this,e)}},heatmap:class extends rs{createBucket(e){return new Du(e)}constructor(e){super(e,Fu),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Uu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return Eu("heatmap-radius",this,e)}queryIntersectsFeature(e,t,n,r,i,o,a,s){const l=this.paint.get("heatmap-radius").evaluate(t,n);return Pu(e,r,o,a,s,!0,!0,new v(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new Xa(this,e)}},hillshade:class extends rs{constructor(e){super(e,Gu)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends rs{constructor(e){super(e,Pc)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(e){return new Xa(this,e)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new kc(e)}queryRadius(){return Su(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,r,i,o){return!e.queryGeometry.isAboveHorizon&&fu(Tu(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends rs{constructor(e){super(e,cd)}createBucket(e){return new ed(e)}queryRadius(){return Su(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new Xa(this,e)}queryIntersectsFeature(e,t,n,r,i,o,a,s,l){const u=Mu(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(t,n),d=this.paint.get("fill-extrusion-base").evaluate(t,n),h=[0,0],f=s&&o.elevation,p=o.elevation?o.elevation.exaggeration():1,m=e.tile.getBucket(this);if(f&&m instanceof ed){const e=m.centroidVertexArray,t=l+1;t<e.length&&(h[0]=e.geta_centroid_pos0(t),h[1]=e.geta_centroid_pos1(t))}if(0===h[0]&&1===h[1])return!1;"globe"===o.projection.name&&(r=ld([r],[new v(0,0),new v(ss,ss)],e.tileID.canonical).map((e=>e.polygon)).flat());const g=f?s:null,[y,_]=function(e,t,n,r,i,o,a,s,l,u,c){return"globe"===e.projection.name?function(e,t,n,r,i,o,a,s,l,u,c){const d=[],h=[],f=e.projection.upVectorScale(c,e.center.lat,e.worldSize).metersToTile,p=[0,0,0,1],m=[0,0,0,1],g=(e,t,n,r)=>{e[0]=t,e[1]=n,e[2]=r,e[3]=1},y=sd();n>0&&(n+=y),r+=y;for(const v of t){const t=[],y=[];for(const d of v){const h=d.x+i.x,v=d.y+i.y,_=e.projection.projectTilePoint(h,v,c),b=e.projection.upVector(c,d.x,d.y);let x=n,w=r;if(a){const e=_d(h,v,n,r,a,s,l,u);x+=e.base,w+=e.top}0!==n?g(p,_.x+b[0]*f*x,_.y+b[1]*f*x,_.z+b[2]*f*x):g(p,_.x,_.y,_.z),g(m,_.x+b[0]*f*w,_.y+b[1]*f*w,_.z+b[2]*f*w),zs(p,p,o),zs(m,m,o),t.push(new gd(p[0],p[1],p[2])),y.push(new gd(m[0],m[1],m[2]))}d.push(t),h.push(y)}return[d,h]}(e,t,n,r,i,o,a,s,l,u,c):a?function(e,t,n,r,i,o,a,s,l){const u=[],c=[],d=[0,0,0,1];for(const h of e){const e=[],f=[];for(const u of h){const c=u.x+r.x,h=u.y+r.y,p=_d(c,h,t,n,o,a,s,l);d[0]=c,d[1]=h,d[2]=p.base,d[3]=1,qs(d,d,i),d[3]=Math.max(d[3],1e-5);const m=new gd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);d[0]=c,d[1]=h,d[2]=p.top,d[3]=1,qs(d,d,i),d[3]=Math.max(d[3],1e-5);const g=new gd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);e.push(m),f.push(g)}u.push(e),c.push(f)}return[u,c]}(t,n,r,i,o,a,s,l,u):function(e,t,n,r,i){const o=[],a=[],s=i[8]*t,l=i[9]*t,u=i[10]*t,c=i[11]*t,d=i[8]*n,h=i[9]*n,f=i[10]*n,p=i[11]*n;for(const m of e){const e=[],t=[];for(const n of m){const o=n.x+r.x,a=n.y+r.y,m=i[0]*o+i[4]*a+i[12],g=i[1]*o+i[5]*a+i[13],y=i[2]*o+i[6]*a+i[14],v=i[3]*o+i[7]*a+i[15],_=m+s,b=g+l,x=y+u,w=Math.max(v+c,1e-5),E=m+d,S=g+h,T=y+f,M=Math.max(v+p,1e-5);e.push(new gd(_/w,b/w,x/w)),t.push(new gd(E/M,S/M,T/M))}o.push(e),a.push(t)}return[o,a]}(t,n,r,i,o)}(o,r,d,c,u,a,g,h,p,o.center.lat,e.tileID.canonical),b=e.queryGeometry;return function(e,t,n){let r=1/0;fu(n,t)&&(r=vd(n,t[0]));for(let i=0;i<t.length;i++){const o=t[i],a=e[i];for(let e=0;e<o.length-1;e++){const t=o[e],i=[t,o[e+1],a[e+1],a[e],t];du(n,i)&&(r=Math.min(r,vd(n,i)))}}return r!==1/0&&r}(y,_,b.isPointQuery()?b.screenBounds:b.screenGeometry)}},line:class extends rs{constructor(e){super(e,Cd),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof On,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Pd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Md(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new Xa(this,e)}queryRadius(e){const t=e,n=Ad(Eu("line-width",this,t),Eu("line-gap-width",this,t)),r=Eu("line-offset",this,t);return n/2+Math.abs(r)+Su(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,r,i,o){if(e.queryGeometry.isAboveHorizon)return!1;const a=Tu(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*Ad(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),l=this.paint.get("line-offset").evaluate(t,n);return l&&(r=function(e,t){const n=[],r=new v(0,0);for(let i=0;i<e.length;i++){const o=e[i],a=[];for(let e=0;e<o.length;e++){const n=o[e],i=o[e+1],s=0===e?r:n.sub(o[e-1])._unit()._perp(),l=e===o.length-1?r:i.sub(n)._unit()._perp(),u=s._add(l)._unit();u._mult(1/(u.x*l.x+u.y*l.y)),a.push(u._mult(t)._add(n))}n.push(a)}return n}(r,l*e.pixelToTileUnitsFactor)),function(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(e.length>=3)for(let t=0;t<i.length;t++)if(bu(e,i[t]))return!0;if(pu(e,i,n))return!0}return!1}(a,r,s)}isTileClipped(){return!0}},symbol:dp,background:class extends rs{constructor(e){super(e,hp)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends rs{constructor(e){super(e,fp)}getProgramIds(){return["raster"]}},sky:class extends rs{constructor(e){super(e,mp),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Uu({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),r=!n,i=e.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&V("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?gp(o.azimuthal,90-o.polar,t):gp(n[0],90-n[1],t)}const n=this.paint.get("sky-gradient-center");return gp(n[0],90-n[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}};class vp{constructor(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)}update(e,n,r){const{width:i,height:o}=e,{context:a}=this,{gl:s}=a,{HTMLImageElement:l,HTMLCanvasElement:u,HTMLVideoElement:c,ImageData:d,ImageBitmap:h}=t;if(s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!n||!1!==n.premultiply)),r||this.size&&this.size[0]===i&&this.size[1]===o){const{x:t,y:n}=r||{x:0,y:0};e instanceof l||e instanceof u||e instanceof c||e instanceof d||h&&e instanceof h?s.texSubImage2D(s.TEXTURE_2D,0,t,n,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,n,i,o,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[i,o],e instanceof l||e instanceof u||e instanceof c||e instanceof d||h&&e instanceof h?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,i,o,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap?e===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class _p{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class bp{constructor(){this.tasks={},this.taskQueue=[],j(["process"],this),this.invoker=new _p(this.process),this.nextId=0}add(e,t){const n=this.nextId++,r=function({type:e,isSymbolTile:t,zoom:n}){return n=n||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-n:"maybePrepare"===e&&t?400-n:500:200-n:100-n}(t);if(0===r){W();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:e,metadata:t,priority:r,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){W();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let r=0;r<this.taskQueue.length;r++){const n=this.tasks[this.taskQueue[r]];n.priority<t&&(t=n.priority,e=r)}if(null===e)return null;const n=this.taskQueue[e];return this.taskQueue.splice(e,1),n}remove(){this.invoker.remove()}}class xp{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const wp=["tile","layer","source","sourceLayer","state"];class Ep{constructor(e,t,n,r,i){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=n,this._y=r,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const t of wp)void 0!==this[t]&&(e[t]=this[t]);return e}}const Sp=32,Tp=33,Mp=new Uint16Array(8184);for(let Em=0;Em<2046;Em++){let e=Em+2,t=0,n=0,r=0,i=0,o=0,a=0;for(1&e?r=i=o=Sp:t=n=a=Sp;(e>>=1)>1;){const s=t+r>>1,l=n+i>>1;1&e?(r=t,i=n,t=o,n=a):(t=r,n=i,r=o,i=a),o=s,a=l}const s=4*Em;Mp[s+0]=t,Mp[s+1]=n,Mp[s+2]=r,Mp[s+3]=i}const kp=new Uint16Array(2178),Cp=new Uint8Array(1089),Pp=new Uint16Array(1089);function Ap(e){return 0===e?-.03125:32===e?.03125:0}var Op=Bo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Ip={type:2,extent:ss,loadGeometry:()=>[[new v(0,0),new v(ss+1,0),new v(ss+1,ss+1),new v(0,ss+1),new v(0,0)]]};class Lp{constructor(e,t,n,r,i){this.tileID=e,this.uid=D(),this.uses=0,this.tileSize=t,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<Ze.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Of(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const r of e){const e=r.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)n[t.id]=r}}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof sp){if(this.hasSymbolBuckets=!0,!n)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof sp&&t.hasRTLText){this.hasRTLText=!0,xo.isLoading()||xo.isLoaded()||"deferred"!==_o()||bo();break}}this.queryPadding=0;for(const e in this.buckets){const n=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(n))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new fa}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const n in this.buckets){const t=this.buckets[n];t.uploadPending()&&t.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vp(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vp(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new vp(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i,tileTransform:this.tileTransform},e,t,n):{}}querySourceFeatures(e,t){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),i=t?t.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(!o)return;const a=di(t&&t.filter),{z:s,x:l,y:u}=this.tileID.canonical,c={z:s,x:l,y:u};for(let d=0;d<o.length;d++){const t=o.feature(d);if(a.needGeometry){const e=su(t,!0);if(!a.filter(new wo(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new wo(this.tileID.overscaledZ),t))continue;const r=n.getId(t,i),h=new Ep(t,s,l,u,r);h.tile=c,e.push(h)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=Z(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let n=!1;if(this.expirationTime>e)n=!1;else if(t)if(this.expirationTime<t)n=!0;else{const r=this.expirationTime-t;r?this.expirationTime=e+Math.max(r,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const n=this.latestFeatureIndex.loadVTLayers(),r=t.style.listImages();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[a],l=e[a];if(!s||!l||0===Object.keys(l).length)continue;if(o.update(l,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof Md||o instanceof kc){const e=t.style._getSourceCache(o.layers[0].source);t._terrain&&t._terrain.enabled&&e&&o.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const u=t&&t.style&&t.style.getLayer(i);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ze.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Ze.now()+e}setTexture(e,t){const n=t.context,r=n.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new vp(n,e,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE))}setDependencies(e,t){const n={};for(const r of t)n[r]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const n=au(Ip,this.tileID.canonical,this.tileTransform)[0],r=new Uo,i=new ca;for(let o=0;o<n.length;o++){const{x:e,y:t}=n[o];r.emplaceBack(e,t),i.emplaceBack(o)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(r,el.members),this._tileDebugSegments=as.simpleSegment(0,0,r.length,i.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const n=au(Ip,this.tileID.canonical,this.tileTransform)[0];let r,i;if(this.isRaster){const e=function(e,t){const n=Of(e,t),r=Math.pow(2,e.z);for(let u=0;u<Tp;u++)for(let i=0;i<Tp;i++){const o=Wl((e.x+(i+Ap(i))/Sp)/r),a=Zl((e.y+(u+Ap(u))/Sp)/r),s=t.project(o,a),l=u*Tp+i;kp[2*l+0]=Math.round((s.x*n.scale-n.x)*ss),kp[2*l+1]=Math.round((s.y*n.scale-n.y)*ss)}Cp.fill(0),Pp.fill(0);for(let u=2045;u>=0;u--){const e=4*u,t=Mp[e+0],n=Mp[e+1],r=Mp[e+2],i=Mp[e+3],o=t+r>>1,a=n+i>>1,s=o+a-n,l=a+t-o,c=n*Tp+t,d=i*Tp+r,h=a*Tp+o,f=Math.hypot((kp[2*c+0]+kp[2*d+0])/2-kp[2*h+0],(kp[2*c+1]+kp[2*d+1])/2-kp[2*h+1])>=16;Cp[h]=Cp[h]||(f?1:0),u<1022&&(Cp[h]=Cp[h]||Cp[(n+l>>1)*Tp+(t+s>>1)]||Cp[(i+l>>1)*Tp+(r+s>>1)])}const i=new Ho,o=new ra;let a=0;function s(e,t){const n=t*Tp+e;return 0===Pp[n]&&(i.emplaceBack(kp[2*n+0],kp[2*n+1],e*ss/Sp,t*ss/Sp),Pp[n]=++a),Pp[n]-1}function l(e,t,n,r,i,a){const u=e+n>>1,c=t+r>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&Cp[c*Tp+u])l(i,a,e,t,u,c),l(n,r,i,a,u,c);else{const l=s(e,t),u=s(n,r),c=s(i,a);o.emplaceBack(l,u,c)}}return l(0,0,Sp,Sp,Sp,0),l(Sp,Sp,0,0,0,Sp),{vertices:i,indices:o}}(this.tileID.canonical,t);r=e.vertices,i=e.indices}else{r=new Ho,i=new ra;for(const{x:t,y:i}of n)r.emplaceBack(t,i,0,0);const e=vc(r.int16,void 0,4);for(let t=0;t<e.length;t+=3)i.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(r,Op.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(i),this._tileBoundsSegments=as.simpleSegment(0,0,r.length,i.length)}_makeGlobeTileDebugBuffers(e,t){const n=t.projection;if(!n||"globe"!==n.name||t.freezeTileCoverage)return;const r=this.tileID.canonical,i=Al(bl(r,t)),o=Ll(t.zoom);let a;o>0&&(a=ps(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,r,t,i,a,o),this._makeGlobeTileDebugTextBuffer(e,r,t,i,a,o)}_globePoint(e,t,n,r,i,o,a){let s=kl(e,t,n);if(o){const i=1<<n.z,l=Vl(r.center.lng),u=ql(r.center.lat),c=(n.x+.5)/i-l;let d=0;c>.5?d=-1:c<-.5&&(d=1);let h=(e/ss+n.x)/i+d,f=(t/ss+n.y)/i;h=(h-l)*r._pixelsPerMercatorPixel+l,f=(f-u)*r._pixelsPerMercatorPixel+u;const p=[h*r.worldSize,f*r.worldSize,0];zs(p,p,o),s=_l(s,p,a)}return zs(s,s,i)}_makeGlobeTileDebugBorderBuffer(e,t,n,r,i,o){const a=new Uo,s=new ca,l=new Go,u=(e,u,c,d,h)=>{const f=(c-e)/(h-1),p=(d-u)/(h-1),m=a.length;for(let g=0;g<h;g++){const c=e+g*f,d=u+g*p;a.emplaceBack(c,d);const h=this._globePoint(c,d,t,n,r,i,o);l.emplaceBack(h[0],h[1],h[2]),s.emplaceBack(m+g)}},c=ss;u(0,0,c,0,16),u(c,0,c,c,16),u(c,c,0,c,16),u(0,c,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(s),this._tileDebugBuffer=e.createVertexBuffer(a,el.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(l,Qs.members),this._tileDebugSegments=as.simpleSegment(0,0,a.length,s.length)}_makeGlobeTileDebugTextBuffer(e,t,n,r,i,o){const a=ss/4,s=new Uo,l=new ra,u=new Go,c=25;l.reserve(32),s.reserve(c),u.reserve(c);const d=(e,t)=>c*e+t;for(let h=0;h<c;h++){const e=h*a;for(let l=0;l<c;l++){const c=l*a;s.emplaceBack(c,e);const d=this._globePoint(c,e,t,n,r,i,o);u.emplaceBack(d[0],d[1],d[2])}}for(let h=0;h<4;h++)for(let e=0;e<4;e++){const t=d(h,e),n=d(h,e+1),r=d(h+1,e),i=d(h+1,e+1);l.emplaceBack(t,n,r),l.emplaceBack(r,n,i)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(l),this._tileDebugTextBuffer=e.createVertexBuffer(s,el.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(u,Qs.members),this._tileDebugTextSegments=as.simpleSegment(0,0,c,32)}}class Dp{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,n){const r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},I(this.stateChanges[e][r],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])n[t]||(this.deletedStates[e][r][t]=null)}else for(const i in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][i]&&delete this.deletedStates[e][r][i]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(e,t){const n=String(t),r=I({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const n=this.deletedStates[e][t];if(null===n)return{};for(const e in n)delete r[e]}return r}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const n={};for(const r in this.stateChanges){this.state[r]=this.state[r]||{};const e={};for(const t in this.stateChanges[r])this.state[r][t]||(this.state[r][t]={}),I(this.state[r][t],this.stateChanges[r][t]),e[t]=this.state[r][t];n[r]=e}for(const r in this.deletedStates){this.state[r]=this.state[r]||{};const e={};if(null===this.deletedStates[r])for(const t in this.state[r])e[t]={},this.state[r][t]={};else for(const t in this.deletedStates[r]){if(null===this.deletedStates[r][t])this.state[r][t]={};else if(this.state[r][t])for(const e of Object.keys(this.deletedStates[r][t]))delete this.state[r][t][e];e[t]=this.state[r][t]}n[r]=n[r]||{},I(n[r],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const r in e)e[r].setFeatureState(n,t)}}class Rp{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Np(e,t,n,r){let i=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<e[a]||n[a]>t[a])return null}else{const s=1/r[a];let l=(e[a]-n[a])*s,u=(t[a]-n[a])*s;if(l>u){const e=l;l=u,u=e}if(l>i&&(i=l),u<o&&(o=u),i>o)return null}return i}function zp(e,t,n,r,i,o,a,s,l,u,c){const d=r-e,h=i-t,f=o-n,p=a-e,m=s-t,g=l-n,y=c[1]*g-c[2]*m,v=c[2]*p-c[0]*g,_=c[0]*m-c[1]*p,b=d*y+h*v+f*_;if(Math.abs(b)<1e-15)return null;const x=1/b,w=u[0]-e,E=u[1]-t,S=u[2]-n,T=(w*y+E*v+S*_)*x;if(T<0||T>1)return null;const M=E*f-S*h,k=S*d-w*f,C=w*h-E*d,P=(c[0]*M+c[1]*k+c[2]*C)*x;return P<0||T+P>1?null:(p*M+m*k+g*C)*x}function jp(e,t,n){return(e-t)/(n-t)}function Bp(e,t,n,r,i,o,a,s,l){const u=1<<n,c=o-r,d=a-i,h=(e+1)/u*c+r,f=(t+0)/u*d+i,p=(t+1)/u*d+i;s[0]=(e+0)/u*c+r,s[1]=f,l[0]=h,l[1]=p}class Fp{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),n=[];let r=Math.ceil(Math.pow(2,t));const i=1/r,o=(e,t,n,r,i)=>{const o=r?1:0,a=(e+1)*n-o,s=t*n,l=(t+1)*n-o;i[0]=e*n,i[1]=s,i[2]=a,i[3]=l};let a=new Rp(r);const s=[];for(let l=0;l<r*r;l++){o(l%r,Math.floor(l/r),i,!1,s);const t=Gp(s[0],s[1],e),n=Gp(s[2],s[1],e),u=Gp(s[2],s[3],e),c=Gp(s[0],s[3],e);a.minimums.push(Math.min(t,n,u,c)),a.maximums.push(Math.max(t,n,u,c)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){const e=n[n.length-1];a=new Rp(r);for(let t=0;t<r*r;t++){o(t%r,Math.floor(t/r),2,!0,s);const n=e.getElevation(s[0],s[1]),i=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),u=e.getElevation(s[0],s[3]),c=e.isLeaf(s[0],s[1]),d=e.isLeaf(s[2],s[1]),h=e.isLeaf(s[2],s[3]),f=e.isLeaf(s[0],s[3]),p=Math.min(n.min,i.min,l.min,u.min),m=Math.max(n.max,i.max,l.max,u.max),g=c&&d&&h&&f;a.maximums.push(m),a.minimums.push(p),a.leaves.push(m-p<=5&&g?1:0)}n.push(a)}return n}(this.dem),n=t.length-1,r=t[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(t,0,0,n,0)}raycastRoot(e,t,n,r,i,o,a=1){return Np([e,t,-100],[n,r,this.maximums[0]*a],i,o)}raycast(e,t,n,r,i,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,n,r,i,o,a);if(null==s)return null;const l=[],u=[],c=[],d=[],h=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;h.length>0;){const{idx:s,t:f,nodex:p,nodey:m,depth:g}=h.pop();if(this.leaves[s]){Bp(p,m,g,e,t,n,r,c,d);const s=1<<g,l=(p+0)/s,u=(p+1)/s,h=(m+0)/s,y=(m+1)/s,v=Gp(l,h,this.dem)*a,_=Gp(u,h,this.dem)*a,b=Gp(u,y,this.dem)*a,x=Gp(l,y,this.dem)*a,w=zp(c[0],c[1],v,d[0],c[1],_,d[0],d[1],b,i,o),E=zp(d[0],d[1],b,c[0],d[1],x,c[0],c[1],v,i,o),S=Math.min(null!==w?w:Number.MAX_VALUE,null!==E?E:Number.MAX_VALUE);if(S!==Number.MAX_VALUE)return S;{const e=Ls([],i,o,f);if(Up(v,_,x,b,jp(e[0],c[0],d[0]),jp(e[1],c[1],d[1]))>=e[2])return f}continue}let y=0;for(let h=0;h<this._siblingOffset.length;h++){Bp((p<<1)+this._siblingOffset[h][0],(m<<1)+this._siblingOffset[h][1],g+1,e,t,n,r,c,d),c[2]=-100,d[2]=this.maximums[this.childOffsets[s]+h]*a;const f=Np(c,d,i,o);if(null!=f){const e=f;l[h]=e;let t=!1;for(let n=0;n<y&&!t;n++)e>=l[u[n]]&&(u.splice(n,0,h),t=!0);t||(u[y]=h),y++}}for(let e=0;e<y;e++){const t=u[e];h.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(p<<1)+this._siblingOffset[t][0],nodey:(m<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,n,r,i){if(1===e[r].isLeaf(t,n))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=r-1,a=e[o];let s=0,l=0;for(let u=0;u<this._siblingOffset.length;u++){const e=2*t+this._siblingOffset[u][0],r=2*n+this._siblingOffset[u][1],i=a.getElevation(e,r),o=a.isLeaf(e,r),c=this._addNode(i.min,i.max,o);o&&(s|=1<<u),l||(l=c)}for(let u=0;u<this._siblingOffset.length;u++)s&1<<u||this._construct(e,2*t+this._siblingOffset[u][0],2*n+this._siblingOffset[u][1],o,l+u)}}function Up(e,t,n,r,i,o){return In(In(e,n,o),In(t,r,o),i)}function Gp(e,t,n){const r=n.dim,i=k(e*r-.5,0,r-1),o=k(t*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),l=Math.min(a+1,r-1),u=Math.min(s+1,r-1);return Up(n.get(a,s),n.get(l,s),n.get(a,u),n.get(l,u),i-a,o-s)}const Hp={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Vp(e,t,n){return(256*e*256+256*t+n)/10-1e4}function qp(e,t,n){return 256*e+t+n/256-32768}class $p{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,n,r=!1,i=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return V(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const o=this.dim=t.height-2,a=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(let e=0;e<o;e++)a[this._idx(-1,e)]=a[this._idx(0,e)],a[this._idx(o,e)]=a[this._idx(o-1,e)],a[this._idx(e,-1)]=a[this._idx(e,0)],a[this._idx(e,o)]=a[this._idx(e,o-1)];a[this._idx(-1,-1)]=a[this._idx(0,0)],a[this._idx(o,-1)]=a[this._idx(o-1,0)],a[this._idx(-1,o)]=a[this._idx(0,o-1)],a[this._idx(o,o)]=a[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Fp(this)}get(e,t,n=!1){n&&(e=k(e,-1,this.dim),t=k(t,-1,this.dim));const r=4*this._idx(e,t);return("terrarium"===this.encoding?qp:Vp)(this.pixels[r],this.pixels[r+1],this.pixels[r+2])}static getUnpackVector(e){return Hp[e]}get unpackVector(){return Hp[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}static pack(e,t){const n=[0,0,0,0],r=$p.getUnpackVector(t);let i=Math.floor((e+r[3])/r[2]);return n[2]=i%256,i=Math.floor(i/256),n[1]=i%256,i=Math.floor(i/256),n[0]=i,n}getPixels(){return new Bu({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-n*this.dim;for(let u=o;u<a;u++)for(let t=r;t<i;t++){const n=4*this._idx(t,u),r=4*this._idx(t+s,u+l);this.pixels[n+0]=e.pixels[r+0],this.pixels[n+1]=e.pixels[r+1],this.pixels[n+2]=e.pixels[r+2],this.pixels[n+3]=e.pixels[r+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Xi($p,"DEMData"),Xi(Fp,"DemMinMaxQuadTree",{omit:["dem"]});class Wp{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const r of this.data[n])e(r.value)||t.push(r);for(const n of t)this.remove(n.value.tileID,n)}}class Zp{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}Zp.ReadOnly=!1,Zp.ReadWrite=!0,Zp.disabled=new Zp(519,Zp.ReadOnly,[0,1]);const Xp=7680;class Yp{constructor(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}Yp.disabled=new Yp({func:519,mask:0},0,0,Xp,Xp,Xp);class Kp{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}Kp.Replace=[1,0],Kp.disabled=new Kp(Kp.Replace,Ot.transparent,[!1,!1,!1,!1]),Kp.unblended=new Kp(Kp.Replace,Ot.transparent,[!0,!0,!0,!0]),Kp.alphaBlended=new Kp([1,771],Ot.transparent,[!0,!0,!0,!0]);const Jp=1029,Qp=2305;class em{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}em.disabled=new em(!1,Jp,Qp),em.backCCW=new em(!0,Jp,Qp),em.backCW=new em(!0,Jp,2304),em.frontCW=new em(!0,1028,2304),em.frontCCW=new em(!0,1028,Qp);class tm extends Qe{constructor(e,t,n){super(),this.id=e,this._onlySymbols=n,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new Wp(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Dp,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return O(this._tiles).map((e=>e.tileID)).sort(nm).map((e=>e.key))}getRenderableIds(e){const t=[];for(const n in this._tiles)this._isIdRenderable(+n,e)&&t.push(this._tiles[n]);return e?t.sort(((e,t)=>{const n=e.tileID,r=t.tileID,i=new v(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),o=new v(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-r.overscaledZ||o.y-i.y||o.x-i.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(nm).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}_tileLoaded(e,t,n,r){if(r)if(e.state="errored",404!==r.status)this._source.fire(new Je(r,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Ze.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Ke("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const i=t[r];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);n(e,t),n(t,e)}}function n(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){r[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),r=this._getLoadedTile(t);if(r)return r}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t])}}update(e,t,n){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let r;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new pd(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(r=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(r=r.filter((e=>this._source.hasTile(e))))):r=[];const i=this._updateRetainedTiles(r);if(rm(this._source.type)&&0!==r.length){const e={},t={},n=Object.keys(i);for(const r of n){const n=i[r],o=this._tiles[r];if(!o||o.fadeEndTime&&o.fadeEndTime<=Ze.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-tm.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),e[a.tileID.key]=a.tileID),t[r]=n}const o=r[r.length-1].overscaledZ;for(const r in this._tiles){const e=this._tiles[r];if(i[r]||!e.hasData())continue;let n=e.tileID;for(;n.overscaledZ>o;){n=n.scaledTo(n.overscaledZ-1);const o=this._tiles[n.key];if(o&&o.hasData()&&t[n.key]){i[r]=e.tileID;break}}}for(const r in e)i[r]||(this._coveredTiles[r]=!0,i[r]=e[r])}for(const a in i)this._tiles[a].clearFadeHold();const o=function(e,t){const n=[];for(const r in e)r in t||n.push(r);return n}(this._tiles,i);for(const a of o){const e=this._tiles[a];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+a)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const n={},r=e.reduce(((e,t)=>Math.min(e,t.overscaledZ)),1/0),i=e[0].overscaledZ,o=Math.max(i-tm.maxOverzooming,this._source.minzoom),a=Math.max(i+tm.maxUnderzooming,this._source.minzoom),s={};for(const l of e){const e=this._addTile(l);t[l.key]=l,e.hasData()||r<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,r,a,t);for(const l of e){let e=this._tiles[l.key];if(e.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const e=l.children(this._source.maxzoom)[0],n=this.getTile(e);if(n&&n.hasData()){t[e.key]=e;continue}}else{const e=l.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let r=e.wasRequested();for(let i=l.overscaledZ-1;i>=o;--i){const o=l.scaledTo(i);if(n[o.key])break;if(n[o.key]=!0,e=this.getTile(o),!e&&r&&(e=this._addTile(o)),e&&(t[o.key]=o,r=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;r=e}for(const e of t)this._loadedParentTiles[e]=n}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const n=Boolean(t);if(!n){const n=this.map?this.map.painter:null;t=new Lp(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new Ke("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,t,n){const r=[],i=this.transform;if(!i)return r;const o="globe"===i.projection.name,a=Vl(i.center.lng);for(const s in this._tiles){const l=this._tiles[s];if(n&&l.clearQueryDebugViz(),l.holdingForFade())continue;let u;if(o){const e=l.tileID.canonical;if(0===e.z){const t=[Math.abs(k(a,...im(e,-1))-a),Math.abs(k(a,...im(e,1))-a)];u=[0,2*t.indexOf(Math.min(...t))-1]}else{const t=[Math.abs(k(a,...im(e,-1))-a),Math.abs(k(a,...im(e,0))-a),Math.abs(k(a,...im(e,1))-a)];u=[t.indexOf(Math.min(...t))-1]}}else u=[0];for(const n of u){const o=e.containsTile(l,i,t,n);o&&r.push(o)}}return r}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const n of t)n.projMatrix=this.transform.calculateProjMatrix(n.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(rm(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=Ze.now())return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const r=this._tiles[e];r&&r.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(e,t)))}_preloadTiles(e,t){if(!this._sourceLoaded){const n=()=>{this._sourceLoaded&&(this._source.off("data",n),this._preloadTiles(e,t))};return void this._source.on("data",n)}const n=new Map,r=Array.isArray(e)?e:[e],i=this.map.painter.terrain,o=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const a of r){const e=a.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const t of e)n.set(t.key,t);this.usedForTerrain&&a.updateElevation(!1)}A(Array.from(n.values()),((e,t)=>{const n=new Lp(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,(e=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),t(e,n)}))}),t)}}function nm(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function rm(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function im(e,t){const n=1<<e.z;return[e.x/n+t,(e.x+1)/n+t]}tm.maxOverzooming=10,tm.maxUnderzooming=3;class om{constructor(e,t,n){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=n}static create(e,t,n){const r=n||e.findDEMTileFor(t);if(!r||!r.dem)return;const i=r.dem,o=r.tileID,a=1<<t.canonical.z-o.canonical.z;return new om(r,r.tileSize/ss/a,[(t.canonical.x/a-o.canonical.x)*i.dim,(t.canonical.y/a-o.canonical.y)*i.dim])}tileCoordToPixel(e,t){const n=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(n);return new v(r,i)}getElevationAt(e,t,n,r){const i=e*this._scale+this._offset[0],o=t*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),l=this._dem;return r=!!r,n?In(In(l.get(a,s,r),l.get(a,s+1,r),o-s),In(l.get(a+1,s,r),l.get(a+1,s+1,r),o-s),i-a):l.get(a,s,r)}getElevationAtPixel(e,t,n){return this._dem.get(e,t,!!n)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*$l(1,e)*this._dem.stride}}class am{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Wi(ss,16,0),this.featureIndexArray=new xa,this.promoteId=t}insert(e,t,n,r,i,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const s=this.grid;for(let l=0;l<t.length;l++){const e=t[l],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const r=e[t];n[0]=Math.min(n[0],r.x),n[1]=Math.min(n[1],r.y),n[2]=Math.max(n[2],r.x),n[3]=Math.max(n[3],r.y)}n[0]<ss&&n[1]<ss&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new $c(new gh(this.rawTileData)).layers,this.sourceLayerCoder=new xp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,n,r){this.loadVTLayers();const i=e.params||{},o=di(i.filter),a=e.tileResult,s=e.transform,l=a.bufferedTilespaceBounds,u=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((e,t,n,r)=>xu(a.bufferedTilespaceGeometry,e,t,n,r)));u.sort(lm);let c=null;s.elevation&&u.length>0&&(c=om.create(s.elevation,this.tileID));const d={};let h;for(let f=0;f<u.length;f++){const s=u[f];if(s===h)continue;h=s;const l=this.featureIndexArray.get(s);let p=null;this.loadMatchingFeature(d,l,o,i.layers,i.availableImages,t,n,r,((t,n,r,i=0)=>(p||(p=au(t,this.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(a,t,r,p,this.z,e.transform,e.pixelPosMatrix,c,i))))}return d}loadMatchingFeature(e,t,n,r,i,o,a,s,l){const{featureIndex:u,bucketIndex:c,sourceLayerIndex:d,layoutVertexArrayOffset:h}=t,f=this.bucketLayerIDs[c];if(r&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,f))return;const p=this.sourceLayerCoder.decode(d),m=this.vtLayers[p].feature(u);if(n.needGeometry){const e=su(m,!0);if(!n.filter(new wo(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new wo(this.tileID.overscaledZ),m))return;const g=this.getId(m,p);for(let y=0;y<f.length;y++){const t=f[y];if(r&&r.indexOf(t)<0)continue;const n=o[t];if(!n)continue;let c={};void 0!==g&&s&&(c=s.getState(n.sourceLayer||"_geojsonTileLayer",g));const d=I({},a[t]);d.paint=sm(d.paint,n.paint,m,c,i),d.layout=sm(d.layout,n.layout,m,c,i);const p=!l||l(m,n,c,h);if(!p)continue;const v=new Ep(m,this.z,this.x,this.y,g);v.layer=d;let _=e[t];void 0===_&&(_=e[t]=[]),_.push({featureIndex:u,feature:v,intersectionZ:p})}}lookupSymbolFeatures(e,t,n,r,i,o,a,s){const l={};this.loadVTLayers();const u=di(i);for(const c of e)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:c,layoutVertexArrayOffset:0},u,o,a,s,t);return l}loadFeature(e){const{featureIndex:t,sourceLayerIndex:n}=e;this.loadVTLayers();const r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[t])return i[t];const o=this.vtLayers[r].feature(t);return i[t]=o,o}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;if(this.promoteId){const r="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=r&&(n=e.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}function sm(e,t,n,r,i){return F(e,((e,o)=>{const a=t instanceof Ao?t.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function lm(e,t){return t-e}Xi(am,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class um{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new ju({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const n=this.getKey(e,t);return this.positions[n]}trim(){const e=this.width,t=this.height=N(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,n){const r=[];let i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let l=1;l<e.length;l++){a=!a;const t=e[l];i=s*n,s+=t,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===t})}return r}addRoundDash(e,t,n){const r=t/2;for(let i=-n;i<=n;i++){const t=this.width*(this.nextRow+n+i);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),u=Math.abs(s-a.right),c=Math.min(l,u);let d;const h=i/n*(r+1);if(a.isDash){const e=r-Math.abs(h);d=Math.sqrt(c*c+e*e)}else d=r-Math.sqrt(c*c+h*h);this.image.data[t+s]=Math.max(0,Math.min(255,d+128))}}}addRegularDash(e,t){for(let s=e.length-1;s>=0;--s){const t=e[s],n=e[s+1];t.zeroLength?e.splice(s,1):n&&n.isDash===t.isDash&&(n.left=t.left,e.splice(s,1))}const n=e[0],r=e[e.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);const i=this.width*this.nextRow;let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const n=Math.abs(s-a.left),r=Math.abs(s-a.right),l=Math.min(n,r);this.image.data[i+s]=Math.max(0,Math.min(255,(a.isDash?l:-l)+t+128))}}addDash(e,t){const n=this.getKey(e,t);if(this.positions[n])return this.positions[n];const r="round"===t,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return V("LineAtlas out of space"),null;0===e.length&&e.push(1);let a=0;for(let u=0;u<e.length;u++)e[u]<0&&(V("Negative value is found in line dasharray, replacing values with 0"),e[u]=0),a+=e[u];if(0!==a){const n=this.width/a,o=this.getDashRanges(e,this.width,n);r?this.addRoundDash(o,n,i):this.addRegularDash(o,"square"===t?.5*n:0)}const s=this.nextRow+i;this.nextRow+=o;const l={tl:[s,i],br:[a,0]};return this.positions[n]=l,l}}Xi(um,"LineAtlas");const cm=1*ef;class dm{constructor(e){const t={},n=[];for(const a in e){const r=e[a],i=t[a]={};for(const e in r.glyphs){const t=r.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const o=t.metrics.localGlyph?cm:1,a={x:0,y:0,w:t.bitmap.width+2*o,h:t.bitmap.height+2*o};n.push(a),i[e]=a}}const{w:r,h:i}=wh(n),o=new ju({width:r||1,height:i||1});for(const a in e){const n=e[a];for(const e in n.glyphs){const r=n.glyphs[+e];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const i=t[a][e],s=r.metrics.localGlyph?cm:1;ju.copy(r.bitmap,o,{x:0,y:0},{x:i.x+s,y:i.y+s},r.bitmap)}}this.image=o,this.positions=t}}Xi(dm,"GlyphAtlas");class hm{constructor(e){this.tileID=new pd(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Of(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,n,r,i){this.status="parsing",this.data=e,this.collisionBoxArray=new fa;const o=new xp(Object.keys(e.layers).sort()),a=new am(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new um(256,256),u={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},c=t.familiesBySource[this.source];for(const b in c){const t=e.layers[b];if(!t)continue;let r=!1,i=!1;for(const e of c[b])"symbol"===e[0].type?r=!0:i=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!i)continue;1===t.version&&V(`Vector tile source "${this.source}" layer "${b}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const l=o.encode(b),d=[];for(let e=0;e<t.length;e++){const n=t.feature(e),r=a.getId(n,b);d.push({feature:n,id:r,index:e,sourceLayerIndex:l})}for(const e of c[b]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(fm(e,this.zoom,n),(s[t.id]=t.createBucket({index:a.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(d,u,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(e.map((e=>e.id))))}}let d,h,f,p;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=()=>{if(d)return i(d);if(h&&f&&p){const e=new dm(h),t=new Th(f,p);for(const r in s){const i=s[r];i instanceof sp?(fm(i.layers,this.zoom,n),bf(i,h,e.positions,f,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof Md||i instanceof kc||i instanceof ed)&&(fm(i.layers,this.zoom,n),i.addFeatures(u,this.tileID.canonical,t.patternPositions,n,this.tileTransform))}this.status="done",i(null,{buckets:O(s).filter((e=>!e.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?e.positions:null})}},y=F(u.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(y).length?r.send("getGlyphs",{uid:this.uid,stacks:y},((e,t)=>{d||(d=e,h=t,g())}),void 0,!1,m):h={};const v=Object.keys(u.iconDependencies);v.length?r.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{d||(d=e,f=t,g())}),void 0,!1,m):f={};const _=Object.keys(u.patternDependencies);_.length?r.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{d||(d=e,p=t,g())}),void 0,!1,m):p={},g()}}function fm(e,t,n){const r=new wo(t);for(const i of e)i.recalculate(r,n)}class pm{constructor(e){this.entries={},this.scheduler=e}request(e,t,n,r){const i=this.entries[e]=this.entries[e]||{callbacks:[]};if(i.result){const[e,n]=i.result;return this.scheduler?this.scheduler.add((()=>{r(e,n)}),t):r(e,n),()=>{}}return i.callbacks.push(r),i.cancel||(i.cancel=n(((n,r)=>{i.result=[n,r];for(const e of i.callbacks)this.scheduler?this.scheduler.add((()=>{e(n,r)}),t):e(n,r);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((e=>e!==r)),i.callbacks.length||(i.cancel(),delete this.entries[e]))}}}function mm(e,t,n){const r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const r=he(e.request,((e,r,i,o)=>{e?t(e):r&&t(null,{vectorTile:n?void 0:new $c(new gh(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),t()}}),t)}const gm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ym{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error(`Got v${r} data when expected v1.`);const i=gm[15&n];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new ym(a,o,i,e)}constructor(e,t=64,n=Float64Array,r){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=gm.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return vm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:a}=this,s=[0,i.length-1,0],l=[];for(;s.length;){const u=s.pop()||0,c=s.pop()||0,d=s.pop()||0;if(c-d<=a){for(let a=d;a<=c;a++){const s=o[2*a],u=o[2*a+1];s>=e&&s<=n&&u>=t&&u<=r&&l.push(i[a])}continue}const h=d+c>>1,f=o[2*h],p=o[2*h+1];f>=e&&f<=n&&p>=t&&p<=r&&l.push(i[h]),(0===u?e<=f:t<=p)&&(s.push(d),s.push(h-1),s.push(1-u)),(0===u?n>=f:r>=p)&&(s.push(h+1),s.push(c),s.push(1-u))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:o}=this,a=[0,r.length-1,0],s=[],l=n*n;for(;a.length;){const u=a.pop()||0,c=a.pop()||0,d=a.pop()||0;if(c-d<=o){for(let n=d;n<=c;n++)wm(i[2*n],i[2*n+1],e,t)<=l&&s.push(r[n]);continue}const h=d+c>>1,f=i[2*h],p=i[2*h+1];wm(f,p,e,t)<=l&&s.push(r[h]),(0===u?e-n<=f:t-n<=p)&&(a.push(d),a.push(h-1),a.push(1-u)),(0===u?e+n>=f:t+n>=p)&&(a.push(h+1),a.push(c),a.push(1-u))}return s}}function vm(e,t,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;_m(e,t,a,r,i,o),vm(e,t,n,r,a-1,1-o),vm(e,t,n,a+1,i,1-o)}function _m(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);_m(e,t,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}const a=t[2*n+o];let s=r,l=i;for(bm(e,t,r,n),t[2*i+o]>a&&bm(e,t,r,i);s<l;){for(bm(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*r+o]===a?bm(e,t,r,l):(l++,bm(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function bm(e,t,n,r){xm(e,n,r),xm(t,2*n,2*r),xm(t,2*n+1,2*r+1)}function xm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function wm(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}e.ARRAY_TYPE=cs,e.AUTH_ERR_MSG=ve,e.Aabb=il,e.Actor=class{constructor(e,n,r){this.target=e,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},j(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=W()?e:t,this.scheduler=new bp}send(e,t,n,r,i=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=Y(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:e,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Ji(t,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(e){const t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[n];delete this.cancelCallbacks[n],e&&e.cancel()}else if(t.mustQueue||W()){const e=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,t)),e&&e.metadata||{type:"message"})}else this.processTask(n,t)}processTask(e,t){if("<response>"===t.type){const n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n(Qi(t.error)):n(null,Qi(t.data)))}else{const n=Y(this.globalScope)?void 0:[],r=t.hasCallback?(t,r)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Ji(t):null,data:Ji(r,n)},n)}:e=>{},i=Qi(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,i,r);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],i.source)[e[1]](i,r)}else r(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=hd,e.Color=Ot,e.ColorMode=Kp,e.CullFaceMode=em,e.DEMData=$p,e.DataConstantProperty=Oo,e.DedupedRequest=pm,e.DepthMode=Zp,e.EXTENT=ss,e.Elevation=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const n=t.getSource().maxzoom,r=1<<n,i=Math.floor(e.x),o=Math.floor((e.x-i)*r),a=Math.floor(e.y*r),s=this.findDEMTileFor(new pd(n,i,n,o,a));return!(!s||!s.dem)}getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,n=!0){if(this.isUsingMockSource())return null;null==t&&(t=null);const r=this._source();if(!r)return t;if(e.y<0||e.y>1)return t;const i=r.getSource().maxzoom,o=1<<i,a=Math.floor(e.x),s=e.x-a,l=new pd(i,a,i,Math.floor(s*o),Math.floor(e.y*o)),u=this.findDEMTileFor(l);if(!u||!u.dem)return t;const c=u.dem,d=1<<u.tileID.canonical.z,h=(s*d-u.tileID.canonical.x)*c.dim,f=(e.y*d-u.tileID.canonical.y)*c.dim,p=Math.floor(h),m=Math.floor(f);return(n?this.exaggeration():1)*In(In(c.get(p,m),c.get(p,m+1),f-m),In(c.get(p+1,m),c.get(p+1,m+1),f-m),h-p)}getAtTileOffset(e,t,n){const r=1<<e.canonical.z;return this.getAtPointOrZero(new Jl(e.wrap+(e.canonical.x+t/ss)/r,(e.canonical.y+n/ss)/r))}getAtTileOffsetFunc(e,t,n,r){return i=>{const o=this.getAtTileOffset(e,i.x,i.y),a=r.upVector(e.canonical,i.x,i.y);return Is(a,a,o*r.upVectorScale(e.canonical,t,n).metersToTile),a}}getForTilePoints(e,t,n,r){if(this.isUsingMockSource())return!1;const i=om.create(this,e,r);return!!i&&(t.forEach((e=>{e[2]=this.exaggeration()*i.getElevationAt(e[0],e[1],n)})),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z;let o=e.canonical.x/i-r.canonical.x,a=e.canonical.y/i-r.canonical.y,s=0;for(let l=0;l<e.canonical.z-r.canonical.z&&!n.leaves[s];l++){o*=2,a*=2;const e=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+e,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,n){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=Je,e.EvaluationParameters=wo,e.Event=Ke,e.Evented=Qe,e.FillExtrusionBucket=ed,e.Frustum=rl,e.FrustumCorners=nl,e.GLOBE_RADIUS=sl,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=al,e.GLOBE_ZOOM_THRESHOLD_MIN=ol,e.GlobeSharedBuffers=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const e of this._wireframeSegments)e.destroy()}}_fillGridMeshWithLods(e,t){const n=new Uo,r=new ra,i=[],o=e+1+2,a=t[0]+1,s=t[0]+1+(1+t.length),l=(e,t,n)=>{let r=e===o-1?e-2:0===e?e:e-1;return r+=n?24575:0,[r,t]};for(let u=0;u<o;++u)n.emplaceBack(...l(u,0,!0));for(let u=0;u<a;++u)for(let e=0;e<o;++e)n.emplaceBack(...l(e,u,(0===e||e===o-1)&&!0));for(let u=0;u<t.length;++u){const e=t[u];for(let t=0;t<o;++t)n.emplaceBack(...l(t,e,!0))}for(let u=0;u<t.length;++u){const e=r.length,a=t[u]+1+2,l=new ra;for(let n=0;n<a-1;n++){const e=n===a-2,i=e?o*(s-t.length+u-n):o;for(let t=0;t<o-1;t++){const a=n*o+t;0===n||e||0===t||t===o-2?(l.emplaceBack(a+1,a,a+i),l.emplaceBack(a+i,a+i+1,a+1)):(r.emplaceBack(a+1,a,a+i),r.emplaceBack(a+i,a+i+1,a+1))}}const c=as.simpleSegment(0,e,n.length,r.length-e);for(let t=0;t<l.uint16.length;t+=3)r.emplaceBack(l.uint16[t],l.uint16[t+1],l.uint16[t+2]);const d=as.simpleSegment(0,e,n.length,r.length-e);i.push({withoutSkirts:c,withSkirts:d})}return{vertices:n,indices:r,segments:i}}_createGrid(e){const t=this._fillGridMeshWithLods(ul,cl);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,el.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}_createPoles(e){const t=new ra;for(let i=0;i<=ul;i++)t.emplaceBack(0,i+1,i+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const n=new sa,r=new sa;this._poleSegments=[];for(let i=0,o=0;i<ol;i++){const e=360/(1<<i);n.emplaceBack(0,-sl,0,.5,0),r.emplaceBack(0,-sl,0,.5,1);for(let t=0;t<=ul;t++){const i=t/ul,o=In(0,e,i),[a,s,l]=Tl(zl,jl,o,sl);n.emplaceBack(a,s,l,i,0),r.emplaceBack(a,s,l,i,1)}this._poleSegments.push(as.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(n,Js,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(r,Js,!1)}getGridBuffers(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}getWirefameBuffers(e,t){if(!this._wireframeSegments){const t=new ua,n=ul,r=n+1+2,i=1;this._wireframeSegments=[];for(let e=0,o=0;e<cl.length;e++){const a=cl[e];for(let e=i;e<a+i;e++)for(let o=i;o<n+i;o++){const n=e*r+o;t.emplaceBack(n,n+1),t.emplaceBack(n,n+r),t.emplaceBack(n,n+r+1)}const s=a*n*3;this._wireframeSegments.push(as.simpleSegment(0,o,(a+1)*r,s)),o+=s}this._wireframeIndexBuffer=e.createIndexBuffer(t)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},e.GlyphManager=nf,e.ImagePosition=Sh,e.KDBush=ym,e.LivePerformanceUtils=Fe,e.LngLat=Gl,e.LngLatBounds=ls,e.LocalGlyphMode=tf,e.MAX_MERCATOR_LATITUDE=Yl,e.MercatorCoordinate=Jl,e.ONE_EM=jd,e.OverscaledTileID=pd,e.PerformanceMarkers=Be,e.Point=v,e.Properties=Do,e.RGBAImage=Bu,e.Ray=tl,e.RequestManager=class{constructor(e,t,n){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",d,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!_e(e))return e;const n=Te(e);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!_e(e))return e;const n=Te(e);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeSourceURL(e,t,n,r){if(!_e(e))return e;const i=Te(e);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),n&&i.params.push(`language=${n}`),r&&i.params.push(`worldview=${r}`),this._makeAPIURL(i,this._customAccessToken||t)}normalizeSpriteURL(e,t,n,r){const i=Te(e);return _e(e)?(i.path=`/styles/v1${i.path}/sprite${t}${n}`,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=`${t}${n}`,Me(i))}normalizeTileURL(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!_e(e))return e;const r=Te(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||n&&"raster"!==r.authority&&512===n?"@2x":""}${o.supported?".webp":"$1"}`),"raster"===r.authority?r.path=`/${i.RASTER_URL_PREFIX}${r.path}`:(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path=`/${i.TILE_URL_VERSION}${r.path}`);const a=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(r.params)||i.ACCESS_TOKEN;return i.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&r.params.push(`sku=${this._skuToken}`),this._makeAPIURL(r,a)}canonicalizeTileURL(e,t){const n=Te(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;let r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+=`raster/${n.path.replace(`/${i.RASTER_URL_PREFIX}/`,"")}`:r+=`tiles/${n.path.replace(`/${i.TILE_URL_VERSION}/`,"")}`;let o=n.params;return t&&(o=o.filter((e=>!e.match(/^access_token=/)))),o.length&&(r+=`?${o.join("&")}`),r}canonicalizeTileset(e,t){const n=!!t&&_e(t),r=[];for(const i of e.tiles||[])be(i)?r.push(this.canonicalizeTileURL(i,n)):r.push(i);return r}_makeAPIURL(e,t){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",r=Te(i.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==r.path&&(e.path=`${r.path}${e.path}`),!i.REQUIRE_ACCESS_TOKEN)return Me(e);if(t=t||i.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push(`access_token=${t||""}`),Me(e)}},e.ResourceType=le,e.SegmentVector=as,e.SourceCache=tm,e.StencilMode=Yp,e.StructArrayLayout1ui2=ca,e.StructArrayLayout2f1f2i16=ea,e.StructArrayLayout2i4=Uo,e.StructArrayLayout2ui4=ua,e.StructArrayLayout3f12=na,e.StructArrayLayout3ui6=ra,e.StructArrayLayout4i8=Ho,e.StructArrayLayout5f20=sa,e.Texture=vp,e.Tile=Lp,e.Transitionable=To,e.Uniform1f=za,e.Uniform1i=class extends Na{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},e.Uniform2f=class extends Na{constructor(e){super(e),this.current=[0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},e.Uniform3f=class extends Na{constructor(e){super(e),this.current=[0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},e.Uniform4f=ja,e.UniformColor=Ba,e.UniformMatrix2f=class extends Na{constructor(e){super(e),this.current=Ga}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let r=0;r<4;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},e.UniformMatrix3f=class extends Na{constructor(e){super(e),this.current=Ua}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let r=0;r<9;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},e.UniformMatrix4f=class extends Na{constructor(e){super(e),this.current=Fa}set(e,t,n){if(this.fetchUniformLocation(e,t)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let e=1;e<16;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},e.UnwrappedTileID=fd,e.ValidationError=ni,e.VectorTileFeature=Wc,e.VectorTileWorkerSource=class extends Qe{constructor(e,t,n,r,i){super(),this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=i||mm,this.loading={},this.loaded={},this.deduped=new pm(e.scheduler),this.isSpriteLoaded=r,this.scheduler=e.scheduler}loadTile(e,t){const n=e.uid,r=e&&e.request,i=r&&r.collectResourceTiming,o=this.loading[n]=new hm(e);o.abort=this.loadVectorData(e,((a,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||a||!s)return o.status="done",l||(this.loaded[n]=o),t(a);const u=s.rawData,c={};s.expires&&(c.expires=s.expires),s.cacheControl&&(c.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new $c(new gh(u));const d=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,n)=>{if(e||!n)return t(e);const o={};if(i){const e=He(r);e.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,I({rawTileData:u.slice(0)},n,c,o))}))};this.isSpriteLoaded?d():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(d,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):d()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(e,t){const n=this.loaded,r=e.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=Of(e.tileID.canonical,e.projection);const a=(e,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),t(e,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(e,t){const n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}removeTile(e,t){const n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}},e.WritingMode=Mh,e.ZoomDependentExpression=Jr,e.add=ks,e.addDynamicAttributes=rp,e.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=a*c-s*u,e[1]=i*u-r*c,e[2]=r*s-i*a,e[3]=s*l-o*c,e[4]=n*c-i*l,e[5]=i*o-n*s,e[6]=o*u-a*l,e[7]=r*l-n*u,e[8]=n*a-r*o,e},e.asyncAll=A,e.bezier=T,e.bindAll=j,e.boundsAttributes=Op,e.bufferConvexPolygon=function(e,t){const n=[];for(let r=0;r<e.length;r++){const i=P(r-1,-1,e.length-1),o=P(r+1,-1,e.length-1),a=e[r],s=e[o],l=e[i].sub(a).unit(),u=s.sub(a).unit(),c=u.angleWithSep(l.x,l.y),d=l.add(u).unit().mult(-1*t/Math.sin(c/2));n.push(a.add(d))}return n},e.cacheEntryPossiblyAdded=function(e){se++,se>re&&(e.getActor().send("enforceCacheSizeLimit",ne),se=0)},e.calculateGlobeLabelMatrix=function(e,t){const{x:n,y:r}=e.point,i=Il(n,r,e.worldSize/e._pixelsPerMercatorPixel,0,0);return ms(i,i,Ol(vl(t)))},e.calculateGlobeMatrix=function(e){const{x:t,y:n}=e.point,{lng:r,lat:i}=e._center;return Il(t,n,e.worldSize,r,i)},e.calculateGlobeMercatorMatrix=function(e){const t=e.pixelsPerMeter,n=t/$l(1,e.center.lat),r=fs(new Float64Array(16));return gs(r,r,[e.point.x,e.point.y,0]),ys(r,r,[n,n,t]),Float32Array.from(r)},e.circumferenceAtLatitude=Hl,e.clamp=k,e.clearTileCache=function(e){if(!ie())return;const n=t.caches.delete(Q);e&&n.catch(e).then((()=>e()))},e.clipLine=Yh,e.clone=function(e){var t=new cs(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=G,e.collisionCircleLayout=zd,e.config=i,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new cs(16);return cs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=ds,e.createExpression=Yr,e.createLayout=Bo,e.createStyleLayer=function(e){return"custom"===e.type?new pp(e):new yp[e.type](e)},e.cross=Ns,e.degToRad=x,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=Rs,e.earthRadius=Bl,e.ease=M,e.easeCubicInOut=S,e.ecefToLatLng=function([e,t,n]){const r=Math.hypot(e,t,n),i=Math.atan2(e,n),o=.5*Math.PI-Math.acos(-t/r);return new Gl(w(i),w(o))},e.emitValidationErrors=Hi,e.endsWith=B,e.enforceCacheSizeLimit=function(e){oe(),ee&&ee.then((t=>{t.keys().then((n=>{for(let r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=Ud,e.evaluateSizeForZoom=Gd,e.evaluateVariableOffset=_f,e.evented=vo,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=Ze,e.exported$1=o,e.extend=I,e.extend$1=tt,e.fillExtrusionHeightLift=sd,e.filterObject=U,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,d=r*s,h=i*a,f=i*s,p=i*l,m=o*a,g=o*s,y=o*l;return e[0]=1-d-p,e[1]=c+y,e[2]=h-g,e[3]=0,e[4]=c-y,e[5]=1-u-p,e[6]=f+m,e[7]=0,e[8]=h+g,e[9]=f-m,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=bs,e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return E[t]},e.getAABBPointSquareDist=function(e,t,n){let r=0;for(let i=0;i<2;++i){const o=n?n[i]:0;e[i]>o&&(r+=(e[i]-o)*(e[i]-o)),t[i]<o&&(r+=(o-t[i])*(o-t[i]))}return r},e.getAnchorAlignment=jh,e.getAnchorJustification=xf,e.getBounds=function(e){let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return{min:new v(t,n),max:new v(r,i)}},e.getColumn=J,e.getDefaultExportFromCjs=h,e.getGridMatrix=function(e,t,n,r){const i=t.getNorth(),o=t.getSouth(),a=t.getWest(),s=t.getEast(),l=1<<e.z,u=s-a,c=i-o,d=u/ul,h=-c/cl[n],f=[0,d,0,h,0,0,i,a,0];if(e.z>0){const e=180/r;hs(f,f,[e/u+1,0,0,0,e/c+1,0,-.5*e/d,.5*e/h,1])}return f[2]=l,f[5]=e.x,f[8]=e.y,f},e.getImage=ye,e.getJSON=function(e,t){return de(I(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){const t=Yl-5;e=k(e,-t,t)/t*90;const n=Math.pow(Math.abs(Math.sin(x(e))),3);return Math.round(n*(cl.length-1))},e.getMapSessionAPI=ze,e.getPerformanceMeasurement=He,e.getProjection=Jf,e.getRTLTextPluginStatus=_o,e.getReferrer=ce,e.getTilePoint=function(e,{x:t,y:n},r=0){return new v(((t-r)*e.scale-e.x)*ss,(n*e.scale-e.y)*ss)},e.getTileVec3=function(e,t,n=0){return Ms(((t.x-n)*e.scale-e.x)*ss,(t.y*e.scale-e.y)*ss,Xl(t.z,t.y))},e.getVideo=function(e,n){const r=t.document.createElement("video");r.muted=!0,r.onloadstart=function(){n(null,r)};for(let i=0;i<e.length;i++){const n=t.document.createElement("source");fe(e[i])||(r.crossOrigin="Anonymous"),n.src=e[i],r.appendChild(n)}return{cancel:()=>{}}},e.globeCenterToScreenPoint=function(e){const t=[0,0,0],n=fs(new Float64Array(16));return ms(n,e.pixelMatrix,e.globeMatrix),zs(t,t,n),new v(t[0],t[1])},e.globeDenormalizeECEF=Ol,e.globeECEFOrigin=function(e,t){const n=[0,0,0];return zs(n,n,Al(vl(t.canonical))),zs(n,n,e),n},e.globeMetersToEcef=pl,e.globeNormalizeECEF=Al,e.globePixelsToTileUnits=function(e,t){return ss/(512*Math.pow(2,e))*Cl(vl(t))},e.globePoleMatrixForTile=function(e,t,n){const r=fs(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return _s(r,n.globeMatrix,i),Float32Array.from(r)},e.globeTileBounds=vl,e.globeTiltAtLngLat=Dl,e.globeToMercatorTransition=Ll,e.globeUseCustomAntiAliasing=function(e,t,n){const r=Ll(n.zoom),i=e.style.map._antialias,o=!!t.extStandardDerivatives,a=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===r&&!i&&!a&&o},e.identity=fs,e.identity$1=Ws,e.invert=ps,e.isFullscreen=function(){return!!t.document.fullscreenElement||!!t.document.webkitFullscreenElement},e.isLngLatBehindGlobe=Rl,e.isMapAuthenticated=function(e){return je.has(e)},e.isMapboxURL=_e,e.isSafariWithAntialiasingBug=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!Y(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=Zl,e.latLngToECEF=Ml,e.len=Gs,e.length=Ts,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=Wl,e.loadVectorTile=mm,e.makeRequest=de,e.mapValue=function(e,t,n,r,i){return k((e-t)/(n-t)*(i-r)+r,r,i)},e.mercatorScale=Kl,e.mercatorXfromLng=Vl,e.mercatorYfromLat=ql,e.mercatorZfromAltitude=$l,e.mul=ws,e.mul$1=Us,e.multiply=ms,e.multiply$1=hs,e.multiply$2=Ps,e.nextPowerOfTwo=N,e.normalize=Ds,e.normalize$1=Ys,e.normalize$2=Vs,e.number=In,e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*u,e[15]=1,e},e.pbf=Zd,e.perspective=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){const n={};for(let r=0;r<t.length;r++){const i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=xo,e.pointGeometry=g,e.polesInViewport=function(e){const t=fs(new Float64Array(16));ms(t,e.pixelMatrix,e.globeMatrix);const n=[0,dl,0],r=[0,hl,0];return zs(n,n,t),zs(r,r,t),[n[0]>0&&n[0]<=e.width&&n[1]>0&&n[1]<=e.height&&!Rl(e,new Gl(e.center.lat,90)),r[0]>0&&r[0]<=e.width&&r[1]>0&&r[1]<=e.height&&!Rl(e,new Gl(e.center.lat,-90))]},e.polygonContainsPoint=bu,e.polygonIntersectsBox=xu,e.polygonIntersectsPolygon=du,e.polygonizeBounds=function(e,t,n=0,r=!0){const i=new v(n,n),o=e.sub(i),a=t.add(i),s=[o,new v(a.x,o.y),a,new v(o.x,a.y)];return r&&s.push(o.clone()),s},e.posAttributes=el,e.postMapLoadEvent=Le,e.postPerformanceEvent=Re,e.postTurnstileEvent=Oe,e.potpack=wh,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=w,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:po,pluginURL:mo}),vo.on("pluginStateChange",e),e},e.removeAuthState=function(e){je.delete(e)},e.renderColorRamp=Uu,e.resample=eu,e.rotateX=vs,e.rotateX$1=Zs,e.rotateY=_s,e.rotateY$1=Xs,e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*r,e[1]=a*i+c*r,e[2]=s*i+d*r,e[3]=l*i+h*r,e[4]=u*i-o*r,e[5]=c*i-a*r,e[6]=d*i-s*r,e[7]=h*i-l*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},e.scale=ys,e.scale$1=Hs,e.scale$2=Is,e.scaleAndAdd=Ls,e.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},e.setCacheLimits=function(e,t){ne=e,re=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t,n=!1){if(po===uo||po===co||po===ho)throw new Error("setRTLTextPlugin cannot be called multiple times.");mo=Ze.resolveURL(e),po=uo,fo=t,yo(),n||bo()},e.smoothstep=C,e.spec=et,e.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},e.storeAuthState=function(e,t){t?je.add(e):je.delete(e)},e.sub=Fs,e.subtract=Cs,e.symbolSize=Hd,e.tileAABB=function(e,t,n,r,i,o,a,s,l){if("globe"===l.name)return wl(e,t,new hd(n,r,i));const u=Of({z:n,x:r,y:i},l);return new il([(o+u.x/u.scale)*t,t*(u.y/u.scale),a],[(o+u.x2/u.scale)*t,t*(u.y2/u.scale),s])},e.tileCornersToBounds=El,e.tileTransform=Of,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.transformMat4=zs,e.transformMat4$1=qs,e.transformQuat=js,e.transitionTileAABBinECEF=bl,e.translate=gs,e.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=go,e.uniqueId=D,e.updateGlobeVertexNormal=function(e,t,n,r,i){const o=5*t+2;e.float32[o+0]=n,e.float32[o+1]=r,e.float32[o+2]=i},e.validateCustomStyleLayer=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:`layers.${n}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${n}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFilter=e=>Gi(Ei(e)),e.validateFog=e=>Gi(Ri(e)),e.validateLayer=e=>Gi(Ci(e)),e.validateLight=e=>Gi(Li(e)),e.validateSource=e=>Gi(Oi(e)),e.validateStyle=Bi,e.validateTerrain=e=>Gi(Di(e)),e.values=O,e.vectorTile=Dc,e.version=n,e.warnOnce=V,e.window=t,e.wrap=P})),r(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let n="[";for(const r of e)n+=`${t(r)},`;return`${n}]`}let n="{";for(const r of Object.keys(e).sort())n+=`${r}:${t(e[r])},`;return`${n}}`}function n(n){let r="";for(const i of e.refProperties)r+=`/${t(n[i])}`;return r}class r{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const n of t)this._layerConfigs[n.id]=n,(this._layers[n.id]=e.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const r={};for(let o=0;o<e.length;o++){const i=t&&t[e[o].id]||n(e[o]);t&&(t[e[o].id]=i);let a=r[i];a||(a=r[i]=[]),a.push(e[o])}const i=[];for(const n in r)i.push(r[n]);return i}(e.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),n=t[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(t)}}}class i{loadTile(t,n){const{uid:r,encoding:i,rawImageData:o,padding:a,buildQuadTree:s}=t,l=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap?this.getImageData(o,a):o;n(null,new e.DEMData(r,l,i,a<1,s))}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}function o(e,t){if(0!==e.length){a(e[0],t);for(var n=1;n<e.length;n++)a(e[n],!t)}}function a(e,t){for(var n=0,r=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!t&&e.reverse()}var s=e.getDefaultExportFromCjs((function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)o(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)o(t.coordinates[r],n);return t}));const l=e.VectorTileFeature.prototype.toGeoJSON;var u={exports:{}},c=e.pointGeometry,d=e.vectorTile.VectorTileFeature,h=f;function f(e,t){this.options=t||{},this.features=e,this.length=e.length}function p(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}f.prototype.feature=function(e){return new p(this.features[e],this.options.extent)},p.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new c(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},p.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},p.prototype.toGeoJSON=d.prototype.toGeoJSON;var m=e.pbf,g=h;function y(e){var t=new m;return function(e,t){for(var n in e.layers)t.writeMessage(3,v,e.layers[n])}(e,t),t.finish()}function v(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,_,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,S,o[n])}function _(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,b,e),t.writeVarintField(3,n.type),t.writeMessage(4,E,n)}function b(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var l=n.properties[s],u=o[s];if(null!==l){void 0===u&&(r.push(s),o[s]=u=r.length-1),t.writeVarint(u);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var d=c+":"+l,h=a[d];void 0===h&&(i.push(l),a[d]=h=i.length-1),t.writeVarint(h)}}}function x(e,t){return(t<<3)+(7&e)}function w(e){return e<<1^e>>31}function E(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],u=1;1===r&&(u=l.length),t.writeVarint(x(1,u));for(var c=3===r?l.length-1:l.length,d=0;d<c;d++){1===d&&1!==r&&t.writeVarint(x(2,c-1));var h=l[d].x-i,f=l[d].y-o;t.writeVarint(w(h)),t.writeVarint(w(f)),i+=h,o+=f}3===r&&t.writeVarint(x(7,1))}}function S(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}u.exports=y,u.exports.fromVectorTileJs=y,u.exports.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new g(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return y({layers:n})},u.exports.GeoJSONWrapper=g;var T=e.getDefaultExportFromCjs(u.exports);const M={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},k=Math.fround||(C=new Float32Array(1),e=>(C[0]=+e,C[0]));var C;const P=3,A=5,O=6;class I{constructor(e){this.options=Object.assign(Object.create(M),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const o=[];for(let s=0;s<e.length;s++){const t=e[s];if(!t.geometry)continue;const[n,r]=t.geometry.coordinates,i=k(R(n)),a=k(N(r));o.push(i,a,1/0,s,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[r+1]=this._createTree(o);t&&console.timeEnd(i);for(let s=r;s>=n;s--){const e=+Date.now();a=this.trees[s]=this._createTree(this._cluster(a,s)),t&&console.log("z%d: %d clusters in %dms",s,a.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,o],t),a=this.getClusters([-180,r,i,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(R(n),N(o),R(i),N(r)),l=a.data,u=[];for(const c of s){const e=this.stride*c;u.push(l[e+A]>1?L(l,e,this.clusterProps):this.points[l[e+P]])}return u}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.data;if(t*this.stride>=o.length)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o[t*this.stride],o[t*this.stride+1],a),l=[];for(const u of s){const t=u*this.stride;o[t+4]===e&&l.push(o[t+A]>1?L(o,t,this.clusterProps):this.points[o[t+P]])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,n){const r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,u=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,u),r.data,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,u),r.data,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,u),r.data,-1,n,i,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const a of o){const t=a.properties;if(t&&t.cluster?i+t.point_count<=r?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,n,r,i):i<r?i++:e.push(a),e.length===n)break}return i}_createTree(t){const n=new e.KDBush(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)n.add(t[e],t[e+1]);return n.finish(),n.data=t,n}_addTileFeatures(e,t,n,r,i,o){for(const a of e){const e=a*this.stride,s=t[e+A]>1;let l,u,c;if(s)l=D(t,e,this.clusterProps),u=t[e],c=t[e+1];else{const n=this.points[t[e+P]];l=n.properties;const[r,i]=n.geometry.coordinates;u=R(r),c=N(i)}const d={type:1,geometry:[[Math.round(this.options.extent*(u*i-n)),Math.round(this.options.extent*(c*i-r))]],tags:l};let h;h=s||this.options.generateId?t[e+P]:this.points[t[e+P]].id,void 0!==h&&(d.id=h),o.features.push(d)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:r,reduce:i,minPoints:o}=this.options,a=n/(r*Math.pow(2,t)),s=e.data,l=[],u=this.stride;for(let c=0;c<s.length;c+=u){if(s[c+2]<=t)continue;s[c+2]=t;const n=s[c],r=s[c+1],d=e.within(s[c],s[c+1],a),h=s[c+A];let f=h;for(const e of d){const n=e*u;s[n+2]>t&&(f+=s[n+A])}if(f>h&&f>=o){let e,o=n*h,a=r*h,p=-1;const m=((c/u|0)<<5)+(t+1)+this.points.length;for(const n of d){const r=n*u;if(s[r+2]<=t)continue;s[r+2]=t;const l=s[r+A];o+=s[r]*l,a+=s[r+1]*l,s[r+4]=m,i&&(e||(e=this._map(s,c,!0),p=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(s,r)))}s[c+4]=m,l.push(o/f,a/f,1/0,m,-1,f),i&&l.push(p)}else{for(let e=0;e<u;e++)l.push(s[c+e]);if(f>1)for(const e of d){const n=e*u;if(!(s[n+2]<=t)){s[n+2]=t;for(let e=0;e<u;e++)l.push(s[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+A]>1){const r=this.clusterProps[e[t+O]];return n?Object.assign({},r):r}const r=this.points[e[t+P]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function L(e,t,n){return{type:"Feature",id:e[t+P],properties:D(e,t,n),geometry:{type:"Point",coordinates:[(r=e[t],360*(r-.5)),z(e[t+1])]}};var r}function D(e,t,n){const r=e[t+A],i=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?Math.round(r/100)/10+"k":r,o=e[t+O],a=-1===o?{}:Object.assign({},n[o]);return Object.assign(a,{cluster:!0,cluster_id:e[t+P],point_count:r,point_count_abbreviated:i})}function R(e){return e/360+.5}function N(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function z(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function j(e,t,n,r){for(var i,o=r,a=n-t>>1,s=n-t,l=e[t],u=e[t+1],c=e[n],d=e[n+1],h=t+3;h<n;h+=3){var f=B(e[h],e[h+1],l,u,c,d);if(f>o)i=h,o=f;else if(f===o){var p=Math.abs(h-a);p<s&&(i=h,s=p)}}o>r&&(i-t>3&&j(e,t,i,r),e[i+2]=o,n-i>3&&j(e,i,n,r))}function B(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((e-n)*a+(t-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=e-n)*a+(s=t-r)*s}function F(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)U(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)U(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)U(e,t[r][i])}(i),i}function U(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function G(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)H(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)H(i[u],s);else if("LineString"===o)V(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<i.length;u++)V(i[u],s=[],a,!1),e.push(F(l,"LineString",s,t.properties));return}q(i,s,a,!1)}else if("Polygon"===o)q(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<t.geometry.geometries.length;u++)G(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];q(i[u],c,a,!0),s.push(c)}}e.push(F(l,o,s,t.properties))}}function H(e,t){t.push($(e[0])),t.push(W(e[1])),t.push(0)}function V(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var l=$(e[s][0]),u=W(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(a+=r?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=t.length-3;t[2]=1,j(t,0,c,n),t[c+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function q(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];V(e[i],o,n,r),t.push(o)}}function $(e){return e/360+.5}function W(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Z(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],d=c.geometry,h=c.type,f=0===i?c.minX:c.minY,p=0===i?c.maxX:c.maxY;if(f>=n&&p<r)l.push(c);else if(!(p<n||f>=r)){var m=[];if("Point"===h||"MultiPoint"===h)X(d,m,n,r,i);else if("LineString"===h)Y(d,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)J(d,m,n,r,i,!1);else if("Polygon"===h)J(d,m,n,r,i,!0);else if("MultiPolygon"===h)for(var g=0;g<d.length;g++){var y=[];J(d[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(g=0;g<m.length;g++)l.push(F(c.id,h,m[g],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),l.push(F(c.id,h,m,c.tags))}}}return l.length?l:null}function X(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function Y(e,t,n,r,i,o,a){for(var s,l,u=K(e),c=0===i?ee:te,d=e.start,h=0;h<e.length-3;h+=3){var f=e[h],p=e[h+1],m=e[h+2],g=e[h+3],y=e[h+4],v=0===i?f:p,_=0===i?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(p-y,2))),v<n?_>n&&(l=c(u,f,p,g,y,n),a&&(u.start=d+s*l)):v>r?_<r&&(l=c(u,f,p,g,y,r),a&&(u.start=d+s*l)):Q(u,f,p,m),_<n&&v>=n&&(l=c(u,f,p,g,y,n),b=!0),_>r&&v<=r&&(l=c(u,f,p,g,y,r),b=!0),!o&&b&&(a&&(u.end=d+s*l),t.push(u),u=K(e)),a&&(d+=s)}var x=e.length-3;f=e[x],p=e[x+1],m=e[x+2],(v=0===i?f:p)>=n&&v<=r&&Q(u,f,p,m),x=u.length-3,o&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&Q(u,u[0],u[1],u[2]),u.length&&t.push(u)}function K(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function J(e,t,n,r,i,o){for(var a=0;a<e.length;a++)Y(e[a],t,n,r,i,o,!1)}function Q(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ee(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function te(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function ne(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=re(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(re(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(re(o.geometry[s][u],t));i.push(l)}n.push(F(o.id,a,i,o.tags))}return n}function re(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function ie(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(oe(u[r],u[r+1],t,o,a,s));else for(r=0;r<u.length;r++){var d=[];for(i=0;i<u[r].length;i+=2)d.push(oe(u[r][i],u[r][i+1],t,o,a,s));l.geometry.push(d)}}return e.transformed=!0,e}function oe(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function ae(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,se(a,e[s],o,i);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,d=e[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),d>a.maxY&&(a.maxY=d)}return a}function se(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)le(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)le(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)le(a,u[s],e,n,!0,0===s)}if(a.length){var c=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var d in c={},t.tags)c[d]=t.tags[d];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==t.id&&(h.id=t.id),e.features.push(h)}}function le(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>a)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function ue(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)G(n,e.features[r],t,r);else G(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){var n=t.buffer/t.extent,r=e,i=Z(e,1,-1-n,n,0,-1,2,t),o=Z(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=Z(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=ne(i,1).concat(r)),o&&(r=r.concat(ne(o,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ce(e,t,n){return 32*((1<<e)*n+t)+e}function de(t,n){const r=t.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);const i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return n(null,null);const o=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.Point(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const r=[];for(const t of n)r.push(new e.Point(t[0],t[1]));t.push(r)}return t}}toGeoJSON(e,t,n){return l.call(this,e,t,n)}}(this._features[t])}}(i.features);let a=T(o);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),n(null,{vectorTile:o,rawData:a.buffer})}ue.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ue.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,d=ce(t,n,r),h=this.tiles[d];if(!h&&(u>1&&console.time("creation"),h=this.tiles[d]=ae(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(h.source=e,i){if(t===l.maxZoom||t===i)continue;var p=1<<i-t;if(n!==Math.floor(o/p)||r!==Math.floor(a/p))continue}else if(t===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==e.length){u>1&&console.time("clipping");var m,g,y,v,_,b,x=.5*l.buffer/l.extent,w=.5-x,E=.5+x,S=1+x;m=g=y=v=null,_=Z(e,c,n-x,n+E,0,h.minX,h.maxX,l),b=Z(e,c,n+w,n+S,0,h.minX,h.maxX,l),e=null,_&&(m=Z(_,c,r-x,r+E,1,h.minY,h.maxY,l),g=Z(_,c,r+w,r+S,1,h.minY,h.maxY,l),_=null),b&&(y=Z(b,c,r-x,r+E,1,h.minY,h.maxY,l),v=Z(b,c,r+w,r+S,1,h.minY,h.maxY,l),b=null),u>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(g||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(v||[],t+1,2*n+1,2*r+1)}}},ue.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=ce(e,t=(t%a+a)%a,n);if(this.tiles[s])return ie(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,u=e,c=t,d=n;!l&&u>0;)u--,c=Math.floor(c/2),d=Math.floor(d/2),l=this.tiles[ce(u,c,d)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,d),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,d,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ie(this.tiles[s],i):null):null};class he extends e.VectorTileWorkerSource{constructor(e,t,n,r,i){super(e,t,n,r,de),i&&(this.loadGeoJSON=i)}loadData(t,n){const r=t&&t.request,i=r&&r.collectResourceTiming;this.loadGeoJSON(t,((o,a)=>{if(o||!a)return n(o);if("object"!=typeof a)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{s(a,!0);try{if(t.filter){const n=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const r=a.features.filter((e=>n.value.evaluate({zoom:0},e)));a={type:"FeatureCollection",features:r}}this._geoJSONIndex=t.cluster?new I(function({superclusterOptions:t,clusterProperties:n}){if(!n||!t)return t;const r={},i={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const l of s){const[t,o]=n[l],a=e.createExpression(o),s=e.createExpression("string"==typeof t?[t,["accumulated"],["get",l]]:t);r[l]=a.value,i[l]=s.value}return t.map=e=>{a.properties=e;const t={};for(const n of s)t[n]=r[n].evaluate(o,a);return t},t.reduce=(e,t)=>{a.properties=t;for(const n of s)o.accumulated=e[n],e[n]=i[n].evaluate(o,a)},t}(t)).load(a.features):function(e,t){return new ue(e,t)}(a,t.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const l={};if(i){const n=e.getPerformanceMeasurement(r);n&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(e,t){const n=this.loaded;return n&&n[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class fe{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:he},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}checkIfReady(e,t,n){n()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,n){this.isSpriteLoaded[t]=n;for(const r in this.workerSources[t]){const i=this.workerSources[t][r];for(const t in i)i[t]instanceof e.VectorTileWorkerSource&&(i[t].isSpriteLoaded=n,i[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,n){this.availableImages[e]=t;for(const r in this.workerSources[e]){const n=this.workerSources[e][r];for(const e in n)n[e].availableImages=t}n()}enableTerrain(e,t,n){this.terrain=t,n()}setProjection(t,n){this.projections[t]=e.getProjection(n)}setLayers(e,t,n){this.getLayerIndex(e).replace(t),n()}updateLayers(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}loadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}loadDEMTile(t,n,r){const i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}reloadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}abortTile(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}removeTile(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}removeSource(e,t,n){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}loadWorkerSource(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}syncRTLPluginState(t,n,r){try{e.plugin.setState(n);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const n=e.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),n)}}catch(e){r(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const r={send:(t,n,r,i,o,a)=>{this.actor.send(t,n,r,e,o,a)},scheduler:this.actor.scheduler};this.workerSources[e][t][n]=new this.workerSourceTypes[t](r,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][n]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,n){e.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(e,t,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new fe(self)),fe})),r(["./shared"],(function(e){function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(!t(e[r],n[r]))return!1;return!0}return e===n}var n=r;function r(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===i[t=e&&e.failIfMajorPerformanceCaveat]&&(i[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),i[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var i={};function o(t,n,r){const i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function a(t,n,r){const i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(n))i.setAttributeNS(null,e,n[e]);return r&&r.appendChild(i),i}r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=e.window.document&&e.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let u;function c(){s&&l&&(u=s[l],s[l]="none")}function d(){s&&l&&(s[l]=u)}function h(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",h,!0)}function f(){e.window.addEventListener("click",h,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",h,!0)}),0)}function p(e,t){const n=e.getBoundingClientRect();return y(e,n,t)}function m(e,t){const n=e.getBoundingClientRect(),r=[];for(let i=0;i<t.length;i++)r.push(y(e,n,t[i]));return r}function g(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function y(t,n,r){const i=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.Point((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function v(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(e[0]=o*(a=1/a),e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null}function _(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class b extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}hasImage(e){return!!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let n=0;for(const r of e){if(r[0]<n||r[1]<r[0]||t<r[1])return!1;n=r[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let n=!0;if(!this.isLoaded())for(const r of e)this.images[r]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,n){const r={};for(const i of t){this.images[i]||this.fire(new e.Event("styleimagemissing",{id:i}));const t=this.images[i];t?r[i]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new e.ImagePosition(n,r);this.patterns[t]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture&&this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:n,h:r}=e.potpack(t),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const o in this.patterns){const{bin:t}=this.patterns[o],n=t.x+1,r=t.y+1,a=this.images[o].data,s=a.width,l=a.height;e.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r},{width:s,height:l}),e.RGBAImage.copy(a,i,{x:0,y:l-1},{x:n,y:r-1},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r+l},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:s-1,y:0},{x:n-1,y:r},{width:1,height:l}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:n+s,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];_(e)&&this.updateImage(t,e)}}}const x=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,n){return function([t,n,r]){const i=e.degToRad(n+90),o=e.degToRad(r);return{x:t*Math.cos(i)*Math.sin(o),y:t*Math.sin(i)*Math.sin(o),z:t*Math.cos(o),azimuthal:n,polar:r}}(t.expression.evaluate(n))}interpolate(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)});class w extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(x),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(e.validateLight,t,n))for(const r in t){const n=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),n):this._transitionable.setValue(r,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const E=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)});let S=class extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(E),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(t){for(const n in t){const r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}};function T(t,n,r,i){const o=e.smoothstep(45,65,r),[a,s]=M(t,i),l=e.length(n);let u=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return u*=u*u,u=Math.min(1,1.00747*u),u*o*t.alpha}function M(e,t){const n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}const k=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])});class C extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(k),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){const t=this._transform,n="globe"===t.projection.name,r=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),o=[.5,3];return{range:n?[e.number(o[0],i[0],r),e.number(o[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,n={}){if(!this._validate(e.validateFog,t,n)){for(const n of Object.keys(e.spec.fog))t&&void 0===t[n]&&(t[n]=e.spec.fog[n].default);for(const n in t){const r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*n.a}getOpacityAtLatLng(t,n){return this._transform.projection.supportsFog?function(t,n,r){const i=e.MercatorCoordinate.fromLngLat(n),o=r.elevation?r.elevation.getAtPointOrZero(i):0,a=[i.x,i.y,o];return e.transformMat4(a,a,r.mercatorFogMatrix),T(t,a,r.pitch,r._fov)}(this.state,t,n):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?M(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class P{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const r=this.workerPool.acquire(this.id);for(let e=0;e<r.length;e++){const t=new P.Actor(r[e],n,this.id);t.name=`Worker ${e}`,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,n,r){e.asyncAll(this.actors,((e,r)=>{e.send(t,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function A(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}P.Actor=e.Actor;class O{constructor(e,t,n,r){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,r)}static createFromScreenPoints(t,n){let r,i;if(t instanceof e.Point||"number"==typeof t[0]){const o=e.Point.convert(t);r=[o],i=n.isPointAboveHorizon(o)}else{const o=e.Point.convert(t[0]),a=e.Point.convert(t[1]);r=[o,a],i=e.polygonizeBounds(o,a).every((e=>n.isPointAboveHorizon(e)))}return new O(r,n.getCameraPoint(),i,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}bufferedCameraGeometryGlobe(t){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,t),o=this.cameraPoint.clone();switch(3*((o.y>n.y)+(o.y>r.y))+((o.x>n.x)+(o.x>r.x))){case 0:i[0]=o,i[4]=o.clone();break;case 1:i.splice(1,0,o);break;case 2:i[1]=o;break;case 3:i.splice(4,0,o);break;case 5:i.splice(2,0,o);break;case 6:i[3]=o;break;case 7:i.splice(3,0,o);break;case 8:i[2]=o}return i}containsTile(t,n,r,i=0){const o=t.queryPadding/n._pixelsPerMercatorPixel+1,a=r?this._bufferedCameraMercator(o,n):this._bufferedScreenMercator(o,n);let s=t.tileID.wrap+(a.unwrapped?i:0);const l=a.polygon.map((n=>e.getTilePoint(t.tileTransform,n,s)));if(!e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT))return;s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);const u=this.screenGeometryMercator.polygon.map((n=>e.getTileVec3(t.tileTransform,n,s))),c=u.map((t=>new e.Point(t[0],t[1]))),d=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),h=e.getTileVec3(t.tileTransform,d,s),f=u.map((t=>{const n=e.sub(t,t,h);return e.normalize(n,n),new e.Ray(h,n)})),p=A(t,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:c,tilespaceRays:f,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=e.getBounds(l),m.min.x=e.clamp(m.min.x,0,e.EXTENT),m.min.y=e.clamp(m.min.y,0,e.EXTENT),m.max.x=e.clamp(m.max.x,0,e.EXTENT),m.max.y=e.clamp(m.max.y,0,e.EXTENT),m),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:p};var m}_bufferedScreenMercator(e,t){const n=D(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{let r;return r="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._screenRaycastCache[n]=r,r}}_bufferedCameraMercator(e,t){const n=D(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{let r;return r="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._cameraRaycastCache[n]=r,r}}_projectAndResample(t,n){const r=function(t,n){const r=e.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],o=[0,e.GLOBE_RADIUS,0,1],a=[0,0,0,1];e.transformMat4$1(i,i,r),e.transformMat4$1(o,o,r),e.transformMat4$1(a,a,r);const s=new e.Point(i[0]/i[3],i[1]/i[3]),l=new e.Point(o[0]/o[3],o[1]/o[3]),u=e.polygonContainsPoint(t,s)&&i[3]<a[3],c=e.polygonContainsPoint(t,l)&&o[3]<a[3];if(!u&&!c)return null;const d=function(e,t,n){for(let r=1;r<e.length;r++){const i=L(t.pointCoordinate3D(e[r-1]).x),o=L(t.pointCoordinate3D(e[r]).x);if(n<0){if(i<o)return{idx:r,t:-i/(o-1-i)}}else if(o<i)return{idx:r,t:(1-i)/(o+1-i)}}return null}(t,n,u?-1:1);if(!d)return null;const{idx:h,t:f}=d;let p=h>1?I(t.slice(0,h),n):[],m=h<t.length?I(t.slice(h),n):[];p=p.map((t=>new e.Point(L(t.x),t.y))),m=m.map((t=>new e.Point(L(t.x),t.y)));const g=[...p];0===g.length&&g.push(m[m.length-1]);const y=e.number(g[g.length-1].y,(0===m.length?p[0]:m[0]).y,f);let v;return v=u?[new e.Point(0,y),new e.Point(0,0),new e.Point(1,0),new e.Point(1,y)]:[new e.Point(1,y),new e.Point(1,1),new e.Point(0,1),new e.Point(0,y)],g.push(...v),0===m.length?g.push(p[0]):g.push(...m),{polygon:g.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:!1}}(t,n);if(r)return r;const i=function(t,n){let r=!1,i=-1/0,o=0;for(let e=0;e<t.length-1;e++)t[e].x>i&&(i=t[e].x,o=e);for(let e=0;e<t.length-1;e++){const n=(o+e)%(t.length-1),i=t[n],a=t[n+1];Math.abs(i.x-a.x)>.5&&(i.x<a.x?(i.x+=1,0===n&&(t[t.length-1].x+=1)):(a.x+=1,n+1===t.length-1&&(t[0].x+=1)),r=!0)}const a=e.mercatorXfromLng(n.center.lng);return r&&a<Math.abs(a-1)&&t.forEach((e=>{e.x-=1})),{polygon:t,unwrapped:r}}(I(t,n).map((t=>new e.Point(L(t.x),t.y))),n);return{polygon:i.polygon.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:i.unwrapped}}}function I(t,n){return e.resample(t,(e=>{const t=n.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function L(e){return e<0?1+e%1:e%1}function D(e){return 100*e|0}function R(t,n,r,i,o){const a=function(r,i){if(r)return o(r);if(i){t.url&&i.tiles&&t.tiles&&delete t.tiles;const r=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(r.vectorLayers=i.vector_layers,r.vectorLayerIds=r.vectorLayers.map((e=>e.id))),r.tiles=n.canonicalizeTileset(r,t.url),o(null,r)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url,null,r,i),e.ResourceType.Source),a):e.exported.frame((()=>a(null,t)))}class N{constructor(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<o&&t.y>=i&&t.y<a}}class z{constructor(e,t,n){this.context=e;const r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const j={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class B{constructor(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[j[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class F{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class U extends F{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class G extends F{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class H extends F{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class V extends F{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class q extends F{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class $ extends F{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class W extends F{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Z extends F{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class X extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class Y extends F{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class K extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class J extends F{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Q extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class ee extends F{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class te extends F{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class ne extends F{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class re extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class ie extends F{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class oe extends F{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}let ae,se=class extends F{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}};class le extends F{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class ue extends F{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ce extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class de extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class he extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class fe extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class pe extends F{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class me extends F{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class ge extends F{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class ye extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class ve extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class _e extends F{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class be extends _e{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class xe extends _e{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class we extends xe{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ee{constructor(e,t,n,r){this.context=e,this.width=t,this.height=n;const i=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new be(e,i),r&&(this.depthAttachment=new xe(e,i))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Se{constructor(e,t=!1){if(this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){const t=e;this.extVertexArrayObject={createVertexArrayOES:t.createVertexArray.bind(e),deleteVertexArrayOES:t.deleteVertexArray.bind(e),bindVertexArrayOES:t.bindVertexArray.bind(e)}}this.clearColor=new U(this),this.clearDepth=new G(this),this.clearStencil=new H(this),this.colorMask=new V(this),this.depthMask=new q(this),this.stencilMask=new $(this),this.stencilFunc=new W(this),this.stencilOp=new Z(this),this.stencilTest=new X(this),this.depthRange=new Y(this),this.depthTest=new K(this),this.depthFunc=new J(this),this.blend=new Q(this),this.blendFunc=new ee(this),this.blendColor=new te(this),this.blendEquation=new ne(this),this.cullFace=new re(this),this.cullFaceSide=new ie(this),this.frontFace=new oe(this),this.program=new se(this),this.activeTexture=new le(this),this.viewport=new ue(this),this.bindFramebuffer=new ce(this),this.bindRenderbuffer=new de(this),this.bindTexture=new he(this),this.bindVertexBuffer=new fe(this),this.bindElementBuffer=new pe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new me(this),this.pixelStoreUnpack=new ge(this),this.pixelStoreUnpackPremultiplyAlpha=new ye(this),this.pixelStoreUnpackFlipY=new ve(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new z(this,e,t)}createVertexBuffer(e,t,n){return new B(this,e,t,n)}createRenderbuffer(e,t,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,n){return new Ee(this,e,t,n)}clear({color:e,depth:t,stencil:n}){const r=this.gl;let i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==n&&(i|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),r.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(n){t(n.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Te extends e.Evented{constructor(t,n,r,i){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,r=this.map._worldview;this._tileJSONRequest=R(this._options,this.map._requestManager,n,r,((i,o)=>{this._tileJSONRequest=null,this._loaded=!0,i?(n&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${n}`),r&&2!==r.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${r}`),this.fire(new e.ErrorEvent(i))):o&&(e.extend(this,o),o.bounds&&(this.tileBounds=new N(o.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(o.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(i)}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",i,o.bind(this));else if(t.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const n=e.loadVectorTile.call({deduped:this._deduped},i,((e,n)=>{e||!n?o.call(this,e):(i.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",i,o.bind(this),void 0,!0))}),!0);t.request={cancel:n}}function o(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Me extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},n),e.extend(this,e.pick(n,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=R(this._options,this.map._requestManager,null,null,((n,r)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new e.ErrorEvent(n)):r&&(e.extend(this,r),r.bounds&&(this.tileBounds=new N(r.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(r.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(n)}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const r=e.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),((r,i,o,a)=>(delete t.request,t.aborted?(t.state="unloaded",n(null)):r?(t.state="errored",n(r)):i?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:a}),t.setTexture(i,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null))))}static loadTileData(e,t,n){e.setTexture(t,n)}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function ke(t,n,r,i,o,a,s,l){const u=[t,r,o,n,i,a,1,1,1],c=[s,l,1],d=e.adjoint([],u),[h,f,p]=e.transformMat3(c,c,e.transpose(d,d));return e.multiply$1(u,[h,0,0,0,f,0,0,0,p],u)}class Ce extends e.Evented{constructor(e,t,n,r){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t,this._dirty=!1}load(t,n){this._loaded=n||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((n,r)=>{if(this._imageRequest=null,this._loaded=!0,n)this.fire(new e.ErrorEvent(n));else if(r){const{HTMLImageElement:n}=e.window;this.image=r instanceof n?e.exported.getImageData(r):r,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const e of t)n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}if(this._boundsArray)return;const n=e.tileTransform(this.tileID,this.map.transform.projection),[r,i,o,a]=this.coordinates.map((t=>{const r=n.projection.project(t[0],t[1]);return e.getTilePoint(n,r)._round()}));this.perspectiveTransform=function(t,n,r,i,o,a,s,l,u,c){const d=ke(0,0,t,0,0,n,t,n),h=ke(r,i,o,a,s,l,u,c);return e.multiply$1(h,e.adjoint(d,d),h),[h[6]/h[8]*t/e.EXTENT,h[7]/h[8]*n/e.EXTENT]}(this.width,this.height,r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y);const s=this._boundsArray=new e.StructArrayLayout4i8;s.emplaceBack(r.x,r.y,0,0),s.emplaceBack(i.x,i.y,e.EXTENT,0),s.emplaceBack(a.x,a.y,0,e.EXTENT),s.emplaceBack(o.x,o.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(s,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,n=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Pe={vector:Te,raster:Me,"raster-dem":class extends Me{constructor(t,n,r,i){super(t,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,o,a,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:a,expires:s});const n=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&(null==ae&&(ae=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),ae),r=1-(o.width-e.prevPowerOfTwo(o.width))/2;r<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=n?o:e.exported.getImageData(o,r),u={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:r};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",u,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=e.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(n),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(n),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,((t,n)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(t.resourceTiming=n.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(t,n){const r=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(r,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,i)=>(delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(i,this.map.painter,"reloadTile"===r),n(null)))),void 0,"loadTile"===r)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ce{constructor(e,t,n,r){super(e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,e.ResourceType.Source).url);e.getVideo(this.urls,((t,n)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ce,canvas:class extends Ce{constructor(t,n,r,i){super(t,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=r,this._implementation=n,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new N(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:n,z:r}=e.canonical;return this._implementation.hasTile({x:t,y:n,z:r})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const{x:r,y:i,z:o}=t.tileID.canonical,a=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:r,y:i,z:o},{signal:a.signal})).then(function(r){return delete t.request,t.aborted?(t.state="unloaded",n(null)):void 0===r?(t.state="errored",n(null)):null===r?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(r)?(this.loadTileData(t,r),t.state="loaded",void n(null)):(t.state="errored",n(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch((e=>{20!==e.code&&(t.state="errored",n(e))})),t.request.cancel=()=>a.abort()}loadTileData(e,t){Me.loadTileData(e,t,this._map.painter)}unloadTileData(e){Me.unloadTileData(e,this._map.painter)}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:n,z:r}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:n,z:r})}t()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ae=function(t,n,r,i){const o=new Pe[n.type](t,n,r,i);if(o.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${o.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Oe(t,n){const r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply(r,r,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function Ie(e,t,n,r,i,o,a,s=!1){const l=e.tilesIn(r,a,s);l.sort(De);const u=[];for(const d of l)u.push({wrappedTileID:d.tile.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(t,n,e._state,d,i,o,Oe(e.transform,d.tile.tileID),s)});const c=function(e){const t={},n={};for(const r of e){const e=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in e){const r=e[n],i=o[n]=o[n]||{},a=t[n]=t[n]||[];for(const e of r)i[e.featureIndex]||(i[e.featureIndex]=!0,a.push(e))}}return t}(u);for(const d in c)c[d].forEach((t=>{const n=t.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(r["source-layer"],n.id):{})}));return c}function Le(e,t){const n=e.getRenderableIds().map((t=>e.getTileByID(t))),r=[],i={};for(let o=0;o<n.length;o++){const e=n[o],a=e.tileID.canonical.key;i[a]||(i[a]=!0,e.querySourceFeatures(r,t))}return r}function De(e,t){const n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function Re(){return null!=fo.workerClass?new fo.workerClass:new e.window.Worker(fo.workerUrl)}const Ne="mapboxgl_preloaded_worker_pool";class ze{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<ze.workerCount;)this.workers.push(new Re);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ne]}numActive(){return Object.keys(this.active).length}}let je;function Be(){return je||(je=new ze),je}function Fe(t,n){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return e.refProperties.forEach((e=>{e in n&&(r[e]=n[e])})),r}function Ue(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=Fe(e[n],t[e[n].ref]));return e}ze.workerCount=2;const Ge={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function He(e,t,n){n.push({command:Ge.addSource,args:[e,t[e]]})}function Ve(e,t,n){t.push({command:Ge.removeSource,args:[e]}),n[e]=!0}function qe(e,t,n,r){Ve(e,n,r),He(e,t,n)}function $e(e,n,r){let i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;return!0}function We(e,n,r,i,o,a){let s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Ze(e){return e.id}function Xe(e,t){return e[t.id]=t,e}class Ye{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let n=1,r=this._distances[n];const i=t*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class Ke{constructor(e,t,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}_insertBoxCell(e,t,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(e,t,n,r,i,o){this.circleCells[i].push(o)}_query(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];const a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],r=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-r,y1:n-r,x2:t+r,y2:n+r})}return o?a.filter(o):a}return this._forEachCell(e,t,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}_queryCircle(e,t,n,r,i){const o=e-n,a=e+n,s=t-n,l=t+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];const u=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,u,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?u.length>0:u}query(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}hitTest(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}hitTestCircle(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}_queryCell(e,t,n,r,i,o,a,s){const l=a.seenUids,u=this.boxCells[i];if(null!==u){const i=this.bboxes;for(const c of u)if(!l.box[c]){l.box[c]=!0;const u=4*c;if(e<=i[u+2]&&t<=i[u+3]&&n>=i[u+0]&&r>=i[u+1]&&(!s||s(this.boxKeys[c]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[c],x1:i[u],y1:i[u+1],x2:i[u+2],y2:i[u+3]})}}}const c=this.circleCells[i];if(null!==c){const i=this.circles;for(const u of c)if(!l.circle[u]){l.circle[u]=!0;const c=3*u;if(this._circleAndRectCollide(i[c],i[c+1],i[c+2],e,t,n,r)&&(!s||s(this.circleKeys[u]))){if(a.hitTest)return o.push(!0),!0;{const e=i[c],t=i[c+1],n=i[c+2];o.push({key:this.circleKeys[u],x1:e-n,y1:t-n,x2:e+n,y2:t+n})}}}}}_queryCellCircle(e,t,n,r,i,o,a,s){const l=a.circle,u=a.seenUids,c=this.boxCells[i];if(null!==c){const e=this.bboxes;for(const t of c)if(!u.box[t]){u.box[t]=!0;const n=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(this.boxKeys[t])))return o.push(!0),!0}}const d=this.circleCells[i];if(null!==d){const e=this.circles;for(const t of d)if(!u.circle[t]){u.circle[t]=!0;const n=3*t;if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return o.push(!0),!0}}}_forEachCell(e,t,n,r,i,o,a,s){const l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),d=this._convertToYCellCoord(r);for(let h=l;h<=c;h++)for(let l=u;l<=d;l++)if(i.call(this,e,t,n,r,this.xCellCount*l+h,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,r,i,o){const a=r-e,s=i-t,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;const u=(a-i)/2,c=Math.abs(t-(i+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;const d=l-s,h=c-u;return d*d+h*h<=n*n}}const Je={unknown:0,flipRequired:1,flipNotRequired:2},Qe=Math.tan(85*Math.PI/180);function et(t,n,r,i,o,a,s){const l=e.create();if(r)if("globe"===a.name){const t=e.calculateGlobeLabelMatrix(o,n);e.multiply(l,l,t)}else{const t=v([],s);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],i||e.rotateZ(l,l,o.angle)}else e.multiply(l,o.labelPlaneMatrix,t);return l}function tt(e,t,n,r,i,o,a){const s=et(e,t,n,r,i,o,a);return"globe"===o.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function nt(t,n,r,i,o,a,s){if(r){if("globe"===a.name){const l=et(t,n,r,i,o,a,s);return e.invert(l,l),e.multiply(l,t,l),l}{const n=e.clone(t),r=e.identity([]);return r[0]=s[0],r[1]=s[1],r[4]=s[2],r[5]=s[3],e.multiply(n,n,r),i||e.rotateZ(n,n,-o.angle),n}}return o.glCoordMatrix}function rt(t,n,r,i){const o=[t,n,r,1];r?e.transformMat4$1(o,o,i):pt(o,o,i);const a=o[3];return o[0]/=a,o[1]/=a,o[2]/=a,o}function it(e,t){return Math.min(.5+e/t*.5,1.5)}function ot(e,t){const n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function at(t,n,r,i,o,a,s,l,u,c){const d=r.transform,h=i?t.textSizeData:t.iconSizeData,f=e.evaluateSizeForZoom(h,r.transform.zoom),p="globe"===d.projection.name,m=[256/r.width*2+1,256/r.height*2+1],g=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;g.clear();let y=null;p&&(y=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const v=t.lineVertexArray,_=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,b=r.transform.width/r.transform.height;let x,w=!1;for(let E=0;E<_.length;E++){const i=_.get(E),{numGlyphs:p,writingMode:S}=i;if(S!==e.WritingMode.vertical||w||x===e.WritingMode.horizontal||(w=!0),x=S,(i.hidden||S===e.WritingMode.vertical)&&!w){ft(p,g);continue}w=!1;const T=new e.Point(i.tileAnchorX,i.tileAnchorY);let{x:M,y:k,z:C}=d.projection.projectTilePoint(T.x,T.y,c.canonical);if(u){const[e,t,n]=u(T);M+=e,k+=t,C+=n}const P=[M,k,C,1];if(e.transformMat4$1(P,P,n),!ot(P,m)){ft(p,g);continue}const A=it(r.transform.cameraToCenterDistance,P[3]),O=e.evaluateSizeForFeature(h,f,i),I=s?O/A:O*A,L=rt(M,k,C,o);if(L[3]<=0){ft(p,g);continue}let D={};const R=s?null:u,N=ut(i,I,!1,l,n,o,a,t.glyphOffsetArray,v,g,y,L,T,D,b,R,d.projection,c,s);w=N.useVertical,R&&N.needsFlipping&&(D={}),(N.notEnoughRoom||w||N.needsFlipping&&ut(i,I,!0,l,n,o,a,t.glyphOffsetArray,v,g,y,L,T,D,b,R,d.projection,c,s).notEnoughRoom)&&ft(p,g)}i?(t.text.dynamicLayoutVertexBuffer.updateData(g),y&&t.text.globeExtVertexBuffer.updateData(y)):(t.icon.dynamicLayoutVertexBuffer.updateData(g),y&&t.icon.globeExtVertexBuffer.updateData(y))}function st(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,m){const{lineStartIndex:g,glyphStartIndex:y,segment:v}=s,_=y+s.numGlyphs,b=g+s.lineLength,x=t.getoffsetX(y),w=t.getoffsetX(_-1),E=ht(e*x,n,r,i,o,a,v,g,b,l,u,c,d,h,!0,f,p,m);if(!E)return null;const S=ht(e*w,n,r,i,o,a,v,g,b,l,u,c,d,h,!0,f,p,m);return S?{first:E,last:S}:null}function lt(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(i)>Math.abs(r)?{useVertical:!0}:t===e.WritingMode.vertical?i>0?{needsFlipping:!0}:null:n!==Je.unknown&&function(e,t){return 0===e||Math.abs(t/e)>Qe}(r,i)?n===Je.flipRequired?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function ut(t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,y,v,_){const b=n/24,x=t.lineOffsetX*b,w=t.lineOffsetY*b,{lineStartIndex:E,glyphStartIndex:S,numGlyphs:T,segment:M,writingMode:k,flipState:C}=t,P=E+t.lineLength,A=t=>{if(d){const[n,r,i]=t.up,o=c.length;e.updateGlobeVertexNormal(d,o+0,n,r,i),e.updateGlobeVertexNormal(d,o+1,n,r,i),e.updateGlobeVertexNormal(d,o+2,n,r,i),e.updateGlobeVertexNormal(d,o+3,n,r,i)}const[n,r,i]=t.point;e.addDynamicAttributes(c,n,r,i,t.angle)};if(T>1){const e=st(b,l,x,w,r,h,f,t,u,a,p,g,!1,y,v,_);if(!e)return{notEnoughRoom:!0};if(i&&!r){let[n,r,i]=e.first.point,[o,a,l]=e.last.point;[n,r]=rt(n,r,i,s),[o,a]=rt(o,a,l,s);const u=lt(k,C,(o-n)*m,a-r);if(t.flipState=u&&u.needsFlipping?Je.flipRequired:Je.flipNotRequired,u)return u}A(e.first);for(let t=S+1;t<S+T-1;t++){const e=ht(b*l.getoffsetX(t),x,w,r,h,f,M,E,P,u,a,p,g,!1,!1,y,v,_);if(!e)return c.length-=4*(t-S),{notEnoughRoom:!0};A(e)}A(e.last)}else{if(i&&!r){const n=rt(f.x,f.y,0,o),r=E+M+1,i=new e.Point(u.getx(r),u.gety(r)),a=rt(i.x,i.y,0,o),s=a[3]>0?a:dt(f,i,n,1,o,void 0,y,v.canonical),l=lt(k,C,(s[0]-n[0])*m,s[1]-n[1]);if(t.flipState=l&&l.needsFlipping?Je.flipRequired:Je.flipNotRequired,l)return l}const n=ht(b*l.getoffsetX(S),x,w,r,h,f,M,E,P,u,a,p,g,!1,!1,y,v,_);if(!n)return{notEnoughRoom:!0};A(n)}return{}}function ct(e,t,n,r,i){const{x:o,y:a,z:s}=r.projectTilePoint(e.x,e.y,t);if(!i)return rt(o,a,s,n);const[l,u,c]=i(e);return rt(o+l,a+u,s+c,n)}function dt(t,n,r,i,o,a,s,l){const u=ct(t.sub(n)._unit()._add(t),l,o,s,a);return e.sub(u,r,u),e.normalize(u,u),e.scaleAndAdd(u,r,u,i)}function ht(t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,y,v){const _=i?t-n:t+n;let b=_>0?1:-1,x=0;i&&(b*=-1,x=Math.PI),b<0&&(x+=Math.PI);let w=l+s+(b>0?0:1)|0,E=o,S=o,T=0,M=0;const k=Math.abs(_),C=[],P=[];let A=a,O=A;const I=()=>dt(O,A,S,k-T+1,d,f,g,y.canonical);for(;T+M<=k;){if(w+=b,w<l||w>=u)return null;if(S=E,O=A,C.push(S),p&&P.push(O),A=new e.Point(c.getx(w),c.gety(w)),E=h[w],!E){const e=ct(A,y.canonical,d,g,f);E=e[3]>0?h[w]=e:I()}T+=M,M=e.distance(S,E)}m&&f&&(h[w]&&(E=I(),M=e.distance(S,E)),h[w]=E);const L=(k-T)/M,D=A.sub(O)._mult(L)._add(O),R=e.sub([],E,S),N=e.scaleAndAdd([],S,R,L);let z=[0,0,1],j=R[0],B=R[1];if(v&&(z=g.upVector(y.canonical,D.x,D.y),0!==z[0]||0!==z[1]||1!==z[2])){const t=[z[2],0,-z[0]],n=e.cross([],z,t);e.normalize(t,t),e.normalize(n,n),j=e.dot(R,t),B=e.dot(R,n)}if(r){const t=e.cross([],z,R);e.normalize(t,t),e.scaleAndAdd(N,N,t,r*b)}const F=x+Math.atan2(B,j);return C.push(N),p&&P.push(D),{point:N,angle:F,path:C,tilePath:P,up:z}}function ft(e,t){const n=t.length,r=n+4*e;t.resize(r),t.float32.fill(-1/0,4*n,4*r)}function pt(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}const mt=100;class gt{constructor(e,t,n=new Ke(e.width+200,e.height+200,25),r=new Ke(e.width+200,e.height+200,25)){this.transform=e,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+mt,this.screenBottomBoundary=e.height+mt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,n,r,i,o,a,s){let l=n.projectedAnchorX,u=n.projectedAnchorY,c=n.projectedAnchorZ;const d=n.elevation,h=n.tileID,f=e.getProjection();if(d&&h){const[e,t,r]=f.upVector(h.canonical,n.tileAnchorX,n.tileAnchorY),i=f.upVectorScale(h.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e*d*i,u+=t*d*i,c+=r*d*i}const p=this.projectAndGetPerspectiveRatio(a,l,u,c,n.tileID,"globe"===f.name||!!d||this.transform.pitch>0,f),m=o*p.perspectiveRatio,g=(n.x1*t+r.x-n.padding)*m+p.point.x,y=(n.y1*t+r.y-n.padding)*m+p.point.y,v=(n.x2*t+r.x+n.padding)*m+p.point.x,_=(n.y2*t+r.y+n.padding)*m+p.point.y,b=p.perspectiveRatio<=.55||p.occluded;return!this.isInsideGrid(g,y,v,_)||!i&&this.grid.hitTest(g,y,v,_,s)||b?{box:[],offscreen:!1,occluded:p.occluded}:{box:[g,y,v,_],offscreen:this.isOffscreen(g,y,v,_),occluded:!1}}placeCollisionCircles(t,n,r,i,o,a,s,l,u,c,d,h,f,p,m){const g=[],y=this.transform.elevation,v=t.getProjection(),_=y?y.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,v):null,b=new e.Point(r.tileAnchorX,r.tileAnchorY);let{x:x,y:w,z:E}=v.projectTilePoint(b.x,b.y,m.canonical);if(_){const[e,t,n]=_(b);x+=e,w+=t,E+=n}const S="globe"===v.name,T=this.projectAndGetPerspectiveRatio(s,x,w,E,m,S||!!y||this.transform.pitch>0,v),{perspectiveRatio:M}=T,k=(d?a/M:a*M)/e.ONE_EM,C=rt(x,w,E,l),P=T.signedDistanceFromCamera>0?st(k,o,r.lineOffsetX*k,r.lineOffsetY*k,!1,C,b,r,i,l,{},y&&!d?_:null,d&&!!y,v,m,d):null;let A=!1,O=!1,I=!0;if(P&&!T.occluded){const t=.5*f*M+p,r=new e.Point(-100,-100),i=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),o=new Ye,{first:a,last:s}=P,l=a.path.length;let d=[];for(let e=l-1;e>=1;e--)d.push(a.path[e]);for(let e=1;e<s.path.length;e++)d.push(s.path[e]);const m=2.5*t;u&&(d=d.map((([e,t,n],r)=>(_&&!S&&(n=_(r<l-1?a.tilePath[l-1-r]:s.tilePath[r-l+2])[2]),rt(e,t,n,u)))),d.some((e=>e[3]<=0))&&(d=[]));let y=[];if(d.length>0){let t=1/0,n=-1/0,o=1/0,a=-1/0;for(const e of d)t=Math.min(t,e[0]),o=Math.min(o,e[1]),n=Math.max(n,e[0]),a=Math.max(a,e[1]);n>=r.x&&t<=i.x&&a>=r.y&&o<=i.y&&(y=[d.map((t=>new e.Point(t[0],t[1])))],(t<r.x||n>i.x||o<r.y||a>i.y)&&(y=e.clipLine(y,r.x,r.y,i.x,i.y)))}for(const e of y){o.reset(e,.25*t);let r=0;r=o.length<=.5*t?1:Math.ceil(o.paddedLength/m)+1;for(let e=0;e<r;e++){const i=e/Math.max(r-1,1),a=o.lerp(i),s=a.x+mt,l=a.y+mt;g.push(s,l,t,0);const u=s-t,d=l-t,f=s+t,p=l+t;if(I=I&&this.isOffscreen(u,d,f,p),O=O||this.isInsideGrid(u,d,f,p),!n&&this.grid.hitTestCircle(s,l,t,h)&&(A=!0,!c))return{circles:[],offscreen:!1,collisionDetected:A,occluded:!1}}}}return{circles:!c&&A||!O?[]:g,offscreen:I,collisionDetected:A,occluded:T.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const c of t){const t=new e.Point(c.x+mt,c.y+mt);r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),n.push(t)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},u={};for(const c of s){const t=c.key;if(void 0===l[t.bucketInstanceId]&&(l[t.bucketInstanceId]={}),l[t.bucketInstanceId][t.featureIndex])continue;const r=[new e.Point(c.x1,c.y1),new e.Point(c.x2,c.y1),new e.Point(c.x2,c.y2),new e.Point(c.x1,c.y2)];e.polygonIntersectsPolygon(n,r)&&(l[t.bucketInstanceId][t.featureIndex]=!0,void 0===u[t.bucketInstanceId]&&(u[t.bucketInstanceId]=[]),u[t.bucketInstanceId].push(t.featureIndex))}return u}insertCollisionBox(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,r,i){const o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};for(let s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])}projectAndGetPerspectiveRatio(t,n,r,i,o,a,s){const l=[n,r,i,1];let u=!1;if(i||this.transform.pitch>0){if(e.transformMat4$1(l,l,t),this.fogState&&o&&"globe"!==s.name){const t=function(t,n,r,i,o,a){const s=a.calculateFogTileMatrix(o),l=[n,r,i];return e.transformMat4(l,l,s),T(t,l,a.pitch,a._fov)}(this.fogState,n,r,i,o.toUnwrapped(),this.transform);u=t>.9}}else pt(l,l,t);const c=l[3];return{point:new e.Point((l[0]/c+1)/2*this.transform.width+mt,(-l[1]/c+1)/2*this.transform.height+mt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/c*.5,1.5),signedDistanceFromCamera:c,occluded:a&&l[2]>c||u}}isOffscreen(e,t,n,r){return n<mt||e>=this.screenRightBoundary||r<mt||t>this.screenBottomBoundary}isInsideGrid(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function yt(t,n,r){const i=n.createTileMatrix(t,t.worldSize,r.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function vt(e,t,n){if(t.projection.name===n.projection.name)return e.projMatrix;const r=n.clone();return r.setProjection(t.projection),yt(r,t.getProjection(),e)}function _t(e,t,n){return t.name===n.projection.name?e.projMatrix:yt(n,t,e)}class bt{constructor(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class xt{constructor(e,t,n,r,i,o=!1){this.text=new bt(e?e.text:null,t,n,i),this.icon=new bt(e?e.icon:null,t,r,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wt{constructor(e,t,n,r=!1){this.text=e,this.icon=t,this.skipFade=n,this.clipped=r}}class Et{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class St{constructor(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class Tt{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Mt(t,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=e.getAnchorAlignment(t),l=-(a-.5)*n,u=-(s-.5)*r,c=e.evaluateVariableOffset(t,i);return new e.Point(l+c[0]*o,u+c[1]*o)}function kt(t,n,r,i,o){const a=new e.Point(t,n);return r&&a._rotate(i?o:-o),a}class Ct{constructor(e,t,n,r,i){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new gt(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Tt(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=o.layers[0].layout,l=r.collisionBoxArray,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/e.EXTENT,d=r.tileID.toUnwrapped();this.transform.setProjection(o.projection);const h=(f=r.tileID,p=o.getProjection(),m=this.transform,p.name===this.projection?m.calculateProjMatrix(f.toUnwrapped()):yt(m,p,f));var f,p,m;const g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");n.compileFilter();const v=n.dynamicFilter(),_=n.dynamicFilterNeedsFeature(),b=this.transform.calculatePixelsToTileUnitsMatrix(r),x=tt(h,r.tileID.canonical,g,y,this.transform,o.getProjection(),b);let w=null;if(g){const t=nt(h,r.tileID.canonical,g,y,this.transform,o.getProjection(),b);w=e.multiply([],this.transform.labelPlaneMatrix,t)}let E=null;v&&r.latestFeatureIndex&&(E={unwrappedTileID:d,dynamicFilter:v,dynamicFilterNeedsFeature:_,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new St(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const S={bucket:o,layout:s,posMatrix:h,textLabelPlaneMatrix:x,labelToScreenMatrix:w,clippingData:E,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const e of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=e;t.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:S})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:S})}attemptAnchorPlacement(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,y){const{textOffset0:v,textOffset1:_,crossTileID:b}=d,x=[v,_],w=Mt(e,n,r,x,i),E=this.collisionIndex.placeCollisionBox(f,i,t,kt(w.x,w.y,o,a,this.transform.angle),c,s,l,u.predicate);if(m){const e=f.getSymbolInstanceIconSize(y,this.transform.zoom,d.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(f,e,m,kt(w.x,w.y,o,a,this.transform.angle),c,s,l,u.predicate).box.length)return}if(E.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[b]&&this.prevPlacement.placements[b]&&this.prevPlacement.placements[b].text&&(t=this.prevPlacement.variableOffsets[b].anchor),this.variableOffsets[b]={textOffset:x,width:n,height:r,anchor:e,textScale:i,prevAnchor:t},this.markUsedJustification(f,e,d,p),f.allowVerticalPlacement&&(this.markUsedOrientation(f,p,d),this.placedOrientations[b]=p),{shift:w,placedGlyphBoxes:E}}}placeLayerBucketPart(t,n,r,i){const{bucket:o,layout:a,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:u,clippingData:c,textPixelRatio:d,holdingForFade:h,collisionBoxArray:f,partiallyEvaluatedTextSize:p,partiallyEvaluatedIconSize:m,collisionGroup:g}=t.parameters,y=a.get("text-optional"),v=a.get("icon-optional"),_=a.get("text-allow-overlap"),b=a.get("icon-allow-overlap"),x="map"===a.get("text-rotation-alignment"),w="map"===a.get("text-pitch-alignment"),E="none"!==a.get("icon-text-fit"),S="viewport-y"===a.get("symbol-z-order");this.transform.setProjection(o.projection);let T=_&&(b||!o.hasIconData()||v),M=b&&(_||!o.hasTextData()||y);!o.collisionArrays&&f&&o.deserializeCollisionBoxes(f),r&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,f);const k=(t,i,f)=>{const{crossTileID:S,numVerticalGlyphVertices:k}=t;if(c){const r={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(c.dynamicFilterNeedsFeature){const e=this.retainedQueryData[o.bucketInstanceId];i=c.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,c.dynamicFilter)(r,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new e.Point(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(c.unwrappedTileID)))return this.placements[S]=new wt(!1,!1,!1,!0),void n.add(S)}if(n.has(S))return;if(h)return void(this.placements[S]=new wt(!1,!1,!1));let C=!1,P=!1,A=!0,O=!1,I=!1,L=null,D={box:null,offscreen:null,occluded:null},R={box:null,offscreen:null,occluded:null},N=null,z=null,j=null,B=0,F=0,U=0;f.textFeatureIndex?B=f.textFeatureIndex:t.useRuntimeCollisionCircles&&(B=t.featureIndex),f.verticalTextFeatureIndex&&(F=f.verticalTextFeatureIndex);const G=e=>{e.tileID=this.retainedQueryData[o.bucketInstanceId].tileID;const t=this.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},H=f.textBox;if(H){G(H);const n=n=>{let r=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[S];e&&(this.placedOrientations[S]=e,r=e,this.markUsedOrientation(o,r,t))}return r},r=(t,n)=>{if(o.allowVerticalPlacement&&k>0&&f.verticalTextBox){for(const r of o.writingModes)if(r===e.WritingMode.vertical?(D=n(),R=D):D=t(),D&&D.box&&D.box.length)break}else D=t()};if(a.get("text-variable-anchor")){let l=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[S]){const e=this.prevPlacement.variableOffsets[S];l.indexOf(e.anchor)>0&&(l=l.filter((t=>t!==e.anchor)),l.unshift(e.anchor))}const u=(e,n,r)=>{const a=o.getSymbolInstanceTextSize(p,t,this.transform.zoom,i),u=(e.x2-e.x1)*a+2*e.padding,c=(e.y2-e.y1)*a+2*e.padding,h=E&&!b?n:null;h&&G(h);let f={box:[],offscreen:!1,occluded:!1};const y=_?2*l.length:l.length;for(let v=0;v<y;++v){const n=this.attemptAnchorPlacement(l[v%l.length],e,u,c,a,x,w,d,s,g,v>=l.length,t,i,o,r,h,p,m);if(n&&(f=n.placedGlyphBoxes,f&&f.box&&f.box.length)){C=!0,L=n.shift;break}}return f};r((()=>u(H,f.iconBox,e.WritingMode.horizontal)),(()=>{const t=f.verticalTextBox;return t&&G(t),o.allowVerticalPlacement&&!(D&&D.box&&D.box.length)&&k>0&&t?u(t,f.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),D&&(C=D.box,A=D.offscreen,O=D.occluded);const c=n(!(!D||!D.box));if(!C&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[S];e&&(this.variableOffsets[S]=e,this.markUsedJustification(o,e.anchor,t,c))}}else{const a=(n,r)=>{const a=o.getSymbolInstanceTextSize(p,t,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(o,a,n,new e.Point(0,0),_,d,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,r,t),this.placedOrientations[S]=r),l};r((()=>a(H,e.WritingMode.horizontal)),(()=>{const t=f.verticalTextBox;return o.allowVerticalPlacement&&k>0&&t?(G(t),a(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),n(!!(D&&D.box&&D.box.length))}}if(N=D,C=N&&N.box&&N.box.length>0,A=N&&N.offscreen,O=N&&N.occluded,t.useRuntimeCollisionCircles){const n=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),i=e.evaluateSizeForFeature(o.textSizeData,p,n),c=a.get("text-padding");z=this.collisionIndex.placeCollisionCircles(o,_,n,o.lineVertexArray,o.glyphOffsetArray,i,s,l,u,r,w,g.predicate,t.collisionCircleDiameter*i/e.ONE_EM,c,this.retainedQueryData[o.bucketInstanceId].tileID),C=_||z.circles.length>0&&!z.collisionDetected,A=A&&z.offscreen,O=z.occluded}if(f.iconFeatureIndex&&(U=f.iconFeatureIndex),f.iconBox){const n=n=>{G(n);const r=E&&L?kt(L.x,L.y,x,w,this.transform.angle):new e.Point(0,0),i=o.getSymbolInstanceIconSize(m,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(o,i,n,r,b,d,s,g.predicate)};R&&R.box&&R.box.length&&f.verticalIconBox?(j=n(f.verticalIconBox),P=j.box.length>0):(j=n(f.iconBox),P=j.box.length>0),A=A&&j.offscreen,I=j.occluded}const V=y||0===t.numHorizontalGlyphVertices&&0===k,q=v||0===t.numIconVertices;if(V||q?q?V||(P=P&&C):C=P&&C:P=C=P&&C,C&&N&&N.box&&this.collisionIndex.insertCollisionBox(N.box,a.get("text-ignore-placement"),o.bucketInstanceId,R&&R.box&&F?F:B,g.ID),P&&j&&this.collisionIndex.insertCollisionBox(j.box,a.get("icon-ignore-placement"),o.bucketInstanceId,U,g.ID),z&&(C&&this.collisionIndex.insertCollisionCircles(z.circles,a.get("text-ignore-placement"),o.bucketInstanceId,B,g.ID),r)){const e=o.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Et);for(let n=0;n<z.circles.length;n+=4)t.circles.push(z.circles[n+0]),t.circles.push(z.circles[n+1]),t.circles.push(z.circles[n+2]),t.circles.push(z.collisionDetected?1:0)}const $="globe"!==o.projection.name;T=T&&($||!O),M=M&&($||!I),this.placements[S]=new wt(C||T,P||M,A||o.justReloaded),n.add(S)};if(S){const e=o.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const n=e[t];k(o.symbolInstances.get(n),n,o.collisionArrays[n])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)k(o.symbolInstances.get(e),e,o.collisionArrays[e]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[o.bucketInstanceId];e.invert(t.invProjMatrix,s),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(t,n,r,i){const{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:l,crossTileID:u}=r,c=e.getAnchorJustification(n),d=i===e.WritingMode.vertical?l:"left"===c?o:"center"===c?a:"right"===c?s:-1;o>=0&&(t.text.placedSymbolArray.get(o).crossTileID=d>=0&&o!==d?0:u),a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=d>=0&&a!==d?0:u),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=d>=0&&s!==d?0:u),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=d>=0&&l!==d?0:u)}markUsedOrientation(t,n,r){const i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=n===e.WritingMode.vertical?n:0,{leftJustifiedTextSymbolIndex:a,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:u}=r,c=t.text.placedSymbolArray;a>=0&&(c.get(a).placedOrientation=i),s>=0&&(c.get(s).placedOrientation=i),l>=0&&(c.get(l).placedOrientation=i),u>=0&&(c.get(u).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const s in this.placements){const e=this.placements[s],t=i[s];t?(this.opacities[s]=new xt(t,r,e.text,e.icon,null,e.clipped),n=n||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[s]=new xt(null,r,e.text,e.icon,e.skipFade,e.clipped),n=n||e.text||e.icon)}for(const s in i){const e=i[s];if(!this.opacities[s]){const t=new xt(e,r,!1,!1);t.isHidden()||(this.opacities[s]=t,n=n||e.text.placed||e.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n=new Set;for(const r of t){const t=r.getBucket(e);t&&r.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n,r.collisionBoxArray)}}updateBucketOpacities(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const i=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),a=new xt(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),u=i.get("text-variable-anchor"),c="map"===i.get("text-rotation-alignment"),d="map"===i.get("text-pitch-alignment"),h="none"!==i.get("icon-text-fit"),f=new xt(null,0,s&&(l||!t.hasIconData()||i.get("icon-optional")),l&&(s||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);const p=(e,t,n)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)};let m=0;for(let g=0;g<t.symbolInstances.length;g++){const r=t.symbolInstances.get(g),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:s,crossTileID:l,numIconVertices:y}=r,v=n.has(l);let _=this.opacities[l];v?_=a:_||(_=f,this.opacities[l]=_),n.add(l);const b=i>0||s>0,x=y>0,w=this.placedOrientations[l],E=w===e.WritingMode.vertical,S=w===e.WritingMode.horizontal||w===e.WritingMode.horizontalOnly;if(!b&&!x||_.isHidden()||m++,b){const e=zt(_.text);p(t.text,i,E?jt:e),p(t.text,s,S?jt:e);const n=_.text.isHidden(),{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:u,verticalPlacedTextSymbolIndex:c}=r,d=t.text.placedSymbolArray,h=n||E?1:0;o>=0&&(d.get(o).hidden=h),a>=0&&(d.get(a).hidden=h),u>=0&&(d.get(u).hidden=h),c>=0&&(d.get(c).hidden=n||S?1:0);const f=this.variableOffsets[l];f&&this.markUsedJustification(t,f.anchor,r,w);const m=this.placedOrientations[l];m&&(this.markUsedJustification(t,"left",r,m),this.markUsedOrientation(t,m,r))}if(x){const e=zt(_.icon),{placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:i}=r,o=t.icon.placedSymbolArray,a=_.icon.isHidden()?1:0;n>=0&&(p(t.icon,y,E?jt:e),o.get(n).hidden=a),i>=0&&(p(t.icon,r.numVerticalIconVertices,S?jt:e),o.get(i).hidden=a)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const n=t.collisionArrays[g];if(n){let r=new e.Point(0,0),i=!0;if(n.textBox||n.verticalTextBox){if(u){const e=this.variableOffsets[l];e?(r=Mt(e.anchor,e.width,e.height,e.textOffset,e.textScale),c&&r._rotate(d?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!_.clipped),n.textBox&&Pt(t.textCollisionBox.collisionVertexArray,_.text.placed,!i||E,r.x,r.y),n.verticalTextBox&&Pt(t.textCollisionBox.collisionVertexArray,_.text.placed,!i||S,r.x,r.y)}const a=i&&Boolean(!S&&n.verticalIconBox);n.iconBox&&Pt(t.iconCollisionBox.collisionVertexArray,_.icon.placed,a,h?r.x:0,h?r.y:0),n.verticalIconBox&&Pt(t.iconCollisionBox.collisionVertexArray,_.icon.placed,!a,h?r.x:0,h?r.y:0)}}}if(t.fullyClipped=0===m,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function Pt(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}const At=Math.pow(2,25),Ot=Math.pow(2,24),It=Math.pow(2,17),Lt=Math.pow(2,16),Dt=Math.pow(2,9),Rt=Math.pow(2,8),Nt=Math.pow(2,1);function zt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*At+t*Ot+n*It+t*Lt+n*Dt+t*Rt+n*Nt+t}const jt=0;class Bt{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(e,t,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;){const e=o[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,n,0===e.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class Ft{constructor(e,t,n,r,i,o,a,s){this.placement=new Ct(e,i,o,a,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(t,n,r){const i=e.exported.now(),o=()=>{const t=e.exported.now()-i;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=n[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=i)&&(!e.maxzoom||e.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Bt(e)),this._inProgressLayer.continuePlacement(r[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Ut=512/e.EXTENT/2;class Gt{constructor(t,n,r){this.tileID=t,this.bucketInstanceId=r,this.index=new e.KDBush(n.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const i=t.canonical.x*e.EXTENT,o=t.canonical.y*e.EXTENT;for(let e=0;e<n.length;e++){const{key:t,crossTileID:r,tileAnchorX:a,tileAnchorY:s}=n.get(e),l=Math.floor((i+a)*Ut),u=Math.floor((o+s)*Ut);this.index.add(l,u),this.keys.push(t),this.crossTileIDs.push(r)}this.index.finish()}findMatches(t,n,r){const i=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),o=Ut/Math.pow(2,n.canonical.z-this.tileID.canonical.z),a=n.canonical.x*e.EXTENT,s=n.canonical.y*e.EXTENT;for(let e=0;e<t.length;e++){const n=t.get(e);if(n.crossTileID)continue;const{key:l,tileAnchorX:u,tileAnchorY:c}=n,d=Math.floor((a+u)*o),h=Math.floor((s+c)*o),f=this.index.range(d-i,h-i,d+i,h+i);for(const e of f){const t=this.crossTileIDs[e];if(this.keys[e]===l&&!r.has(t)){r.add(t),n.crossTileID=t;break}}}}}class Ht{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Vt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const n in this.indexes){const e=this.indexes[n],r={};for(const n in e){const i=e[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),r[i.tileID.key]=i}this.indexes[n]=r}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let i=0;i<t.symbolInstances.length;i++)t.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);const r=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in n){const o=n[i];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,r)}else{const o=n[e.scaledTo(Number(i)).key];o&&o.findMatches(t.symbolInstances,e,r)}}for(let i=0;i<t.symbolInstances.length;i++){const e=t.symbolInstances.get(i);e.crossTileID||(e.crossTileID=n.generate(),r.add(e.crossTileID))}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Gt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n of t.crossTileIDs)this.usedCrossTileIDs[e].delete(n)}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}class qt{constructor(){this.layerIndexes={},this.crossTileIDs=new Ht,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n,r){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new Vt);let o=!1;const a={};"globe"!==r.name&&i.handleWrapJump(n);for(const s of t){const t=s.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(s.tileID,t,this.crossTileIDs)&&(o=!0),a[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(o=!0),o}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const n in this.layerIndexes)t[n]||delete this.layerIndexes[n]}}const $t=(t,n)=>e.emitValidationErrors(t,n&&n.filter((e=>"source.canvas"!==e.identifier))),Wt=e.pick(Ge,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Zt=e.pick(Ge,["setCenter","setZoom","setBearing","setPitch"]),Xt={version:8,layers:[],sources:{}},Yt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Kt extends e.Evented{constructor(t,n={}){super(),this.map=t,this.dispatcher=new P(Be(),this),this.imageManager=new b,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,n.localFontFamily?e.LocalGlyphMode.all:n.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.crossTileSymbolIndex=new qt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const r=this;this._rtlTextPluginCallback=Kt.registerForPluginStateChange((t=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,n)=>{if(e.triggerPluginCompletionEvent(t),n&&n.every((e=>e)))for(const e in r._sourceCaches){const t=r._sourceCaches[e],n=t.getSource().type;"vector"!==n&&"geojson"!==n||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const n in this._layers){const e=this._layers[n];e.source===t.id&&this._validateLayer(e)}}))}loadURL(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);const i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,((t,n)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):n&&this._load(n,r)}))}loadJSON(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==n.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Xt,!1)}_updateLayerCount(e,t){const n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}_load(t,n){if(n&&$t(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const r=Ue(this.stylesheet.layers);this._order=r.map((e=>e.id)),this._layers={},this._serializedLayers={};for(const i of r){const t=e.createStyleLayer(i);t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),this._updateLayerCount(t,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(t){this._spriteRequest=function(t,n,r){let i,o,a;const s=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,a||(a=e,i=t,c())})),u=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),((e,t)=>{u=null,a||(a=e,o=t,c())}));function c(){if(a)r(a);else if(i&&o){const t=e.exported.getImageData(o),n={};for(const r in i){const{width:o,height:a,x:s,y:l,sdf:u,pixelRatio:c,stretchX:d,stretchY:h,content:f}=i[r],p=new e.RGBAImage({width:o,height:a});e.RGBAImage.copy(t,p,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[r]={data:p,pixelRatio:c,sdf:u,stretchX:d,stretchY:h,content:f}}r(null,n)}}return{cancel(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,((t,n)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(n)for(const e in n)this.imageManager.addImage(e,n[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const n=this.getSource(t.source);if(!n)return;const r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const n of e){const e=this._layers[n];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():Yt[e.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const n=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(e.length||n.length)&&this._updateWorkerLayers(e,n);for(const t in this._updatedSources){const e=this._updatedSources[t];"reload"===e?this._reloadSource(t):"clear"===e&&this._clearSource(t)}this._updateTilesForChangedImages();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const r={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];r[e]=t.used,t.used=!1}for(const e of this._order){const n=this._layers[e];if(n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)){const e=this._getLayerSourceCache(n);e&&(e.used=!0)}const r=this.map.painter;if(r){const e=n.getProgramIds();if(!e)continue;const i=n.getProgramConfiguration(t.zoom);for(const t of e)r.useProgram(t,i)}}for(const i in r){const t=this._sourceCaches[i];r[i]!==t.used&&t.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:t.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),$t(this,e.validateStyle(n)))return!1;(n=e.clone$1(n)).layers=Ue(n.layers);const r=function(e,n){if(!e)return[{command:Ge.setStyle,args:[n]}];let r=[];try{if(!t(e.version,n.version))return[{command:Ge.setStyle,args:[n]}];t(e.center,n.center)||r.push({command:Ge.setCenter,args:[n.center]}),t(e.zoom,n.zoom)||r.push({command:Ge.setZoom,args:[n.zoom]}),t(e.bearing,n.bearing)||r.push({command:Ge.setBearing,args:[n.bearing]}),t(e.pitch,n.pitch)||r.push({command:Ge.setPitch,args:[n.pitch]}),t(e.sprite,n.sprite)||r.push({command:Ge.setSprite,args:[n.sprite]}),t(e.glyphs,n.glyphs)||r.push({command:Ge.setGlyphs,args:[n.glyphs]}),t(e.transition,n.transition)||r.push({command:Ge.setTransition,args:[n.transition]}),t(e.light,n.light)||r.push({command:Ge.setLight,args:[n.light]}),t(e.fog,n.fog)||r.push({command:Ge.setFog,args:[n.fog]}),t(e.projection,n.projection)||r.push({command:Ge.setProjection,args:[n.projection]});const i={},o=[];!function(e,n,r,i){let o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Ve(o,r,i));for(o in n){if(!n.hasOwnProperty(o))continue;const a=n[o];e.hasOwnProperty(o)?t(e[o],a)||("geojson"===e[o].type&&"geojson"===a.type&&$e(e,n,o)?r.push({command:Ge.setGeoJSONSourceData,args:[o,a.data]}):qe(o,n,r,i)):He(o,n,r)}}(e.sources,n.sources,o,i);const a=[];e.layers&&e.layers.forEach((e=>{e.source&&i[e.source]?r.push({command:Ge.removeLayer,args:[e.id]}):a.push(e)}));let s=e.terrain;s&&i[s.source]&&(r.push({command:Ge.setTerrain,args:[void 0]}),s=void 0),r=r.concat(o),t(s,n.terrain)||r.push({command:Ge.setTerrain,args:[n.terrain]}),function(e,n,r){n=n||[];const i=(e=e||[]).map(Ze),o=n.map(Ze),a=e.reduce(Xe,{}),s=n.reduce(Xe,{}),l=i.slice(),u=Object.create(null);let c,d,h,f,p,m,g;for(c=0,d=0;c<i.length;c++)h=i[c],s.hasOwnProperty(h)?d++:(r.push({command:Ge.removeLayer,args:[h]}),l.splice(l.indexOf(h,d),1));for(c=0,d=0;c<o.length;c++)h=o[o.length-1-c],l[l.length-1-c]!==h&&(a.hasOwnProperty(h)?(r.push({command:Ge.removeLayer,args:[h]}),l.splice(l.lastIndexOf(h,l.length-d),1)):d++,m=l[l.length-c],r.push({command:Ge.addLayer,args:[s[h],m]}),l.splice(l.length-c,0,h),u[h]=!0);for(c=0;c<o.length;c++)if(h=o[c],f=a[h],p=s[h],!u[h]&&!t(f,p))if(t(f.source,p.source)&&t(f["source-layer"],p["source-layer"])&&t(f.type,p.type)){for(g in We(f.layout,p.layout,r,h,null,Ge.setLayoutProperty),We(f.paint,p.paint,r,h,null,Ge.setPaintProperty),t(f.filter,p.filter)||r.push({command:Ge.setFilter,args:[h,p.filter]}),t(f.minzoom,p.minzoom)&&t(f.maxzoom,p.maxzoom)||r.push({command:Ge.setLayerZoomRange,args:[h,p.minzoom,p.maxzoom]}),f)f.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?We(f[g],p[g],r,h,g.slice(6),Ge.setPaintProperty):t(f[g],p[g])||r.push({command:Ge.setLayerProperty,args:[h,g,p[g]]}));for(g in p)p.hasOwnProperty(g)&&!f.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?We(f[g],p[g],r,h,g.slice(6),Ge.setPaintProperty):t(f[g],p[g])||r.push({command:Ge.setLayerProperty,args:[h,g,p[g]]}))}else r.push({command:Ge.removeLayer,args:[h]}),m=l[l.lastIndexOf(h)+1],r.push({command:Ge.addLayer,args:[p,m]})}(a,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:Ge.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((e=>!(e.command in Zt)));if(0===r.length)return!1;const i=r.filter((e=>!(e.command in Wt)));if(i.length>0)throw new Error(`Unimplemented: ${i.map((e=>e.command)).join(", ")}.`);return r.forEach((e=>{"setTransition"!==e.command&&"setProjection"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=n,this._updateMapProjection(),!0}addImage(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,n,r={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,`sources.${t}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=Ae(t,n,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:i.serialize(),sourceId:t})));const o=n=>{const r=(n?"symbol:":"other:")+t,o=this._sourceCaches[r]=new e.SourceCache(r,i,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[t]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${i}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const r=this._getSourceCaches(t);for(const i of r)delete this._sourceCaches[i.id],delete this._updatedSources[i.id],i.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i.getSource().id})),i.setEventedParent(null),i.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const n=this._getSourceCache(t);n&&e.push(n.getSource())}return e}addLayer(t,n,r={}){this._checkLoaded();const i=t.id;if(this.getLayer(i))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let o;if("custom"===t.type){if($t(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,`layers.${i}`,t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;const r=this._order.indexOf(t);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const n=this._layers[t];if(!n)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,n,r){this._checkLoaded();const i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(n,r,i={}){this._checkLoaded();const o=this.getLayer(n);if(o){if(!t(o.filter,r))return null==r?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(e.validateFilter,`layers.${o.id}.filter`,r,{layerType:o.type},i)||(o.filter=e.clone$1(r),this._updateLayer(o)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){const n=this.getLayer(t);return n&&e.clone$1(n.filter)}setLayoutProperty(n,r,i,o={}){this._checkLoaded();const a=this.getLayer(n);a?t(a.getLayoutProperty(r),i)||(a.setLayoutProperty(r,i,o),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,n){const r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(n,r,i,o={}){this._checkLoaded();const a=this.getLayer(n);a?t(a.getPaintProperty(r),i)||(a.setPaintProperty(r,i,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){const n=this.getLayer(e);return n&&n.getPaintProperty(t)}setFeatureState(t,n){this._checkLoaded();const r=t.source,i=t.sourceLayer,o=this.getSource(r);if(!o)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&i)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!i)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(r);for(const e of s)e.setFeatureState(i,t.id,n)}removeFeatureState(t,n){this._checkLoaded();const r=t.source,i=this.getSource(r);if(!i)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.type,a="vector"===o?t.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(r);for(const e of s)e.removeFeatureState(a,t.id,n)}getFeatureState(t){this._checkLoaded();const n=t.source,r=t.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const n=this._sourceCaches[e].getSource();t[n.id]||(t[n.id]=n.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},r=[];for(let o=this._order.length-1;o>=0;o--){const i=this._order[o];if(t(i)){n[i]=o;for(const t of e){const e=t[i];if(e)for(const t of e)r.push(t)}}}r.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=r.length-1;e>=0;e--){const t=r[e].feature;if(n[t.layer.id]<o)break;i.push(t),r.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(t,n,r){n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of n.layers){const n=this._layers[t];if(!n)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),s=O.createFromScreenPoints(t,r);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;n.layers&&!i[t]||o.push(Ie(this._sourceCaches[e],this._layers,this._serializedLayers,s,n,r,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,t,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),u=[];for(const c of Object.keys(l).map(Number))u.push(a[c]);u.sort(De);for(const c of u){const n=c.featureIndex.lookupSymbolFeatures(l[c.bucketInstanceId],t,c.bucketIndex,c.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in n){const t=s[e]=s[e]||[],r=n[e];r.sort(((e,t)=>{const n=c.featureSortOrder;if(n){const r=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));for(const e of r)t.push(e)}}for(const c in s)s[c].forEach((t=>{const r=t.feature,i=n(e[c]);if(!i)return;const o=i.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const r=this._getSourceCaches(t);let i=[];for(const e of r)i=i.concat(Le(e,n));return i}addSourceType(e,t,n){return Kt.getSourceType(e)?n(new Error(`A source type called "${e}" already exists.`)):(Kt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const r=this.light.getLight();let i=!1;for(const a in e)if(!t(e[a],r[a])){i=!0;break}if(!i)return;const o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,n),this.light.updateTransitions(o)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n,r=1){if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let i=n;if(1===r){if("object"==typeof i.source){const t="terrain-dem-src";this.addSource(t,i.source),i=e.clone$1(i),i=e.extend(i,{source:t})}if(this._validate(e.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode){if(!i)return;this._createTerrain(i,r)}else{const n=this.terrain,r=n.get();for(const t of Object.keys(e.spec.terrain))!i.hasOwnProperty(t)&&e.spec.terrain[t].default&&(i[t]=e.spec.terrain[t].default);for(const e in i)if(!t(i[e],r[e])){n.set(i),this.stylesheet.terrain=i;const e=this._setTransitionParameters({duration:0});n.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const t=this.fog=new C(e,this.map.transform);this.stylesheet.fog=e;const n=this._setTransitionParameters({duration:0});t.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,r=n.get();0===Object.keys(e).length&&n.set(e);for(const i in e)if(!t(e[i],r[i])){n.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});n.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0}_setTransitionParameters(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(e,t){const n=this.terrain=new S(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,n,r,i,o={}){return(!o||!1!==o.validate)&&$t(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const n of t)n.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const n of t)n.resume(),n.reload()}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,n,r,i,o=!1){let a=!1,s=!1;const l={};for(const e of this._order){const n=this._layers[e];if("symbol"!==n.type)continue;if(!l[n.source]){const e=this._getLayerSourceCache(n);if(!e)continue;l[n.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],t.center.lng,t.projection);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Ft(t,this._order,o,n,r,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();const r=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}getGlyphs(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}getResource(t,n,r){return e.makeRequest(n,r)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):n.every((e=>e.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Kt.getSourceType=function(e){return Pe[e]},Kt.setSourceType=function(e,t){Pe[e]=t},Kt.registerForPluginStateChange=e.registerForPluginStateChange;var Jt="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Qt="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",en="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",tn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",nn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let rn={},on={};const an=[];dn(Jt,an),dn(en,an),dn(tn,an),dn(nn,an),rn=hn("",en),on=hn(nn,tn);const sn=hn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ln=Jt,un="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var cn={background:hn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:hn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:hn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:hn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:hn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:hn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:hn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:hn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:hn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:hn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:hn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:hn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:hn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:hn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:hn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:hn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:hn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:hn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:hn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:hn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:hn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:hn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:hn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:hn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:hn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:hn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxGradient:hn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxCapture:hn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:hn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:hn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function dn(e,t){const n=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let r of n)if(r=r.trim(),"#"===r[0]&&r.includes("if")&&!r.includes("endif")){r=r.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const e=r.split(" ");for(const n of e)t.includes(n)||t.push(n)}}function hn(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},o=[...an];return dn(e,o),dn(t,o),{fragmentSource:e=e.replace(n,((e,t,n,r,o)=>(i[o]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nvarying ${n} ${r} ${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = u_${o};\n#endif\n`))),vertexSource:t=t.replace(n,((e,t,n,r,o)=>{const a="float"===r?"vec2":"vec4",s=o.match(/color/)?"color":a;return i[o]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${a} a_${o};\nvarying ${n} ${r} ${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = a_${o};\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${a} a_${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = a_${o};\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`})),staticAttributes:r,usedDefines:o}}class fn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,t,n,r,i,o,a){this.context=e;let s=this.boundPaintVertexBuffers.length!==r.length;for(let u=0;!s&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(s=!0);let l=this.boundDynamicVertexBuffers.length!==a.length;for(let u=0;!l&&u<a.length;u++)this.boundDynamicVertexBuffers[u]!==a[u]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||s||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o)this.freshBind(t,n,r,i,o,a);else{e.bindVertexArrayOES.set(this.vao);for(const e of a)e&&e.bind();i&&i.dynamicDraw&&i.bind()}}freshBind(e,t,n,r,i,o){let a;const s=e.numAttributes,l=this.context,u=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=o;else{a=l.currentNumAttributes||0;for(let e=s;e<a;e++)u.disableVertexAttribArray(e)}t.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,i);for(const c of n)c.enableAttributes(u,e),c.bind(),c.setVertexAttribPointers(u,e,i);for(const c of o)c&&(c.enableAttributes(u,e),c.bind(),c.setVertexAttribPointers(u,e,i));r&&r.bind(),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function pn(t,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function mn(t,n,r,i,o,a,s){const l=t.context,u=l.gl,c=r.fbo;if(!c)return;t.prepareDrawTile();const d=t.useProgram("hillshade");l.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());const h=((e,t,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:r||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:pn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(t,r,i,t.terrain?n.projMatrix:null);t.prepareDrawProgram(l,d,n.toUnwrapped());const{tileBoundsBuffer:f,tileBoundsIndexBuffer:p,tileBoundsSegments:m}=t.getTileBoundsBuffers(r);d.draw(l,u.TRIANGLES,o,a,s,e.CullFaceMode.disabled,h,i.id,f,p,m)}function gn(t,n,r){if(!n.needsDEMTextureUpload)return;const i=t.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);const a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new e.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function yn(t,n,r,i,o,a){const s=t.context,l=s.gl;if(!n.dem)return;const u=n.dem;if(s.activeTexture.set(l.TEXTURE1),gn(t,n,u),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const c=u.dim;s.activeTexture.set(l.TEXTURE0);let d=n.fbo;if(!d){const t=new e.Texture(s,{width:c,height:c,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),d=n.fbo=s.createFramebuffer(c,c,!0),d.colorAttachment.set(t.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,c,c]);const{tileBoundsBuffer:h,tileBoundsIndexBuffer:f,tileBoundsSegments:p}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,e.CullFaceMode.disabled,((t,n)=>{const r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,u),r.id,h,f,p),n.needsHillshadePrepare=!1}const vn=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),_n=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),bn=(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:o,u_image0:0,u_frustum_tl:a,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:u,u_globe_pos:c,u_globe_radius:d,u_viewport:h,u_grid_matrix:p?Float32Array.from(p):new Float32Array(9),u_skirt_height:f});function xn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const wn=new class{constructor(){this.operations={}}newMorphing(e,t,n,r,i){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==n.tileID.key&&(t.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},En={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Sn(e){return 6*Math.pow(1.5,22-e)}function Tn(e,t){const n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}const Mn=e=>({u_matrix:e});function kn(t,n,r,i,o){if(o>0){const a=e.exported.now(),s=(a-t.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,u=r.getSource(),c=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),h=d&&t.refreshedUponExpiration?1:e.clamp(d?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}class Cn extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},n=new P(Be(),null),r=Ae("mock-dem",t,n,e.style);super("mock-dem",r,!1),r.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class Pn extends e.SourceCache{constructor(e){const t=Ae("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new P(Be(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,n,r){if(t.freezeTileCoverage)return;this.transform=t;const i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,r)=>{if(n[r.key]="",!this._tiles[r.key]){const n=new e.Tile(r,this._source.tileSize*r.overscaleFactor(),t.tileZoom);n.state="loaded",this._tiles[r.key]=n}return n}),{});for(const e in this._tiles)e in i||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const n=Object.values(t);this.renderCachePool.push(...n),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class An extends e.OverscaledTileID{constructor(e,t,n){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=n}}class On extends e.Elevation{constructor(t,n){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,i,o]=function(t){const n=new e.StructArrayLayout2i4,r=new e.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);const o=e.EXTENT/128,a=e.EXTENT+o/2,s=a+o;for(let u=-o;u<s;u+=o)for(let t=-o;t<s;t+=o){const r=t<0||t>a||u<0||u>a?24575:0,i=e.clamp(Math.round(t),0,e.EXTENT),o=e.clamp(Math.round(u),0,e.EXTENT);n.emplaceBack(i+r,o)}const l=(e,t)=>{const n=t*i+e;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)l(t,e),l(e,t)})),[n,r,32768]}(),a=t.context;this.gridBuffer=a.createVertexBuffer(r,e.posAttributes.members),this.gridIndexBuffer=a.createIndexBuffer(i),this.gridSegments=e.SegmentVector.simpleSegment(0,0,r.length,i.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Pn(n.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Cn(n.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(t,n,r){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const i=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(n,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=n.getIds().map((e=>{const t=n.getTileByID(e).tileID;return t.projMatrix=r.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,n){const r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.Point(r.x,r.y);t.sort(((t,n)=>{if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;const r=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<t.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)}))}(i,this.painter),this._previousZoom=r.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const e in a){const n=a[e];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,t[e],o),n.usedForTerrain)continue;const r=t[e];n.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[n.id]=i.map((e=>new An(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const n=t.tileID.key;n in s||(this._visibleDemTiles.push(t),s[n]=n)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const n in this.terrainTileForTile){const r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),gn(this.painter,r,i))}}_prepareDemTileUniforms(e,t,n,r){if(!t||null==t.demTexture)return!1;const i=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-i.z),a=r||"";return n[`u_dem_tl${a}`]=[i.x*o%1,i.y*o%1],n[`u_dem_scale${a}`]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){const r=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,n)=>{if(!n.dem)return t;const r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);const r=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),o}setupElevationDraw(t,n,r){const i=this.painter.context,o=i.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,u=null,c=1;if(r&&r.morphing&&this._useVertexMorphing){const e=r.morphing.srcDemTile,n=r.morphing.dstDemTile;c=r.morphing.phase,e&&n&&(this._prepareDemTileUniforms(t,e,a,"_prev")&&(u=e),this._prepareDemTileUniforms(t,n,a)&&(l=n))}if(u&&l?(i.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),u.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=c):(l=this.terrainTileForTile[t.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),i.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),a.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=t}if(r&&r.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(i,a),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,r&&r.useDenormalizedUpVectorScale);n.setGlobeUniformValues(i,e)}}globeUniformValues(t,n,r){const i=t.projection;return{u_tile_tl_up:i.upVector(n,0,0),u_tile_tr_up:i.upVector(n,e.EXTENT,0),u_tile_br_up:i.upVector(n,e.EXTENT,e.EXTENT),u_tile_bl_up:i.upVector(n,0,e.EXTENT),u_tile_up_scale:r?e.globeMetersToEcef(1):i.upVectorScale(n,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const n=this.painter,r=this.painter.context;0!==t.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,n,r,i,o){if("globe"===t.transform.projection.name)!function(t,n,r,i,o){const a=t.context,s=a.gl;let l,u;const c=t.options.showTerrainWireframe?2:0,d=t.transform,h=e.globeUseCustomAntiAliasing(t,a,d),f=(e,n)=>{if(u===e)return;const r=[En[e],"PROJECTION_GLOBE_VIEW"];h&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(En[c]),l=t.useProgram("globeRaster",null,r),u=e},p=t.colorModeForRenderPass(),m=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);wn.update(o);const g=e.calculateGlobeMercatorMatrix(d),y=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],v=c?[!1,!0]:[!1],_=t.globeSharedBuffers,b=[d.width*e.exported.devicePixelRatio,d.height*e.exported.devicePixelRatio],x=Float32Array.from(d.globeMatrix),w={useDenormalizedUpVectorScale:!0};if(v.forEach((c=>{const d=t.transform,h=Sn(d.zoom)*n.exaggeration();u=-1;const v=c?s.LINES:s.TRIANGLES;for(const u of i){const i=r.getTile(u),E=e.StencilMode.disabled,S=n.prevTerrainTileForTile[u.key],T=n.terrainTileForTile[u.key];xn(S,T)&&wn.newMorphing(u.key,S,T,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const M=wn.getMorphValuesForProxy(u.key),k=M?1:0;M&&e.extend$1(w,{morphing:{srcDemTile:M.from,dstDemTile:M.to,phase:e.easeCubicInOut(M.phase)}});const C=e.tileCornersToBounds(u.canonical),P=e.getLatitudinalLod(C.getCenter().lat),A=e.getGridMatrix(u.canonical,C,P,d.worldSize/d._pixelsPerMercatorPixel),O=e.globeNormalizeECEF(e.globeTileBounds(u.canonical)),I=bn(d.projMatrix,x,g,O,e.globeToMercatorTransition(d.zoom),y,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,b,h,A);if(f(k,c),n.setupElevationDraw(i,l,w),t.prepareDrawProgram(a,l,u.toUnwrapped()),_){const[n,r,i]=c?_.getWirefameBuffers(t.context,P):_.getGridBuffers(P,0!==h);l.draw(a,v,m,E,p,e.CullFaceMode.backCCW,I,"globe_raster",n,r,i)}}})),_){const o=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];h&&o.push("CUSTOM_ANTIALIASING"),l=t.useProgram("globeRaster",null,o);for(const u of i){const{x:i,y:o,z:c}=u.canonical,h=0===o,f=o===(1<<c)-1,[g,v,x,E]=_.getPoleBuffers(c);if(E&&(h||f)){const o=r.getTile(u);a.activeTexture.set(s.TEXTURE0),o.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let _=e.globePoleMatrixForTile(c,i,d);const S=e.globeNormalizeECEF(e.globeTileBounds(u.canonical)),T=(t,n)=>t.draw(a,s.TRIANGLES,m,e.StencilMode.disabled,p,e.CullFaceMode.disabled,bn(d.projMatrix,_,_,S,0,y,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,b,0),"globe_pole_raster",n,x,E);n.setupElevationDraw(o,l,w),t.prepareDrawProgram(a,l,u.toUnwrapped()),h&&T(l,g),f&&(_=e.scale(e.create(),_,[1,-1,1]),T(l,v))}}}}(t,n,r,i,o);else{const a=t.context,s=a.gl;let l,u;const c=t.options.showTerrainWireframe?2:0,d=(e,n)=>{if(u===e)return;const r=[En[e]];n&&r.push(En[c]),l=t.useProgram("terrainRaster",null,r),u=e},h=t.colorModeForRenderPass(),f=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);wn.update(o);const p=t.transform,m=Sn(p.zoom)*n.exaggeration();(c?[!1,!0]:[!1]).forEach((c=>{u=-1;const g=c?s.LINES:s.TRIANGLES,[y,v]=c?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const u of i){const i=r.getTile(u),_=e.StencilMode.disabled,b=n.prevTerrainTileForTile[u.key],x=n.terrainTileForTile[u.key];xn(b,x)&&wn.newMorphing(u.key,b,x,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const w=wn.getMorphValuesForProxy(u.key),E=w?1:0;let S;w&&(S={morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:e.easeCubicInOut(w.phase)}});const T=_n(u.projMatrix,Tn(u.canonical,p.renderWorldCopies)?m/10:m);d(E,c),n.setupElevationDraw(i,l,S),t.prepareDrawProgram(a,l,u.toUnwrapped()),l.draw(a,g,f,_,h,e.CullFaceMode.backCCW,T,"terrain_raster",n.gridBuffer,y,v)}}))}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=this._drapedRenderBatches.shift(),s=[],l=n.style.order;let u=0;for(const c of o){const o=i.getTileByID(c.proxyTileKey),d=i.proxyCachedFBO[c.key]?i.proxyCachedFBO[c.key][t]:void 0,h=void 0!==d?i.renderCache[d]:this.pool[u++],f=void 0!==d;if(o.texture=h.tex,f&&!h.dirty){s.push(o.tileID);continue}let p;r.bindFramebuffer.set(h.fb.framebuffer),this.renderedToTile=!1,h.dirty&&(r.clear({color:e.Color.transparent,stencil:0}),h.dirty=!1);for(let e=a.start;e<=a.end;++e){const t=n.style._layers[l[e]];if(t.isHidden(n.transform.zoom))continue;const i=n.style._getLayerSourceCache(t),o=i?this.proxyToSource[c.key][i.id]:[c];if(!o)continue;const a=o;r.viewport.set([0,0,h.fb.width,h.fb.height]),p!==(i?i.id:null)&&(this._setupStencil(h,o,t,i),p=i?i.id:null),n.renderLayer(n,i,t,a)}this.renderedToTile?(h.dirty=!0,s.push(o.tileID)):f||--u,5===u&&(u=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),a.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let n,r=0,i=0,o=!1;for(let a=0;a<t;++a){const t=e._layers[e.order[a]];this._style.isLayerDraped(t)?(o&&++r,++i):o||(o=!0,n=t.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,n){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter((e=>e.dem)).map((r=>{const i=r.tileID,o=1<<i.overscaledZ,{x:a,y:s}=i.canonical,l=a/o,u=(a+1)/o,c=s/o,d=(s+1)/o;return{minx:l,miny:c,maxx:u,maxy:d,t:r.dem.tree.raycastRoot(l,c,u,d,e,t,n),tile:r}}));r.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const i of r){if(null==i.t)return null;const r=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,e,t,n);if(null!=r)return r}return null}_createFBO(){const t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);const i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=t.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new we(t,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((e=>{const t=this._style._layers[e],n=t.isHidden(this.painter.transform.zoom);return"custom"===t.type?!n&&t.shouldRedrape():!n&&t.hasTransition()}))}_clearLineLayersFromRenderCache(){let t=!1;for(const e of this._style._getSources())if(e instanceof Te){t=!0;break}if(!t)return;const n={};for(let r=0;r<this._style.order.length;++r){const t=this._style._layers[this._style.order[r]],i=this._style._getLayerSourceCache(t);if(i&&!n[i.id]&&!t.isHidden(this.painter.transform.zoom)&&"line"===t.type&&t.widthExpression()instanceof e.ZoomDependentExpression){n[i.id]=!0;for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][i.id];if(t)for(const e of t)this._clearRenderCacheForTile(i.id,e)}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const n in this._style._sourceCaches)if(this._style._sourceCaches[n]._source instanceof Me){e=!0;break}if(!e)return;const t={};for(let n=0;n<this._style.order.length;++n){const e=this._style._layers[this._style.order[n]],r=this._style._getLayerSourceCache(e);if(!r||t[r.id])continue;if(e.isHidden(this.painter.transform.zoom)||"raster"!==e.type)continue;const i=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][r.id];if(e)for(const t of e){const e=kn(r.getTile(t),r.findLoadedParent(t,0),r,this.painter.transform,i);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(r.id,t)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const n=[];let r,i=0,o=this._style._layers[e[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<t;)o=this._style._layers[e[i]];for(;i<t;++i){const t=this._style._layers[e[i]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let n=0;n<e.length;++n){const r=Object.values(e[n]);t.renderCachePool.push(...r)}}return}this._clearRasterLayersFromRenderCache();const n=this.proxyCoords,r=this._tilesDirty;for(let o=n.length-1;o>=0;o--){const i=n[o];if(t.getTileByID(i.key),void 0!==t.proxyCachedFBO[i.key]){const n=e[i.key],o=this.proxyToSource[i.key];let a=0;for(const e in o){const t=o[e],i=n[e];if(!i||i.length!==t.length||t.some(((t,n)=>t!==i[n]||r[e]&&r[e].hasOwnProperty(t.key)))){a=-1;break}++a}for(const e in t.proxyCachedFBO[i.key])t.renderCache[t.proxyCachedFBO[i.key][e]].dirty=a<0||a!==Object.values(n).length}}const i=[...this._drapedRenderBatches];i.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const o of i)for(const e of n){if(t.proxyCachedFBO[e.key])continue;let n=t.renderCachePool.pop();void 0===n&&t.renderCache.length<50&&(n=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==n&&(t.proxyCachedFBO[e.key]={},t.proxyCachedFBO[e.key][o.start]=n,t.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,n,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let a;if(n.isTileClipped())a=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,n){const r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=r.useProgram("clippingMask");for(const s of t){const t=r._tileClippingMaskIDs[s.key]=--n;a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Mn(s.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(t){const n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;const r=[t.x,t.y,1,1];e.transformMat4$1(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;const i=n._camera.position,o=e.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=e.subtract([],r.slice(0,3),a);e.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),o=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=n.gl,r=n.createFramebuffer(i,o,!0);n.activeTexture.set(t.TEXTURE0);const a=new e.Texture(n,{width:i,height:o,data:null},t.RGBA);a.bind(t.NEAREST,t.CLAMP_TO_EDGE),r.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);r.depthAttachment.set(s),this._depthFBO=r,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(t,n,r,i){if("globe"===t.transform.projection.name)return;const o=t.context,a=o.gl;o.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(a.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const u of i){const t=r.getTile(u),i=_n(u.projMatrix,0);n.setupElevationDraw(t,s),s.draw(o,a.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,i,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(t,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,n){if(e.getSource()instanceof Ce)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const r=this.proxiedCoords[e.id]=[],i=this.proxyCoords;for(let a=0;a<i.length;a++){const t=i[a],o=this._findTileCoveringTileID(t,e);if(o){const i=this._createProxiedId(t,o,n[t.key]&&n[t.key][e.id]);r.push(i),this.proxyToSource[t.key][e.id]=[i]}}let o=!1;for(let a=0;a<t.length;a++){const i=e.getTile(t[a]);if(!i||!i.hasData())continue;const s=this._findTileCoveringTileID(i.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==i.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],a=this._createProxiedId(s.tileID,i,n[s.tileID.key]&&n[s.tileID.key][e.id]);t?t.splice(t.length-1,0,a):this.proxyToSource[s.tileID.key][e.id]=[a],r.push(a),o=!0}}this._sourceTilesOverlap[e.id]=o}_setupProxiedCoordsForImageSource(t,n,r){if(!t.getSource().loaded())return;const i=this.proxiedCoords[t.id]=[],o=this.proxyCoords,a=t.getSource(),s=new e.Point(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e)),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=(t,n)=>{const r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),o=e.EXTENT/(1<<t.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+l.min.x||r>a+l.max.x||i+o<s+l.min.y||i>s+l.max.y};for(let e=0;e<o.length;e++){const a=o[e];for(let e=0;e<n.length;e++){const o=t.getTile(n[e]);if(!o||!o.hasData())continue;if(u(a,o.tileID))continue;const s=this._createProxiedId(a,o,r[a.key]&&r[a.key][t.id]),l=this.proxyToSource[a.key][t.id];l?l.push(s):this.proxyToSource[a.key][t.id]=[s],i.push(s)}}}_createProxiedId(t,n,r){let i=this.orthoMatrix;if(r){const e=r.find((e=>e.key===n.tileID.key));if(e)return e}if(n.tileID.key!==t.key){const r=t.canonical.z-n.tileID.canonical.z;let o,a,s;i=e.create();const l=n.tileID.wrap-t.wrap<<t.overscaledZ;r>0?(o=e.EXTENT>>r,a=o*((n.tileID.canonical.x<<r)-t.canonical.x+l),s=o*((n.tileID.canonical.y<<r)-t.canonical.y)):(o=e.EXTENT<<-r,a=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+l<<-r)),s=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-r))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[a,s,0])}return new An(n.tileID,t.key,i)}_findTileCoveringTileID(t,n){let r=n.getTile(t);if(r&&r.hasData())return r;const i=this._findCoveringTileCache[n.id],o=i[t.key];if(r=o?n.getTileByID(o):null,r&&r.hasData()||null===o)return r;let a=r?r.tileID:t,s=a.overscaledZ;const l=n.getSource().minzoom,u=[];if(!o){const i=n.getSource().maxzoom;if(t.canonical.z>=i){const r=t.canonical.z-i;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r)):0!==r&&(s=i,a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r))}a.key!==t.key&&(u.push(a.key),r=n.getTile(a))}const c=e=>{u.forEach((t=>{i[t]=e})),u.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&c(r.tileID.key);const e=a.calculateScaledKey(s);if(r=n.getTileByID(e),r&&r.hasData())break;const t=i[e];if(null===t)break;void 0===t?u.push(e):r=n.getTileByID(t)}return c(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let n=0;const r=new e.StructArrayLayout2ui4,i=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)n=e*i+t,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===e&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class In{static cacheKey(e,t,n,r){let i=`${t}${r?r.cacheKey:""}`;for(const o of n)e.usedDefines.includes(o)&&(i+=`/${o}`);return i}constructor(t,n,r,i,o,a){const s=t.gl;this.program=s.createProgram();const l=function(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const r=e[n].split(" ");t.push(r.pop())}return t}(r.staticAttributes),u=i?i.getBinderAttributes():[],c=l.concat(u);let d=i?i.defines():[];d=d.concat(a.map((e=>`#define ${e}`)));const h=t.isWebGL2?"#version 300 es\n":"",f=h+d.concat(t.extStandardDerivatives&&0===h.length?"#extension GL_OES_standard_derivatives : enable\n".concat(un):un,un,ln,sn.fragmentSource,on.fragmentSource,r.fragmentSource).join("\n"),p=h+d.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ln,sn.vertexSource,on.vertexSource,rn.vertexSource,r.vertexSource).join("\n"),m=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(m,f),s.compileShader(m),s.attachShader(this.program,m);const g=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(g,p),s.compileShader(g),s.attachShader(this.program,g),this.attributes={},this.numAttributes=c.length;for(let e=0;e<this.numAttributes;e++)c[e]&&(s.bindAttribLocation(this.program,e,c[e]),this.attributes[c[e]]=e);s.linkProgram(this.program),s.deleteShader(g),s.deleteShader(m),this.fixedUniforms=o(t),this.binderUniforms=i?i.getUniforms(t):[],a.includes("TERRAIN")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),a.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),a.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t))}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const n=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e].set(this.program,e,t[e])}}draw(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p){const m=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o);for(const y of Object.keys(this.fixedUniforms))this.fixedUniforms[y].set(this.program,y,a[y]);f&&f.setUniforms(this.program,e,this.binderUniforms,d,{zoom:h});const g={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[t];for(const y of c.get()){const n=y.vaos||(y.vaos={});(n[s]||(n[s]=new fn)).bind(e,this,l,f?f.getPaintVertexBuffers():[],u,y.vertexOffset,p||[]),m.drawElements(t,y.primitiveLength*g,m.UNSIGNED_SHORT,y.primitiveOffset*g*2)}}}function Ln(e,t){const n=Math.pow(2,t.tileID.overscaledZ),r=t.tileSize*Math.pow(2,e.transform.tileZoom)/n,i=r*(t.tileID.canonical.x+t.tileID.wrap*n),o=r*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/A(t,1,e.transform.tileZoom),u_pixel_coord_upper:[i>>16,o>>16],u_pixel_coord_lower:[65535&i,65535&o]}}const Dn=e.create(),Rn=(t,n,r,i,o,a,s,l,u,c,d)=>{const h=n.style.light,f=h.properties.get("position"),p=[f.x,f.y,f.z],m=e.create$1();"viewport"===h.properties.get("anchor")&&(e.fromRotation(m,-n.transform.angle),e.transformMat3(p,p,m));const g=h.properties.get("color"),y=n.transform,v={u_matrix:t,u_lightpos:p,u_lightintensity:h.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Dn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:o,u_edge_radius:a};return"globe"===y.projection.name&&(v.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],v.u_zoom_transition=u,v.u_inv_rot_matrix=d,v.u_merc_center=c,v.u_up_dir=y.projection.upVector(new e.CanonicalTileID(0,0,0),c[0]*e.EXTENT,c[1]*e.EXTENT),v.u_height_lift=l),v},Nn=(t,n,r,i,o,a,s,l,u,c,d,h)=>{const f=Rn(t,n,r,i,o,a,s,u,c,d,h),p={u_height_factor:-Math.pow(2,s.overscaledZ)/l.tileSize/8};return e.extend(f,Ln(n,l),p)},zn=e=>({u_matrix:e}),jn=(t,n,r)=>e.extend(zn(t),Ln(n,r)),Bn=(e,t)=>({u_matrix:e,u_world:t}),Fn=(t,n,r,i)=>e.extend(jn(t,n,r),{u_world:i}),Un=e.create(),Gn=(t,n,r,i,o,a)=>{const s=t.transform,l="globe"===s.projection.name;let u;if("map"===a.paint.get("circle-pitch-alignment"))if(l){const t=e.globePixelsToTileUnits(s.zoom,n.canonical)*s._pixelsPerMercatorPixel;u=Float32Array.from([t,0,0,t])}else u=s.calculatePixelsToTileUnitsMatrix(r);else u=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const c={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,r,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:u,u_inv_rot_matrix:Un,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){c.u_inv_rot_matrix=i,c.u_merc_center=o,c.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],c.u_zoom_transition=e.globeToMercatorTransition(s.zoom);const t=o[0]*e.EXTENT,r=o[1]*e.EXTENT;c.u_up_dir=s.projection.upVector(new e.CanonicalTileID(0,0,0),t,r)}return c},Hn=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Vn=(t,n,r,i)=>{const o=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/o,n.pixelsToGLUnits[1]/o]}},qn=(e,t,n=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}),$n=e.create(),Wn=(t,n,r,i,o,a,s)=>{const l=t.transform,u="globe"===l.projection.name,c=u?e.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:A(r,1,a),d={u_matrix:n.projMatrix,u_extrude_scale:c,u_intensity:s,u_inv_rot_matrix:$n,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(u){d.u_inv_rot_matrix=i,d.u_merc_center=o,d.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],d.u_zoom_transition=e.globeToMercatorTransition(l.zoom);const t=o[0]*e.EXTENT,r=o[1]*e.EXTENT;d.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),t,r)}return d},Zn=(e,t,n,r,i,o,a)=>{const s=e.transform,l=s.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:Kn(e,t,n,r),u_pixels_to_tile_units:l,u_device_pixel_ratio:o,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:Jn(n)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Yn(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:a}},Xn=(e,t,n,r,i)=>{const o=e.transform;return{u_matrix:Kn(e,t,n,r),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:Yn(t,o),u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Yn(e,t){return 1/A(e,1,t.tileZoom)}function Kn(e,t,n,r){return e.translatePosMatrix(r||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function Jn(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const Qn=(e,t,n,r,i,o)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:er(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var a,s};function er(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const tr=e.create(),nr=(t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g)=>{const y=o.transform,v={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:y.width/y.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+u,u_pitch_with_map:+i,u_texsize:c,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:tr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:tr,u_up_vector:[0,-1,0]};return"globe"===g.name&&(v.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],v.u_zoom_transition=h,v.u_inv_rot_matrix=p,v.u_merc_center=f,v.u_camera_forward=y._camera.forward(),v.u_ecef_origin=e.globeECEFOrigin(y.globeMatrix,d.toUnwrapped()),v.u_tile_matrix=Float32Array.from(y.globeMatrix),v.u_up_vector=m),v},rr=(t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,y)=>e.extend(nr(t,n,r,i,o,a,s,l,u,c,h,f,p,m,g,y),{u_gamma_scale:i?o.transform.cameraToCenterDistance*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+d}),ir=(t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g)=>e.extend(rr(t,n,r,i,o,a,s,l,!0,u,!0,d,h,f,p,m,g),{u_texsize_icon:c,u_texture_icon:1}),or=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),ar=(t,n,r,i,o)=>e.extend(function(e,t,n){const r=t.imageManager.getPattern(e.toString()),{width:i,height:o}=t.imageManager.getPixelSize(),a=Math.pow(2,n.tileID.overscaledZ),s=n.tileSize*Math.pow(2,t.transform.tileZoom)/a,l=s*(n.tileID.canonical.x+n.tileID.wrap*a),u=s*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[i,o],u_pattern_size:r.displaySize,u_tile_units_to_pixels:1/A(n,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,u>>16],u_pixel_coord_lower:[65535&l,65535&u]}}(i,r,o),{u_matrix:t,u_opacity:n}),sr={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:vn,terrainDepth:vn,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let lr;function ur(t,n,r,i,o,a,s){const l=t.context,u=l.gl,c=t.transform,d=t.useProgram("collisionBox"),h=[];let f=0,p=0;for(let x=0;x<i.length;x++){const m=i[x],g=n.getTile(m),y=g.getBucket(r);if(!y)continue;const v=vt(m,y,c);let _=v;0===o[0]&&0===o[1]||(_=t.translatePosMatrix(v,g,o,a));const b=s?y.textCollisionBox:y.iconCollisionBox,w=y.collisionCircleArray;if(w.length>0){const t=e.create(),n=_;e.mul(t,y.placementInvProjMatrix,c.glCoordMatrix),e.mul(t,t,y.placementViewportMatrix),h.push({circleArray:w,circleOffset:p,transform:n,invTransform:t,projection:y.getProjection()}),f+=w.length/4,p=f}b&&(t.terrain&&t.terrain.setupElevationDraw(g,d),d.draw(l,u.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Vn(_,c,g,y.getProjection()),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,c.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]))}if(!s||!h.length)return;const m=t.useProgram("collisionCircle"),g=new e.StructArrayLayout2f1f2i16;g.resize(4*f),g._trim();let y=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const n=4*t,r=e.circleArray[n+0],i=e.circleArray[n+1],o=e.circleArray[n+2],a=e.circleArray[n+3];g.emplace(y++,r,i,o,a,0),g.emplace(y++,r,i,o,a,1),g.emplace(y++,r,i,o,a,2),g.emplace(y++,r,i,o,a,3)}(!lr||lr.length<2*f)&&(lr=function(t){const n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(let e=0;e<n;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(f));const v=l.createIndexBuffer(lr,!0),_=l.createVertexBuffer(g,e.collisionCircleLayout.members,!0);for(const x of h){const n={u_matrix:x.transform,u_inv_matrix:x.invTransform,u_camera_to_center_distance:(b=c).getCameraToCenterDistance(x.projection),u_viewport_size:[b.width,b.height]};m.draw(l,u.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,n,r.id,_,v,e.SegmentVector.simpleSegment(0,2*x.circleOffset,x.circleArray.length,x.circleArray.length/2),null,c.zoom)}var b;_.destroy(),v.destroy()}const cr=e.create();function dr({width:t,height:n,anchor:r,textOffset:i,textScale:o},a){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(r),u=-(s-.5)*t,c=-(l-.5)*n,d=e.evaluateVariableOffset(r,i);return new e.Point((u/o+d[0])*a,(c/o+d[1])*a)}function hr(t,n,r,i,o,a,s,l,u,c,d){const h=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,p=t.icon.dynamicLayoutVertexArray,m={},g=t.getProjection(),y=_t(l,g,a),v=a.elevation,_=g.upVectorScale(l.canonical,a.center.lat,a.worldSize).metersToTile;f.clear();for(let b=0;b<h.length;b++){const p=h.get(b),{tileAnchorX:x,tileAnchorY:w,numGlyphs:E}=p,S=p.hidden||!p.crossTileID||t.allowVerticalPlacement&&!p.placedOrientation?null:i[p.crossTileID];if(S){let i=0,h=0,b=0;if(v){const e=v?v.getAtTileOffset(l,x,w):0,[t,n,r]=g.upVector(l.canonical,x,w);i=e*t*_,h=e*n*_,b=e*r*_}let[T,M,k,C]=rt(p.projectedAnchorX+i,p.projectedAnchorY+h,p.projectedAnchorZ+b,r?y:s);const P=it(a.getCameraToCenterDistance(g),C);let A=o.evaluateSizeForFeature(t.textSizeData,c,p)*P/e.ONE_EM;r&&(A*=t.tilePixelRatio/u);const O=dr(S,A);r?(({x:T,y:M,z:k}=g.projectTilePoint(x+O.x,w+O.y,l.canonical)),[T,M,k]=rt(T+i,M+h,k+b,s)):(n&&O._rotate(-a.angle),T+=O.x,M+=O.y,k=0);const I=t.allowVerticalPlacement&&p.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<E;t++)e.addDynamicAttributes(f,T,M,k,I);d&&p.associatedIconIndex>=0&&(m[p.associatedIconIndex]={x:T,y:M,z:k,angle:I})}else ft(E,f)}if(d){p.clear();const n=t.icon.placedSymbolArray;for(let t=0;t<n.length;t++){const r=n.get(t),{numGlyphs:i}=r,o=m[t];if(r.hidden||!o)ft(i,p);else{const{x:t,y:n,z:r,angle:a}=o;for(let o=0;o<i;o++)e.addDynamicAttributes(p,t,n,r,a)}}t.icon.dynamicLayoutVertexBuffer.updateData(p)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function fr(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function pr(t,n,r,i,o,a,s,l,u,c,d,h){const f=t.context,p=f.gl,m=t.transform,g="map"===l,y="map"===u,v=g&&"point"!==r.layout.get("symbol-placement"),_=g&&!y&&!v,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let x=!1;const w=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),E=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],S=r.layout.get("text-variable-anchor"),T="globe"===m.projection.name,M=[],k=[0,-1,0];let C=k;!T&&!m.mercatorFromTransition||g||(C=function(t){const n=t._camera.getWorldToCamera(t.worldSize,1),r=e.multiply([],n,t.globeMatrix);e.invert(r,r);const i=[0,0,0],o=[0,1,0,0];return e.transformMat4$1(o,o,r),i[0]=o[0],i[1]=o[1],i[2]=o[2],e.normalize(i,i),i}(m));for(const P of i){const i=n.getTile(P),l=i.getBucket(r);if(!l)continue;if("mercator"===l.projection.name&&T)continue;const u=o?l.text:l.icon;if(!u||l.fullyClipped||!u.segments.get().length)continue;const d=u.programConfigurations.get(r.id),h=o||l.sdfIcons,f=o?l.textSizeData:l.iconSizeData,w=y||0!==m.pitch,A=e.evaluateSizeForZoom(f,m.zoom);let O,I,L,D,R=[0,0],N=null;if(o)I=i.glyphAtlasTexture,L=p.LINEAR,O=i.glyphAtlasTexture.size,l.iconsInText&&(R=i.imageAtlasTexture.size,N=i.imageAtlasTexture,D=w||t.options.rotating||t.options.zooming||"composite"===f.kind||"camera"===f.kind?p.LINEAR:p.NEAREST);else{const e=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;I=i.imageAtlasTexture,L=h||t.options.rotating||t.options.zooming||e||w?p.LINEAR:p.NEAREST,O=i.imageAtlasTexture.size}const z="globe"===l.projection.name,j=z?C:k,B=z?e.globeToMercatorTransition(m.zoom):0,F=_t(P,l.getProjection(),m),U=m.calculatePixelsToTileUnitsMatrix(i),G=et(F,i.tileID.canonical,y,g,m,l.getProjection(),U),H=t.terrain&&y&&v?e.invert(e.create(),G):cr,V=nt(F,i.tileID.canonical,y,g,m,l.getProjection(),U),q=S&&l.hasTextData(),$="none"!==r.layout.get("icon-text-fit")&&q&&l.hasIconData();if(v){const e=m.elevation,n=e?e.getAtTileOffsetFunc(P,m.center.lat,m.worldSize,l.getProjection()):null,r=tt(F,i.tileID.canonical,y,g,m,l.getProjection(),U);at(l,F,t,o,r,V,y,c,n,P)}const W=v||o&&S||$,Z=t.translatePosMatrix(F,i,a,s),X=W?cr:G,Y=t.translatePosMatrix(V,i,a,s,!0),K=l.getProjection().createInversionMatrix(m,P.canonical),J=[];t.terrainRenderModeElevated()&&y&&J.push("PITCH_WITH_MAP_TERRAIN"),z&&J.push("PROJECTION_GLOBE_VIEW"),W&&J.push("PROJECTED_POS_ON_VIEWPORT");const Q=h&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let ee;ee=h?l.iconsInText?ir(f.kind,A,_,y,t,Z,X,Y,O,R,P,B,E,K,j,l.getProjection()):rr(f.kind,A,_,y,t,Z,X,Y,o,O,!0,P,B,E,K,j,l.getProjection()):nr(f.kind,A,_,y,t,Z,X,Y,o,O,P,B,E,K,j,l.getProjection());const te={program:t.useProgram(fr(h,o,l),d,J),buffers:u,uniformValues:ee,atlasTexture:I,atlasTextureIcon:N,atlasInterpolation:L,atlasInterpolationIcon:D,isSDF:h,hasHalo:Q,tile:i,labelPlaneMatrixInv:H};if(b&&l.canOverlap){x=!0;const t=u.segments.get();for(const n of t)M.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:te})}else M.push({segments:u.segments,sortKey:0,state:te})}x&&M.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of M){const n=e.state;if(t.terrain&&t.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!T,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),f.activeTexture.set(p.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,p.CLAMP_TO_EDGE),n.atlasTextureIcon&&(f.activeTexture.set(p.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,mr(n.buffers,e.segments,r,t,n.program,w,d,h,i)),i.u_is_halo=0}mr(n.buffers,e.segments,r,t,n.program,w,d,h,n.uniformValues)}}function mr(t,n,r,i,o,a,s,l,u){const c=i.context,d=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];o.draw(c,c.gl.TRIANGLES,a,s,l,e.CullFaceMode.disabled,u,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),d)}function gr(t,n,r,i,o,a,s){const l=t.context.gl,u=r.paint.get("fill-pattern"),c=u&&u.constantOr(1);let d,h,f,p,m;s?(h=c&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(h=c?"fillPattern":"fill",d=l.TRIANGLES);for(const g of i){const i=n.getTile(g);if(c&&!i.patternsLoaded())continue;const y=i.getBucket(r);if(!y)continue;t.prepareDrawTile();const v=y.programConfigurations.get(r.id),_=t.useProgram(h,v);c&&(t.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers());const b=u.constantOr(null);if(b&&i.imageAtlas){const e=i.imageAtlas.patternPositions[b.toString()];e&&v.setConstantPatternPositions(e)}const x=t.translatePosMatrix(g.projMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){p=y.indexBuffer2,m=y.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];f="fillOutlinePattern"===h&&c?Fn(x,t,i,e):Bn(x,e)}else p=y.indexBuffer,m=y.segments,f=c?jn(x,t,i):zn(x);t.prepareDrawProgram(t.context,_,g.toUnwrapped()),_.draw(t.context,d,o,t.stencilModeForClipping(g),a,e.CullFaceMode.disabled,f,r.id,y.layoutVertexBuffer,p,m,r.paint,t.transform.zoom,v)}}function yr(t,n,r,i,o,a,s){const l=t.context,u=l.gl,c=t.transform,d=r.paint.get("fill-extrusion-pattern"),h=d.constantOr(1),f=r.paint.get("fill-extrusion-opacity"),p=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],m=r.layout.get("fill-extrusion-edge-radius"),g=m>0&&!r.paint.get("fill-extrusion-rounded-roof"),y=g?0:m,v="globe"===c.projection.name?e.fillExtrusionHeightLift():0,_="globe"===c.projection.name,b=_?e.globeToMercatorTransition(c.zoom):0,x=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)],w=[];_&&w.push("PROJECTION_GLOBE_VIEW"),p[0]>0&&w.push("FAUX_AO"),g&&w.push("ZERO_ROOF_RADIUS");for(const E of i){const i=n.getTile(E),m=i.getBucket(r);if(!m||m.projection.name!==c.projection.name)continue;const g=m.programConfigurations.get(r.id),S=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",g,w);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(i,S,{useMeterToDem:!0});else{if(!m.enableTerrain)continue;if(e.setupElevationDraw(i,S,{useMeterToDem:!0}),vr(l,n,E,m,r,e),!m.centroidVertexBuffer){const e=S.attributes.a_centroid_pos;void 0!==e&&u.vertexAttrib2f(e,0,0)}}}h&&(t.context.activeTexture.set(u.TEXTURE0),i.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),g.updatePaintBuffers());const T=d.constantOr(null);if(T&&i.imageAtlas){const e=i.imageAtlas.patternPositions[T.toString()];e&&g.setConstantPatternPositions(e)}const M=t.translatePosMatrix(E.projMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),k=c.projection.createInversionMatrix(c,E.canonical),C=r.paint.get("fill-extrusion-vertical-gradient"),P=h?Nn(M,t,C,f,p,y,E,i,v,b,x,k):Rn(M,t,C,f,p,y,E,v,b,x,k);t.prepareDrawProgram(l,S,E.toUnwrapped());const A=[];t.terrain&&A.push(m.centroidVertexBuffer),_&&A.push(m.layoutVertexExtBuffer),S.draw(l,l.gl.TRIANGLES,o,a,s,e.CullFaceMode.backCCW,P,r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,r.paint,t.transform.zoom,g,A)}}function vr(t,n,r,i,o,a){const s=[t=>{let n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>{let n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=n.getSource().minzoom,r=e=>{const t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(o)},i=[0,-1,1];for(const n of i){if(e.overscaledZ+n<t)continue;const i=r(e.calculateScaledKey(e.overscaledZ+n));if(i)return i}},u=[0,0,0],c=(t,n)=>(u[0]=Math.min(t.min.y,n.min.y),u[1]=Math.max(t.max.y,n.max.y),u[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,u),d=(t,n)=>(u[0]=Math.min(t.min.x,n.min.x),u[1]=Math.max(t.max.x,n.max.x),u[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,u),h=[(e,t)=>c(e,t),(e,t)=>c(t,e),(e,t)=>d(e,t),(e,t)=>d(t,e)],f=new e.Point(0,0);let p,m,g;const y=(t,n,i,o,s)=>{const l=[[o?i:t,o?t:i,0],[o?i:n,o?n:i,0]],u=s<0?e.EXTENT+s:s,c=[o?u:(t+n)/2,o?(t+n)/2:u,0];return 0===i&&s<0||0!==i&&s>0?a.getForTilePoints(g,[c],!0,m):l.push(c),a.getForTilePoints(r,l,!0,p),Math.max(l[0][2],l[1][2],c[2])/a.exaggeration()};for(let v=0;v<4;v++){const t=(v<2?1:5)-v,n=i.borders[v];if(0===n.length)continue;const o=g=s[v](r),u=l(o);if(!(u&&u instanceof e.FillExtrusionBucket&&u.enableTerrain))continue;if(i.borderDoneWithNeighborZ[v]===u.canonical.z&&u.borderDoneWithNeighborZ[t]===i.canonical.z)continue;if(m=a.findDEMTileFor(o),!m||!m.dem)continue;if(!p){const e=a.findDEMTileFor(r);if(!e||!e.dem)return;p=e}const c=u.borders[t];let d=0;const _=u.borderDoneWithNeighborZ[t]!==i.canonical.z;if(i.canonical.z===u.canonical.z){for(let r=0;r<n.length;r++){const o=i.featuresOnBorder[n[r]],a=o.borders[v];let s;for(;d<c.length&&(s=u.featuresOnBorder[c[d]],!(s.borders[t][1]>a[0]+3));)_&&u.encodeCentroid(void 0,s,!1),d++;if(s&&d<c.length){const n=d;let r=0;for(;!(s.borders[t][0]>a[1]-3)&&(r++,++d!==c.length);)s=u.featuresOnBorder[c[d]];if(s=u.featuresOnBorder[c[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==r){1!==r&&(d=n),i.encodeCentroid(void 0,o,!1),_&&u.encodeCentroid(void 0,s,!1);continue}const l=h[v](o,s),p=v%2?e.EXTENT-1:0;f.x=y(l[0],Math.min(e.EXTENT-1,l[1]),p,v<2,l[2]),f.y=0,i.encodeCentroid(f,o,!1),_&&u.encodeCentroid(f,s,!1)}else i.encodeCentroid(void 0,o,!1)}i.borderDoneWithNeighborZ[v]=u.canonical.z,i.needsCentroidUpdate=!0,_&&(u.borderDoneWithNeighborZ[t]=i.canonical.z,u.needsCentroidUpdate=!0)}else{for(const e of n)i.encodeCentroid(void 0,i.featuresOnBorder[e],!1);if(_){for(const e of c)u.encodeCentroid(void 0,u.featuresOnBorder[e],!1);u.borderDoneWithNeighborZ[t]=i.canonical.z,u.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[v]=u.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}const _r=new e.Color(1,0,0,1),br=new e.Color(0,1,0,1),xr=new e.Color(0,0,1,1),wr=new e.Color(1,0,1,1),Er=new e.Color(0,1,1,1);function Sr(t,n,r){const i=t.context,o=t.transform,a=i.gl,s="globe"===o.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null;let u=r.projMatrix;if(s&&e.globeToMercatorTransition(o.zoom)>0){const t=e.transitionTileAABBinECEF(r.canonical,o),n=e.globeDenormalizeECEF(t);u=e.multiply(new Float32Array(16),o.globeMatrix,n),e.multiply(u,o.projMatrix,u)}const c=t.useProgram("debug",null,l),d=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(d,c);const h=e.DepthMode.disabled,f=e.StencilMode.disabled,p=t.colorModeForRenderPass(),m="$debug";i.activeTexture.set(a.TEXTURE0),t.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s?d._makeGlobeTileDebugBuffers(t.context,o):d._makeDebugTileBoundsBuffers(t.context,o.projection);const g=d._tileDebugBuffer||t.debugBuffer,y=d._tileDebugIndexBuffer||t.debugIndexBuffer,v=d._tileDebugSegments||t.debugSegments;c.draw(i,a.LINE_STRIP,h,f,p,e.CullFaceMode.disabled,qn(u,e.Color.red),m,g,y,v,null,null,null,[d._globeTileDebugBorderBuffer]);const _=d.latestRawTileData,b=Math.floor((_&&_.byteLength||0)/1024),x=n.getTile(r).tileSize,w=512/Math.min(x,512)*(r.overscaledZ/o.zoom)*.5;let E=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(E+=` => ${r.overscaledZ}`),E+=` ${b}kb`,function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,E);const S=d._tileDebugTextBuffer||t.debugBuffer,T=d._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,M=d._tileDebugTextSegments||t.debugSegments;c.draw(i,a.TRIANGLES,h,f,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,qn(u,e.Color.transparent,w),m,S,T,M,null,null,null,[d._globeTileDebugTextBuffer])}function Tr(e,t,n,r){kr(e,0,t+n/2,e.transform.width,n,r)}function Mr(e,t,n,r){kr(e,t-n/2,0,n,e.transform.height,r)}function kr(t,n,r,i,o,a){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}const Cr=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Pr}=Cr;function Ar(e,t,n,r){e.emplaceBack(t,n,r)}class Or{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Ar(this.vertexArray,-1,-1,1),Ar(this.vertexArray,1,-1,1),Ar(this.vertexArray,-1,1,1),Ar(this.vertexArray,1,1,1),Ar(this.vertexArray,-1,-1,-1),Ar(this.vertexArray,1,-1,-1),Ar(this.vertexArray,-1,1,-1),Ar(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Pr),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Ir(t,n,r,i,o,a){const s=t.gl,l=n.paint.get("sky-atmosphere-color"),u=n.paint.get("sky-atmosphere-halo-color"),c=n.paint.get("sky-atmosphere-sun-intensity"),d=((e,t,n,r,i)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),i),o,c,l,u);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,d,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Lr=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Dr{constructor(t){const n=new e.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const r=new e.StructArrayLayout3ui6;r.emplaceBack(0,1,2),r.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(n,Lr.members),this.indexBuffer=t.createIndexBuffer(r),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Rr={symbol:function(t,n,r,i,o){if("translucent"!==t.renderPass)return;const a=e.StencilMode.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,o,a,s){const l=n.transform,u="map"===o,c="map"===a;for(const d of t){const t=i.getTile(d),n=t.getBucket(r);if(!n||!n.text||!n.text.segments.get().length)continue;const o=e.evaluateSizeForZoom(n.textSizeData,l.zoom),a=_t(d,n.getProjection(),l),h=l.calculatePixelsToTileUnitsMatrix(t),f=et(a,t.tileID.canonical,c,u,l,n.getProjection(),h),p="none"!==r.layout.get("icon-text-fit")&&n.hasIconData();if(o){const r=Math.pow(2,l.zoom-t.tileID.overscaledZ);hr(n,u,c,s,e.symbolSize,l,f,d,r,o,p)}}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&pr(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&pr(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(ur(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),ur(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const u=t.context,c=u.gl,d=t.transform,h=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),f=e.StencilMode.disabled,p=t.colorModeForRenderPass(),m="globe"===d.projection.name,g=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],y=[];for(let _=0;_<i.length;_++){const o=i[_],a=n.getTile(o),s=a.getBucket(r);if(!s||s.projection.name!==d.projection.name)continue;const u=s.programConfigurations.get(r.id),c=Hn(r);m&&c.push("PROJECTION_GLOBE_VIEW");const h=t.useProgram("circle",u,c),f=s.layoutVertexBuffer,p=s.globeExtVertexBuffer,v=s.indexBuffer,b=d.projection.createInversionMatrix(d,o.canonical),x={programConfiguration:u,program:h,layoutVertexBuffer:f,globeExtVertexBuffer:p,indexBuffer:v,uniformValues:Gn(t,o,a,b,g,r),tile:a};if(l){const t=s.segments.get();for(const n of t)y.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:x})}else y.push({segments:s.segments,sortKey:0,state:x})}l&&y.sort(((e,t)=>e.sortKey-t.sortKey));const v={useDepthForOcclusion:!m};for(const _ of y){const{programConfiguration:n,program:i,layoutVertexBuffer:o,globeExtVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:m}=_.state,g=_.segments;t.terrain&&t.terrain.setupElevationDraw(m,i,v),t.prepareDrawProgram(u,i,m.tileID.toUnwrapped()),i.draw(u,c.TRIANGLES,h,f,p,e.CullFaceMode.disabled,l,r.id,o,s,g,r.paint,d.zoom,n,[a])}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=e.StencilMode.disabled,l=new e.ColorMode([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n,r){const i=e.gl,o=t.width*r,a=t.height*r;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,o,a]);let s=n.heatmapFbo;if(!s||s&&(s.width!==o||s.height!==a)){s&&s.destroy();const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=n.heatmapFbo=e.createFramebuffer(o,a,!1),function(e,t,n,r,i,o){const a=e.gl;a.texImage2D(a.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?a.RGBA16F:a.RGBA,i,o,0,a.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?a.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,0,t,s,o,a)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(o,t,r,"globe"===t.transform.projection.name?.5:.25),o.clear({color:e.Color.transparent});const u=t.transform,c="globe"===u.projection.name,d=c?["PROJECTION_GLOBE_VIEW"]:null,h=c?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,f=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)];for(let p=0;p<i.length;p++){const m=i[p];if(n.hasRenderableParent(m))continue;const g=n.getTile(m),y=g.getBucket(r);if(!y||y.projection.name!==u.projection.name)continue;const v=y.programConfigurations.get(r.id),_=t.useProgram("heatmap",v,d),{zoom:b}=t.transform;t.terrain&&t.terrain.setupElevationDraw(g,_),t.prepareDrawProgram(o,_,m.toUnwrapped());const x=u.projection.createInversionMatrix(u,m.canonical);_.draw(o,a.TRIANGLES,e.DepthMode.disabled,s,l,h,Wn(t,m,g,x,f,b,r.paint.get("heatmap-intensity")),r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,r.paint,t.transform.zoom,v,c?[y.globeExtVertexBuffer]:null)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){const r=t.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,n,r)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}(t,r))},line:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),u=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,c=r.paint.get("line-dasharray"),d=c.constantOr(1),h=r.layout.get("line-cap"),f=r.paint.get("line-pattern"),p=f.constantOr(1),m=r.paint.get("line-gradient"),g=p?"linePattern":"line",y=t.context,v=y.gl,_=(e=>{const t=[];Jn(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const n=e.paint.get("line-trim-offset");0===n[0]&&0===n[1]||t.push("RENDER_LINE_TRIM_OFFSET");const r=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!r&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(r);let b=_.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(b=!1);for(const x of i){const i=n.getTile(x);if(p&&!i.patternsLoaded())continue;const o=i.getBucket(r);if(!o)continue;t.prepareDrawTile();const a=o.programConfigurations.get(r.id),w=t.useProgram(g,a,_),E=f.constantOr(null);if(E&&i.imageAtlas){const e=i.imageAtlas.patternPositions[E.toString()];e&&a.setConstantPatternPositions(e)}const S=c.constantOr(null),T=h.constantOr(null);if(!p&&S&&T&&i.lineAtlas){const e=i.lineAtlas.getDash(S,T);e&&a.setConstantPatternPositions(e)}let[M,k]=r.paint.get("line-trim-offset");if("round"===T||"square"===T){const e=1;M!==k&&(0===M&&(M-=e),1===k&&(k+=e))}const C=t.terrain?x.projMatrix:null,P=p?Xn(t,i,r,C,u):Zn(t,i,r,C,o.lineClipsArray.length,u,[M,k]);if(m){const i=o.gradients[r.id];let a=i.texture;if(r.gradientVersion!==i.version){let s=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=x.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-x.canonical.z):1;s=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*i),256,y.maxTextureSize)}i.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:i.gradient||void 0,clips:o.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new e.Texture(y,i.gradient,v.RGBA),i.version=r.gradientVersion,a=i.texture}y.activeTexture.set(v.TEXTURE1),a.bind(r.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}d&&(y.activeTexture.set(v.TEXTURE0),i.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),a.updatePaintBuffers()),p&&(y.activeTexture.set(v.TEXTURE0),i.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),a.updatePaintBuffers()),t.prepareDrawProgram(y,w,x.toUnwrapped());const A=n=>{w.draw(y,v.TRIANGLES,s,n,l,e.CullFaceMode.disabled,P,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,t.transform.zoom,a,[o.layoutVertexBuffer2])};if(b){const n=t.stencilModeForClipping(x).ref;0===n&&t.terrain&&y.clear({stencil:0});const r={func:v.EQUAL,mask:255};P.u_alpha_discard_threshold=.8,A(new e.StencilMode(r,n,255,v.KEEP,v.KEEP,v.INVERT)),P.u_alpha_discard_threshold=0,A(new e.StencilMode(r,n,255,v.KEEP,v.KEEP,v.KEEP))}else A(t.stencilModeForClipping(x))}b&&(t.resetStencilClippingMasks(),t.terrain&&y.clear({stencil:0}))},fill:function(t,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===u){const o=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);gr(t,n,r,i,o,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){const o=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);gr(t,n,r,i,o,s,!0)}},"fill-extrusion":function(t,n,r,i){const o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){const a=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))yr(t,n,r,i,a,e.StencilMode.disabled,e.ColorMode.disabled),yr(t,n,r,i,a,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const o=t.colorModeForRenderPass();yr(t,n,r,i,a,e.StencilMode.disabled,o)}}},hillshade:function(t,n,r,i){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const o=t.context,a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[u,c]="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i);for(const d of c){const i=n.getTile(d);if(i.needsHillshadePrepare&&"offscreen"===t.renderPass)yn(t,i,r,a,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(d):u[d.overscaledZ];mn(t,d,i,r,a,e,s)}}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,n,r,i,o,a){if("translucent"!==t.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const s=t.context,l=s.gl,u=n.getSource(),c=t.useProgram("raster"),d=t.colorModeForRenderPass(),h=t.terrain&&t.terrain.renderingToTexture,[f,p]=u instanceof Ce||h?[{},i]:t.stencilConfigForOverlap(i),m=p[p.length-1].overscaledZ,g=!t.options.moving;for(const y of p){const i=h?e.DepthMode.disabled:t.depthModeForSublayer(y.overscaledZ-m,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),o=y.toUnwrapped(),p=n.getTile(y);if(h&&(!p||!p.hasData()))continue;const v=h?y.projMatrix:t.transform.calculateProjMatrix(o,g),_=t.terrain&&h?t.terrain.stencilModeForRTTOverlap(y):f[y.overscaledZ],b=a?0:r.paint.get("raster-fade-duration");p.registerFadeDuration(b);const x=n.findLoadedParent(y,0),w=kn(p,x,n,t.transform,b);let E,S;t.terrain&&t.terrain.prepareDrawTile();const T="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),p.texture.bind(T,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),x?(x.texture.bind(T,l.CLAMP_TO_EDGE),E=Math.pow(2,x.tileID.overscaledZ-p.tileID.overscaledZ),S=[p.tileID.canonical.x*E%1,p.tileID.canonical.y*E%1]):p.texture.bind(T,l.CLAMP_TO_EDGE),p.texture.useMipmap&&s.extTextureFilterAnisotropic&&t.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax);const M=Qn(v,S||[0,0],E||1,w,r,u instanceof Ce?u.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(s,c,o),u instanceof Ce)u.boundsBuffer&&u.boundsSegments&&c.draw(s,l.TRIANGLES,i,e.StencilMode.disabled,d,e.CullFaceMode.disabled,M,r.id,u.boundsBuffer,t.quadTriangleIndexBuffer,u.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:o,tileBoundsSegments:a}=t.getTileBoundsBuffers(p);c.draw(s,l.TRIANGLES,i,_,d,e.CullFaceMode.disabled,M,r.id,n,o,a)}}t.resetStencilClippingMasks()},background:function(t,n,r,i){const o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0===a)return;const s=t.context,l=s.gl,u=t.transform,c=u.tileSize,d=r.paint.get("background-pattern");if(t.isPatternMissing(d))return;const h=!d&&1===o.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==h)return;const f=e.StencilMode.disabled,p=t.depthModeForSublayer(0,"opaque"===h?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),g=t.useProgram(d?"backgroundPattern":"background");let y,v=i;v||(y=t.getBackgroundTiles(),v=Object.values(y).map((e=>e.tileID))),d&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));for(const _ of v){const h=_.toUnwrapped(),v=i?_.projMatrix:t.transform.calculateProjMatrix(h);t.prepareDrawTile();const b=n?n.getTile(_):y?y[_.key]:new e.Tile(_,c,u.zoom,t),x=d?ar(v,a,t,d,{tileID:_,tileSize:c}):or(v,a,o);t.prepareDrawProgram(s,g,h);const{tileBoundsBuffer:w,tileBoundsIndexBuffer:E,tileBoundsSegments:S}=t.getTileBoundsBuffers(b);g.draw(s,l.TRIANGLES,p,f,m,e.CullFaceMode.disabled,x,r.id,w,E,S)}},sky:function(t,n,r){const i=t.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),a=r.paint.get("sky-opacity")*o;if(0===a)return;const s=t.context,l=r.paint.get("sky-type"),u=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),c=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){const o=t.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new Or(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let e=0;e<6;++e)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=n.getCenter(t,!0),u=t.useProgram("skyboxCapture"),c=new Float64Array(16);e.identity(c),e.rotateY(c,c,.5*-Math.PI),Ir(o,n,u,c,l,0),e.identity(c),e.rotateY(c,c,.5*Math.PI),Ir(o,n,u,c,l,1),e.identity(c),e.rotateX(c,c,.5*-Math.PI),Ir(o,n,u,c,l,2),e.identity(c),e.rotateX(c,c,.5*Math.PI),Ir(o,n,u,c,l,3),e.identity(c),Ir(o,n,u,c,l,4),e.identity(c),e.rotateY(c,c,Math.PI),Ir(o,n,u,c,l,5),o.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,u=t.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const c=((e,t,n,r,i)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}))(l.skyboxMatrix,n.getCenter(t,!1),0,i,o);t.prepareDrawProgram(a,u),u.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,c,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,u,a,c):"gradient"===l&&"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,u=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Or(a)),a.activeTexture.set(s.TEXTURE0);let c=n.colorRampTexture;c||(c=n.colorRampTexture=new e.Texture(a,n.colorRamp,s.RGBA)),c.bind(s.LINEAR,s.CLAMP_TO_EDGE);const d=((t,n,r,i,o)=>({u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,o);t.prepareDrawProgram(a,u),u.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,d,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,u,a,c)},debug:function(e,t,n){for(let r=0;r<n.length;r++)Sr(e,t,n[r])},custom:function(t,n,r,i){const o=t.context,a=r.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&r.isLayerDraped()){if("offscreen"===t.renderPass){const n=a.prerender;if(n){if(t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){const r=t.transform.pointMerc;n.call(a,o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[r.x,r.y],t.transform.pixelsPerMeterRatio)}else n.call(a,o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){const n=a.renderToTile;if(n){const r=i[0].canonical,s=new e.MercatorCoordinate(r.x+i[0].wrap*(1<<r.z),r.y,r.z);o.setDepthMode(e.DepthMode.disabled),o.setStencilMode(e.StencilMode.disabled),o.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),n.call(a,o.gl,s),o.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),o.setStencilMode(e.StencilMode.disabled);const n="3d"===a.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(o.setDepthMode(n),"globe"===t.transform.projection.name){const n=t.transform.pointMerc;a.render(o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[n.x,n.y],t.transform.pixelsPerMeterRatio)}else a.render(o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState(),o.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Nr{constructor(t,n,r=!1){this.context=new Se(t,r),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(e,t){const n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new On(this,e));const r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,r]=t.getFovAdjustedRange(this.transform._fov);if(n>r)return void(this.transform.fogCullDistSq=null);const i=n+.78*(r-n);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(e.EXTENT,0,e.EXTENT,0),o.emplaceBack(0,e.EXTENT,0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(o,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a);const s=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Dr(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Mn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,n,r){if(!n||this.currentStencilSource===n.id||!t.isTileClipped()||!r||0===r.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of r)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=n.id;const i=this.context,o=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const s of r){const t=n.getTile(s),r=this._tileClippingMaskIDs[s.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:u,tileBoundsSegments:c}=this.getTileBoundsBuffers(t);a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},r,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Mn(s.projMatrix),"$clipping",l,u,c)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(t){const n=this.context.gl,r=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const t={};for(let r=0;r<o;r++)t[r+i]=new e.StencilMode({func:n.GEQUAL,mask:255},r+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[t,r]}return[{[i]:e.StencilMode.disabled},r]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){this.style=t,this.options=n,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const r=this.style.order,i=this.style._sourceCaches;for(const e in i){const t=i[e];t.used&&t.prepare(this.context)}const o={},a={},s={};for(const e in i){const t=i[e];o[e]=t.getVisibleCoordinates(),a[e]=o[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<r.length;e++)if(this.style._layers[r[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of r){const n=this.style._layers[e],r=t._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const i=r?a[r.id]:void 0;("custom"===n.type||n.isSky()||i&&i.length)&&this.renderLayer(this,r,n,i)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky())continue;const i=n?a[n.id]:void 0;this._renderTileClippingMasks(e,n,i),this.renderLayer(this,n,e,i)}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,n){const r=t.context,i=r.gl,o=t.transform,a=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(o.zoom),u=n.properties.get("color").toArray01(),c=n.properties.get("high-color").toArray01(),d=n.properties.get("space-color").toArray01PremultipliedAlpha(),h=e.identity$1([]);e.rotateY$1(h,h,-e.degToRad(o._center.lng)),e.rotateX$1(h,h,e.degToRad(o._center.lat)),e.rotateZ$1(h,h,o.angle),e.rotateX$1(h,h,-o._pitch);const f=e.fromQuat(new Float32Array(16),h),p=e.mapValue(n.properties.get("star-intensity"),0,1,0,.25),m=5e-4,g=e.mapValue(n.properties.get("horizon-blend"),0,1,m,.25),y=e.globeUseCustomAntiAliasing(t,r,o)&&g===m?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,v=t.frameCounter/1e3%1,_=e.length(o.globeCenterInViewSpace),b=Math.sqrt(Math.pow(_,2)-Math.pow(y,2)),x=Math.acos(b/_),w=((t,n,r,i,o,a,s,l,u,c,d,h,f,p)=>({u_frustum_tl:t,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:o,u_transition:a,u_fadeout_range:s,u_color:l,u_high_color:u,u_space_color:c,u_star_intensity:d,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:h,u_horizon_angle:f,u_rotation_matrix:p}))(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,l,g,u,c,d,p,v,x,f);t.prepareDrawProgram(r,s);const E=t.atmosphereBuffer;E&&s.draw(r,i.TRIANGLES,a,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,w,"skybox",E.vertexBuffer,E.indexBuffer,E.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,n,e,n?a[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=n?("symbol"===e.type?s:a)[n.id]:void 0;this._renderTileClippingMasks(e,n,n?o[n.id]:void 0),this.renderLayer(this,n,e,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let n=null;e.values(this.style._layers).forEach((e=>{const r=t._getLayerSourceCache(e);r&&!e.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<r.getSource().maxzoom)&&(n=r)})),n&&this.options.showTileBoundaries&&Rr.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Tr(e,e.transform.height-(t.top||0),3,_r),Tr(e,t.bottom||0,3,br),Mr(e,t.left||0,3,xr),Mr(e,e.transform.width-(t.right||0),3,wr);const n=e.transform.centerPoint;!function(e,t,n,r){kr(e,t-1,n-10,2,20,r),kr(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,Er)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(n.type)||e.terrain&&"custom"===n.type)&&Rr[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const n in e){const r=e[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=o}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let n=0;for(const r of e)n+=t.getQueryObjectEXT(r,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(r);return n}translatePosMatrix(t,n,r,i,o){if(!r[0]&&!r[1])return t;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const s=[o?r[0]:A(n,r[0],this.transform.zoom),o?r[1]:A(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),t&&r.push("ZERO_EXAGGERATION"),n&&!e&&0!==n.getOpacity(this.transform.pitch)&&r.push("FOG"),e&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}useProgram(e,t,n){this.cache=this.cache||{};const r=n||[],i=this.currentGlobalDefines().concat(r),o=In.cacheKey(cn[e],e,i,t);return this.cache[o]||(this.cache[o]=new In(this.context,e,cn[e],t,sr[e],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,n,r){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const o=i.getOpacity(this.transform.pitch),a=((t,n,r,i,o,a,s,l,u,c,d)=>{const h=t.transform,f=n.properties.get("color").toArray01();f[3]=i;const p=t.frameCounter/1e3%1;return{u_fog_matrix:r?h.calculateFogTileMatrix(r):t.identityMat,u_fog_range:n.getFovAdjustedRange(h._fov),u_fog_color:f,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:p,u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:u,u_globe_radius:c,u_viewport:d,u_globe_transition:e.globeToMercatorTransition(h.zoom),u_is_globe:+("globe"===h.projection.name)}})(this,i,r,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);n.setFogUniformValues(t,a)}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,n=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512});for(const i of r)n[i.key]=t[i.key]||new e.Tile(i,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class zr{constructor(e=0,t=0,n=0,r=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r}interpolate(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}getCenter(t,n){const r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.Point(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new zr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function jr(t,n){const r=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,r)}function Br(t,n){const r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function Fr(t,n){const r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){const t=e.normalize([],r);e.scale$2(i,t,e.dot(i,t)),n[0]=i[0],n[1]=i[1]}const o=e.cross([],n,t);if(e.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return Br(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),a)}class Ur{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(t,n){if(this.orientation=null,!this.position)return;const r=this.position,i=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,o=e.MercatorCoordinate.fromLngLat(t,i),a=[o.x-r.x,o.y-r.y,o.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Fr(a,n)}setPitchBearing(t,n){this.orientation=Br(e.degToRad(t),e.degToRad(-n))}}class Gr{constructor(t,n){this._transform=e.identity([]),this.orientation=n,this.position=t}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&jr(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Br(e,t),jr(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,n){const r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}getWorldToCameraPosition(t,n,r){const i=this.position;e.scale$2(i,i,-t);const o=new Float64Array(16);return e.fromScaling(o,[r,r,r]),e.translate(o,o,i),o[10]*=n,o}getWorldToCamera(t,n){const r=new Float64Array(16),i=new Float64Array(4),o=this.position;return e.conjugate(i,this._orientation),e.scale$2(o,o,-t),e.fromQuat(r,i),e.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}getCameraToClipPerspective(t,n,r,i){const o=new Float64Array(16);return e.perspective(o,t,n,r,i),o}getDistanceToElevation(t,n=!1){const r=0===t?0:e.mercatorZfromAltitude(t,n?e.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(r-this.position[2])/i[2]}clone(){return new Gr([...this.position],[...this.orientation])}}function Hr(t,n){const r=qr(t.projection,t.zoom,t.width,t.height),i=function(t,n,r,i,o){const a=new e.LngLat(r.lng-180*$r,r.lat),s=new e.LngLat(r.lng+180*$r,r.lat),l=t.project(a.lng,a.lat),u=t.project(s.lng,s.lat),c=-Math.atan2(u.y-l.y,u.x-l.x),d=e.MercatorCoordinate.fromLngLat(r);d.y=e.clamp(d.y,-1+$r,1-$r);const h=d.toLngLat(),f=t.project(h.lng,h.lat),p=e.MercatorCoordinate.fromLngLat(h);p.x+=$r;const m=p.toLngLat(),g=t.project(m.lng,m.lat),y=Zr(g.x-f.x,g.y-f.y,c),v=e.MercatorCoordinate.fromLngLat(h);v.y+=$r;const _=v.toLngLat(),b=t.project(_.lng,_.lat),x=Zr(b.x-f.x,b.y-f.y,c),w=Math.abs(y.x)/Math.abs(x.y),E=e.identity([]);e.rotateZ(E,E,-c*(1-(o?0:i)));const S=e.identity([]);return e.scale(S,S,[1,1-(1-w)*i,1]),S[4]=-x.x/x.y*i,e.rotateZ(S,S,c),e.multiply(S,E,S),S}(t.projection,0,t.center,r,n),o=Vr(t);return e.scale(i,i,[o,o,1]),i}function Vr(t){const n=t.projection,r=qr(t.projection,t.zoom,t.width,t.height),i=Wr(n,t.center),o=Wr(n,e.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*o)}function qr(t,n,r,i,o=1/0){const a=t.range;if(!a)return 0;const s=Math.min(o,Math.max(r,i)),l=Math.log(s/1024)/Math.LN2;return e.smoothstep(a[0]+l,a[1]+l,n)}const $r=1/4e4;function Wr(t,n){const r=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(n.lng-180*$r,r),o=new e.LngLat(n.lng+180*$r,r),a=t.project(i.lng,r),s=t.project(o.lng,r),l=e.MercatorCoordinate.fromLngLat(i),u=e.MercatorCoordinate.fromLngLat(o),c=s.x-a.x,d=s.y-a.y,h=u.x-l.x,f=u.y-l.y,p=Math.sqrt((h*h+f*f)/(c*c+d*d));return Math.log(p)/Math.LN2}function Zr(e,t,n){const r=Math.cos(n),i=Math.sin(n);return{x:e*r-t*i,y:e*i+t*r}}class Xr{constructor(t,n,r,i,o,a,s){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setProjection(a),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new zr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Gr,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const e=new Xr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(e,t=!1){const n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(e||n)&&this._constrainCamera(t),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const r=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const i=!t(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const n=t!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const n=-t*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=r*-s+o*l,e[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop();let i=0,o=0;for(let a=0;a<n.length;a++){const s=new e.Point(n[a][0]*this.width,r+n[a][1]*(this.height-r)),l=t.pointCoordinate(s);if(!l)continue;const u=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*u,o+=u}return 0===o?NaN:i/o}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,r=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let r;r=t.z<this._camera.position[2]?[n.x,n.y,n.z]:[t.x,t.y,t.z];const i=e.length(e.sub([],this._camera.position,r));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){const r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,n=new Ur;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;const i=Fr(n,r);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(t){const n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const r=this.pointCoordinate(new e.Point(0,0)),i=this.pointCoordinate(new e.Point(this.width,0)),o=this.pointCoordinate(new e.Point(this.width,this.height)),a=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),u=1;for(let c=s-u;c<=l+u;c++)0!==c&&n.push(new e.UnwrappedTileID(c,t))}return n}coveringTiles(t){let n=this.coveringZoomLevel(t);const r=n,i=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);const a=this.locationCoordinate(this.center),s=this.center.lat,l=1<<n,u=[l*a.x,l*a.y,0],c="globe"===this.projection.name,d=!c,h=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,d),f=c?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),p=l*e.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[l*f.x,l*f.y,m*(d?1:p)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,_=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,b=t.isTerrainDEM?-_:this._elevation?this._elevation.getMinElevationBelowMSL():0,x=this.projection.isReprojectedInTileSpace?Vr(this):1,w=t=>{const n=1/4e4,r=new e.MercatorCoordinate(t.x+n,t.y,t.z),i=new e.MercatorCoordinate(t.x,t.y+n,t.z),o=t.toLngLat(),a=r.toLngLat(),s=i.toLngLat(),l=this.locationCoordinate(o),u=this.locationCoordinate(a),c=this.locationCoordinate(s),d=Math.hypot(u.x-l.x,u.y-l.y),h=Math.hypot(c.x-l.x,c.y-l.y);return Math.sqrt(d*h)*x/n},E=t=>{const n=_,r=b;return{aabb:e.tileAABB(this,l,0,0,0,t,r,n,this.projection),zoom:0,x:0,y:0,minZ:r,maxZ:n,wrap:t,fullyVisible:!1}},S=[];let T=[];const M=n,k=t.reparseOverscaled?r:n,C=e=>e*e,P=C((m-this._centerAltitude)*p),A=e=>{if(!this._elevation||!e.tileID||!o)return;const t=this._elevation.getMinMaxForTile(e.tileID),n=e.aabb;t?(n.min[2]=t.min,n.max[2]=t.max,n.center[2]=(n.min[2]+n.max[2])/2):(e.shouldSplit=O(e),e.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},O=t=>{if(t.zoom<v)return!0;if(t.zoom===M)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const n=t.aabb.distanceX(g),o=t.aabb.distanceY(g);let a=P,l=1;if(c){a=C(t.aabb.distanceZ(g));const n=Math.pow(2,t.zoom),r=e.latFromMercatorY((t.y+1)/n),i=e.latFromMercatorY(t.y/n),o=Math.min(Math.max(s,r),i),u=e.circumferenceAtLatitude(o)/e.circumferenceAtLatitude(s);if(l=o===s?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,u/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===M-1&&u>=.9)return!0}else if(i&&(a=C(t.aabb.distanceZ(g)*p)),this.projection.isReprojectedInTileSpace&&r<=5){const n=Math.pow(2,t.zoom),r=w(new e.MercatorCoordinate((t.x+.5)/n,(t.y+.5)/n));l=r>.85?1:r}const u=n*n+o*o+a,d=C((1<<M-t.zoom)*y*l*((e,t)=>{if(t*C(.707)<e)return 1;const n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(a,P),u));return u<d};if(this.renderWorldCopies)for(let e=1;e<=3;e++)S.push(E(-e)),S.push(E(e));for(S.push(E(0));S.length>0;){const r=S.pop(),a=r.x,s=r.y;let d=r.fullyVisible;if(!d){const e=r.aabb.intersects(h);if(0===e)continue;d=2===e}if(r.zoom!==M&&O(r))for(let t=0;t<4;t++){const n=(a<<1)+t%2,u=(s<<1)+(t>>1),h={aabb:o?r.aabb.quadrant(t):e.tileAABB(this,l,r.zoom+1,n,u,r.wrap,r.minZ,r.maxZ,this.projection),zoom:r.zoom+1,x:n,y:u,wrap:r.wrap,fullyVisible:d,tileID:void 0,shouldSplit:void 0,minZ:r.minZ,maxZ:r.maxZ};i&&!c&&(h.tileID=new e.OverscaledTileID(r.zoom+1===M?k:r.zoom+1,r.wrap,r.zoom+1,n,u),A(h)),S.push(h)}else{const i=r.zoom===M?k:r.zoom;if(t.minzoom&&t.minzoom>i)continue;const o=u[0]-(.5+a+(r.wrap<<r.zoom))*(1<<n-r.zoom),l=u[1]-.5-s,c=r.tileID?r.tileID:new e.OverscaledTileID(i,r.wrap,r.zoom,a,s);T.push({tileID:c,distanceSq:o*o+l*l})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,r=this.horizonLineFromTop();T=T.filter((i=>{const o=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],s=this.calculateFogTileMatrix(i.tileID.toUnwrapped());e.transformMat4$1(o,o,s),e.transformMat4$1(a,a,s);const l=e.getAABBPointSquareDist(o,a);if(0===l)return!0;let u=!1;const c=this._elevation;if(c&&l>n&&0!==r){const n=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;t.isTerrainDEM||(o=c.getMinMaxForTile(i.tileID)),o||(o={min:b,max:_});const a=e.furthestTileCorner(this.rotation),s=[a[0]*e.EXTENT,a[1]*e.EXTENT,o.max];e.transformMat4(s,s,n),u=(1-s[1])*this.height*.5<r}return l<n||u}))}return T.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=this.projection.project(t.lng,n);return new e.Point(r.x*this.worldSize,r.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,n){let r,i;const o=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;r=(n.x-o.x)/e,i=(n.y-o.y)/e}else{const e=this.pointCoordinate(n),t=this.pointCoordinate(o);r=e.x-t.x,i=e.y-t.y}const a=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(a.x-r,a.y-i))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,n){const r=n?e.mercatorZfromAltitude(n,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,r)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,n){const r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(o,o,this.pixelMatrixInverse);const a=o[3];e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/a);const s=i[2],l=o[2];return{p0:i,p1:o,t:s===l?0:(r-s)/(l-s)}}screenPointToMercatorRay(t){const n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}rayIntersectionCoordinate(t){const{p0:n,p1:r,t:i}=t,o=e.mercatorZfromAltitude(n[2],this._center.lat),a=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(o,a,i))}pointCoordinate(e,t=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let n=this.projection.pointCoordinate3D(this,t.x,t.y);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);let r=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);const o=.02*i,a=t.clone();for(let s=0;s<10&&i-r>o;s++){a.y=e.number(r,i,.66);const t=this.projection.pointCoordinate3D(this,a.x,a.y);t?(i=a.y,n=t):r=a.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}isPointOnSurface(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return!1;if(this.elevation||this.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(t);const n=this.pointCoordinate(t);return n.y>=0&&n.y<=1}_coordinatePoint(t,n){const r=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.Point(i[0]/i[3],i[1]/i[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:n}=this._edgeInsets,r=this.height-this._edgeInsets.bottom,i=this.width-this._edgeInsets.right,o=this.pointLocation3D(new e.Point(n,t)),a=this.pointLocation3D(new e.Point(i,t)),s=this.pointLocation3D(new e.Point(i,r)),l=this.pointLocation3D(new e.Point(n,r));let u=Math.min(o.lng,a.lng,s.lng,l.lng),c=Math.max(o.lng,a.lng,s.lng,l.lng),d=Math.min(o.lat,a.lat,s.lat,l.lat),h=Math.max(o.lat,a.lat,s.lat,l.lat);const f=Math.pow(2,-this.zoom)/16*270,p="globe"===this.projection.name?1:4,m=(t,n,r,i,o)=>{const a=(t+r)/2,s=(n+i)/2,l=new e.Point(a,s),{lng:g,lat:y}=this.pointLocation3D(l),v=Math.max(0,u-g,d-y,g-c,y-h);u=Math.min(u,g),c=Math.max(c,g),d=Math.min(d,y),h=Math.max(h,y),(o<p||v>f)&&(m(t,n,a,s,o+1),m(a,s,r,i,o+1))};if(m(n,t,i,t,1),m(i,t,i,r,1),m(i,r,n,r,1),m(n,r,n,t,1),"globe"===this.projection.name){const[t,n]=e.polesInViewport(this);t?(h=90,c=180,u=-180):n&&(d=-90,c=180,u=-180)}return new e.LngLatBounds(new e.LngLat(u,d),new e.LngLat(c,h))}_getBoundsRectangular(t,n){const{top:r,left:i}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,s=new e.Point(i,r),l=new e.Point(a,r),u=new e.Point(a,o),c=new e.Point(i,o);let d=this.pointCoordinate(s,t),h=this.pointCoordinate(l,t);const f=this.pointCoordinate(u,n),p=this.pointCoordinate(c,n),m=(e,t)=>(t.y-e.y)/(t.x-e.x);return d.y>1&&h.y>=0?d=new e.MercatorCoordinate((1-p.y)/m(p,d)+p.x,1):d.y<0&&h.y<=1&&(d=new e.MercatorCoordinate(-p.y/m(p,d)+p.x,0)),h.y>1&&d.y>=0?h=new e.MercatorCoordinate((1-f.y)/m(f,h)+f.x,1):h.y<0&&d.y<=1&&(h=new e.MercatorCoordinate(-f.y/m(f,h)+f.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(f))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const n=t.key,r=this._distanceTileDataCache;if(r[n])return r[n];const i=t.canonical,o=1/this.height,a=this.cameraWorldSize,s=a/this.zoomScale(i.z),l=(i.x+Math.pow(2,i.z)*t.wrap)*s,u=i.y*s,c=this.point;c.x*=a/this.worldSize,c.y*=a/this.worldSize;const d=this.angle,h=Math.sin(-d),f=-Math.cos(-d);return r[n]={bearing:[h,f],center:[(c.x-l)*o,(c.y-u)*o],scale:s/e.EXTENT*o},r[n]}calculateFogTileMatrix(t){const n=t.key,r=this._fogTileMatrixCache;if(r[n])return r[n];const i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}calculateProjMatrix(t,n=!1){const r=t.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];const o=this.calculatePosMatrix(t,this.worldSize);return e.multiply(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,o),i[r]=new Float32Array(o),i[r]}calculatePixelsToTileUnitsMatrix(t){const n=t.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];const i=function(t,n){const{scale:r}=t.tileTransform,i=r*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return o=new Float32Array(4),l=(a=n.inverseAdjustmentMatrix)[1],u=a[2],c=a[3],h=(s=[i,i])[1],o[0]=a[0]*(d=s[0]),o[1]=l*d,o[2]=u*h,o[3]=c*h,o;var o,a,s,l,u,c,d,h}(t,this);return r[n]=i,r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,n=e.fromScaling([],[t,t,t]);return e.multiply(n,n,this.globeMatrix),n}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),o=e.mercatorZfromAltitude(1,this._center.lat);r[2]/=o,i[2]/=o,e.normalize(i,i);const a=t.raycast(r,i,t.exaggeration());if(a){const t=e.scaleAndAdd([],r,i,a),n=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),s=(n.z+e.length([n.x-r[0],n.y-r[1],n.z-r[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(t=!1){if(!this._elevation)return;const n=this._elevation,r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(r),o=n.getAtPointOrZero(new e.MercatorCoordinate(...i)),a=this.pixelsPerMeter/this.worldSize*o,s=this._minimumHeightOverTerrain(),l=i[2]-a;if(l<=s)if(l<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),n=[i[0],i[1],t.z-i[2]],r=e.length(n);n[2]-=(s-l)/this._pixelsPerMercatorPixel;const o=e.length(n);if(0===o)return;e.scale$2(n,n,r/o*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],t.z*this._pixelsPerMercatorPixel-n[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const n=this.center;return n.lat=e.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(n.lng=e.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}const n=this._unmodified,{x:r,y:i}=this.point;let o=0,a=r,s=i;const l=this.width/2,u=this.height/2,c=this.worldMinY*this.scale,d=this.worldMaxY*this.scale;if(i-u<c&&(s=c+u),i+u>d&&(s=d-u),d-c<this.height&&(o=Math.max(o,this.height/(d-c)),s=(d+c)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,n=this.worldSize/2-(e+t)/2;a=(r+n+this.worldSize)%this.worldSize-n,a-l<e&&(a=e+l),a+l>t&&(a=t-l),t-e<this.width&&(o=Math.max(o,this.width/(t-e)),a=(t+e)/2)}a===r&&s===i||(this.center=this.unproject(new e.Point(a,s))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const r=qr(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i="meters"===this.projection.zAxisUnit?n:1,o=this._camera.getWorldToCamera(this.worldSize,i),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-t.x/this.width,a[9]=2*t.y/this.height;let s=e.mul([],a,o);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),n=e.identity([]);e.translate(n,n,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(n,n,Hr(this)),e.translate(n,n,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(s,s,n),this.inverseAdjustmentMatrix=function(e){const t=Hr(e,!0);return v([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const l=e.invert([],a);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const u=new Float32Array(16);e.identity(u),e.scale(u,u,[1,-1,1]),e.rotateX(u,u,this._pitch),e.rotateZ(u,u,this.angle);const c=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),d=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;c[8]=2*-t.x/this.width,c[9]=2*(t.y+d)/this.height,this.skyboxMatrix=e.multiply(u,c,u);const h=this.point,f=h.x,p=h.y,m=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),_=Math.sin(this.angle),b=f-Math.round(f)+y*m+_*g,x=p-Math.round(p)+y*g+_*m,w=new Float64Array(s);if(e.translate(w,w,[b>.5?b-1:b,x>.5?x-1:x,0]),this.alignedProjMatrix=w,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=e.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,o),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,o=[t,t,n];e.scale$2(o,o,i),e.scale$2(r,r,-1),e.multiply$2(r,r,o);const a=e.create();e.translate(a,a,r),e.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,i)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,e/this.worldSize*this._centerAltitude-n[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],i=t[2];let o=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(o=Math.min((n-r)/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,o),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,n=this._camera.forward(),{pitch:r,bearing:i}=this._camera.getPitchBearing(),o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-o)/Math.cos(r),a),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,n,s),this._pitch=e.clamp(r,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(i,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(t){let n=0,r=e.GLOBE_ZOOM_THRESHOLD_MAX,i=0,o=1/0;for(;r-n>1e-6&&r>n;){const e=n+.5*(r-n),a=this.tileSize*Math.pow(2,e),s=this.getCameraToCenterDistance(this.projection,e,a),l=this.scaleZoom(s/(t*this.tileSize)),u=Math.abs(e-l);u<o&&(o=u,i=e),e<l?n=e:r=e}return i}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,n){const r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),o=Math.min(t.y,n.y),a=Math.max(t.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.Point(r,o),new e.Point(i,a),new e.Point(r,a),new e.Point(i,o)],l=this.renderWorldCopies?-3:0,u=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const n=this.rayIntersectionCoordinate(t);if(n.x<l||n.y<0||n.x>u||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(t,n){const r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}getCameraPoint(){if("globe"===this.projection.name){const t=function([t,n,r],i){const o=[t,n,r,1];e.transformMat4$1(o,o,i);const a=o[3]=Math.max(o[3],1e-6);return o[0]/=a,o[1]/=a,o[2]/=a,o}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.Point(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}}getCameraToCenterDistance(e,t=this.zoom,n=this.worldSize){const r=qr(e,t,this.width,this.height,1024),i=e.pixelSpaceConversion(this.center.lat,n,r);return.5/Math.tan(.5*this._fov)*this.height*i}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function Yr(e,t){let n=!1,r=null;const i=()=>{r=null,n&&(e(),r=setTimeout(i,t),n=!1)};return()=>(n=!0,r||i(),r)}class Kr{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Yr(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const n=Jr(t);if(this._hashName){const t=this._hashName;let r=!1;const i=e.window.location.hash.slice(1).split("&").map((e=>{const i=e.split("=")[0];return i===t?(r=!0,`${i}=${n}`):e})).filter((e=>e));return r||i.push(`${t}=${n}`),`#${i.join("&")}`}return`#${n}`}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some((e=>isNaN(e)))){const n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}function Jr(e,t){const n=e.getCenter(),r=Math.round(100*e.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=e.getBearing(),u=e.getPitch();let c=t?`/${a}/${s}/${r}`:`${r}/${s}/${a}`;return(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+=`/${Math.round(u)}`),c}const Qr={linearity:.3,easing:e.bezier(0,0,.3,1)},ei=e.extend({deceleration:2500,maxSpeed:1400},Qr),ti=e.extend({deceleration:20,maxSpeed:1400},Qr),ni=e.extend({deceleration:1e3,maxSpeed:360},Qr),ri=e.extend({deceleration:1e3,maxSpeed:90},Qr);class ii{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,n=e.exported.now();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)n.zoom+=e.zoomDelta||0,n.bearing+=e.bearingDelta||0,n.pitch+=e.pitchDelta||0,e.panDelta&&n.pan._add(e.panDelta),e.around&&(n.around=e.around),e.pinchAround&&(n.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=ai(n.pan.mag(),r,e.extend({},ei,t||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,oi(i,o)}if(n.zoom){const e=ai(n.zoom,r,ti);i.zoom=this._map.transform.zoom+e.amount,oi(i,e)}if(n.bearing){const t=ai(n.bearing,r,ni);i.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),oi(i,t)}if(n.pitch){const e=ai(n.pitch,r,ri);i.pitch=this._map.transform.pitch+e.amount,oi(i,e)}if(i.zoom||i.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function oi(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function ai(t,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=e.clamp(t*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class si extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r,i={}){const o=p(n.getCanvasContainer(),r),a=n.unproject(o);super(t,e.extend({point:o,lngLat:a,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class li extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r){const i="touchend"===t?r.changedTouches:r.touches,o=m(n.getCanvasContainer(),i),a=o.map((e=>n.unproject(e))),s=o.reduce(((e,t,n,r)=>e.add(t.div(r.length))),new e.Point(0,0));super(t,{points:o,point:s,lngLats:a,lngLat:n.unproject(s),originalEvent:r}),this._defaultPrevented=!1}}class ui extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class ci{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new ui(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new si(e.type,this._map,e))}mouseup(e){this._map.fire(new si(e.type,this._map,e))}preclick(t){const n=e.extend({},t);n.type="preclick",this._map.fire(new si(n.type,this._map,n))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new si(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new si(e.type,this._map,e))}mouseover(e){this._map.fire(new si(e.type,this._map,e))}mouseout(e){this._map.fire(new si(e.type,this._map,e))}touchstart(e){return this._firePreventable(new li(e.type,this._map,e))}touchmove(e){this._map.fire(new li(e.type,this._map,e))}touchend(e){this._map.fire(new li(e.type,this._map,e))}touchcancel(e){this._map.fire(new li(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class di{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new si(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new si(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hi{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(c(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t,r=this._startPos,i=this._lastPos;if(!r||!i||i.equals(n)||!this._box&&n.dist(r)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=o("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const a=Math.min(r.x,n.x),s=Math.max(r.x,n.x),l=Math.min(r.y,n.y),u=Math.max(r.y,n.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${a}px,${l}px)`,this._box.style.width=s-a+"px",this._box.style.height=u-l+"px")}))}mouseupWindow(t,n){if(!this._active)return;const r=this._startPos,i=n;if(r&&0===t.button){if(this.reset(),f(),r.x!==i.x||r.y!==i.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),d(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}function fi(e,t){const n={};for(let r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}class pi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){const n=new e.Point(0,0);for(const e of t)n._add(e);return n.div(t.length)}(n),this.touches=fi(r,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const r=fi(n,t);for(const i in this.touches){const e=r[i];(!e||e.dist(this.touches[i])>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class mi{constructor(e){this.singleTap=new pi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const r=this.singleTap.touchend(e,t,n);if(r){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class gi{constructor(){this._zoomIn=new mi({numTouches:1,numTaps:2}),this._zoomOut=new mi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const r=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n);return r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yi={0:1,2:2};class vi{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const n=g(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}mousemoveWindow(e,t){const n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const n=yi[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}mouseupWindow(e){this._lastPoint&&g(e)===this._eventButton&&(this._moved&&f(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _i extends vi{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class bi extends vi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(e){e.preventDefault()}}class xi extends vi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(e){e.preventDefault()}}class wi{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(t,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,n,r)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,r){r.length>0&&(this._active=!0);const i=fi(r,n),o=new e.Point(0,0),a=new e.Point(0,0);let s=0;for(const e in i){const t=i[e],n=this._touches[e];n&&(o._add(t),a._add(t.sub(n)),s++,i[e]=t)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Ei{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,n){return{}}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){const r=this._firstTwoTouches;if(!r)return;e.preventDefault();const[i,o]=r,a=Si(n,t,i),s=Si(n,t,o);if(!a||!s)return;const l=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],l,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,o=Si(n,t,r),a=Si(n,t,i);o&&a||(this._active&&f(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Si(e,t,n){for(let r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Ti(e,t){return Math.log(e/t)/Math.LN2}class Mi extends Ei{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Ti(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ti(this._distance,n),pinchAround:t}}}function ki(e,t){return 180*e.angleWith(t)/Math.PI}class Ci extends Ei{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const n=this._vector;if(this._vector=e[0].sub(e[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ki(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;const r=ki(e,n);return Math.abs(r)<t}}function Pi(e){return Math.abs(e.y)>Math.abs(e.x)}class Ai extends Ei{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,Pi(e[0].sub(e[1]))&&(this._valid=!1)}_move(t,n,r){const i=this._lastPoints;if(!i)return;const o=t[0].sub(i[0]),a=t[1].sub(i[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(o,a,r.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(o.y+a.y)/2*-.5})}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,i=t.mag()>=2;if(!r&&!i)return;if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Pi(e)&&Pi(t)&&o}}const Oi={panStep:100,bearingStep:15,pitchStep:10};class Ii{constructor(){const e=Oi;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Li,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Li(e){return e*(2-e)}const Di=4.000244140625;class Ri{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const r=e.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Di==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=p(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Di?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==r&&(r=1/r);const i=n(),o=Math.pow(2,i),a="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=i,this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:n(),i=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&i&&o){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),n=o(t);a=e.number(i,r,n),t<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=e.ease;if(this._prevEase){const t=this._prevEase,r=(e.exported.now()-t.start)/t.duration,i=t.easing(r+.01)-t.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=e.bezier(o,a,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Ni{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class zi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ji{constructor(){this._tap=new mi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bi{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fi{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ui{constructor(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Gi=e=>e.zoom||e.drag||e.pitch||e.rotate;class Hi extends e.Event{}class Vi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,n){const r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const n=e.scale$2([],t,this.radius);if(n[2]>0){const t=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),r=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),i=e.add([],n,e.scale$2([],e.sub([],e.add([],r,t),n),2));n[0]=i[0],n[1]=i[1]}return n}}function qi(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class $i{constructor(t,n){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ii(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Vi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[i,o,a]of this._listeners)i.addEventListener(o,i===e.window.document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[t,n,r]of this._listeners)t.removeEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new ci(t,e));const r=t.boxZoom=new hi(t,e);this._add("boxZoom",r);const i=new gi,o=new zi;t.doubleClickZoom=new Ni(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new ji;this._add("tapDragZoom",a);const s=t.touchPitch=new Ai(t);this._add("touchPitch",s);const l=new bi(e),u=new xi(e);t.dragRotate=new Fi(e,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);const c=new _i(e),d=new wi(t,e);t.dragPan=new Bi(n,c,d),this._add("mousePan",c),this._add("touchPan",d,["touchZoom","touchRotate"]);const h=new Ci,f=new Mi;t.touchZoomRotate=new Ui(n,f,h,a),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),this._add("blockableMapEvent",new di(t));const p=t.scrollZoom=new Ri(t,this);this._add("scrollZoom",p,["mousePan"]);const m=t.keyboard=new Ii;this._add("keyboard",m);for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[g]&&t[g].enable(e[g])}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Gi(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,t,n){for(const r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}handleEvent(e,t){this._updatingCamera=!0;const n="renderFrame"===e.type,r=n?void 0:e,i={needsRenderFrame:!1},o={},a={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?m(this._el,s):n?void 0:p(this._el,e);for(const{handlerName:d,handler:h,allowed:f}of this._handlers){if(!h.isEnabled())continue;let n;this._blockedByActive(a,f,d)?h.reset():h[t||e.type]&&(n=h[t||e.type](e,l,s),this.mergeHandlerResult(i,o,n,d,r),n&&n.needsRenderFrame&&this._triggerRenderFrame()),(n||h.isActive())&&(a[d]=h)}const u={};for(const d in this._previousActiveHandlers)a[d]||(u[d]=r);this._previousActiveHandlers=a,(Object.keys(u).length||qi(i))&&(this._changes.push([i,o,u]),this._triggerRenderFrame()),(Object.keys(a).length||qi(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:c}=i;c&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],c(this._map))}mergeHandlerResult(t,n,r,i,o){if(!r)return;e.extend(t,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const t={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(i.panDelta)),i.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(t.around=i.around),void 0!==i.aroundCoord&&(t.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(t.pinchAround=i.pinchAround),i.noInertia&&(t.noInertia=i.noInertia),e.extend(n,o),e.extend(r,a);this._updateMapTransform(t,n,r),this._changes=[]}_updateMapTransform(t,n,r){const i=this._map,o=i.transform,a=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!qi(t)){const e=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",e!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&i._stop(!0),!qi(t))return void this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:u,pitchDelta:c,around:d,aroundCoord:h,pinchAround:f}=t;o._isCameraConstrained&&(l>0&&(l=0),o._isCameraConstrained=!1),void 0!==f&&(d=f),(l||(e=>n[e]&&!this._eventsInProgress[e])("drag"))&&d&&(this._dragOrigin=a(o.pointCoordinate3D(d)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),d=d||i.transform.centerPoint,u&&(o.bearing+=u),c&&(o.pitch+=c),o._updateCameraState();const p=[0,0,0];if(s)if("mercator"===o.projection.name){const e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(d).dir),t=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(d.sub(s)).dir);p[0]=t[0]-e[0],p[1]=t[1]-e[1]}else{const t=o.pointCoordinate(d);if("globe"===o.projection.name){s=s.rotate(-o.angle);const n=o._pixelsPerMercatorPixel/o.worldSize;p[0]=-s.x*e.mercatorScale(e.latFromMercatorY(t.y))*n,p[1]=-s.y*e.mercatorScale(o.center.lat)*n}else{const e=o.pointCoordinate(d.sub(s));t&&e&&(p[0]=e.x-t.x,p[1]=e.y-t.y)}}const m=o.zoom,g=[0,0,0];if(l){const t=a(h||o.pointCoordinate3D(d)),n={dir:e.normalize([],e.sub([],t,o._camera.position))};if(n.dir[2]<0){const r=o.zoomDeltaToMovement(t,l);e.scale$2(g,n.dir,r)}}const y=e.add(p,p,g);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}_fireEvents(t,n,r){const i=Gi(this._eventsInProgress),o=Gi(t),a={};for(const e in t){const{originalEvent:n}=t[e];this._eventsInProgress[e]||(a[`${e}start`]=n),this._eventsInProgress[e]=t[e]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in a)this._fireEvent(e,a[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:n}=t[e];this._fireEvent(e,n)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:r}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=n[t]||r,s[`${e}end`]=l)}for(const e in s)this._fireEvent(e,s[e]);const u=Gi(this._eventsInProgress);if(r&&(i||o)&&!u){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(n(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{this._frameId=void 0,this.handleEvent(new Hi("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Wi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Zi extends e.Evented{constructor(t,n){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=n.bearingSnap,this._respectPrefersReducedMotion=!1!==n.respectPrefersReducedMotion,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,n,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}panTo(t,n,r){return this.easeTo(e.extend({center:t},n),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}resetNorth(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,n){t=e.LngLatBounds.convert(t);const r=n&&n.bearing||0,i=n&&n.pitch||0,o=t.getNorthWest(),a=t.getSouthEast();return this._cameraForBounds(this.transform,o,a,r,i,n)}_extendCameraOptions(t){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(n,t.padding),t}_minimumAABBFrustumDistance(e,t){const n=t.max[0]-t.min[0],r=t.max[1]-t.min[1];return n/r>e.aspect?n/(2*Math.tan(.5*e.fovX)*e.aspect):r/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,n,r,i,o,a){const s=t.clone(),l=this._extendCameraOptions(a);s.bearing=i,s.pitch=o;const u=e.LngLat.convert(n),c=e.LngLat.convert(r),d=.5*(u.lat+c.lat),h=.5*(u.lng+c.lng),f=e.latLngToECEF(d,h),p=e.normalize([],f),m=e.normalize([],e.cross([],p,[0,1,0])),g=e.cross([],m,p),y=[m[0],m[1],m[2],0,g[0],g[1],g[2],0,p[0],p[1],p[2],0,0,0,0,1],v=[f,e.latLngToECEF(u.lat,u.lng),e.latLngToECEF(c.lat,u.lng),e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(u.lat,c.lng),e.latLngToECEF(d,u.lng),e.latLngToECEF(d,c.lng),e.latLngToECEF(u.lat,h),e.latLngToECEF(c.lat,h)];let _=e.Aabb.fromPoints(v.map((t=>[e.dot(m,t),e.dot(g,t),e.dot(p,t)])));const b=e.transformMat4([],_.center,y);0===e.squaredLength(b)&&e.set(b,0,0,1),e.normalize(b,b),e.scale$2(b,b,e.GLOBE_RADIUS),s.center=e.ecefToLatLng(b);const x=s.getWorldToCameraMatrix(),w=e.invert(new Float64Array(16),x);_=e.Aabb.applyTransform(_,e.multiply([],x,y)),e.transformMat4(b,b,x);const E=.5*(_.max[2]-_.min[2]),S=this._minimumAABBFrustumDistance(s,_),T=e.scale$2([],[0,0,1],E),M=e.add(T,b,T),k=S+(0===s.pitch?0:e.distance(b,M)),C=s.globeCenterInViewSpace,P=e.sub([],b,[C[0],C[1],C[2]]);e.normalize(P,P),e.scale$2(P,P,k);const A=e.add([],b,P);e.transformMat4(A,A,w);const O=e.earthRadius/e.GLOBE_RADIUS,I=e.length(A),L=e.mercatorZfromAltitude(Math.max(I*O-e.earthRadius,Number.EPSILON),0),D=Math.min(s.zoomFromMercatorZAdjusted(L),l.maxZoom);return D>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=D,this._cameraForBounds(s,n,r,i,o,a)):{center:s.center,zoom:D,bearing:i,pitch:o}}queryTerrainElevation(t,n){const r=this.transform.elevation;return r?(n=e.extend({},{exaggerated:!0},n),r.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}_cameraForBounds(t,n,r,i,o,a){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,n,r,i,o,a);const s=t.clone(),l=this._extendCameraOptions(a),u=s.padding;s.bearing=i,s.pitch=o;const c=e.LngLat.convert(n),d=e.LngLat.convert(r),h=new e.LngLat(c.lng,d.lat),f=new e.LngLat(d.lng,c.lat),p=s.project(c),m=s.project(d),g=this.queryTerrainElevation(c),y=this.queryTerrainElevation(d),v=this.queryTerrainElevation(h),_=this.queryTerrainElevation(f),b=[[p.x,p.y,Math.min(g||0,y||0,v||0,_||0)],[m.x,m.y,Math.max(g||0,y||0,v||0,_||0)]];let x=e.Aabb.fromPoints(b);const w=s.getWorldToCameraMatrix(),E=e.invert(new Float64Array(16),w);x=e.Aabb.applyTransform(x,w);const S=e.sub([],x.max,x.min),T=u.left||0,M=u.right||0,k=u.bottom||0,C=u.top||0,{left:P,right:A,top:O,bottom:I}=l.padding,L=.5*(T+M),D=.5*(C+k),R=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(T+M+P+A))/S[0],(s.height-(k+C+I+O))/S[1])),l.maxZoom),N=s.scale/s.zoomScale(R);x=new e.Aabb([x.min[0]-(P+L)*N,x.min[1]-(I+D)*N,x.min[2]],[x.max[0]+(A+L)*N,x.max[1]+(O+D)*N,x.max[2]]);const z=.5*S[2],j=this._minimumAABBFrustumDistance(s,x),B=[0,0,1,0];e.transformMat4$1(B,B,w),e.normalize$2(B,B);const F=e.scale$2([],B,j+z),U=e.add([],x.center,F),G=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new e.Point(l.offset.x,l.offset.y):e.Point.convert(l.offset)).rotate(-e.degToRad(i));x.center[0]-=G.x*N,x.center[1]+=G.y*N,e.transformMat4(x.center,x.center,E),e.transformMat4(U,U,E);const H=[x.center[0],x.center[1],U[2]*s.pixelsPerMeter];e.scale$2(H,H,1/s.worldSize);const V=e.lngFromMercatorX(H[0]),q=e.latFromMercatorY(H[1]),$=Math.min(s._zoomFromMercatorZ(H[2]),l.maxZoom),W=new e.LngLat(V,q);return s.mercatorFromTransition&&$<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=$,this._cameraForBounds(s,n,r,i,o,a)):{center:W,zoom:$,bearing:i,pitch:o}}fitBounds(e,t,n){const r=this.cameraForBounds(e,t);return this._fitInternal(r,t,n)}fitScreenCoordinates(t,n,r,i,o){const a=e.Point.convert(t),s=e.Point.convert(n),l=new e.Point(Math.min(a.x,s.x),Math.min(a.y,s.y)),u=new e.Point(Math.max(a.x,s.x),Math.max(a.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(a,s))return this;const c=this.transform.pointLocation3D(l),d=this.transform.pointLocation3D(u),h=this.transform.pointLocation3D(new e.Point(l.x,u.y)),f=this.transform.pointLocation3D(new e.Point(u.x,l.y)),p=[Math.min(c.lng,d.lng,h.lng,f.lng),Math.min(c.lat,d.lat,h.lat,f.lat)],m=[Math.max(c.lng,d.lng,h.lng,f.lng),Math.max(c.lat,d.lat,h.lat,f.lat)],g=i&&i.pitch?i.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,p,m,r,g,i);return this._fitInternal(y,i,o)}_fitInternal(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(t,n){this.stop();const r=t.preloadOnly?this.transform.clone():this.transform;let i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),t.preloadOnly?(this._preloadTiles(r),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Wi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,n){const r=this.transform;if(!r.projection.supportsFreeCamera)return e.warnOnce(Wi),this;this.stop();const i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(t);const s=i!==r.zoom,l=o!==r.pitch,u=a!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),u&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),l&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}easeTo(t,n){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||this._prefersReducedMotion(t))&&(t.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:i,u="bearing"in t?this._normalizeBearing(t.bearing,o):o,c="pitch"in t?+t.pitch:a,d="padding"in t?t.padding:r.padding,h=e.Point.convert(t.offset);let f,p,m;if("globe"===r.projection.name){const n=e.MercatorCoordinate.fromLngLat(r.center),i=h.rotate(-r.angle);n.x+=i.x/r.worldSize,n.y+=i.y/r.worldSize;const o=n.toLngLat(),a=e.LngLat.convert(t.center||o);this._normalizeCenter(a),f=r.centerPoint.add(i),p=new e.Point(n.x,n.y).mult(r.worldSize),m=new e.Point(e.mercatorXfromLng(a.lng),e.mercatorYfromLat(a.lat)).mult(r.worldSize).sub(p)}else{f=r.centerPoint.add(h);const n=r.pointLocation(f),i=e.LngLat.convert(t.center||n);this._normalizeCenter(i),p=r.project(n),m=r.project(i).sub(p)}const g=r.zoomScale(l-i);let y,v;t.around&&(y=e.LngLat.convert(t.around),v=r.locationPoint(y));const _=this._zooming||l!==i,b=this._rotating||o!==u,x=this._pitching||c!==a,w=!r.isPaddingEqual(d),E=r=>E=>{if(_&&(r.zoom=e.number(i,l,E)),b&&(r.bearing=e.number(o,u,E)),x&&(r.pitch=e.number(a,c,E)),w&&(r.interpolatePadding(s,d,E),f=r.centerPoint.add(h)),y)r.setLocationAtPoint(y,v);else{const e=r.zoomScale(r.zoom-i),t=l>i?Math.min(2,g):Math.max(.5,g),n=Math.pow(t,1-E),o=r.unproject(p.add(m.mult(E*n)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,f)}return t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(E,t.duration,r);return this._preloadTiles(e),this}const S={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=_,this._rotating=b,this._pitching=x,this._padding=w,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,S),this._ease(E(r),(e=>{r.recenterOnTerrain(),this._afterEase(n,e)}),t),this}_prepareEase(t,n,r={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,n){if(this._prefersReducedMotion(t)){const r=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,r.minZoom,r.maxZoom):i,u="bearing"in t?this._normalizeBearing(t.bearing,o):o,c="pitch"in t?+t.pitch:a,d="padding"in t?t.padding:r.padding,h=r.zoomScale(l-i),f=e.Point.convert(t.offset);let p=r.centerPoint.add(f);const m=r.pointLocation(p),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const y=r.project(m),v=r.project(g).sub(y);let _=t.curve;const b=Math.max(r.width,r.height),x=b/h,w=v.mag();if("minZoom"in t){const n=e.clamp(Math.min(t.minZoom,i,l),r.minZoom,r.maxZoom),o=b/r.zoomScale(n-i);_=Math.sqrt(o/w*2)}const E=_*_;function S(e){const t=(x*x-b*b+(e?-1:1)*E*E*w*w)/(2*(e?x:b)*E*w);return Math.log(Math.sqrt(t*t+1)-t)}function T(e){return(Math.exp(e)-Math.exp(-e))/2}function M(e){return(Math.exp(e)+Math.exp(-e))/2}const k=S(0);let C=function(e){return M(k)/M(k+_*e)},P=function(e){return b*((M(k)*(T(t=k+_*e)/M(t))-T(k))/E)/w;var t},A=(S(1)-k)/_;if(Math.abs(w)<1e-6||!isFinite(A)){if(Math.abs(b-x)<1e-6)return this.easeTo(t,n);const e=x<b?-1:1;A=Math.abs(Math.log(x/b))/_,P=function(){return 0},C=function(t){return Math.exp(e*_*t)}}t.duration="duration"in t?+t.duration:1e3*A/("screenSpeed"in t?+t.screenSpeed/_:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const O=o!==u,I=c!==a,L=!r.isPaddingEqual(d),D=r=>h=>{const m=h*A,_=1/C(m);r.zoom=1===h?l:i+r.scaleZoom(_),O&&(r.bearing=e.number(o,u,h)),I&&(r.pitch=e.number(a,c,h)),L&&(r.interpolatePadding(s,d,h),p=r.centerPoint.add(f));const b=1===h?g:r.unproject(y.add(v.mult(P(m))).mult(_));return r.setLocationAtPoint(r.renderWorldCopies?b.wrap():b,p),r._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(D,t.duration,r);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=O,this._pitching=I,this._padding=L,this._prepareEase(n,!1),this._ease(D(r),(()=>this._afterEase(n)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,n){t=e.wrap(t,-180,180);const r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}_prefersReducedMotion(t){return this._respectPrefersReducedMotion&&e.exported.prefersReducedMotion&&!(t&&t.essential)}_emulate(e,t,n){const r=Math.ceil(15*t/1e3),i=[],o=e(n.clone());for(let a=0;a<=r;a++){const e=o(a/r);i.push(e.clone())}return i}}class Xi{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o("button","mapboxgl-ctrl-attrib-button",this._container),o("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString(`AttributionControl.${t}`);e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const r=n.reduce(((e,t,r)=>(t.value&&(e+=`${t.key}=${t.value}${r<n.length-1?"&":""}`),e)),"?");t.href=`${e.config.FEEDBACK_URL}/${r}#${Jr(this._map,!0)}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const r in t){const n=t[r];if(n.used){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,n)=>{for(let r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Yi{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=o("div","mapboxgl-ctrl");const t=o("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class Ki{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const r of n)if(r.id===e)return void(r.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ji(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){const i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint(t).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<a)?t=i:r.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-r.center.lng)<a)&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){const e=r.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}const Qi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class eo extends e.Evented{constructor(t,n){if(super(),(t instanceof e.window.HTMLElement||n)&&(t=e.extend({element:t},n)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=o("div");const n=41,r=27,i=a("svg",{display:"block",height:n*this._scale+"px",width:r*this._scale+"px",viewBox:`0 0 ${r} ${n}`},this._element),s=a("radialGradient",{id:"shadowGradient"},a("defs",{},i));a("stop",{offset:"10%","stop-opacity":.4},s),a("stop",{offset:"100%","stop-opacity":.05},s),a("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),a("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),a("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),a("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=e.Point.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()}));const r=this._element.classList;for(const e in Qi)r.remove(`mapboxgl-marker-anchor-${e}`);r.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return!1;const n=e.unproject(t),r=e.getFreeCameraOptions();if(!r.position)return!1;const i=r.position.toLngLat();return i.distanceTo(n)<.9*i.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const n=this._pos;if(!n||n.x<0||n.x>t.transform.width||n.y<0||n.y>t.transform.height)return void this._clearFadeTimer();const r=t.unproject(n);let i;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?i=0:(i=1-t._queryFogOpacity(r),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(i*=this._occludedOpacity)),this._element.style.opacity=`${i}`,this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${e.x}px,${e.y}px)\n            ${Qi[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${t.x}px,${t.y}px)\n        `}_calculateXYTransform(){const t=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!t||"map"!==r)return"";if(!n._showingGlobe()){const e=n.getPitch();return e?`rotateX(${e}deg)`:""}const i=e.radToDeg(e.globeTiltAtLngLat(n.transform,this._lngLat)),o=t.sub(e.globeCenterToScreenPoint(n.transform)),a=Math.abs(o.x)+Math.abs(o.y);if(0===a)return"";const s=i/a;return`rotateX(${-o.y*s}deg) rotateY(${o.x*s}deg)`}_calculateZTransform(){const t=this._pos,n=this._map;if(!n||!t)return"";let r=0;const i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){const t=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),i=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);r=e.radToDeg(Math.atan2(i.y,i.x))-90}else r=-n.getBearing();else if("horizon"===i){const i=e.smoothstep(4,6,n.getZoom()),o=e.globeCenterToScreenPoint(n.transform);o.y+=i*n.transform.height;const a=t.sub(o),s=e.radToDeg(Math.atan2(a.y,a.x));r=(s>90?s-270:s+90)*(1-i)}return r+=this._rotation,r?`rotateZ(${r}deg)`:""}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=Ji(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),n._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(t){return this._offset=e.Point.convert(t),this._update(),this}_onMove(t){const n=this._map;if(!n)return;const r=this._pointerdownPos,i=this._positionDelta;if(r&&i){if(!this._isDragging){const e=this._clickTolerance||n._clickTolerance;if(t.point.dist(r)<e)return;this._isDragging=!0}this._pos=t.point.sub(i),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map,n=this._pos;t&&n&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(n),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const to={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},no=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ro(t=new e.Point(0,0),n="bottom"){if("number"==typeof t){const r=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.Point(0,t);case"top-left":return new e.Point(r,r);case"top-right":return new e.Point(-r,r);case"bottom":return new e.Point(0,-t);case"bottom-left":return new e.Point(r,-r);case"bottom-right":return new e.Point(-r,-r);case"left":return new e.Point(t,0);case"right":return new e.Point(-t,0)}return new e.Point(0,0)}return t instanceof e.Point||Array.isArray(t)?e.Point.convert(t):e.Point.convert(t[n]||[0,0])}class io{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}const oo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ao={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},so={showCompass:!0,showZoom:!0,visualizePitch:!1};class lo{constructor(t,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new bi({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new xi({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),c()}move(e,t){const n=this.map,r=this.mouseRotate.mousemoveWindow(e,t),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){const r=this.mousePitch.mousemoveWindow(e,t),i=r&&r.pitchDelta;i&&n.setPitch(n.getPitch()+i)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){d(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),p(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,p(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=m(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const uo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},co={maxWidth:100,unit:"metric"},ho={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},fo={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Zi{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},ao,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Xr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._useWebGL2=t.useWebGL2,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new Ki,this._domRenderTaskQueue=new Ki,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},oo,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new io(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new $i(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Kr("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Xi({customAttribution:t.customAttribution})),this._logoControl=new Yi,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))}))}_getMapId(){return this._mapId}addControl(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=t.onAdd(this);this._controls.push(t);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((t=>"auto"===t?e.window.navigator.language:t)):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const n of this._controls)n._setLanguage&&n._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,n=t.projection.name;let r;"globe"===n&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),r=!0):"mercator"===n&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:"globe"}),r=!0),r&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let n;if(n="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.Point.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e))),a=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];a.length?r||(r=!0,n.call(this,new si(e,this,i.originalEvent,{features:a}))):r=!1},o=()=>{r=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===e||"mouseout"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e)));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?r=!0:r&&(r=!1,n.call(this,new si(e,this,i.originalEvent)))},o=t=>{r&&(r=!1,n.call(this,new si(e,this,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=e=>{const r=t.filter((e=>this.getLayer(e))),i=r.length?this.queryRenderedFeatures(e.point,{layers:r}):[];i.length&&(e.features=i,n.call(this,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:{[e]:r}}}}on(e,t,n){if(void 0===n)return super.on(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r);for(const i in r.delegates)this.on(i,r.delegates[i]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);for(const i in r.delegates)this.once(i,r.delegates[i]);return this}off(e,t,n){if(void 0===n)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const r=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[e]:void 0;return i&&(e=>{for(let i=0;i<e.length;i++){const o=e[i];if(o.listener===n&&r(o.layers,t)){for(const e in o.delegates)this.off(e,o.delegates[e]);return e.splice(i,1),this}}})(i),this}queryRenderedFeatures(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}isPointOnSurface(t){const{name:n}=this.transform.projection;return"globe"!==n&&"mercator"!==n&&e.warnOnce(`${n} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(e.Point.convert(t))}setStyle(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new Kt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Kt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,n){if("string"==typeof t){const r=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(r,e.ResourceType.Style);e.getJSON(i,((t,r)=>{t?this.fire(new e.ErrorEvent(t)):r&&this._updateDiff(r,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}_updateDiff(t,n){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(t,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,n,{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){const{width:l,height:u,data:c}=e.exported.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:u},c),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:u}=n,c=n;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:u},new Uint8Array(c.data)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:c}),c.onAdd&&c.onAdd(this,t)}}updateImage(t,n){const r=this.style.getImage(t);if(!r)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,{width:o,height:a}=i;void 0!==o&&void 0!==a?o===r.data.width&&a===r.data.height?(r.data.replace(i.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,r)):this.fire(new e.ErrorEvent(new Error(`The width and height of the updated image (${o}, ${a})\n                must be that same as the previous version of the image\n                (${r.data.width}, ${r.data.height})`))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,r)=>{n(t,r instanceof e.window.HTMLImageElement?e.exported.getImageData(r):r)}))}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t,n={}){return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n,r={}){return this.style.setPaintProperty(e,t,n,r),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n,r={}){return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let r,i,o,a=this._container;for(;a&&(!i||!o);){const t=e.window.getComputedStyle(a).transform;t&&"none"!==t&&(r=t.match(/matrix.*\((.+)\)/)[1].split(", "),r[0]&&"0"!==r[0]&&"1"!==r[0]&&(i=r[0]),r[3]&&"0"!==r[3]&&"1"!==r[3]&&(o=r[3])),a=a.parentElement}this._containerWidth=i?Math.abs(t/i):t,this._containerHeight=o?Math.abs(n/o):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=o("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=o("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=o("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=o("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{r[e]=o("div",`mapboxgl-ctrl-${e}`,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,n){const r=e.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(t),this._canvas.height=r*Math.ceil(n),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${n}px`}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const t=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._useWebGL2&&this._canvas.getContext("webgl2",t),i=r||this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);i?(this._useWebGL2&&!r&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(i,!0),this.painter=new Nr(i,this.transform,!!r),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(i)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let n;const r=this.painter.context.extTimerQuery,i=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,n=this.transform.pitch,r=e.exported.now(),i=new e.EvaluationParameters(t,{now:r,fadeDuration:o,pitch:n,transition:this.style.getTransition()});this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let a=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),a=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):a=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const t=e.exported.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout((()=>{const o=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:o})),e.window.performance.mark("frame-gpu",{startTime:i,detail:{gpuTime:o}})}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:n}))}),50)}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const n=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:n}))}),50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty||a;if(s||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(a=this._updateAverageElevation(i,!0)),a)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(e,t=!1){const n=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let r=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(r)?r=0:this._averageElevationLastSampledAt=e;const o=Math.abs(t-r);if(o>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(r),n(r);this._averageElevation.easeTo(r,e,300)}else if(o>1e-4)return this._averageElevation.jumpTo(r),n(r)}return!!this._averageElevation.isEasing(e)&&n(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof Yi&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e)}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}_canvasPixelComparison(e,t,n){let r=n[1]-n[0];const i=e.length/4;for(let o=0;o<t.length;o++){const a=t[o];let s=0;for(let t=0;t<a.length;t+=4)a[t]===e[t]&&a[t+1]===e[t+1]&&a[t+2]===e[t+2]&&a[t+3]===e[t+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_preloadTiles(t){const n=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(n,((e,n)=>e._preloadTiles(t,n)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}_setCacheLimits(t,n){e.setCacheLimits(t,n)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},so,t),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>{this._map&&this._map.zoomIn({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>{this._map&&this._map.zoomOut({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=o("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),n=t===e.getMaxZoom(),r=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lo(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const n=o("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}_setButtonTitle(e,t){if(!this._map)return;const n=this._map._getUIString(`NavigationControl.${t}`);e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},uo,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Yr(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(t){const n=(e=!!this.options.geolocation)=>{this._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>n("denied"!==e.state))).catch((()=>n())):n()}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(t){if(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map.transform,n=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width=`${r}px`,this._circleElement.style.height=`${r}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=o("button","mapboxgl-ctrl-geolocate",this._container),o("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o("div","mapboxgl-user-location"),this._dotElement.appendChild(o("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new eo({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new eo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})).catch(console.error):t()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Xi,ScaleControl:class{constructor(t){this.options=e.extend({},co,t),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(e){return!1}}(),e.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,n=t._containerHeight/2,r=t._containerWidth/2-e/2,i=t.unproject([r,n]),o=t.unproject([r+e,n]),a=i.distanceTo(o);if("imperial"===this.options.unit){const t=3.2808*a;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot")}else"nautical"===this.options.unit?this._setScale(e,a/1852,"nautical-mile"):a>=1e3?this._setScale(e,a/1e3,"kilometer"):this._setScale(e,a,"meter")}_setScale(e,t,n){this._map._requestDomTask((()=>{const r=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(t),i=r/t;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==n?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:n}).format(r):`${r}&nbsp;${ho[n]}`,this._container.style.width=e*i+"px"}))}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=o("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(to),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const n=e.window.document.createDocumentFragment(),r=e.window.document.createElement("body");let i;for(r.innerHTML=t;i=r.firstChild,i;)n.appendChild(i);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=o("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=o("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,n=this._container,r=this._pos;if(!t||!n||!r)return"bottom";const i=n.offsetWidth,o=n.offsetHeight,a=r.x<i/2,s=r.x>t.transform.width-i/2;if(r.y+e<o)return a?"top-left":s?"top-right":"top";if(r.y>t.transform.height-o){if(a)return"bottom-left";if(s)return"bottom-right"}return a?"left":s?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(t){const n=this._map,r=this._content;if(!n||!this._lngLat&&!this._trackPointer||!r)return;let i=this._container;if(i||(i=this._container=o("div","mapboxgl-popup",n.getContainer()),this._tip=o("div","mapboxgl-popup-tip",i),i.appendChild(r)),this.options.maxWidth&&i.style.maxWidth!==this.options.maxWidth&&(i.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ji(this._lngLat,this._pos,n.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:n.project(this._lngLat),r=ro(this.options.offset),i=this._anchor=this._getAnchor(r.y),o=ro(this.options.offset,i),a=e.add(o).round();n._requestDomTask((()=>{this._container&&i&&(this._container.style.transform=`${Qi[i]} translate(${a.x}px,${a.y}px)`)}))}if(!this._marker&&n._showingGlobe()){const t=e.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(t)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(no);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity=`${e}`),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:eo,Style:Kt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Ur,Evented:e.Evented,config:e.config,prewarm:function(){Be().acquire(Ne)},clearPrewarmedResources:function(){const e=je;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Ne),je=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return ze.workerCount},set workerCount(e){ze.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return fo})),n}()},27418:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},32676:function(e){e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r=function(){function e(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return e}();function i(e,t){return e>t?1:e<t?-1:0}function o(e,t,n){for(var i=new r(null,null),o=i,a=i;;){var s=n(e,t.key);if(s<0){if(null===t.left)break;if(n(e,t.left.key)<0){var l=t.left;if(t.left=l.right,l.right=t,null===(t=l).left)break}a.left=t,a=t,t=t.left}else{if(!(s>0))break;if(null===t.right)break;if(n(e,t.right.key)>0&&(l=t.right,t.right=l.left,l.left=t,null===(t=l).right))break;o.right=t,o=t,t=t.right}}return o.right=t.left,a.left=t.right,t.left=i.right,t.right=i.left,t}function a(e,t,n,i){var a=new r(e,t);if(null===n)return a.left=a.right=null,a;var s=i(e,(n=o(e,n,i)).key);return s<0?(a.left=n.left,a.right=n,n.left=null):s>=0&&(a.right=n.right,a.left=n,n.right=null),a}function s(e,t,n){var r=null,i=null;if(t){var a=n((t=o(e,t,n)).key,e);0===a?(r=t.left,i=t.right):a<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function l(e,t,n){return null===t?e:(null===e||((t=o(e.key,t,n)).left=e),t)}function u(e,t,n,r,i){if(e){r(t+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(e)+"\n");var o=t+(n?"    ":"\u2502   ");e.left&&u(e.left,o,!1,r,i),e.right&&u(e.right,o,!0,r,i)}}var c=function(){function e(e){void 0===e&&(e=i),this._root=null,this._size=0,this._comparator=e}return e.prototype.insert=function(e,t){return this._size++,this._root=a(e,t,this._root,this._comparator)},e.prototype.add=function(e,t){var n=new r(e,t);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,a=o(e,this._root,i),s=i(e,a.key);return 0===s?this._root=a:(s<0?(n.left=a.left,n.right=a,a.left=null):s>0&&(n.right=a.right,n.left=a,a.right=null),this._size++,this._root=n),this._root},e.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},e.prototype._remove=function(e,t,n){var r;return null===t?null:0===n(e,(t=o(e,t,n)).key)?(null===t.left?r=t.right:(r=o(e,t.left,n)).right=t.right,this._size--,r):t},e.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=o(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},e.prototype.findStatic=function(e){for(var t=this._root,n=this._comparator;t;){var r=n(e,t.key);if(0===r)return t;t=r<0?t.left:t.right}return null},e.prototype.find=function(e){return this._root&&(this._root=o(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},e.prototype.contains=function(e){for(var t=this._root,n=this._comparator;t;){var r=n(e,t.key);if(0===r)return!0;t=r<0?t.left:t.right}return!1},e.prototype.forEach=function(e,t){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),e.call(t,n),n=n.right):i=!0;return this},e.prototype.range=function(e,t,n,r){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,t)>0)break;if(o(a.key,e)>=0&&n.call(r,a))return this;a=a.right}return this},e.prototype.keys=function(){var e=[];return this.forEach((function(t){var n=t.key;return e.push(n)})),e},e.prototype.values=function(){var e=[];return this.forEach((function(t){var n=t.data;return e.push(n)})),e},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},e.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},e.prototype.at=function(e){for(var t=this._root,n=!1,r=0,i=[];!n;)if(t)i.push(t),t=t.left;else if(i.length>0){if(t=i.pop(),r===e)return t;r++,t=t.right}else n=!0;return null},e.prototype.next=function(e){var t=this._root,n=null;if(e.right){for(n=e.right;n.left;)n=n.left;return n}for(var r=this._comparator;t;){var i=r(e.key,t.key);if(0===i)break;i<0?(n=t,t=t.left):t=t.right}return n},e.prototype.prev=function(e){var t=this._root,n=null;if(null!==e.left){for(n=e.left;n.right;)n=n.right;return n}for(var r=this._comparator;t;){var i=r(e.key,t.key);if(0===i)break;i<0?t=t.left:(n=t,t=t.right)}return n},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return f(this._root)},e.prototype.load=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var r=e.length,i=this._comparator;if(n&&g(e,t,0,r-1,i),null===this._root)this._root=d(e,t,0,r),this._size=r;else{var o=m(this.toList(),h(e,t),i);r=this._size+r,this._root=p({head:o},0,r)}return this},e.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){void 0===e&&(e=function(e){return String(e.key)});var t=[];return u(this._root,"",!0,(function(e){return t.push(e)}),e),t.join("")},e.prototype.update=function(e,t,n){var r=this._comparator,i=s(e,this._root,r),o=i.left,u=i.right;r(e,t)<0?u=a(t,n,u,r):o=a(t,n,o,r),this._root=l(o,u,r)},e.prototype.split=function(e){return s(e,this._root,this._comparator)},e}();function d(e,t,n,i){var o=i-n;if(o>0){var a=n+Math.floor(o/2),s=e[a],l=t[a],u=new r(s,l);return u.left=d(e,t,n,a),u.right=d(e,t,a+1,i),u}return null}function h(e,t){for(var n=new r(null,null),i=n,o=0;o<e.length;o++)i=i.next=new r(e[o],t[o]);return i.next=null,n.next}function f(e){for(var t=e,n=[],i=!1,o=new r(null,null),a=o;!i;)t?(n.push(t),t=t.left):n.length>0?t=(t=a=a.next=n.pop()).right:i=!0;return a.next=null,o.next}function p(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),o=p(e,t,i),a=e.head;return a.left=o,e.head=e.head.next,a.right=p(e,i+1,n),a}return null}function m(e,t,n){for(var i=new r(null,null),o=i,a=e,s=t;null!==a&&null!==s;)n(a.key,s.key)<0?(o.next=a,a=a.next):(o.next=s,s=s.next),o=o.next;return null!==a?o.next=a:null!==s&&(o.next=s),i.next}function g(e,t,n,r,i){if(!(n>=r)){for(var o=e[n+r>>1],a=n-1,s=r+1;;){do{a++}while(i(e[a],o)<0);do{s--}while(i(e[s],o)>0);if(a>=s)break;var l=e[a];e[a]=e[s],e[s]=l,l=t[a],t[a]=t[s],t[s]=l}g(e,t,n,s,i),g(e,t,s+1,r,i)}}var y=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},v=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x;return{ll:{x:n,y:e.ll.y<t.ll.y?t.ll.y:e.ll.y},ur:{x:r,y:e.ur.y<t.ur.y?e.ur.y:t.ur.y}}},_=Number.EPSILON;void 0===_&&(_=Math.pow(2,-52));var b=_*_,x=function(e,t){if(-_<e&&e<_&&-_<t&&t<_)return 0;var n=e-t;return n*n<b*e*t?0:e<t?-1:1},w=function(){function t(){e(this,t),this.reset()}return n(t,[{key:"reset",value:function(){this.xRounder=new E,this.yRounder=new E}},{key:"round",value:function(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}]),t}(),E=function(){function t(){e(this,t),this.tree=new c,this.round(0)}return n(t,[{key:"round",value:function(e){var t=this.tree.add(e),n=this.tree.prev(t);if(null!==n&&0===x(t.key,n.key))return this.tree.remove(e),n.key;var r=this.tree.next(t);return null!==r&&0===x(t.key,r.key)?(this.tree.remove(e),r.key):e}}]),t}(),S=new w,T=function(e,t){return e.x*t.y-e.y*t.x},M=function(e,t){return e.x*t.x+e.y*t.y},k=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},o=T(r,i);return x(o,0)},C=function(e){return Math.sqrt(M(e,e))},P=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return T(i,r)/C(i)/C(r)},A=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return M(i,r)/C(i)/C(r)},O=function(e,t,n){return 0===t.y?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},I=function(e,t,n){return 0===t.x?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},L=function(e,t,n,r){if(0===t.x)return I(n,r,e.x);if(0===r.x)return I(e,t,n.x);if(0===t.y)return O(n,r,e.y);if(0===r.y)return O(e,t,n.y);var i=T(t,r);if(0==i)return null;var o={x:n.x-e.x,y:n.y-e.y},a=T(o,t)/i,s=T(o,r)/i;return{x:(e.x+s*t.x+(n.x+a*r.x))/2,y:(e.y+s*t.y+(n.y+a*r.y))/2}},D=function(){function t(n,r){e(this,t),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:N.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}}]),n(t,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var t=e.point.events,n=0,r=t.length;n<r;n++){var i=t[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,t=0;t<e;t++){var n=this.point.events[t];if(void 0===n.segment.consumedBy)for(var r=t+1;r<e;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],t=0,n=this.point.events.length;t<n;t++){var r=this.point.events[t];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}},{key:"getLeftmostComparator",value:function(e){var t=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:P(t.point,e.point,i.point),cosine:A(t.point,e.point,i.point)})};return function(e,t){n.has(e)||r(e),n.has(t)||r(t);var i=n.get(e),o=i.sine,a=i.cosine,s=n.get(t),l=s.sine,u=s.cosine;return o>=0&&l>=0?a<u?1:a>u?-1:0:o<0&&l<0?a<u?-1:a>u?1:0:l<o?-1:l>o?1:0}}}]),t}(),R=0,N=function(){function t(n,r,i,o){e(this,t),this.id=++R,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(t,null,[{key:"compare",value:function(e,t){var n=e.leftSE.point.x,r=t.leftSE.point.x,i=e.rightSE.point.x,o=t.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=e.leftSE.point.y,s=t.leftSE.point.y,l=e.rightSE.point.y,u=t.rightSE.point.y;if(n<r){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var c=e.comparePoint(t.leftSE.point);if(c<0)return 1;if(c>0)return-1;var d=t.comparePoint(e.rightSE.point);return 0!==d?d:-1}if(n>r){if(a<s&&a<u)return-1;if(a>s&&a>u)return 1;var h=t.comparePoint(e.leftSE.point);if(0!==h)return h;var f=e.comparePoint(t.rightSE.point);return f<0?1:f>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var p=t.comparePoint(e.rightSE.point);if(0!==p)return p}if(i>o){var m=e.comparePoint(t.rightSE.point);if(m<0)return 1;if(m>0)return-1}if(i!==o){var g=l-a,y=i-n,v=u-s,_=o-r;if(g>y&&v<_)return 1;if(g<y&&v>_)return-1}return i>o?1:i<o||l<u?-1:l>u?1:e.id<t.id?-1:e.id>t.id?1:0}}]),n(t,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var t=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(t.x===n.x)return e.x===t.x?0:e.x<t.x?1:-1;var i=(e.y-t.y)/r.y,o=t.x+i*r.x;if(e.x===o)return 0;var a=(e.x-t.x)/r.x,s=t.y+a*r.y;return e.y===s?0:e.y<s?-1:1}},{key:"getIntersection",value:function(e){var t=this.bbox(),n=e.bbox(),r=v(t,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,s=e.rightSE.point,l=y(t,a)&&0===this.comparePoint(a),u=y(n,i)&&0===e.comparePoint(i),c=y(t,s)&&0===this.comparePoint(s),d=y(n,o)&&0===e.comparePoint(o);if(u&&l)return d&&!c?o:!d&&c?s:null;if(u)return c&&i.x===s.x&&i.y===s.y?null:i;if(l)return d&&o.x===a.x&&o.y===a.y?null:a;if(d&&c)return null;if(d)return o;if(c)return s;var h=L(i,this.vector(),a,e.vector());return null===h?null:y(r,h)?S.round(h.x,h.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new D(e,!0),o=new D(e,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new t(i,a,this.rings.slice(),this.windings.slice());return D.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),D.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var t=0,n=this.windings.length;t<n;t++)this.windings[t]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,l=r.rings.length;s<l;s++){var u=r.rings[s],c=r.windings[s],d=n.rings.indexOf(u);-1===d?(n.rings.push(u),n.windings.push(c)):n.windings[d]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var t=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],l=t.indexOf(a);-1===l?(t.push(a),n.push(s)):n[l]+=s}for(var u=[],c=[],d=0,h=t.length;d<h;d++)if(0!==n[d]){var f=t[d],p=f.poly;if(-1===c.indexOf(p))if(f.isExterior)u.push(p);else{-1===c.indexOf(p)&&c.push(p);var m=u.indexOf(f.poly);-1!==m&&u.splice(m,1)}}for(var g=0,y=u.length;g<y;g++){var v=u[g].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch($.type){case"union":var n=0===e.length,r=0===t.length;this._isInResult=n!==r;break;case"intersection":var i,o;e.length<t.length?(i=e.length,o=t.length):(i=t.length,o=e.length),this._isInResult=o===$.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(e.length-t.length);this._isInResult=a%2===1;break;case"difference":var s=function(e){return 1===e.length&&e[0].isSubject};this._isInResult=s(e)!==s(t);break;default:throw new Error("Unrecognized operation type found ".concat($.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,a,s=D.comparePoints(e,n);if(s<0)i=e,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,a=-1}return new t(new D(i,!0),new D(o,!1),[r],[a])}}]),t}(),z=function(){function t(n,r,i){if(e(this,t),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=S.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,l=n.length;s<l;s++){if("number"!==typeof n[s][0]||"number"!==typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=S.round(n[s][0],n[s][1]);u.x===a.x&&u.y===a.y||(this.segments.push(N.fromRing(a,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),a=u)}o.x===a.x&&o.y===a.y||this.segments.push(N.fromRing(a,o,this))}return n(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.segments.length;t<n;t++){var r=this.segments[t];e.push(r.leftSE),e.push(r.rightSE)}return e}}]),t}(),j=function(){function t(n,r){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new z(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var a=new z(n[i],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return n(t,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),t=0,n=this.interiorRings.length;t<n;t++)for(var r=this.interiorRings[t].getSweepEvents(),i=0,o=r.length;i<o;i++)e.push(r[i]);return e}}]),t}(),B=function(){function t(n,r){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(s){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var a=new j(n[i],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return n(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++)for(var r=this.polys[t].getSweepEvents(),i=0,o=r.length;i<o;i++)e.push(r[i]);return e}}]),t}(),F=function(){function t(n){e(this,t),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,u=[s],c=s.point,d=[];a=s,s=l,u.push(s),s.point!==c;)for(;;){var h=s.getAvailableLinkedEvents();if(0===h.length){var f=u[0].point,p=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(f.x,",")+" ".concat(f.y,"]. Last matching segment found ends at")+" [".concat(p.x,", ").concat(p.y,"]."))}if(1===h.length){l=h[0].otherSE;break}for(var m=null,g=0,y=d.length;g<y;g++)if(d[g].point===s.point){m=g;break}if(null===m){d.push({index:u.length,point:s.point});var v=s.getLeftmostComparator(a);l=h.sort(v)[0].otherSE;break}var _=d.splice(m)[0],b=u.splice(_.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(u))}}return n}}]),n(t,[{key:"getGeom",value:function(){for(var e=this.events[0].point,t=[e],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==k(i,e,o)&&(t.push(i),e=i)}if(1===t.length)return null;var a=t[0],s=t[1];0===k(a,e,s)&&t.shift(),t.push(t[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:t.length-1,c=this.isExteriorRing()?t.length:-1,d=[],h=u;h!=c;h+=l)d.push([t[h].x,t[h].y]);return d}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],t=1,n=this.events.length;t<n;t++){var r=this.events[t];D.compare(e,r)>0&&(e=r)}for(var i=e.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),U=function(){function t(n){e(this,t),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(t,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(var t=0,n=this.interiorRings.length;t<n;t++){var r=this.interiorRings[t].getGeom();null!==r&&e.push(r)}return e}}]),t}(),G=function(){function t(n){e(this,t),this.rings=n,this.polys=this._composePolys(n)}return n(t,[{key:"getGeom",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++){var r=this.polys[t].getGeom();null!==r&&e.push(r)}return e}},{key:"_composePolys",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(!i.poly)if(i.isExteriorRing())t.push(new U(i));else{var o=i.enclosingRing();o.poly||t.push(new U(o)),o.poly.addInterior(i)}}return t}}]),t}(),H=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.compare;e(this,t),this.queue=n,this.tree=new c(r),this.segments=[]}return n(t,[{key:"process",value:function(e){var t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),n;var r=e.isLeft?this.tree.insert(t):this.tree.find(t);if(!r)throw new Error("Unable to find segment #".concat(t.id," ")+"[".concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> ")+"[".concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,a=void 0,s=void 0;void 0===a;)null===(i=this.tree.prev(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(e.isLeft){var l=null;if(a){var u=a.getIntersection(t);if(null!==u&&(t.isAnEndpoint(u)||(l=u),!a.isAnEndpoint(u)))for(var c=this._splitSafely(a,u),d=0,h=c.length;d<h;d++)n.push(c[d])}var f=null;if(s){var p=s.getIntersection(t);if(null!==p&&(t.isAnEndpoint(p)||(f=p),!s.isAnEndpoint(p)))for(var m=this._splitSafely(s,p),g=0,y=m.length;g<y;g++)n.push(m[g])}if(null!==l||null!==f){var v=null;v=null===l?f:null===f||D.comparePoints(l,f)<=0?l:f,this.queue.remove(t.rightSE),n.push(t.rightSE);for(var _=t.split(v),b=0,x=_.length;b<x;b++)n.push(_[b])}n.length>0?(this.tree.remove(t),n.push(e)):(this.segments.push(t),t.prev=a)}else{if(a&&s){var w=a.getIntersection(s);if(null!==w){if(!a.isAnEndpoint(w))for(var E=this._splitSafely(a,w),S=0,T=E.length;S<T;S++)n.push(E[S]);if(!s.isAnEndpoint(w))for(var M=this._splitSafely(s,w),k=0,C=M.length;k<C;k++)n.push(M[k])}}this.tree.remove(t)}return n}},{key:"_splitSafely",value:function(e,t){this.tree.remove(e);var n=e.rightSE;this.queue.remove(n);var r=e.split(t);return r.push(n),void 0===e.consumedBy&&this.tree.insert(e),r}}]),t}(),V="undefined"!==typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,q="undefined"!==typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,$=new(function(){function t(){e(this,t)}return n(t,[{key:"run",value:function(e,t,n){$.type=e,S.reset();for(var r=[new B(t,!0)],i=0,o=n.length;i<o;i++)r.push(new B(n[i],!1));if($.numMultiPolys=r.length,"difference"===$.type)for(var a=r[0],s=1;s<r.length;)null!==v(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===$.type)for(var l=0,u=r.length;l<u;l++)for(var d=r[l],h=l+1,f=r.length;h<f;h++)if(null===v(d.bbox,r[h].bbox))return[];for(var p=new c(D.compare),m=0,g=r.length;m<g;m++)for(var y=r[m].getSweepEvents(),_=0,b=y.length;_<b;_++)if(p.insert(y[_]),p.size>V)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var x=new H(p),w=p.size,E=p.pop();E;){var T=E.key;if(p.size===w){var M=T.segment;throw new Error("Unable to pop() ".concat(T.isLeft?"left":"right"," SweepEvent ")+"[".concat(T.point.x,", ").concat(T.point.y,"] from segment #").concat(M.id," ")+"[".concat(M.leftSE.point.x,", ").concat(M.leftSE.point.y,"] -> ")+"[".concat(M.rightSE.point.x,", ").concat(M.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>V)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(x.segments.length>q)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var k=x.process(T),C=0,P=k.length;C<P;C++){var A=k[C];void 0===A.consumedBy&&p.insert(A)}w=p.size,E=p.pop()}S.reset();var O=F.factory(x.segments);return new G(O).getGeom()}}]),t}()),W=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $.run("union",e,n)},Z=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $.run("intersection",e,n)},X=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $.run("xor",e,n)},Y=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $.run("difference",e,n)};return{union:W,intersection:Z,xor:X,difference:Y}}()},92703:function(e,t,n){"use strict";var r=n(50414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},45697:function(e,t,n){e.exports=n(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},38698:function(e,t,n){"use strict";var r=n(27418),i=n(67294);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=60106,s=60107,l=60108,u=60114,c=60109,d=60110,h=60112,f=60113,p=60120,m=60115,g=60116,y=60121,v=60117,_=60119,b=60129,x=60131;if("function"===typeof Symbol&&Symbol.for){var w=Symbol.for;a=w("react.portal"),s=w("react.fragment"),l=w("react.strict_mode"),u=w("react.profiler"),c=w("react.provider"),d=w("react.context"),h=w("react.forward_ref"),f=w("react.suspense"),p=w("react.suspense_list"),m=w("react.memo"),g=w("react.lazy"),y=w("react.block"),v=w("react.fundamental"),_=w("react.scope"),b=w("react.debug_trace_mode"),x=w("react.legacy_hidden")}function E(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case s:return"Fragment";case a:return"Portal";case u:return"Profiler";case l:return"StrictMode";case f:return"Suspense";case p:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case d:return(e.displayName||"Context")+".Consumer";case c:return(e._context.displayName||"Context")+".Provider";case h:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case m:return E(e.type);case y:return E(e._render);case g:t=e._payload,e=e._init;try{return E(e(t))}catch(n){}}return null}var S=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T={};function M(e,t){for(var n=0|e._threadCount;n<=t;n++)e[n]=e._currentValue2,e._threadCount=n+1}for(var k=new Uint16Array(16),C=0;15>C;C++)k[C]=C+1;k[15]=0;var P=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A=Object.prototype.hasOwnProperty,O={},I={};function L(e){return!!A.call(I,e)||!A.call(O,e)&&(P.test(e)?I[e]=!0:(O[e]=!0,!1))}function D(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){R[e]=new D(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];R[t]=new D(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){R[e]=new D(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){R[e]=new D(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){R[e]=new D(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){R[e]=new D(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){R[e]=new D(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){R[e]=new D(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){R[e]=new D(e,5,!1,e.toLowerCase(),null,!1,!1)}));var N=/[\-:]([a-z])/g;function z(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(N,z);R[t]=new D(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(N,z);R[t]=new D(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(N,z);R[t]=new D(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){R[e]=new D(e,1,!1,e.toLowerCase(),null,!1,!1)})),R.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){R[e]=new D(e,1,!1,e.toLowerCase(),null,!0,!0)}));var j=/["'&<>]/;function B(e){if("boolean"===typeof e||"number"===typeof e)return""+e;e=""+e;var t=j.exec(e);if(t){var n,r="",i=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==n&&(r+=e.substring(i,n)),i=n+1,r+=t}e=i!==n?r+e.substring(i,n):r}return e}function F(e,t){var n,r=R.hasOwnProperty(e)?R[e]:null;return(n="style"!==e)&&(n=null!==r?0===r.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),n||function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,r,!1)?"":null!==r?(e=r.attributeName,3===(n=r.type)||4===n&&!0===t?e+'=""':(r.sanitizeURL&&(t=""+t),e+'="'+B(t)+'"')):L(e)?e+'="'+B(t)+'"':""}var U="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},G=null,H=null,V=null,q=!1,$=!1,W=null,Z=0;function X(){if(null===G)throw Error(o(321));return G}function Y(){if(0<Z)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function K(){return null===V?null===H?(q=!1,H=V=Y()):(q=!0,V=H):null===V.next?(q=!1,V=V.next=Y()):(q=!0,V=V.next),V}function J(e,t,n,r){for(;$;)$=!1,Z+=1,V=null,n=e(t,r);return Q(),n}function Q(){G=null,$=!1,H=null,Z=0,V=W=null}function ee(e,t){return"function"===typeof t?t(e):t}function te(e,t,n){if(G=X(),V=K(),q){var r=V.queue;if(t=r.dispatch,null!==W&&void 0!==(n=W.get(r))){W.delete(r),r=V.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return V.memoizedState=r,[r,t]}return[V.memoizedState,t]}return e=e===ee?"function"===typeof t?t():t:void 0!==n?n(t):t,V.memoizedState=e,e=(e=V.queue={last:null,dispatch:null}).dispatch=re.bind(null,G,e),[V.memoizedState,e]}function ne(e,t){if(G=X(),t=void 0===t?null:t,null!==(V=K())){var n=V.memoizedState;if(null!==n&&null!==t){var r=n[1];e:if(null===r)r=!1;else{for(var i=0;i<r.length&&i<t.length;i++)if(!U(t[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),V.memoizedState=[e,t],e}function re(e,t,n){if(!(25>Z))throw Error(o(301));if(e===G)if($=!0,e={action:n,next:null},null===W&&(W=new Map),void 0===(n=W.get(t)))W.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function ie(){}var oe=null,ae={readContext:function(e){var t=oe.threadID;return M(e,t),e[t]},useContext:function(e){X();var t=oe.threadID;return M(e,t),e[t]},useMemo:ne,useReducer:te,useRef:function(e){G=X();var t=(V=K()).memoizedState;return null===t?(e={current:e},V.memoizedState=e):t},useState:function(e){return te(ee,e)},useLayoutEffect:function(){},useCallback:function(e,t){return ne((function(){return e}),t)},useImperativeHandle:ie,useEffect:ie,useDebugValue:ie,useDeferredValue:function(e){return X(),e},useTransition:function(){return X(),[function(e){e()},!1]},useOpaqueIdentifier:function(){return(oe.identifierPrefix||"")+"R:"+(oe.uniqueID++).toString(36)},useMutableSource:function(e,t){return X(),t(e._source)}},se="http://www.w3.org/1999/xhtml";function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ue={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ce=r({menuitem:!0},ue),de={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];Object.keys(de).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var fe=/([A-Z])/g,pe=/^ms-/,me=i.Children.toArray,ge=S.ReactCurrentDispatcher,ye={listing:!0,pre:!0,textarea:!0},ve=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,_e={},be={};var xe=Object.prototype.hasOwnProperty,we={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Ee(e,t){if(void 0===e)throw Error(o(152,E(t)||"Component"))}function Se(e,t,n){function a(i,a){var s=a.prototype&&a.prototype.isReactComponent,l=function(e,t,n,r){if(r&&"object"===typeof(r=e.contextType)&&null!==r)return M(r,n),r[n];if(e=e.contextTypes){for(var i in n={},e)n[i]=t[i];t=n}else t=T;return t}(a,t,n,s),u=[],c=!1,d={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===u)return null},enqueueReplaceState:function(e,t){c=!0,u=[t]},enqueueSetState:function(e,t){if(null===u)return null;u.push(t)}};if(s){if(s=new a(i.props,l,d),"function"===typeof a.getDerivedStateFromProps){var h=a.getDerivedStateFromProps.call(null,i.props,s.state);null!=h&&(s.state=r({},s.state,h))}}else if(G={},s=a(i.props,l,d),null==(s=J(a,i.props,s,l))||null==s.render)return void Ee(e=s,a);if(s.props=i.props,s.context=l,s.updater=d,void 0===(d=s.state)&&(s.state=d=null),"function"===typeof s.UNSAFE_componentWillMount||"function"===typeof s.componentWillMount)if("function"===typeof s.componentWillMount&&"function"!==typeof a.getDerivedStateFromProps&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&"function"!==typeof a.getDerivedStateFromProps&&s.UNSAFE_componentWillMount(),u.length){d=u;var f=c;if(u=null,c=!1,f&&1===d.length)s.state=d[0];else{h=f?d[0]:s.state;var p=!0;for(f=f?1:0;f<d.length;f++){var m=d[f];null!=(m="function"===typeof m?m.call(s,h,i.props,l):m)&&(p?(p=!1,h=r({},h,m)):r(h,m))}s.state=h}}else u=null;if(Ee(e=s.render(),a),"function"===typeof s.getChildContext&&"object"===typeof(i=a.childContextTypes)){var g=s.getChildContext();for(var y in g)if(!(y in i))throw Error(o(108,E(a)||"Unknown",y))}g&&(t=r({},t,g))}for(;i.isValidElement(e);){var s=e,l=s.type;if("function"!==typeof l)break;a(s,l)}return{child:e,context:t}}var Te=function(){function e(e,t,n){i.isValidElement(e)?e.type!==s?e=[e]:(e=e.props.children,e=i.isValidElement(e)?[e]:me(e)):e=me(e),e={type:null,domNamespace:se,children:e,childIndex:0,context:T,footer:""};var r=k[0];if(0===r){var a=k,l=2*(r=a.length);if(!(65536>=l))throw Error(o(304));var u=new Uint16Array(l);for(u.set(a),(k=u)[0]=r+1,a=r;a<l-1;a++)k[a]=a+1;k[l-1]=0}else k[0]=k[r];this.threadID=r,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=t,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[],this.uniqueID=0,this.identifierPrefix=n&&n.identifierPrefix||""}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;k[e]=k[0],k[0]=e}},t.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,r=this.threadID;M(n,r);var i=n[r];this.contextStack[t]=n,this.contextValueStack[t]=i,n[r]=e.props.value},t.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=n},t.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},t.read=function(e){if(this.exhausted)return null;var t=oe;oe=this;var n=ge.current;ge.current=ae;try{for(var r=[""],i=!1;r[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var a=this.threadID;k[a]=k[0],k[0]=a;break}var s=this.stack[this.stack.length-1];if(i||s.childIndex>=s.children.length){var l=s.footer;if(""!==l&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===s.type)this.currentSelectValue=null;else if(null!=s.type&&null!=s.type.type&&s.type.type.$$typeof===c)this.popProvider(s.type);else if(s.type===f){this.suspenseDepth--;var u=r.pop();if(i){i=!1;var d=s.fallbackFrame;if(!d)throw Error(o(303));this.stack.push(d),r[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}r[this.suspenseDepth]+=u}r[this.suspenseDepth]+=l}else{var h=s.children[s.childIndex++],p="";try{p+=this.render(h,s.context,s.domNamespace)}catch(m){if(null!=m&&"function"===typeof m.then)throw Error(o(294));throw m}r.length<=this.suspenseDepth&&r.push(""),r[this.suspenseDepth]+=p}}return r[0]}finally{ge.current=n,oe=t,Q()}},t.render=function(e,t,n){if("string"===typeof e||"number"===typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?B(n):this.previousWasTextNode?"\x3c!-- --\x3e"+B(n):(this.previousWasTextNode=!0,B(n));if(e=(t=Se(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!i.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((n=e.$$typeof)===a)throw Error(o(257));throw Error(o(258,n.toString()))}return e=me(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}var y=e.type;if("string"===typeof y)return this.renderDOM(e,t,n);switch(y){case x:case b:case l:case u:case p:case s:return e=me(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case f:throw Error(o(294));case _:throw Error(o(343))}if("object"===typeof y&&null!==y)switch(y.$$typeof){case h:G={};var w=y.render(e.props,e.ref);return w=J(y.render,e.props,w,e.ref),w=me(w),this.stack.push({type:null,domNamespace:n,children:w,childIndex:0,context:t,footer:""}),"";case m:return e=[i.createElement(y.type,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case c:return n={type:e,domNamespace:n,children:y=me(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case d:y=e.type,w=e.props;var E=this.threadID;return M(y,E),y=me(w.children(y[E])),this.stack.push({type:e,domNamespace:n,children:y,childIndex:0,context:t,footer:""}),"";case v:throw Error(o(338));case g:return y=(w=(y=e.type)._init)(y._payload),e=[i.createElement(y,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}throw Error(o(130,null==y?y:typeof y,""))},t.renderDOM=function(e,t,n){var a=e.type.toLowerCase();if(n===se&&le(a),!_e.hasOwnProperty(a)){if(!ve.test(a))throw Error(o(65,a));_e[a]=!0}var s=e.props;if("input"===a)s=r({type:void 0},s,{defaultChecked:void 0,defaultValue:void 0,value:null!=s.value?s.value:s.defaultValue,checked:null!=s.checked?s.checked:s.defaultChecked});else if("textarea"===a){var l=s.value;if(null==l){l=s.defaultValue;var u=s.children;if(null!=u){if(null!=l)throw Error(o(92));if(Array.isArray(u)){if(!(1>=u.length))throw Error(o(93));u=u[0]}l=""+u}null==l&&(l="")}s=r({},s,{value:void 0,children:""+l})}else if("select"===a)this.currentSelectValue=null!=s.value?s.value:s.defaultValue,s=r({},s,{value:void 0});else if("option"===a){u=this.currentSelectValue;var c=function(e){if(void 0===e||null===e)return e;var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(s.children);if(null!=u){var d=null!=s.value?s.value+"":c;if(l=!1,Array.isArray(u)){for(var h=0;h<u.length;h++)if(""+u[h]===d){l=!0;break}}else l=""+u===d;s=r({selected:void 0,children:void 0},s,{selected:l,children:c})}}if(l=s){if(ce[a]&&(null!=l.children||null!=l.dangerouslySetInnerHTML))throw Error(o(137,a));if(null!=l.dangerouslySetInnerHTML){if(null!=l.children)throw Error(o(60));if("object"!==typeof l.dangerouslySetInnerHTML||!("__html"in l.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=l.style&&"object"!==typeof l.style)throw Error(o(62))}l=s,u=this.makeStaticMarkup,c=1===this.stack.length,d="<"+e.type;e:if(-1===a.indexOf("-"))h="string"===typeof l.is;else switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":h=!1;break e;default:h=!0}for(x in l)if(xe.call(l,x)){var f=l[x];if(null!=f){if("style"===x){var p=void 0,m="",g="";for(p in f)if(f.hasOwnProperty(p)){var y=0===p.indexOf("--"),v=f[p];if(null!=v){if(y)var _=p;else if(_=p,be.hasOwnProperty(_))_=be[_];else{var b=_.replace(fe,"-$1").toLowerCase().replace(pe,"-ms-");_=be[_]=b}m+=g+_+":",g=p,m+=y=null==v||"boolean"===typeof v||""===v?"":y||"number"!==typeof v||0===v||de.hasOwnProperty(g)&&de[g]?(""+v).trim():v+"px",g=";"}}f=m||null}p=null,h?we.hasOwnProperty(x)||(p=L(p=x)&&null!=f?p+'="'+B(f)+'"':""):p=F(x,f),p&&(d+=" "+p)}}u||c&&(d+=' data-reactroot=""');var x=d;l="",ue.hasOwnProperty(a)?x+="/>":(x+=">",l="</"+e.type+">");e:{if(null!=(u=s.dangerouslySetInnerHTML)){if(null!=u.__html){u=u.__html;break e}}else if("string"===typeof(u=s.children)||"number"===typeof u){u=B(u);break e}u=null}return null!=u?(s=[],ye.hasOwnProperty(a)&&"\n"===u.charAt(0)&&(x+="\n"),x+=u):s=me(s.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?le(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:a,children:s,childIndex:0,context:t,footer:l}),this.previousWasTextNode=!1,x},e}();t.renderToNodeStream=function(){throw Error(o(207))},t.renderToStaticMarkup=function(e,t){e=new Te(e,!0,t);try{return e.read(1/0)}finally{e.destroy()}},t.renderToStaticNodeStream=function(){throw Error(o(208))},t.renderToString=function(e,t){e=new Te(e,!1,t);try{return e.read(1/0)}finally{e.destroy()}},t.version="17.0.2"},64448:function(e,t,n){"use strict";var r=n(67294),i=n(27418),o=n(63840);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,E=60106,S=60107,T=60108,M=60114,k=60109,C=60110,P=60112,A=60113,O=60120,I=60115,L=60116,D=60121,R=60128,N=60129,z=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;w=B("react.element"),E=B("react.portal"),S=B("react.fragment"),T=B("react.strict_mode"),M=B("react.profiler"),k=B("react.provider"),C=B("react.context"),P=B("react.forward_ref"),A=B("react.suspense"),O=B("react.suspense_list"),I=B("react.memo"),L=B("react.lazy"),D=B("react.block"),B("react.scope"),R=B("react.opaque.id"),N=B("react.debug_trace_mode"),z=B("react.offscreen"),j=B("react.legacy_hidden")}var F,U="function"===typeof Symbol&&Symbol.iterator;function G(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=U&&e[U]||e["@@iterator"])?e:null}function H(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var V=!1;function q(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function $(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 22:return e=q(e.type._render,!1);case 1:return e=q(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case M:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case I:return W(e.type);case D:return W(e._render);case L:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function ue(e,t){var n=Z(t.value),r=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge,ye=(ge=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||_e.hasOwnProperty(e)&&_e[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=xe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(_e).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_e[t]=_e[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Me(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ce=null,Pe=null;function Ae(e){if(e=ri(e)){if("function"!==typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=oi(t),ke(e.stateNode,e.type,t))}}function Oe(e){Ce?Pe?Pe.push(e):Pe=[e]:Ce=e}function Ie(){if(Ce){var e=Ce,t=Pe;if(Pe=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Le(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Re(){}var Ne=Le,ze=!1,je=!1;function Be(){null===Ce&&null===Pe||(Re(),Ie())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=oi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ue=!1;if(d)try{var Ge={};Object.defineProperty(Ge,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",Ge,Ge),window.removeEventListener("test",Ge,Ge)}catch(ge){Ue=!1}function He(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ve=!1,qe=null,$e=!1,We=null,Ze={onError:function(e){Ve=!0,qe=e}};function Xe(e,t,n,r,i,o,a,s,l){Ve=!1,qe=null,He.apply(Ze,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ke(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(a(188))}function Qe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Je(i),e;if(o===r)return Je(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,ot=!1,at=[],st=null,lt=null,ut=null,ct=new Map,dt=new Map,ht=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function mt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function gt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=pt(t,n,r,i,o),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ke(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function _t(e,t,n){vt(e)&&n.delete(t)}function bt(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&vt(st)&&(st=null),null!==lt&&vt(lt)&&(lt=null),null!==ut&&vt(ut)&&(ut=null),ct.forEach(_t),dt.forEach(_t)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function wt(e){function t(t){return xt(t,e)}if(0<at.length){xt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&xt(st,e),null!==lt&&xt(lt,e),null!==ut&&xt(ut,e),ct.forEach(t),dt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var St={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},Tt={},Mt={};function kt(e){if(Tt[e])return Tt[e];if(!St[e])return e;var t,n=St[e];for(t in n)if(n.hasOwnProperty(t)&&t in Mt)return Tt[e]=n[t];return e}d&&(Mt=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var Ct=kt("animationend"),Pt=kt("animationiteration"),At=kt("animationstart"),Ot=kt("transitionend"),It=new Map,Lt=new Map,Dt=["abort","abort",Ct,"animationEnd",Pt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ot,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Lt.set(r,t),It.set(r,i),u(i,[r])}}(0,o.unstable_now)();var Nt=8;function zt(e){if(0!==(1&e))return Nt=15,1;if(0!==(2&e))return Nt=14,2;if(0!==(4&e))return Nt=13,4;var t=24&e;return 0!==t?(Nt=12,t):0!==(32&e)?(Nt=11,32):0!==(t=192&e)?(Nt=10,t):0!==(256&e)?(Nt=9,256):0!==(t=3584&e)?(Nt=8,t):0!==(4096&e)?(Nt=7,4096):0!==(t=4186112&e)?(Nt=6,t):0!==(t=62914560&e)?(Nt=5,t):67108864&e?(Nt=4,67108864):0!==(134217728&e)?(Nt=3,134217728):0!==(t=805306368&e)?(Nt=2,t):0!==(1073741824&e)?(Nt=1,1073741824):(Nt=8,e)}function jt(e,t){var n=e.pendingLanes;if(0===n)return Nt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Nt=15;else if(0!==(o=134217727&n)){var l=o&~a;0!==l?(r=zt(l),i=Nt):0!==(s&=o)&&(r=zt(s),i=Nt)}else 0!==(o=n&~a)?(r=zt(o),i=Nt):0!==s&&(r=zt(s),i=Nt);if(0===r)return 0;if(r=n&((0>(r=31-Vt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(zt(t),i<=Nt)return t;Nt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Vt(t)),r|=e[n],t&=~i;return r}function Bt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Ft(10,t):e;case 10:return 0===(e=Ut(192&~t))?Ft(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Ut(e){return e&-e}function Gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ht(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Vt(t)]=n}var Vt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(qt(e)/$t|0)|0},qt=Math.log,$t=Math.LN2;var Wt=o.unstable_UserBlockingPriority,Zt=o.unstable_runWithPriority,Xt=!0;function Yt(e,t,n,r){ze||Re();var i=Jt,o=ze;ze=!0;try{De(i,e,t,n,r)}finally{(ze=o)||Be()}}function Kt(e,t,n,r){Zt(Wt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Xt)if((i=0===(4&t))&&0<at.length&&-1<ft.indexOf(e))e=pt(null,e,t,n,r),at.push(e);else{var o=Qt(e,t,n,r);if(null===o)i&&mt(e,r);else{if(i){if(-1<ft.indexOf(e))return e=pt(o,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=gt(st,e,t,n,r,i),!0;case"dragenter":return lt=gt(lt,e,t,n,r,i),!0;case"mouseover":return ut=gt(ut,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ct.set(o,gt(ct.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,dt.set(o,gt(dt.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;mt(e,r)}Rr(e,t,r,null,n)}}}function Qt(e,t,n,r){var i=Me(r);if(null!==(i=ni(i))){var o=Ye(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Ke(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Rr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function ln(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var un,cn,dn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=ln(hn),pn=i({},hn,{view:0,detail:0}),mn=ln(pn),gn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(un=e.screenX-dn.screenX,cn=e.screenY-dn.screenY):cn=un=0,dn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),yn=ln(gn),vn=ln(i({},gn,{dataTransfer:0})),_n=ln(i({},pn,{relatedTarget:0})),bn=ln(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=ln(xn),En=ln(i({},hn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mn[e])&&!!t[e]}function Cn(){return kn}var Pn=i({},pn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=ln(Pn),On=ln(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=ln(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Ln=ln(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=ln(Dn),Nn=[9,13,27,32],zn=d&&"CompositionEvent"in window,jn=null;d&&"documentMode"in document&&(jn=document.documentMode);var Bn=d&&"TextEvent"in window&&!jn,Fn=d&&(!zn||jn&&8<jn&&11>=jn),Un=String.fromCharCode(32),Gn=!1;function Hn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Zn(e,t,n,r){Oe(r),0<(t=zr(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Yn=null;function Kn(e){Pr(e,0)}function Jn(e){if(K(ii(e)))return e}function Qn(e,t){if("change"===e)return t}var er=!1;if(d){var tr;if(d){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Xn&&(Xn.detachEvent("onpropertychange",or),Yn=Xn=null)}function or(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Zn(t,Yn,e,Me(e)),e=Kn,ze)e(t);else{ze=!0;try{Le(e,t)}finally{ze=!1,Be()}}}}function ar(e,t,n){"focusin"===e?(ir(),Yn=n,(Xn=t).attachEvent("onpropertychange",or)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function lr(e,t){if("click"===e)return Jn(t)}function ur(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},dr=Object.prototype.hasOwnProperty;function hr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!dr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=fr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fr(r)}}function mr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vr=d&&"documentMode"in document&&11>=document.documentMode,_r=null,br=null,xr=null,wr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==_r||_r!==J(r)||("selectionStart"in(r=_r)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&hr(xr,r)||(xr=r,0<(r=zr(br,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=_r)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Dt,2);for(var Sr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Tr=0;Tr<Sr.length;Tr++)Lt.set(Sr[Tr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(Xe.apply(this,arguments),Ve){if(!Ve)throw Error(a(198));var c=qe;Ve=!1,qe=null,$e||($e=!0,We=c)}}(r,t,void 0,e),e.currentTarget=null}function Pr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Cr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Cr(i,s,u),o=l}}}if($e)throw e=We,$e=!1,We=null,e}function Ar(e,t){var n=ai(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Or="_reactListening"+Math.random().toString(36).slice(2);function Ir(e){e[Or]||(e[Or]=!0,s.forEach((function(t){kr.has(t)||Lr(t,!1,e,null),Lr(t,!0,e,null)})))}function Lr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&kr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ai(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Dr(o,e,i,t),a.add(s))}function Dr(e,t,n,r){var i=Lt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Kt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Rr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ni(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(je)return e(t,n);je=!0;try{Ne(e,t,n)}finally{je=!1,Be()}}((function(){var r=o,i=Me(n),a=[];e:{var s=It.get(e);if(void 0!==s){var l=fn,u=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":u="focus",l=_n;break;case"focusout":u="blur",l=_n;break;case"beforeblur":case"afterblur":l=_n;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Ct:case Pt:case At:l=bn;break;case Ot:l=Ln;break;case"scroll":l=mn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=On}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Fe(p,h))&&c.push(Nr(p,m,f)))),d)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=n.relatedTarget||n.fromElement)||!ni(u)&&!u[ei])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ni(u):null)&&(u!==(d=Ye(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=yn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=On,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:ii(l),f=null==u?s:ii(u),(s=new c(m,p+"leave",l,n,i)).target=d,s.relatedTarget=f,m=null,ni(i)===r&&((c=new c(h,p+"enter",u,n,i)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=jr(f))p++;for(f=0,m=h;m;m=jr(m))f++;for(;0<p-f;)c=jr(c),p--;for(;0<f-p;)h=jr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=jr(c),h=jr(h)}c=null}else c=null;null!==l&&Br(a,s,l,c,!1),null!==u&&null!==d&&Br(a,d,u,c,!0)}if("select"===(l=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Qn;else if(Wn(s))if(er)g=ur;else{g=sr;var y=ar}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=lr);switch(g&&(g=g(e,r))?Zn(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?ii(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(_r=y,br=r,xr=null);break;case"focusout":xr=br=_r=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Er(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":Er(a,n,i)}var v;if(zn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else qn?Hn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==_?"onCompositionEnd"===_&&qn&&(v=rn()):(tn="value"in(en=i)?en.value:en.textContent,qn=!0)),0<(y=zr(r,_)).length&&(_=new En(_,e,null,n,i),a.push({event:_,listeners:y}),v?_.data=v:null!==(v=Vn(n))&&(_.data=v))),(v=Bn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Gn=!0,Un);case"textInput":return(e=t.data)===Un&&Gn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!zn&&Hn(e,t)?(e=rn(),nn=tn=en=null,qn=!1,e):null;switch(e){default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=zr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Pr(a,t)}))}function Nr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Fe(e,n))&&r.unshift(Nr(e,o,i)),null!=(o=Fe(e,t))&&r.push(Nr(e,o,i))),e=e.return}return r}function jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Br(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Fe(n,o))&&a.unshift(Nr(n,l,s)):i||null!=(l=Fe(n,o))&&a.push(Nr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Fr(){}var Ur=null,Gr=null;function Hr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Vr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var qr="function"===typeof setTimeout?setTimeout:void 0,$r="function"===typeof clearTimeout?clearTimeout:void 0;function Wr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Zr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Kr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Kr,Qr="__reactProps$"+Kr,ei="__reactContainer$"+Kr,ti="__reactEvents$"+Kr;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Xr(e);null!==e;){if(n=e[Jr])return n;e=Xr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function oi(e){return e[Qr]||null}function ai(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],li=-1;function ui(e){return{current:e}}function ci(e){0>li||(e.current=si[li],si[li]=null,li--)}function di(e,t){li++,si[li]=e.current,e.current=t}var hi={},fi=ui(hi),pi=ui(!1),mi=hi;function gi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vi(){ci(pi),ci(fi)}function _i(e,t,n){if(fi.current!==hi)throw Error(a(168));di(fi,t),di(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,W(t)||"Unknown",o));return i({},n,r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,mi=fi.current,di(fi,e),di(pi,pi.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=bi(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,ci(pi),ci(fi),di(fi,e)):ci(pi),di(pi,n)}var Ei=null,Si=null,Ti=o.unstable_runWithPriority,Mi=o.unstable_scheduleCallback,ki=o.unstable_cancelCallback,Ci=o.unstable_shouldYield,Pi=o.unstable_requestPaint,Ai=o.unstable_now,Oi=o.unstable_getCurrentPriorityLevel,Ii=o.unstable_ImmediatePriority,Li=o.unstable_UserBlockingPriority,Di=o.unstable_NormalPriority,Ri=o.unstable_LowPriority,Ni=o.unstable_IdlePriority,zi={},ji=void 0!==Pi?Pi:function(){},Bi=null,Fi=null,Ui=!1,Gi=Ai(),Hi=1e4>Gi?Ai:function(){return Ai()-Gi};function Vi(){switch(Oi()){case Ii:return 99;case Li:return 98;case Di:return 97;case Ri:return 96;case Ni:return 95;default:throw Error(a(332))}}function qi(e){switch(e){case 99:return Ii;case 98:return Li;case 97:return Di;case 96:return Ri;case 95:return Ni;default:throw Error(a(332))}}function $i(e,t){return e=qi(e),Ti(e,t)}function Wi(e,t,n){return e=qi(e),Mi(e,t,n)}function Zi(){if(null!==Fi){var e=Fi;Fi=null,ki(e)}Xi()}function Xi(){if(!Ui&&null!==Bi){Ui=!0;var e=0;try{var t=Bi;$i(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Bi=null}catch(n){throw null!==Bi&&(Bi=Bi.slice(e+1)),Mi(Ii,Zi),n}finally{Ui=!1}}}var Yi=x.ReactCurrentBatchConfig;function Ki(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ui(null),Qi=null,eo=null,to=null;function no(){to=eo=Qi=null}function ro(e){var t=Ji.current;ci(Ji),e.type._context._currentValue=t}function io(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function oo(e,t){Qi=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(za=!0),e.firstContext=null)}function ao(e,t){if(to!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===Qi)throw Error(a(308));eo=t,Qi.dependencies={lanes:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var so=!1;function lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ho(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function po(e,t,n,r){var o=e.updateQueue;so=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?a=c:s.next=c,s=u;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==s&&(null===h?d.firstBaseUpdate=c:h.next=c,d.lastBaseUpdate=u)}}if(null!==a){for(h=o.baseState,s=0,d=c=u=null;;){l=a.lane;var f=a.eventTime;if((r&l)===l){null!==d&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(l=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,l);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(l="function"===typeof(p=m.payload)?p.call(f,h,l):p)||void 0===l)break e;h=i({},h,l);break e;case 2:so=!0}}null!==a.callback&&(e.flags|=32,null===(l=o.effects)?o.effects=[a]:l.push(a))}else f={eventTime:f,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(c=d=f,u=h):d=d.next=f,s|=l;if(null===(a=a.next)){if(null===(l=o.shared.pending))break;a=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===d&&(u=h),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=d,Us|=s,e.lanes=s,e.memoizedState=h}}function mo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var go=(new r.Component).refs;function yo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hl(),i=fl(e),o=co(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),ho(e,o),pl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hl(),i=fl(e),o=co(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),ho(e,o),pl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hl(),r=fl(e),i=co(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ho(e,i),pl(e,r,n)}};function _o(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,o))}function bo(e,t,n){var r=!1,i=hi,o=t.contextType;return"object"===typeof o&&null!==o?o=ao(o):(i=yi(t)?mi:fi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?gi(e,i):hi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function xo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vo.enqueueReplaceState(t,t.state,null)}function wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=go,lo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ao(o):(o=yi(t)?mi:fi.current,i.context=gi(e,o)),po(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(yo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&vo.enqueueReplaceState(i,i.state,null),po(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var Eo=Array.isArray;function So(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===go&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function To(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Mo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=$l(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Yl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=So(e,t,n),r.return=e,r):((r=Wl(n.type,n.key,n.props,null,e.mode,r)).ref=So(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Zl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Wl(t.type,t.key,t.props,null,e.mode,n)).ref=So(e,null,t),n.return=e,n;case E:return(t=Kl(t,e.mode,n)).return=e,t}if(Eo(t)||G(t))return(t=Zl(t,e.mode,n,null)).return=e,t;To(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===S?d(e,t,n.props.children,r,i):u(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null}if(Eo(n)||G(n))return null!==i?null:d(e,t,n,r,null);To(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===S?d(t,e,r.props.children,i,r.key):u(t,e,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Eo(r)||G(r))return d(t,e=e.get(n)||null,r,i,null);To(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),a=o(y,a,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===s.length)return n(i,d),u;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(a=o(d,a,m),null===c?u=d:c.sibling=d,c=d);return u}for(d=r(i,d);m<s.length;m++)null!==(g=p(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),u}function g(i,s,l,u){var c=G(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,u);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),s=o(_,s,g),null===d?c=_:d.sibling=_,d=_,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,u))&&(s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,o,l){var u="object"===typeof o&&null!==o&&o.type===S&&null===o.key;u&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case w:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(o.type===S){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}}else if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=So(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===S?((r=Zl(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Wl(o.type,o.key,o.props,null,e.mode,l)).ref=So(e,r,o),l.return=e,e=l)}return s(e);case E:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Kl(o,e.mode,l)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Yl(o,e.mode,l)).return=e,e=r),s(e);if(Eo(o))return m(e,r,o,l);if(G(o))return g(e,r,o,l);if(c&&To(e,o),"undefined"===typeof o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,W(e.type)||"Component"))}return n(e,r)}}var ko=Mo(!0),Co=Mo(!1),Po={},Ao=ui(Po),Oo=ui(Po),Io=ui(Po);function Lo(e){if(e===Po)throw Error(a(174));return e}function Do(e,t){switch(di(Io,t),di(Oo,e),di(Ao,Po),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Ao),di(Ao,t)}function Ro(){ci(Ao),ci(Oo),ci(Io)}function No(e){Lo(Io.current);var t=Lo(Ao.current),n=pe(t,e.type);t!==n&&(di(Oo,e),di(Ao,n))}function zo(e){Oo.current===e&&(ci(Ao),ci(Oo))}var jo=ui(0);function Bo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fo=null,Uo=null,Go=!1;function Ho(e,t){var n=Vl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Vo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function qo(e){if(Go){var t=Uo;if(t){var n=t;if(!Vo(e,t)){if(!(t=Zr(n.nextSibling))||!Vo(e,t))return e.flags=-1025&e.flags|2,Go=!1,void(Fo=e);Ho(Fo,n)}Fo=e,Uo=Zr(t.firstChild)}else e.flags=-1025&e.flags|2,Go=!1,Fo=e}}function $o(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Fo=e}function Wo(e){if(e!==Fo)return!1;if(!Go)return $o(e),Go=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Vr(t,e.memoizedProps))for(t=Uo;t;)Ho(e,t),t=Zr(t.nextSibling);if($o(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Uo=Zr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Uo=null}}else Uo=Fo?Zr(e.stateNode.nextSibling):null;return!0}function Zo(){Uo=Fo=null,Go=!1}var Xo=[];function Yo(){for(var e=0;e<Xo.length;e++)Xo[e]._workInProgressVersionPrimary=null;Xo.length=0}var Ko=x.ReactCurrentDispatcher,Jo=x.ReactCurrentBatchConfig,Qo=0,ea=null,ta=null,na=null,ra=!1,ia=!1;function oa(){throw Error(a(321))}function aa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function sa(e,t,n,r,i,o){if(Qo=o,ea=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ko.current=null===e||null===e.memoizedState?La:Da,e=n(r,i),ia){o=0;do{if(ia=!1,!(25>o))throw Error(a(301));o+=1,na=ta=null,t.updateQueue=null,Ko.current=Ra,e=n(r,i)}while(ia)}if(Ko.current=Ia,t=null!==ta&&null!==ta.next,Qo=0,na=ta=ea=null,ra=!1,t)throw Error(a(300));return e}function la(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===na?ea.memoizedState=na=e:na=na.next=e,na}function ua(){if(null===ta){var e=ea.alternate;e=null!==e?e.memoizedState:null}else e=ta.next;var t=null===na?ea.memoizedState:na.next;if(null!==t)na=t,ta=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ta=e).memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},null===na?ea.memoizedState=na=e:na=na.next=e}return na}function ca(e,t){return"function"===typeof t?t(e):t}function da(e){var t=ua(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ta,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,u=i;do{var c=u.lane;if((Qo&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=d,o=r):l=l.next=d,ea.lanes|=c,Us|=c}u=u.next}while(null!==u&&u!==i);null===l?o=r:l.next=s,cr(r,t.memoizedState)||(za=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ha(e){var t=ua(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);cr(o,t.memoizedState)||(za=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function fa(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Qo&e)===e)&&(t._workInProgressVersionPrimary=r,Xo.push(t))),e)return n(t._source);throw Xo.push(t),Error(a(350))}function pa(e,t,n,r){var i=Ls;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),l=Ko.current,u=l.useState((function(){return fa(i,t,n)})),c=u[1],d=u[0];u=na;var h=e.memoizedState,f=h.refs,p=f.getSnapshot,m=h.source;h=h.subscribe;var g=ea;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var e=o(t._source);if(!cr(s,e)){e=n(t._source),cr(d,e)||(c(e),e=fl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var l=31-Vt(a),u=1<<l;r[l]|=e,a&=~u}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=fl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),cr(p,n)&&cr(m,t)&&cr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:d}).dispatch=c=Oa.bind(null,ea,e),u.queue=e,u.baseQueue=null,d=fa(i,t,n),u.memoizedState=u.baseState=d),d}function ma(e,t,n){return pa(ua(),e,t,n)}function ga(e){var t=la();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e}).dispatch=Oa.bind(null,ea,e),[t.memoizedState,e]}function ya(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ea.updateQueue)?(t={lastEffect:null},ea.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function va(e){return e={current:e},la().memoizedState=e}function _a(){return ua().memoizedState}function ba(e,t,n,r){var i=la();ea.flags|=e,i.memoizedState=ya(1|t,n,void 0,void 0===r?null:r)}function xa(e,t,n,r){var i=ua();r=void 0===r?null:r;var o=void 0;if(null!==ta){var a=ta.memoizedState;if(o=a.destroy,null!==r&&aa(r,a.deps))return void ya(t,n,o,r)}ea.flags|=e,i.memoizedState=ya(1|t,n,o,r)}function wa(e,t){return ba(516,4,e,t)}function Ea(e,t){return xa(516,4,e,t)}function Sa(e,t){return xa(4,2,e,t)}function Ta(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ma(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xa(4,2,Ta.bind(null,t,e),n)}function ka(){}function Ca(e,t){var n=ua();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pa(e,t){var n=ua();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Aa(e,t){var n=Vi();$i(98>n?98:n,(function(){e(!0)})),$i(97<n?97:n,(function(){var n=Jo.transition;Jo.transition=1;try{e(!1),t()}finally{Jo.transition=n}}))}function Oa(e,t,n){var r=hl(),i=fl(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ea||null!==a&&a===ea)ia=ra=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=a(s,n);if(o.eagerReducer=a,o.eagerState=l,cr(l,s))return}catch(u){}pl(e,i,r)}}var Ia={readContext:ao,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useMutableSource:oa,useOpaqueIdentifier:oa,unstable_isNewReconciler:!1},La={readContext:ao,useCallback:function(e,t){return la().memoizedState=[e,void 0===t?null:t],e},useContext:ao,useEffect:wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ba(4,2,Ta.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ba(4,2,e,t)},useMemo:function(e,t){var n=la();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=la();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Oa.bind(null,ea,e),[r.memoizedState,e]},useRef:va,useState:ga,useDebugValue:ka,useDeferredValue:function(e){var t=ga(e),n=t[0],r=t[1];return wa((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=ga(!1),t=e[0];return va(e=Aa.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=la();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},pa(r,e,t,n)},useOpaqueIdentifier:function(){if(Go){var e=!1,t=function(e){return{$$typeof:R,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(a(355))})),n=ga(t)[1];return 0===(2&ea.mode)&&(ea.flags|=516,ya(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return ga(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Da={readContext:ao,useCallback:Ca,useContext:ao,useEffect:Ea,useImperativeHandle:Ma,useLayoutEffect:Sa,useMemo:Pa,useReducer:da,useRef:_a,useState:function(){return da(ca)},useDebugValue:ka,useDeferredValue:function(e){var t=da(ca),n=t[0],r=t[1];return Ea((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=da(ca)[0];return[_a().current,e]},useMutableSource:ma,useOpaqueIdentifier:function(){return da(ca)[0]},unstable_isNewReconciler:!1},Ra={readContext:ao,useCallback:Ca,useContext:ao,useEffect:Ea,useImperativeHandle:Ma,useLayoutEffect:Sa,useMemo:Pa,useReducer:ha,useRef:_a,useState:function(){return ha(ca)},useDebugValue:ka,useDeferredValue:function(e){var t=ha(ca),n=t[0],r=t[1];return Ea((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=ha(ca)[0];return[_a().current,e]},useMutableSource:ma,useOpaqueIdentifier:function(){return ha(ca)[0]},unstable_isNewReconciler:!1},Na=x.ReactCurrentOwner,za=!1;function ja(e,t,n,r){t.child=null===e?Co(t,null,n,r):ko(t,e.child,n,r)}function Ba(e,t,n,r,i){n=n.render;var o=t.ref;return oo(t,i),r=sa(e,t,n,r,o,i),null===e||za?(t.flags|=1,ja(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function Fa(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||ql(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Wl(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ua(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=$l(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ua(e,t,n,r,i,o){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(za=!1,0===(o&i))return t.lanes=e.lanes,os(e,t,o);0!==(16384&e.flags)&&(za=!0)}return Va(e,t,n,r,o)}function Ga(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wl(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wl(t,e),null;t.memoizedState={baseLanes:0},wl(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,wl(t,r);return ja(e,t,i,n),t.child}function Ha(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Va(e,t,n,r,i){var o=yi(n)?mi:fi.current;return o=gi(t,o),oo(t,i),n=sa(e,t,n,r,o,i),null===e||za?(t.flags|=1,ja(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function qa(e,t,n,r,i){if(yi(n)){var o=!0;xi(t)}else o=!1;if(oo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bo(t,n,r),wo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=ao(u):u=gi(t,u=yi(n)?mi:fi.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&xo(t,a,r,u),so=!1;var h=t.memoizedState;a.state=h,po(t,r,a,i),l=t.memoizedState,s!==r||h!==l||pi.current||so?("function"===typeof c&&(yo(t,n,c,r),l=t.memoizedState),(s=so||_o(t,n,s,r,h,l,u))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,uo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ki(t.type,s),a.props=u,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ao(l):l=gi(t,l=yi(n)?mi:fi.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&xo(t,a,r,l),so=!1,h=t.memoizedState,a.state=h,po(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||pi.current||so?("function"===typeof f&&(yo(t,n,f,r),p=t.memoizedState),(u=so||_o(t,n,u,r,h,p,l))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return $a(e,t,n,r,o,i)}function $a(e,t,n,r,i,o){Ha(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&wi(t,n,!1),os(e,t,o);r=t.stateNode,Na.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ko(t,e.child,null,o),t.child=ko(t,null,s,o)):ja(e,t,s,o),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function Wa(e){var t=e.stateNode;t.pendingContext?_i(0,t.pendingContext,t.pendingContext!==t.context):t.context&&_i(0,t.context,!1),Do(e,t.containerInfo)}var Za,Xa,Ya,Ka={dehydrated:null,retryLane:0};function Ja(e,t,n){var r,i=t.pendingProps,o=jo.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),di(jo,1&o),null===e?(void 0!==i.fallback&&qo(t),e=i.children,o=i.fallback,a?(e=Qa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ka,e):"number"===typeof i.unstable_expectedLoadTime?(e=Qa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ka,t.lanes=33554432,e):((n=Xl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=ts(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Ka,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Qa(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Xl(t,i,0,null),n=Zl(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=$l(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=$l(a,s),null!==e?r=$l(e,r):(r=Zl(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),io(e.return,t)}function rs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ja(e,t,r.children,n),0!==(2&(r=jo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(di(jo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Bo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Bo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Us|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=$l(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$l(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function as(e,t){if(!Go)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&vi(),null;case 3:return Ro(),ci(pi),ci(fi),Yo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wo(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:zo(t);var o=Lo(Io.current);if(n=t.type,null!==e&&null!=t.stateNode)Xa(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Lo(Ao.current),Wo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[Qr]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Mr.length;e++)Ar(Mr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":le(r,s),Ar("invalid",r)}for(var u in Se(n,s),e=null,s)s.hasOwnProperty(u)&&(o=s[u],"children"===u?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):l.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),ce(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Fr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,e===de&&(e=fe(n)),e===de?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Jr]=t,e[Qr]=r,Za(e,t),t.stateNode=e,u=Te(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),o=r;break;case"iframe":case"object":case"embed":Ar("load",e),o=r;break;case"video":case"audio":for(o=0;o<Mr.length;o++)Ar(Mr[o],e);o=r;break;case"source":Ar("error",e),o=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),o=r;break;case"details":Ar("toggle",e),o=r;break;case"input":ee(e,r),o=Q(e,r),Ar("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":le(e,r),o=se(e,r),Ar("invalid",e);break;default:o=r}Se(n,o);var c=o;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?we(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ye(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&ve(e,d):"number"===typeof d&&ve(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Ar("scroll",e):null!=d&&b(e,s,d,u))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Fr)}Hr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ya(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Lo(Io.current),Lo(Ao.current),Wo(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ci(jo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wo(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&jo.current)?0===js&&(js=3):(0!==js&&3!==js||(js=4),null===Ls||0===(134217727&Us)&&0===(134217727&Gs)||vl(Ls,Rs))),(r||n)&&(t.flags|=4),null);case 4:return Ro(),null===e&&Ir(t.stateNode.containerInfo),null;case 10:return ro(t),null;case 19:if(ci(jo),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(u=r.rendering))if(s)as(r,!1);else{if(0!==js||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Bo(e))){for(t.flags|=64,as(r,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return di(jo,1&jo.current|2),t.child}e=e.sibling}null!==r.tail&&Hi()>$s&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Bo(u))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),as(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Go)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Hi()-r.renderingStartTime>$s&&1073741824!==n&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Hi(),n.sibling=null,t=jo.current,di(jo,s?1&t|2:1&t),n):null;case 23:case 24:return El(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function ls(e){switch(e.tag){case 1:yi(e.type)&&vi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ro(),ci(pi),ci(fi),Yo(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return zo(e),null;case 13:return ci(jo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(jo),null;case 4:return Ro(),null;case 10:return ro(e),null;case 23:case 24:return El(),null;default:return null}}function us(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function cs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Za=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xa=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Lo(Ao.current);var a,s=null;switch(n){case"input":o=Q(e,o),r=Q(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Fr)}for(d in Se(n,r),n=null,o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var u=o[d];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(u=null!=o?o[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(null!=c||null!=u))if("style"===d)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Ar("scroll",e),s||u===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===R?c.toString():(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Ya=function(e,t,n,r){n!==r&&(t.flags|=4)};var ds="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=co(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,Ks=r),cs(0,t)},n}function fs(e,t,n){(n=co(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return cs(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function ms(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Fl(e,n)}else t.current=null}function gs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ki(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Wr(t.stateNode.containerInfo))}throw Error(a(163))}function ys(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(zl(n,e),Nl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ki(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&mo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}mo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Hr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(a(163))}function vs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=xe("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function _s(e,t){if(Si&&"function"===typeof Si.onCommitFiberUnmount)try{Si.onCommitFiberUnmount(Ei,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))zl(t,n);else{r=t;try{i()}catch(o){Fl(r,o)}}n=n.next}while(n!==e)}break;case 1:if(ms(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Fl(t,o)}break;case 5:ms(t);break;case 4:Ts(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function xs(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(xs(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ve(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||xs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Es(e,n,t):Ss(e,n,t)}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Fr));else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Ss(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Ts(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,l=i,u=l;;)if(_s(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(s=n,l=i.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(_s(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Ms(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,i),t=Te(e,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?we(n,l):"dangerouslySetInnerHTML"===s?ye(n,l):"children"===s?ve(n,l):b(n,s,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(qs=Hi(),vs(t.child,!0)),void ks(t);case 19:return void ks(t);case 23:case 24:return void vs(t,null!==t.memoizedState)}throw Error(a(163))}function ks(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Gl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ps=Math.ceil,As=x.ReactCurrentDispatcher,Os=x.ReactCurrentOwner,Is=0,Ls=null,Ds=null,Rs=0,Ns=0,zs=ui(0),js=0,Bs=null,Fs=0,Us=0,Gs=0,Hs=0,Vs=null,qs=0,$s=1/0;function Ws(){$s=Hi()+500}var Zs,Xs=null,Ys=!1,Ks=null,Js=null,Qs=!1,el=null,tl=90,nl=[],rl=[],il=null,ol=0,al=null,sl=-1,ll=0,ul=0,cl=null,dl=!1;function hl(){return 0!==(48&Is)?Hi():-1!==sl?sl:sl=Hi()}function fl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Vi()?1:2;if(0===ll&&(ll=Fs),0!==Yi.transition){0!==ul&&(ul=null!==Vs?Vs.pendingLanes:0),e=ll;var t=4186112&~ul;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Vi(),0!==(4&Is)&&98===e?e=Ft(12,ll):e=Ft(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function pl(e,t,n){if(50<ol)throw ol=0,al=null,Error(a(185));if(null===(e=ml(e,t)))return null;Ht(e,t,n),e===Ls&&(Gs|=t,4===js&&vl(e,Rs));var r=Vi();1===t?0!==(8&Is)&&0===(48&Is)?_l(e):(gl(e,n),0===Is&&(Ws(),Zi())):(0===(4&Is)||98!==r&&99!==r||(null===il?il=new Set([e]):il.add(e)),gl(e,n)),Vs=e}function ml(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Vt(s),u=1<<l,c=o[l];if(-1===c){if(0===(u&r)||0!==(u&i)){c=t,zt(u);var d=Nt;o[l]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);s&=~u}if(r=jt(e,e===Ls?Rs:0),t=Nt,0===r)null!==n&&(n!==zi&&ki(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==zi&&ki(n)}15===t?(n=_l.bind(null,e),null===Bi?(Bi=[n],Fi=Mi(Ii,Xi)):Bi.push(n),n=zi):14===t?n=Wi(99,_l.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),n=Wi(n,yl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yl(e){if(sl=-1,ul=ll=0,0!==(48&Is))throw Error(a(327));var t=e.callbackNode;if(Rl()&&e.callbackNode!==t)return null;var n=jt(e,e===Ls?Rs:0);if(0===n)return null;var r=n,i=Is;Is|=16;var o=Ml();for(Ls===e&&Rs===r||(Ws(),Sl(e,r));;)try{Pl();break}catch(l){Tl(e,l)}if(no(),As.current=o,Is=i,null!==Ds?r=0:(Ls=null,Rs=0,r=js),0!==(Fs&Gs))Sl(e,0);else if(0!==r){if(2===r&&(Is|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(n=Bt(e))&&(r=kl(e,n))),1===r)throw t=Bs,Sl(e,0),vl(e,n),gl(e,Hi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:case 5:Il(e);break;case 3:if(vl(e,n),(62914560&n)===n&&10<(r=qs+500-Hi())){if(0!==jt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qr(Il.bind(null,e),r);break}Il(e);break;case 4:if(vl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Vt(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Hi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ps(n/1960))-n)){e.timeoutHandle=qr(Il.bind(null,e),n);break}Il(e);break;default:throw Error(a(329))}}return gl(e,Hi()),e.callbackNode===t?yl.bind(null,e):null}function vl(e,t){for(t&=~Hs,t&=~Gs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vt(t),r=1<<n;e[n]=-1,t&=~r}}function _l(e){if(0!==(48&Is))throw Error(a(327));if(Rl(),e===Ls&&0!==(e.expiredLanes&Rs)){var t=Rs,n=kl(e,t);0!==(Fs&Gs)&&(n=kl(e,t=jt(e,t)))}else n=kl(e,t=jt(e,0));if(0!==e.tag&&2===n&&(Is|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(t=Bt(e))&&(n=kl(e,t))),1===n)throw n=Bs,Sl(e,0),vl(e,t),gl(e,Hi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Il(e),gl(e,Hi()),null}function bl(e,t){var n=Is;Is|=1;try{return e(t)}finally{0===(Is=n)&&(Ws(),Zi())}}function xl(e,t){var n=Is;Is&=-2,Is|=8;try{return e(t)}finally{0===(Is=n)&&(Ws(),Zi())}}function wl(e,t){di(zs,Ns),Ns|=t,Fs|=t}function El(){Ns=zs.current,ci(zs)}function Sl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,$r(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vi();break;case 3:Ro(),ci(pi),ci(fi),Yo();break;case 5:zo(r);break;case 4:Ro();break;case 13:case 19:ci(jo);break;case 10:ro(r);break;case 23:case 24:El()}n=n.return}Ls=e,Ds=$l(e.current,null),Rs=Ns=Fs=t,js=0,Bs=null,Hs=Gs=Us=0}function Tl(e,t){for(;;){var n=Ds;try{if(no(),Ko.current=Ia,ra){for(var r=ea.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ra=!1}if(Qo=0,na=ta=ea=null,ia=!1,Os.current=null,null===n||null===n.return){js=1,Bs=t,Ds=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Rs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!==(1&jo.current),h=a;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=h.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!d)}}if(f){var g=h.updateQueue;if(null===g){var y=new Set;y.add(u),h.updateQueue=y}else g.add(u);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=co(-1,1);v.tag=2,ho(s,v)}s.lanes|=1;break e}l=void 0,s=t;var _=o.pingCache;if(null===_?(_=o.pingCache=new ds,l=new Set,_.set(u,l)):void 0===(l=_.get(u))&&(l=new Set,_.set(u,l)),!l.has(s)){l.add(s);var b=Ul.bind(null,o,u,s);u.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);l=Error((W(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==js&&(js=2),l=us(l,s),h=a;do{switch(h.tag){case 3:o=l,h.flags|=4096,t&=-t,h.lanes|=t,fo(h,hs(0,o,t));break e;case 1:o=l;var x=h.type,w=h.stateNode;if(0===(64&h.flags)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Js||!Js.has(w)))){h.flags|=4096,t&=-t,h.lanes|=t,fo(h,fs(h,o,t));break e}}h=h.return}while(null!==h)}Ol(n)}catch(E){t=E,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function Ml(){var e=As.current;return As.current=Ia,null===e?Ia:e}function kl(e,t){var n=Is;Is|=16;var r=Ml();for(Ls===e&&Rs===t||Sl(e,t);;)try{Cl();break}catch(i){Tl(e,i)}if(no(),Is=n,As.current=r,null!==Ds)throw Error(a(261));return Ls=null,Rs=0,js}function Cl(){for(;null!==Ds;)Al(Ds)}function Pl(){for(;null!==Ds&&!Ci();)Al(Ds)}function Al(e){var t=Zs(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,null===t?Ol(e):Ds=t,Os.current=null}function Ol(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ns)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ns)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ls(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===js&&(js=5)}function Il(e){var t=Vi();return $i(99,Ll.bind(null,e,t)),null}function Ll(e,t){do{Rl()}while(null!==el);if(0!==(48&Is))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<o;){var u=31-Vt(o),c=1<<u;i[u]=0,s[u]=-1,l[u]=-1,o&=~c}if(null!==il&&0===(24&r)&&il.has(e)&&il.delete(e),e===Ls&&(Ds=Ls=null,Rs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Is,Is|=32,Os.current=null,Ur=Xt,yr(s=gr())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,o=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(M){l=null;break e}var d=0,h=-1,f=-1,p=0,m=0,g=s,y=null;t:for(;;){for(var v;g!==l||0!==o&&3!==g.nodeType||(h=d+o),g!==u||0!==c&&3!==g.nodeType||(f=d+c),3===g.nodeType&&(d+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===s)break t;if(y===l&&++p===o&&(h=d),y===u&&++m===c&&(f=d),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}l=-1===h||-1===f?null:{start:h,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;Gr={focusedElem:s,selectionRange:l},Xt=!1,cl=null,dl=!1,Xs=r;do{try{Dl()}catch(M){if(null===Xs)throw Error(a(330));Fl(Xs,M),Xs=Xs.nextEffect}}while(null!==Xs);cl=null,Xs=r;do{try{for(s=e;null!==Xs;){var _=Xs.flags;if(16&_&&ve(Xs.stateNode,""),128&_){var b=Xs.alternate;if(null!==b){var x=b.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&_){case 2:ws(Xs),Xs.flags&=-3;break;case 6:ws(Xs),Xs.flags&=-3,Ms(Xs.alternate,Xs);break;case 1024:Xs.flags&=-1025;break;case 1028:Xs.flags&=-1025,Ms(Xs.alternate,Xs);break;case 4:Ms(Xs.alternate,Xs);break;case 8:Ts(s,l=Xs);var w=l.alternate;bs(l),null!==w&&bs(w)}Xs=Xs.nextEffect}}catch(M){if(null===Xs)throw Error(a(330));Fl(Xs,M),Xs=Xs.nextEffect}}while(null!==Xs);if(x=Gr,b=gr(),_=x.focusedElem,s=x.selectionRange,b!==_&&_&&_.ownerDocument&&mr(_.ownerDocument.documentElement,_)){null!==s&&yr(_)&&(b=s.start,void 0===(x=s.end)&&(x=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(x,_.value.length)):(x=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),l=_.textContent.length,w=Math.min(s.start,l),s=void 0===s.end?w:Math.min(s.end,l),!x.extend&&w>s&&(l=s,s=w,w=l),l=pr(_,w),o=pr(_,s),l&&o&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((b=b.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),w>s?(x.addRange(b),x.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),x.addRange(b))))),b=[];for(x=_;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(x=b[_]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Xt=!!Ur,Gr=Ur=null,e.current=n,Xs=r;do{try{for(_=e;null!==Xs;){var E=Xs.flags;if(36&E&&ys(_,Xs.alternate,Xs),128&E){b=void 0;var S=Xs.ref;if(null!==S){var T=Xs.stateNode;Xs.tag,b=T,"function"===typeof S?S(b):S.current=b}}Xs=Xs.nextEffect}}catch(M){if(null===Xs)throw Error(a(330));Fl(Xs,M),Xs=Xs.nextEffect}}while(null!==Xs);Xs=null,ji(),Is=i}else e.current=n;if(Qs)Qs=!1,el=e,tl=t;else for(Xs=r;null!==Xs;)t=Xs.nextEffect,Xs.nextEffect=null,8&Xs.flags&&((E=Xs).sibling=null,E.stateNode=null),Xs=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===al?ol++:(ol=0,al=e):ol=0,n=n.stateNode,Si&&"function"===typeof Si.onCommitFiberRoot)try{Si.onCommitFiberRoot(Ei,n,void 0,64===(64&n.current.flags))}catch(M){}if(gl(e,Hi()),Ys)throw Ys=!1,e=Ks,Ks=null,e;return 0!==(8&Is)||Zi(),null}function Dl(){for(;null!==Xs;){var e=Xs.alternate;dl||null===cl||(0!==(8&Xs.flags)?et(Xs,cl)&&(dl=!0):13===Xs.tag&&Cs(e,Xs)&&et(Xs,cl)&&(dl=!0));var t=Xs.flags;0!==(256&t)&&gs(e,Xs),0===(512&t)||Qs||(Qs=!0,Wi(97,(function(){return Rl(),null}))),Xs=Xs.nextEffect}}function Rl(){if(90!==tl){var e=97<tl?97:tl;return tl=90,$i(e,jl)}return!1}function Nl(e,t){nl.push(t,e),Qs||(Qs=!0,Wi(97,(function(){return Rl(),null})))}function zl(e,t){rl.push(t,e),Qs||(Qs=!0,Wi(97,(function(){return Rl(),null})))}function jl(){if(null===el)return!1;var e=el;if(el=null,0!==(48&Is))throw Error(a(331));var t=Is;Is|=32;var n=rl;rl=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(u){if(null===o)throw Error(a(330));Fl(o,u)}}for(n=nl,nl=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var l=i.create;i.destroy=l()}catch(u){if(null===o)throw Error(a(330));Fl(o,u)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Is=t,Zi(),!0}function Bl(e,t,n){ho(e,t=hs(0,t=us(n,t),1)),t=hl(),null!==(e=ml(e,1))&&(Ht(e,1,t),gl(e,t))}function Fl(e,t){if(3===e.tag)Bl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Bl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var i=fs(n,e=us(t,e),1);if(ho(n,i),i=hl(),null!==(n=ml(n,1)))Ht(n,1,i),gl(n,i);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Ul(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hl(),e.pingedLanes|=e.suspendedLanes&n,Ls===e&&(Rs&n)===n&&(4===js||3===js&&(62914560&Rs)===Rs&&500>Hi()-qs?Sl(e,0):Hs|=n),gl(e,t)}function Gl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Vi()?1:2:(0===ll&&(ll=Fs),0===(t=Ut(62914560&~ll))&&(t=4194304))),n=hl(),null!==(e=ml(e,t))&&(Ht(e,t,n),gl(e,n))}function Hl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Vl(e,t,n,r){return new Hl(e,t,n,r)}function ql(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $l(e,t){var n=e.alternate;return null===n?((n=Vl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wl(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)ql(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Zl(n.children,i,o,t);case N:s=8,i|=16;break;case T:s=8,i|=1;break;case M:return(e=Vl(12,n,t,8|i)).elementType=M,e.type=M,e.lanes=o,e;case A:return(e=Vl(13,n,t,i)).type=A,e.elementType=A,e.lanes=o,e;case O:return(e=Vl(19,n,t,i)).elementType=O,e.lanes=o,e;case z:return Xl(n,i,o,t);case j:return(e=Vl(24,n,t,i)).elementType=j,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case C:s=9;break e;case P:s=11;break e;case I:s=14;break e;case L:s=16,r=null;break e;case D:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Vl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Zl(e,t,n,r){return(e=Vl(7,e,r,t)).lanes=n,e}function Xl(e,t,n,r){return(e=Vl(23,e,r,t)).elementType=z,e.lanes=n,e}function Yl(e,t,n){return(e=Vl(6,e,null,t)).lanes=n,e}function Kl(e,t,n){return(t=Vl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Gt(0),this.expirationTimes=Gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gt(0),this.mutableSourceEagerHydrationData=null}function Ql(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function eu(e,t,n,r){var i=t.current,o=hl(),s=fl(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(yi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(yi(u)){n=bi(n,u,l);break e}}n=l}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=co(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ho(i,t),pl(i,s,o),s}function tu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ru(e,t){nu(e,t),(e=e.alternate)&&nu(e,t)}function iu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Jl(e,t,null!=n&&!0===n.hydrate),t=Vl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,lo(t),e[ei]=n.current,Ir(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ou(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function au(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tu(a);s.call(e)}}eu(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new iu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var l=i;i=function(){var e=tu(a);l.call(e)}}xl((function(){eu(t,a,e,i)}))}return tu(a)}function su(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ou(t))throw Error(a(200));return Ql(e,t,null,n)}Zs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)za=!0;else{if(0===(n&r)){switch(za=!1,t.tag){case 3:Wa(t),Zo();break;case 5:No(t);break;case 1:yi(t.type)&&xi(t);break;case 4:Do(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;di(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ja(e,t,n):(di(jo,1&jo.current),null!==(t=os(e,t,n))?t.sibling:null);di(jo,1&jo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),di(jo,jo.current),r)break;return null;case 23:case 24:return t.lanes=0,Ga(e,t,n)}return os(e,t,n)}za=0!==(16384&e.flags)}else za=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=gi(t,fi.current),oo(t,n),i=sa(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var o=!0;xi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,lo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&yo(t,r,s,e),i.updater=vo,t.stateNode=i,i._reactInternals=t,wo(t,r,e,n),t=$a(null,t,r,!0,o,n)}else t.tag=0,ja(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return ql(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===I)return 14}return 2}(i),e=Ki(i,e),o){case 0:t=Va(null,t,i,e,n);break e;case 1:t=qa(null,t,i,e,n);break e;case 11:t=Ba(null,t,i,e,n);break e;case 14:t=Fa(null,t,i,Ki(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Va(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 1:return r=t.type,i=t.pendingProps,qa(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 3:if(Wa(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,uo(e,t),po(t,r,null,n),(r=t.memoizedState.element)===i)Zo(),t=os(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Uo=Zr(t.stateNode.containerInfo.firstChild),Fo=t,o=Go=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Xo.push(o);for(n=Co(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else ja(e,t,r,n),Zo();t=t.child}return t;case 5:return No(t),null===e&&qo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Vr(r,i)?s=null:null!==o&&Vr(r,o)&&(t.flags|=16),Ha(e,t),ja(e,t,s,n),t.child;case 6:return null===e&&qo(t),null;case 13:return Ja(e,t,n);case 4:return Do(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ko(t,null,r,n):ja(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ba(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 7:return ja(e,t,t.pendingProps,n),t.child;case 8:case 12:return ja(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var l=t.type._context;if(di(Ji,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=cr(l,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!pi.current){t=os(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===l.tag&&((c=co(-1,n&-n)).tag=2,ho(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),io(l.return,n),u.lanes|=n;break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}ja(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,oo(t,n),r=r(i=ao(i,o.unstable_observedBits)),t.flags|=1,ja(e,t,r,n),t.child;case 14:return o=Ki(i=t.type,t.pendingProps),Fa(e,t,i,o=Ki(i.type,o),r,n);case 15:return Ua(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ki(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,xi(t)):e=!1,oo(t,n),bo(t,r,i),wo(t,r,i,n),$a(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Ga(e,t,n)}throw Error(a(156,t.tag))},iu.prototype.render=function(e){eu(e,this._internalRoot,null,null)},iu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;eu(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pl(e,4,hl()),ru(e,4))},nt=function(e){13===e.tag&&(pl(e,67108864,hl()),ru(e,67108864))},rt=function(e){if(13===e.tag){var t=hl(),n=fl(e);pl(e,n,t),ru(e,n)}},it=function(e,t){return t()},ke=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=oi(r);if(!i)throw Error(a(90));K(r),ne(r,i)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Le=bl,De=function(e,t,n,r,i){var o=Is;Is|=4;try{return $i(98,e.bind(null,t,n,r,i))}finally{0===(Is=o)&&(Ws(),Zi())}},Re=function(){0===(49&Is)&&(function(){if(null!==il){var e=il;il=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gl(e,Hi())}))}Zi()}(),Rl())},Ne=function(e,t){var n=Is;Is|=2;try{return e(t)}finally{0===(Is=n)&&(Ws(),Zi())}};var lu={Events:[ri,ii,oi,Oe,Ie,Rl,{current:!1}]},uu={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cu={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{Ei=du.inject(cu),Si=du}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lu,t.createPortal=su,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Is;if(0!==(48&n))return e(t);Is|=1;try{if(e)return $i(99,e.bind(null,t))}finally{Is=n,Zi()}},t.hydrate=function(e,t,n){if(!ou(t))throw Error(a(200));return au(null,e,t,!0,n)},t.render=function(e,t,n){if(!ou(t))throw Error(a(200));return au(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ou(e))throw Error(a(40));return!!e._reactRootContainer&&(xl((function(){au(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bl,t.unstable_createPortal=function(e,t){return su(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ou(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return au(e,t,n,!1,r)},t.version="17.0.2"},73935:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(64448)},97762:function(e,t,n){"use strict";e.exports=n(38698)},21038:function(e,t,n){"use strict";n.r(t),n.d(t,{FormattedDate:function(){return Xn},FormattedDateParts:function(){return er},FormattedDateTimeRange:function(){return $n},FormattedDisplayName:function(){return Qn},FormattedList:function(){return Jn},FormattedListParts:function(){return ot},FormattedMessage:function(){return Vn},FormattedNumber:function(){return Kn},FormattedNumberParts:function(){return it},FormattedPlural:function(){return Un},FormattedRelativeTime:function(){return Bn},FormattedTime:function(){return Yn},FormattedTimeParts:function(){return tr},IntlContext:function(){return tt},IntlProvider:function(){return On},InvalidConfigError:function(){return ze},MessageFormatError:function(){return Fe},MissingDataError:function(){return je},MissingTranslationError:function(){return Ue},RawIntlProvider:function(){return et},ReactIntlError:function(){return Re},ReactIntlErrorCode:function(){return Le},UnsupportedFormatterError:function(){return Ne},createIntl:function(){return Pn},createIntlCache:function(){return Ve},defineMessage:function(){return Zn},defineMessages:function(){return Wn},injectIntl:function(){return nt},useIntl:function(){return rt}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function s(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var l=n(67294),u=n(8679),c=n.n(u);var d,h,f;function p(e,t,n){if(void 0===n&&(n=Error),!e)throw new n(t)}function m(e){return e.type===h.literal}function g(e){return e.type===h.argument}function y(e){return e.type===h.number}function v(e){return e.type===h.date}function _(e){return e.type===h.time}function b(e){return e.type===h.select}function x(e){return e.type===h.plural}function w(e){return e.type===h.pound}function E(e){return e.type===h.tag}function S(e){return!(!e||"object"!==typeof e||e.type!==f.number)}function T(e){return!(!e||"object"!==typeof e||e.type!==f.dateTime)}!function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(d||(d={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(h||(h={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(f||(f={}));var M=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,k=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function C(e){var t={};return e.replace(k,(function(e){var n=e.length;switch(e[0]){case"G":t.era=4===n?"long":5===n?"narrow":"short";break;case"y":t.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===n?"short":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),t}var P=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;var A=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,O=/^(@+)?(\+|#+)?[rs]?$/g,I=/(\*)(0+)|(#+)(0+)|(0+)/g,L=/^(0+)$/;function D(e){var t={};return"r"===e[e.length-1]?t.roundingPriority="morePrecision":"s"===e[e.length-1]&&(t.roundingPriority="lessPrecision"),e.replace(O,(function(e,n,r){return"string"!==typeof r?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===r?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"===typeof r?r.length:0)),""})),t}function R(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function N(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if("+!"===n?(t.signDisplay="always",e=e.slice(2)):"+?"===n&&(t.signDisplay="exceptZero",e=e.slice(2)),!L.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function z(e){var t=R(e);return t||{}}function j(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=i.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=i.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=o(o(o({},t),{notation:"scientific"}),i.options.reduce((function(e,t){return o(o({},e),z(t))}),{}));continue;case"engineering":t=o(o(o({},t),{notation:"engineering"}),i.options.reduce((function(e,t){return o(o({},e),z(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(I,(function(e,n,r,i,o,a){if(n)t.minimumIntegerDigits=r.length;else{if(i&&o)throw new Error("We currently do not support maximum integer digits");if(a)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(L.test(i.stem))t.minimumIntegerDigits=i.stem.length;else if(A.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(A,(function(e,n,r,i,o,a){return"*"===r?t.minimumFractionDigits=n.length:i&&"#"===i[0]?t.maximumFractionDigits=i.length:o&&a?(t.minimumFractionDigits=o.length,t.maximumFractionDigits=o.length+a.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""}));var a=i.options[0];"w"===a?t=o(o({},t),{trailingZeroDisplay:"stripIfInteger"}):a&&(t=o(o({},t),D(a)))}else if(O.test(i.stem))t=o(o({},t),D(i.stem));else{var s=R(i.stem);s&&(t=o(o({},t),s));var l=N(i.stem);l&&(t=o(o({},t),l))}}return t}var B,F={AX:["H"],BQ:["H"],CP:["H"],CZ:["H"],DK:["H"],FI:["H"],ID:["H"],IS:["H"],ML:["H"],NE:["H"],RU:["H"],SE:["H"],SJ:["H"],SK:["H"],AS:["h","H"],BT:["h","H"],DJ:["h","H"],ER:["h","H"],GH:["h","H"],IN:["h","H"],LS:["h","H"],PG:["h","H"],PW:["h","H"],SO:["h","H"],TO:["h","H"],VU:["h","H"],WS:["h","H"],"001":["H","h"],AL:["h","H","hB"],TD:["h","H","hB"],"ca-ES":["H","h","hB"],CF:["H","h","hB"],CM:["H","h","hB"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],LU:["H","h","hB"],NP:["H","h","hB"],PF:["H","h","hB"],SC:["H","h","hB"],SM:["H","h","hB"],SN:["H","h","hB"],TF:["H","h","hB"],VA:["H","h","hB"],CY:["h","H","hb","hB"],GR:["h","H","hb","hB"],CO:["h","H","hB","hb"],DO:["h","H","hB","hb"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],NA:["h","H","hB","hb"],PA:["h","H","hB","hb"],PR:["h","H","hB","hb"],VE:["h","H","hB","hb"],AC:["H","h","hb","hB"],AI:["H","h","hb","hB"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CC:["H","h","hb","hB"],CK:["H","h","hb","hB"],CX:["H","h","hb","hB"],DG:["H","h","hb","hB"],FK:["H","h","hb","hB"],GB:["H","h","hb","hB"],GG:["H","h","hb","hB"],GI:["H","h","hb","hB"],IE:["H","h","hb","hB"],IM:["H","h","hb","hB"],IO:["H","h","hb","hB"],JE:["H","h","hb","hB"],LT:["H","h","hb","hB"],MK:["H","h","hb","hB"],MN:["H","h","hb","hB"],MS:["H","h","hb","hB"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],PN:["H","h","hb","hB"],SH:["H","h","hb","hB"],SX:["H","h","hb","hB"],TA:["H","h","hb","hB"],ZA:["H","h","hb","hB"],"af-ZA":["H","h","hB","hb"],AR:["H","h","hB","hb"],CL:["H","h","hB","hb"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],EA:["H","h","hB","hb"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],GT:["H","h","hB","hb"],HN:["H","h","hB","hb"],IC:["H","h","hB","hb"],KG:["H","h","hB","hb"],KM:["H","h","hB","hb"],LK:["H","h","hB","hb"],MA:["H","h","hB","hb"],MX:["H","h","hB","hb"],NI:["H","h","hB","hb"],PY:["H","h","hB","hb"],SV:["H","h","hB","hb"],UY:["H","h","hB","hb"],JP:["H","h","K"],AD:["H","hB"],AM:["H","hB"],AO:["H","hB"],AT:["H","hB"],AW:["H","hB"],BE:["H","hB"],BF:["H","hB"],BJ:["H","hB"],BL:["H","hB"],BR:["H","hB"],CG:["H","hB"],CI:["H","hB"],CV:["H","hB"],DE:["H","hB"],EE:["H","hB"],FR:["H","hB"],GA:["H","hB"],GF:["H","hB"],GN:["H","hB"],GP:["H","hB"],GW:["H","hB"],HR:["H","hB"],IL:["H","hB"],IT:["H","hB"],KZ:["H","hB"],MC:["H","hB"],MD:["H","hB"],MF:["H","hB"],MQ:["H","hB"],MZ:["H","hB"],NC:["H","hB"],NL:["H","hB"],PM:["H","hB"],PT:["H","hB"],RE:["H","hB"],RO:["H","hB"],SI:["H","hB"],SR:["H","hB"],ST:["H","hB"],TG:["H","hB"],TR:["H","hB"],WF:["H","hB"],YT:["H","hB"],BD:["h","hB","H"],PK:["h","hB","H"],AZ:["H","hB","h"],BA:["H","hB","h"],BG:["H","hB","h"],CH:["H","hB","h"],GE:["H","hB","h"],LI:["H","hB","h"],ME:["H","hB","h"],RS:["H","hB","h"],UA:["H","hB","h"],UZ:["H","hB","h"],XK:["H","hB","h"],AG:["h","hb","H","hB"],AU:["h","hb","H","hB"],BB:["h","hb","H","hB"],BM:["h","hb","H","hB"],BS:["h","hb","H","hB"],CA:["h","hb","H","hB"],DM:["h","hb","H","hB"],"en-001":["h","hb","H","hB"],FJ:["h","hb","H","hB"],FM:["h","hb","H","hB"],GD:["h","hb","H","hB"],GM:["h","hb","H","hB"],GU:["h","hb","H","hB"],GY:["h","hb","H","hB"],JM:["h","hb","H","hB"],KI:["h","hb","H","hB"],KN:["h","hb","H","hB"],KY:["h","hb","H","hB"],LC:["h","hb","H","hB"],LR:["h","hb","H","hB"],MH:["h","hb","H","hB"],MP:["h","hb","H","hB"],MW:["h","hb","H","hB"],NZ:["h","hb","H","hB"],SB:["h","hb","H","hB"],SG:["h","hb","H","hB"],SL:["h","hb","H","hB"],SS:["h","hb","H","hB"],SZ:["h","hb","H","hB"],TC:["h","hb","H","hB"],TT:["h","hb","H","hB"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],VC:["h","hb","H","hB"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],ZM:["h","hb","H","hB"],BO:["H","hB","h","hb"],EC:["H","hB","h","hb"],ES:["H","hB","h","hb"],GQ:["H","hB","h","hb"],PE:["H","hB","h","hb"],AE:["h","hB","hb","H"],"ar-001":["h","hB","hb","H"],BH:["h","hB","hb","H"],DZ:["h","hB","hb","H"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],HK:["h","hB","hb","H"],IQ:["h","hB","hb","H"],JO:["h","hB","hb","H"],KW:["h","hB","hb","H"],LB:["h","hB","hb","H"],LY:["h","hB","hb","H"],MO:["h","hB","hb","H"],MR:["h","hB","hb","H"],OM:["h","hB","hb","H"],PH:["h","hB","hb","H"],PS:["h","hB","hb","H"],QA:["h","hB","hb","H"],SA:["h","hB","hb","H"],SD:["h","hB","hb","H"],SY:["h","hB","hb","H"],TN:["h","hB","hb","H"],YE:["h","hB","hb","H"],AF:["H","hb","hB","h"],LA:["H","hb","hB","h"],CN:["H","hB","hb","h"],LV:["H","hB","hb","h"],TL:["H","hB","hb","h"],"zu-ZA":["H","hB","hb","h"],CD:["hB","H"],IR:["hB","H"],"hi-IN":["hB","h","H"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"te-IN":["hB","h","H"],KH:["hB","h","H","hb"],"ta-IN":["hB","h","hb","H"],BN:["hb","hB","h","H"],MY:["hb","hB","h","H"],ET:["hB","hb","h","H"],"gu-IN":["hB","hb","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],TW:["hB","hb","h","H"],KE:["hB","hb","H","h"],MM:["hB","hb","H","h"],TZ:["hB","hb","H","h"],UG:["hB","hb","H","h"]};function U(e){var t=e.hourCycle;if(void 0===t&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n,r=e.language;return"root"!==r&&(n=e.maximize().region),(F[n||""]||F[r||""]||F["".concat(r,"-001")]||F["001"])[0]}var G=new RegExp("^".concat(M.source,"*")),H=new RegExp("".concat(M.source,"*$"));function V(e,t){return{start:e,end:t}}var q=!!String.prototype.startsWith,$=!!String.fromCodePoint,W=!!Object.fromEntries,Z=!!String.prototype.codePointAt,X=!!String.prototype.trimStart,Y=!!String.prototype.trimEnd,K=!!Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},J=!0;try{J="a"===(null===(B=ae("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===B?void 0:B[0])}catch(nr){J=!1}var Q,ee=q?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},te=$?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r="",i=e.length,o=0;i>o;){if((n=e[o++])>1114111)throw RangeError(n+" is not a valid code point");r+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return r},ne=W?Object.fromEntries:function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],a=i[1];t[o]=a}return t},re=Z?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var r,i=e.charCodeAt(t);return i<55296||i>56319||t+1===n||(r=e.charCodeAt(t+1))<56320||r>57343?i:r-56320+(i-55296<<10)+65536}},ie=X?function(e){return e.trimStart()}:function(e){return e.replace(G,"")},oe=Y?function(e){return e.trimEnd()}:function(e){return e.replace(H,"")};function ae(e,t){return new RegExp(e,t)}if(J){var se=ae("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Q=function(e,t){var n;return se.lastIndex=t,null!==(n=se.exec(e)[1])&&void 0!==n?n:""}}else Q=function(e,t){for(var n=[];;){var r=re(e,t);if(void 0===r||ce(r)||de(r))break;n.push(r),t+=r>=65536?2:1}return te.apply(void 0,n)};var le=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,n){for(var r=[];!this.isEOF();){var i=this.char();if(123===i){if((o=this.parseArgument(e,n)).err)return o;r.push(o.val)}else{if(125===i&&e>0)break;if(35!==i||"plural"!==t&&"selectordinal"!==t){if(60===i&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(d.UNMATCHED_CLOSING_TAG,V(this.clonePosition(),this.clonePosition()))}if(60===i&&!this.ignoreTag&&ue(this.peek()||0)){if((o=this.parseTag(e,t)).err)return o;r.push(o.val)}else{var o;if((o=this.parseLiteral(e,t)).err)return o;r.push(o.val)}}else{var a=this.clonePosition();this.bump(),r.push({type:h.pound,location:V(a,this.clonePosition())})}}}return{val:r,err:null}},e.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:h.literal,value:"<".concat(r,"/>"),location:V(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var i=this.parseMessage(e+1,t,!0);if(i.err)return i;var o=i.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!ue(this.char()))return this.error(d.INVALID_TAG,V(a,this.clonePosition()));var s=this.clonePosition();return r!==this.parseTagName()?this.error(d.UNMATCHED_CLOSING_TAG,V(s,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:h.tag,value:r,children:o,location:V(n,this.clonePosition())},err:null}:this.error(d.INVALID_TAG,V(a,this.clonePosition())))}return this.error(d.UNCLOSED_TAG,V(n,this.clonePosition()))}return this.error(d.INVALID_TAG,V(n,this.clonePosition()))},e.prototype.parseTagName=function(){var e,t=this.offset();for(this.bump();!this.isEOF()&&(45===(e=this.char())||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039);)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),r="";;){var i=this.tryParseQuote(t);if(i)r+=i;else{var o=this.tryParseUnquoted(e,t);if(o)r+=o;else{var a=this.tryParseLeftAngleBracket();if(!a)break;r+=a}}}var s=V(n,this.clonePosition());return{val:{type:h.literal,value:r,location:s},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(ue(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(n);this.bump()}return te.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===t||"selectordinal"===t)||125===n&&e>0?null:(this.bump(),te(n))},e.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(d.EXPECT_ARGUMENT_CLOSING_BRACE,V(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(d.EMPTY_ARGUMENT,V(n,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(d.MALFORMED_ARGUMENT,V(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(d.EXPECT_ARGUMENT_CLOSING_BRACE,V(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:h.argument,value:r,location:V(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(d.EXPECT_ARGUMENT_CLOSING_BRACE,V(n,this.clonePosition())):this.parseArgumentOptions(e,t,r,n);default:return this.error(d.MALFORMED_ARGUMENT,V(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=Q(this.message,t),r=t+n.length;return this.bumpTo(r),{value:n,location:V(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,n,r){var i,a=this.clonePosition(),s=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(s){case"":return this.error(d.EXPECT_ARGUMENT_TYPE,V(a,l));case"number":case"date":case"time":this.bumpSpace();var u=null;if(this.bumpIf(",")){this.bumpSpace();var c=this.clonePosition();if((x=this.parseSimpleArgStyleIfPossible()).err)return x;if(0===(y=oe(x.val)).length)return this.error(d.EXPECT_ARGUMENT_STYLE,V(this.clonePosition(),this.clonePosition()));u={style:y,styleLocation:V(c,this.clonePosition())}}if((w=this.tryParseArgumentClose(r)).err)return w;var p=V(r,this.clonePosition());if(u&&ee(null===u||void 0===u?void 0:u.style,"::",0)){var m=ie(u.style.slice(2));if("number"===s)return(x=this.parseNumberSkeletonFromString(m,u.styleLocation)).err?x:{val:{type:h.number,value:n,location:p,style:x.val},err:null};if(0===m.length)return this.error(d.EXPECT_DATE_TIME_SKELETON,p);var g=m;this.locale&&(g=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e.charAt(r);if("j"===i){for(var o=0;r+1<e.length&&e.charAt(r+1)===i;)o++,r++;var a=1+(1&o),s=o<2?1:3+(o>>1),l=U(t);for("H"!=l&&"k"!=l||(s=0);s-- >0;)n+="a";for(;a-- >0;)n=l+n}else n+="J"===i?"H":i}return n}(m,this.locale));var y={type:f.dateTime,pattern:g,location:u.styleLocation,parsedOptions:this.shouldParseSkeletons?C(g):{}};return{val:{type:"date"===s?h.date:h.time,value:n,location:p,style:y},err:null}}return{val:{type:"number"===s?h.number:"date"===s?h.date:h.time,value:n,location:p,style:null!==(i=null===u||void 0===u?void 0:u.style)&&void 0!==i?i:null},err:null};case"plural":case"selectordinal":case"select":var v=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(d.EXPECT_SELECT_ARGUMENT_OPTIONS,V(v,o({},v)));this.bumpSpace();var _=this.parseIdentifierIfPossible(),b=0;if("select"!==s&&"offset"===_.value){if(!this.bumpIf(":"))return this.error(d.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,V(this.clonePosition(),this.clonePosition()));var x;if(this.bumpSpace(),(x=this.tryParseDecimalInteger(d.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,d.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return x;this.bumpSpace(),_=this.parseIdentifierIfPossible(),b=x.val}var w,E=this.tryParsePluralOrSelectOptions(e,s,t,_);if(E.err)return E;if((w=this.tryParseArgumentClose(r)).err)return w;var S=V(r,this.clonePosition());return"select"===s?{val:{type:h.select,value:n,options:ne(E.val),location:S},err:null}:{val:{type:h.plural,value:n,options:ne(E.val),offset:b,pluralType:"plural"===s?"cardinal":"ordinal",location:S},err:null};default:return this.error(d.INVALID_ARGUMENT_TYPE,V(a,l))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(d.EXPECT_ARGUMENT_CLOSING_BRACE,V(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(d.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,V(n,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],n=0,r=e.split(P).filter((function(e){return e.length>0}));n<r.length;n++){var i=r[n].split("/");if(0===i.length)throw new Error("Invalid number skeleton");for(var o=i[0],a=i.slice(1),s=0,l=a;s<l.length;s++)if(0===l[s].length)throw new Error("Invalid number skeleton");t.push({stem:o,options:a})}return t}(e)}catch(r){return this.error(d.INVALID_NUMBER_SKELETON,t)}return{val:{type:f.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?j(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,n,r){for(var i,o=!1,a=[],s=new Set,l=r.value,u=r.location;;){if(0===l.length){var c=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var h=this.tryParseDecimalInteger(d.EXPECT_PLURAL_ARGUMENT_SELECTOR,d.INVALID_PLURAL_ARGUMENT_SELECTOR);if(h.err)return h;u=V(c,this.clonePosition()),l=this.message.slice(c.offset,this.offset())}if(s.has(l))return this.error("select"===t?d.DUPLICATE_SELECT_ARGUMENT_SELECTOR:d.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);"other"===l&&(o=!0),this.bumpSpace();var f=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?d.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:d.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,V(this.clonePosition(),this.clonePosition()));var p=this.parseMessage(e+1,t,n);if(p.err)return p;var m=this.tryParseArgumentClose(f);if(m.err)return m;a.push([l,{value:p.val,location:V(f,this.clonePosition())}]),s.add(l),this.bumpSpace(),l=(i=this.parseIdentifierIfPossible()).value,u=i.location}return 0===a.length?this.error("select"===t?d.EXPECT_SELECT_ARGUMENT_SELECTOR:d.EXPECT_PLURAL_ARGUMENT_SELECTOR,V(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(d.MISSING_OTHER_CLAUSE,V(this.clonePosition(),this.clonePosition())):{val:a,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var i=!1,o=0;!this.isEOF();){var a=this.char();if(!(a>=48&&a<=57))break;i=!0,o=10*o+(a-48),this.bump()}var s=V(r,this.clonePosition());return i?K(o*=n)?{val:o,err:null}:this.error(t,s):this.error(e,s)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=re(this.message,e);if(void 0===t)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(ee(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&ce(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return null!==n&&void 0!==n?n:null},e}();function ue(e){return e>=97&&e<=122||e>=65&&e<=90}function ce(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function de(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function he(e){e.forEach((function(e){if(delete e.location,b(e)||x(e))for(var t in e.options)delete e.options[t].location,he(e.options[t].value);else y(e)&&S(e.style)||(v(e)||_(e))&&T(e.style)?delete e.style.location:E(e)&&he(e.children)}))}function fe(e,t){void 0===t&&(t={}),t=o({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new le(e,t).parse();if(n.err){var r=SyntaxError(d[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return(null===t||void 0===t?void 0:t.captureLocation)||he(n.val),n.val}function pe(e,t){var n=t&&t.cache?t.cache:we,r=t&&t.serializer?t.serializer:_e;return(t&&t.strategy?t.strategy:ve)(e,{cache:n,serializer:r})}function me(e,t,n,r){var i=function(e){return null==e||"number"===typeof e||"boolean"===typeof e}(r)?r:n(r),o=t.get(i);return"undefined"===typeof o&&(o=e.call(this,r),t.set(i,o)),o}function ge(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),o=t.get(i);return"undefined"===typeof o&&(o=e.apply(this,r),t.set(i,o)),o}function ye(e,t,n,r,i){return n.bind(t,e,r,i)}function ve(e,t){return ye(e,this,1===e.length?me:ge,t.cache.create(),t.serializer)}var _e=function(){return JSON.stringify(arguments)};function be(){this.cache=Object.create(null)}be.prototype.get=function(e){return this.cache[e]},be.prototype.set=function(e,t){this.cache[e]=t};var xe,we={create:function(){return new be}},Ee={variadic:function(e,t){return ye(e,this,ge,t.cache.create(),t.serializer)},monadic:function(e,t){return ye(e,this,me,t.cache.create(),t.serializer)}};!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(xe||(xe={}));var Se,Te=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.code=n,i.originalMessage=r,i}return i(t,e),t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),Me=function(e){function t(t,n,r,i){return e.call(this,'Invalid values for "'.concat(t,'": "').concat(n,'". Options are "').concat(Object.keys(r).join('", "'),'"'),xe.INVALID_VALUE,i)||this}return i(t,e),t}(Te),ke=function(e){function t(t,n,r){return e.call(this,'Value for "'.concat(t,'" must be of type ').concat(n),xe.INVALID_VALUE,r)||this}return i(t,e),t}(Te),Ce=function(e){function t(t,n){return e.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(n,'"'),xe.MISSING_VALUE,n)||this}return i(t,e),t}(Te);function Pe(e){return"function"===typeof e}function Ae(e,t,n,r,i,o,a){if(1===e.length&&m(e[0]))return[{type:Se.literal,value:e[0].value}];for(var s=[],l=0,u=e;l<u.length;l++){var c=u[l];if(m(c))s.push({type:Se.literal,value:c.value});else if(w(c))"number"===typeof o&&s.push({type:Se.literal,value:n.getNumberFormat(t).format(o)});else{var d=c.value;if(!i||!(d in i))throw new Ce(d,a);var h=i[d];if(g(c))h&&"string"!==typeof h&&"number"!==typeof h||(h="string"===typeof h||"number"===typeof h?String(h):""),s.push({type:"string"===typeof h?Se.literal:Se.object,value:h});else if(v(c)){var f="string"===typeof c.style?r.date[c.style]:T(c.style)?c.style.parsedOptions:void 0;s.push({type:Se.literal,value:n.getDateTimeFormat(t,f).format(h)})}else if(_(c)){f="string"===typeof c.style?r.time[c.style]:T(c.style)?c.style.parsedOptions:r.time.medium;s.push({type:Se.literal,value:n.getDateTimeFormat(t,f).format(h)})}else if(y(c)){(f="string"===typeof c.style?r.number[c.style]:S(c.style)?c.style.parsedOptions:void 0)&&f.scale&&(h*=f.scale||1),s.push({type:Se.literal,value:n.getNumberFormat(t,f).format(h)})}else{if(E(c)){var p=c.children,M=c.value,k=i[M];if(!Pe(k))throw new ke(M,"function",a);var C=k(Ae(p,t,n,r,i,o).map((function(e){return e.value})));Array.isArray(C)||(C=[C]),s.push.apply(s,C.map((function(e){return{type:"string"===typeof e?Se.literal:Se.object,value:e}})))}if(b(c)){if(!(P=c.options[h]||c.options.other))throw new Me(c.value,h,Object.keys(c.options),a);s.push.apply(s,Ae(P.value,t,n,r,i))}else if(x(c)){var P;if(!(P=c.options["=".concat(h)])){if(!Intl.PluralRules)throw new Te('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',xe.MISSING_INTL_API,a);var A=n.getPluralRules(t,{type:c.pluralType}).select(h-(c.offset||0));P=c.options[A]||c.options.other}if(!P)throw new Me(c.value,h,Object.keys(c.options),a);s.push.apply(s,Ae(P.value,t,n,r,i,h-(c.offset||0)))}else;}}}return function(e){return e.length<2?e:e.reduce((function(e,t){var n=e[e.length-1];return n&&n.type===Se.literal&&t.type===Se.literal?n.value+=t.value:e.push(t),e}),[])}(s)}function Oe(e,t){return t?Object.keys(e).reduce((function(n,r){var i,a;return n[r]=(i=e[r],(a=t[r])?o(o(o({},i||{}),a||{}),Object.keys(i).reduce((function(e,t){return e[t]=o(o({},i[t]),a[t]||{}),e}),{})):i),n}),o({},e)):e}function Ie(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(Se||(Se={}));var Le,De=function(){function e(t,n,r,i){void 0===n&&(n=e.defaultLocale);var o,a=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=a.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&t.type===Se.literal&&"string"===typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return Ae(a.ast,a.locales,a.formatters,a.formats,e,void 0,a.message)},this.resolvedOptions=function(){var e;return{locale:(null===(e=a.resolvedLocale)||void 0===e?void 0:e.toString())||Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},this.locales=n,this.resolvedLocale=e.resolveLocale(n),"string"===typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{ignoreTag:null===i||void 0===i?void 0:i.ignoreTag,locale:this.resolvedLocale})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=Oe(e.formats,r),this.formatters=i&&i.formatters||(void 0===(o=this.formatterCache)&&(o={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:pe((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,s([void 0],t,!1)))}),{cache:Ie(o.number),strategy:Ee.variadic}),getDateTimeFormat:pe((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,s([void 0],t,!1)))}),{cache:Ie(o.dateTime),strategy:Ee.variadic}),getPluralRules:pe((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,s([void 0],t,!1)))}),{cache:Ie(o.pluralRules),strategy:Ee.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(e){if("undefined"!==typeof Intl.Locale){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale("string"===typeof e?e:e[0])}},e.__parse=fe,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();!function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"}(Le||(Le={}));var Re=function(e){function t(n,r,i){var o=this,a=i?i instanceof Error?i:new Error(String(i)):void 0;return(o=e.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r,"\n").concat(a?"\n".concat(a.message,"\n").concat(a.stack):""))||this).code=n,"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return i(t,e),t}(Error),Ne=function(e){function t(t,n){return e.call(this,Le.UNSUPPORTED_FORMATTER,t,n)||this}return i(t,e),t}(Re),ze=function(e){function t(t,n){return e.call(this,Le.INVALID_CONFIG,t,n)||this}return i(t,e),t}(Re),je=function(e){function t(t,n){return e.call(this,Le.MISSING_DATA,t,n)||this}return i(t,e),t}(Re),Be=function(e){function t(t,n,r){return e.call(this,Le.FORMAT_ERROR,"".concat(t,"\nLocale: ").concat(n,"\n"),r)||this}return i(t,e),t}(Re),Fe=function(e){function t(t,n,r,i){var o=e.call(this,"".concat(t,"\nMessageID: ").concat(null===r||void 0===r?void 0:r.id,"\nDefault Message: ").concat(null===r||void 0===r?void 0:r.defaultMessage,"\nDescription: ").concat(null===r||void 0===r?void 0:r.description,"\n"),n,i)||this;return o.descriptor=r,o}return i(t,e),t}(Be),Ue=function(e){function t(t,n){var r=e.call(this,Le.MISSING_TRANSLATION,'Missing message: "'.concat(t.id,'" for locale "').concat(n,'", using ').concat(t.defaultMessage?"default message (".concat("string"===typeof t.defaultMessage?t.defaultMessage:t.defaultMessage.map((function(e){var t;return null!==(t=e.value)&&void 0!==t?t:JSON.stringify(e)})).join(),")"):"id"," as fallback."))||this;return r.descriptor=t,r}return i(t,e),t}(Re);function Ge(e,t,n){return void 0===n&&(n={}),t.reduce((function(t,r){return r in e?t[r]=e[r]:r in n&&(t[r]=n[r]),t}),{})}var He={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:function(e){0},onWarn:function(e){0}};function Ve(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function qe(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}function $e(e,t,n,r){var i,o=e&&e[t];if(o&&(i=o[n]),i)return i;r(new Ne("No ".concat(t," format named: ").concat(n)))}function We(e){p(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var Ze=o(o({},He),{textComponent:l.Fragment});function Xe(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(var o=0;o<i;o++){var a=n[o];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}var Ye,Ke,Je=l.createContext(null),Qe=Je.Consumer,et=Je.Provider,tt=Je;function nt(e,t){var n,r=t||{},i=r.intlPropName,a=void 0===i?"intl":i,s=r.forwardRef,u=void 0!==s&&s,d=r.enforceContext,h=void 0===d||d,f=function(t){return l.createElement(Qe,null,(function(n){var r;h&&We(n);var i=((r={})[a]=n,r);return l.createElement(e,o({},t,i,{ref:u?t.forwardedRef:null}))}))};return f.displayName="injectIntl(".concat((n=e).displayName||n.name||"Component",")"),f.WrappedComponent=e,u?c()(l.forwardRef((function(e,t){return l.createElement(f,o({},e,{forwardedRef:t}))})),e):c()(f,e)}function rt(){var e=l.useContext(tt);return We(e),e}!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(Ye||(Ye={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(Ke||(Ke={}));var it=function(e){var t=rt(),n=e.value,r=e.children,i=a(e,["value","children"]);return r(t.formatNumberToParts(n,i))};it.displayName="FormattedNumberParts";var ot=function(e){var t=rt(),n=e.value,r=e.children,i=a(e,["value","children"]);return r(t.formatListToParts(n,i))};function at(e){var t=function(t){var n=rt(),r=t.value,i=t.children,o=a(t,["value","children"]),s="string"===typeof r?new Date(r||0):r;return i("formatDate"===e?n.formatDateToParts(s,o):n.formatTimeToParts(s,o))};return t.displayName=Ke[e],t}function st(e){var t=function(t){var n=rt(),r=t.value,i=t.children,o=a(t,["value","children"]),s=n[e](r,o);if("function"===typeof i)return i(s);var u=n.textComponent||l.Fragment;return l.createElement(u,null,s)};return t.displayName=Ye[e],t}function lt(e,t){return Object.keys(e).reduce((function(n,r){return n[r]=o({timeZone:t},e[r]),n}),{})}function ut(e,t){return Object.keys(o(o({},e),t)).reduce((function(n,r){return n[r]=o(o({},e[r]||{}),t[r]||{}),n}),{})}function ct(e,t){if(!t)return e;var n=De.formats;return o(o(o({},n),e),{date:ut(lt(n.date,t),lt(e.date||{},t)),time:ut(lt(n.time,t),lt(e.time||{},t))})}it.displayName="FormattedNumberParts";var dt=function(e,t,n,r,i){var a=e.locale,s=e.formats,l=e.messages,u=e.defaultLocale,c=e.defaultFormats,d=e.fallbackOnEmptyString,f=e.onError,m=e.timeZone,g=e.defaultRichTextElements;void 0===n&&(n={id:""});var y=n.id,v=n.defaultMessage;p(!!y,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var _=String(y),b=l&&Object.prototype.hasOwnProperty.call(l,_)&&l[_];if(Array.isArray(b)&&1===b.length&&b[0].type===h.literal)return b[0].value;if(!r&&b&&"string"===typeof b&&!g)return b.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=o(o({},g),r||{}),s=ct(s,m),c=ct(c,m),!b){if(!1===d&&""===b)return b;if((!v||a&&a.toLowerCase()!==u.toLowerCase())&&f(new Ue(n,a)),v)try{return t.getMessageFormat(v,u,c,i).format(r)}catch(x){return f(new Fe('Error formatting default message for: "'.concat(_,'", rendering default message verbatim'),a,n,x)),"string"===typeof v?v:_}return _}try{return t.getMessageFormat(b,a,s,o({formatters:t},i||{})).format(r)}catch(x){f(new Fe('Error formatting message: "'.concat(_,'", using ').concat(v?"default message":"id"," as fallback."),a,n,x))}if(v)try{return t.getMessageFormat(v,u,c,i).format(r)}catch(x){f(new Fe('Error formatting the default message for: "'.concat(_,'", rendering message verbatim'),a,n,x))}return"string"===typeof b?b:"string"===typeof v?v:_},ht=["style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function ft(e,t,n){var r=e.locale,i=e.formats,o=e.onError;void 0===n&&(n={});var a=n.format,s=a&&$e(i,"number",a,o)||{};return t(r,Ge(n,ht,s))}function pt(e,t,n,r){void 0===r&&(r={});try{return ft(e,t,r).format(n)}catch(i){e.onError(new Re(Le.FORMAT_ERROR,"Error formatting number.",i))}return String(n)}function mt(e,t,n,r){void 0===r&&(r={});try{return ft(e,t,r).formatToParts(n)}catch(i){e.onError(new Re(Le.FORMAT_ERROR,"Error formatting number.",i))}return[]}var gt=["numeric","style"];function yt(e,t,n,r,i){void 0===i&&(i={}),r||(r="second"),Intl.RelativeTimeFormat||e.onError(new Te('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',xe.MISSING_INTL_API));try{return function(e,t,n){var r=e.locale,i=e.formats,o=e.onError;void 0===n&&(n={});var a=n.format,s=!!a&&$e(i,"relative",a,o)||{};return t(r,Ge(n,gt,s))}(e,t,i).format(n,r)}catch(o){e.onError(new Be("Error formatting relative time.",e.locale,o))}return String(n)}var vt=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function _t(e,t,n,r){var i=e.locale,a=e.formats,s=e.onError,l=e.timeZone;void 0===r&&(r={});var u=r.format,c=o(o({},l&&{timeZone:l}),u&&$e(a,t,u,s)),d=Ge(r,vt,c);return"time"!==t||d.hour||d.minute||d.second||d.timeStyle||d.dateStyle||(d=o(o({},d),{hour:"numeric",minute:"numeric"})),n(i,d)}function bt(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"===typeof i?new Date(i||0):i;try{return _t(e,"date",t,a).format(s)}catch(l){e.onError(new Re(Le.FORMAT_ERROR,"Error formatting date.",l))}return String(s)}function xt(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"===typeof i?new Date(i||0):i;try{return _t(e,"time",t,a).format(s)}catch(l){e.onError(new Re(Le.FORMAT_ERROR,"Error formatting time.",l))}return String(s)}function wt(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=n[2],s=void 0===a?{}:a,l=e.timeZone,u=e.locale,c=e.onError,d=Ge(s,vt,l?{timeZone:l}:{});try{return t(u,d).formatRange(i,o)}catch(h){c(new Re(Le.FORMAT_ERROR,"Error formatting date time range.",h))}return String(i)}function Et(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"===typeof i?new Date(i||0):i;try{return _t(e,"date",t,a).formatToParts(s)}catch(l){e.onError(new Re(Le.FORMAT_ERROR,"Error formatting date.",l))}return[]}function St(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"===typeof i?new Date(i||0):i;try{return _t(e,"time",t,a).formatToParts(s)}catch(l){e.onError(new Re(Le.FORMAT_ERROR,"Error formatting time.",l))}return[]}var Tt=["type"];function Mt(e,t,n,r){var i=e.locale,o=e.onError;void 0===r&&(r={}),Intl.PluralRules||o(new Te('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',xe.MISSING_INTL_API));var a=Ge(r,Tt);try{return t(i,a).select(n)}catch(s){o(new Be("Error formatting plural.",i,s))}return"other"}var kt=["type","style"],Ct=Date.now();function Pt(e,t,n,r){void 0===r&&(r={});var i=At(e,t,n,r).reduce((function(e,t){var n=t.value;return"string"!==typeof n?e.push(n):"string"===typeof e[e.length-1]?e[e.length-1]+=n:e.push(n),e}),[]);return 1===i.length?i[0]:0===i.length?"":i}function At(e,t,n,r){var i=e.locale,a=e.onError;void 0===r&&(r={}),Intl.ListFormat||a(new Te('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',xe.MISSING_INTL_API));var s=Ge(r,kt);try{var l={},u=n.map((function(e,t){if("object"===typeof e){var n=function(e){return"".concat(Ct,"_").concat(e,"_").concat(Ct)}(t);return l[n]=e,n}return String(e)}));return t(i,s).formatToParts(u).map((function(e){return"literal"===e.type?e:o(o({},e),{value:l[e.value]||e.value})}))}catch(c){a(new Re(Le.FORMAT_ERROR,"Error formatting list.",c))}return n}var Ot,It,Lt,Dt=["style","type","fallback"];function Rt(e,t,n,r){var i=e.locale,o=e.onError;Intl.DisplayNames||o(new Te('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',xe.MISSING_INTL_API));var a=Ge(r,Dt);try{return t(i,a).of(n)}catch(s){o(new Re(Le.FORMAT_ERROR,"Error formatting display name.",s))}}function Nt(e){var t;e.onWarn&&e.defaultRichTextElements&&"string"===typeof((t=e.messages||{})?t[Object.keys(t)[0]]:void 0)&&e.onWarn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}function zt(e,t){var n=function(e){void 0===e&&(e={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var t=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,i=pe((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,s([void 0],t,!1)))}),{cache:qe(e.dateTime),strategy:Ee.variadic}),a=pe((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,s([void 0],t,!1)))}),{cache:qe(e.number),strategy:Ee.variadic}),l=pe((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,s([void 0],t,!1)))}),{cache:qe(e.pluralRules),strategy:Ee.variadic});return{getDateTimeFormat:i,getNumberFormat:a,getMessageFormat:pe((function(e,t,n,r){return new De(e,t,n,o({formatters:{getNumberFormat:a,getDateTimeFormat:i,getPluralRules:l}},r||{}))}),{cache:qe(e.message),strategy:Ee.variadic}),getRelativeTimeFormat:pe((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,s([void 0],e,!1)))}),{cache:qe(e.relativeTime),strategy:Ee.variadic}),getPluralRules:l,getListFormat:pe((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(n.bind.apply(n,s([void 0],e,!1)))}),{cache:qe(e.list),strategy:Ee.variadic}),getDisplayNames:pe((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(r.bind.apply(r,s([void 0],e,!1)))}),{cache:qe(e.displayNames),strategy:Ee.variadic})}}(t),r=o(o({},He),e),i=r.locale,a=r.defaultLocale,l=r.onError;return i?!Intl.NumberFormat.supportedLocalesOf(i).length&&l?l(new je('Missing locale data for locale: "'.concat(i,'" in Intl.NumberFormat. Using default locale: "').concat(a,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(i).length&&l&&l(new je('Missing locale data for locale: "'.concat(i,'" in Intl.DateTimeFormat. Using default locale: "').concat(a,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(l&&l(new ze('"locale" was not configured, using "'.concat(a,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),r.locale=r.defaultLocale||"en"),Nt(r),o(o({},r),{formatters:n,formatNumber:pt.bind(null,r,n.getNumberFormat),formatNumberToParts:mt.bind(null,r,n.getNumberFormat),formatRelativeTime:yt.bind(null,r,n.getRelativeTimeFormat),formatDate:bt.bind(null,r,n.getDateTimeFormat),formatDateToParts:Et.bind(null,r,n.getDateTimeFormat),formatTime:xt.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:wt.bind(null,r,n.getDateTimeFormat),formatTimeToParts:St.bind(null,r,n.getDateTimeFormat),formatPlural:Mt.bind(null,r,n.getPluralRules),formatMessage:dt.bind(null,r,n),$t:dt.bind(null,r,n),formatList:Pt.bind(null,r,n.getListFormat),formatListToParts:At.bind(null,r,n.getListFormat),formatDisplayName:Rt.bind(null,r,n.getDisplayNames)})}!function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(Ot||(Ot={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(It||(It={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(Lt||(Lt={}));var jt=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Bt=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function Ft(e){var t={};return e.replace(Bt,(function(e){var n=e.length;switch(e[0]){case"G":t.era=4===n?"long":5===n?"narrow":"short";break;case"y":t.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===n?"short":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),t}var Ut=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;var Gt=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Ht=/^(@+)?(\+|#+)?[rs]?$/g,Vt=/(\*)(0+)|(#+)(0+)|(0+)/g,qt=/^(0+)$/;function $t(e){var t={};return"r"===e[e.length-1]?t.roundingPriority="morePrecision":"s"===e[e.length-1]&&(t.roundingPriority="lessPrecision"),e.replace(Ht,(function(e,n,r){return"string"!==typeof r?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===r?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"===typeof r?r.length:0)),""})),t}function Wt(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function Zt(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if("+!"===n?(t.signDisplay="always",e=e.slice(2)):"+?"===n&&(t.signDisplay="exceptZero",e=e.slice(2)),!qt.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function Xt(e){var t=Wt(e);return t||{}}function Yt(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=i.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=i.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=o(o(o({},t),{notation:"scientific"}),i.options.reduce((function(e,t){return o(o({},e),Xt(t))}),{}));continue;case"engineering":t=o(o(o({},t),{notation:"engineering"}),i.options.reduce((function(e,t){return o(o({},e),Xt(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(Vt,(function(e,n,r,i,o,a){if(n)t.minimumIntegerDigits=r.length;else{if(i&&o)throw new Error("We currently do not support maximum integer digits");if(a)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(qt.test(i.stem))t.minimumIntegerDigits=i.stem.length;else if(Gt.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(Gt,(function(e,n,r,i,o,a){return"*"===r?t.minimumFractionDigits=n.length:i&&"#"===i[0]?t.maximumFractionDigits=i.length:o&&a?(t.minimumFractionDigits=o.length,t.maximumFractionDigits=o.length+a.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""}));var a=i.options[0];"w"===a?t=o(o({},t),{trailingZeroDisplay:"stripIfInteger"}):a&&(t=o(o({},t),$t(a)))}else if(Ht.test(i.stem))t=o(o({},t),$t(i.stem));else{var s=Wt(i.stem);s&&(t=o(o({},t),s));var l=Zt(i.stem);l&&(t=o(o({},t),l))}}return t}var Kt,Jt={AX:["H"],BQ:["H"],CP:["H"],CZ:["H"],DK:["H"],FI:["H"],ID:["H"],IS:["H"],ML:["H"],NE:["H"],RU:["H"],SE:["H"],SJ:["H"],SK:["H"],AS:["h","H"],BT:["h","H"],DJ:["h","H"],ER:["h","H"],GH:["h","H"],IN:["h","H"],LS:["h","H"],PG:["h","H"],PW:["h","H"],SO:["h","H"],TO:["h","H"],VU:["h","H"],WS:["h","H"],"001":["H","h"],AL:["h","H","hB"],TD:["h","H","hB"],"ca-ES":["H","h","hB"],CF:["H","h","hB"],CM:["H","h","hB"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],LU:["H","h","hB"],NP:["H","h","hB"],PF:["H","h","hB"],SC:["H","h","hB"],SM:["H","h","hB"],SN:["H","h","hB"],TF:["H","h","hB"],VA:["H","h","hB"],CY:["h","H","hb","hB"],GR:["h","H","hb","hB"],CO:["h","H","hB","hb"],DO:["h","H","hB","hb"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],NA:["h","H","hB","hb"],PA:["h","H","hB","hb"],PR:["h","H","hB","hb"],VE:["h","H","hB","hb"],AC:["H","h","hb","hB"],AI:["H","h","hb","hB"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CC:["H","h","hb","hB"],CK:["H","h","hb","hB"],CX:["H","h","hb","hB"],DG:["H","h","hb","hB"],FK:["H","h","hb","hB"],GB:["H","h","hb","hB"],GG:["H","h","hb","hB"],GI:["H","h","hb","hB"],IE:["H","h","hb","hB"],IM:["H","h","hb","hB"],IO:["H","h","hb","hB"],JE:["H","h","hb","hB"],LT:["H","h","hb","hB"],MK:["H","h","hb","hB"],MN:["H","h","hb","hB"],MS:["H","h","hb","hB"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],PN:["H","h","hb","hB"],SH:["H","h","hb","hB"],SX:["H","h","hb","hB"],TA:["H","h","hb","hB"],ZA:["H","h","hb","hB"],"af-ZA":["H","h","hB","hb"],AR:["H","h","hB","hb"],CL:["H","h","hB","hb"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],EA:["H","h","hB","hb"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],GT:["H","h","hB","hb"],HN:["H","h","hB","hb"],IC:["H","h","hB","hb"],KG:["H","h","hB","hb"],KM:["H","h","hB","hb"],LK:["H","h","hB","hb"],MA:["H","h","hB","hb"],MX:["H","h","hB","hb"],NI:["H","h","hB","hb"],PY:["H","h","hB","hb"],SV:["H","h","hB","hb"],UY:["H","h","hB","hb"],JP:["H","h","K"],AD:["H","hB"],AM:["H","hB"],AO:["H","hB"],AT:["H","hB"],AW:["H","hB"],BE:["H","hB"],BF:["H","hB"],BJ:["H","hB"],BL:["H","hB"],BR:["H","hB"],CG:["H","hB"],CI:["H","hB"],CV:["H","hB"],DE:["H","hB"],EE:["H","hB"],FR:["H","hB"],GA:["H","hB"],GF:["H","hB"],GN:["H","hB"],GP:["H","hB"],GW:["H","hB"],HR:["H","hB"],IL:["H","hB"],IT:["H","hB"],KZ:["H","hB"],MC:["H","hB"],MD:["H","hB"],MF:["H","hB"],MQ:["H","hB"],MZ:["H","hB"],NC:["H","hB"],NL:["H","hB"],PM:["H","hB"],PT:["H","hB"],RE:["H","hB"],RO:["H","hB"],SI:["H","hB"],SR:["H","hB"],ST:["H","hB"],TG:["H","hB"],TR:["H","hB"],WF:["H","hB"],YT:["H","hB"],BD:["h","hB","H"],PK:["h","hB","H"],AZ:["H","hB","h"],BA:["H","hB","h"],BG:["H","hB","h"],CH:["H","hB","h"],GE:["H","hB","h"],LI:["H","hB","h"],ME:["H","hB","h"],RS:["H","hB","h"],UA:["H","hB","h"],UZ:["H","hB","h"],XK:["H","hB","h"],AG:["h","hb","H","hB"],AU:["h","hb","H","hB"],BB:["h","hb","H","hB"],BM:["h","hb","H","hB"],BS:["h","hb","H","hB"],CA:["h","hb","H","hB"],DM:["h","hb","H","hB"],"en-001":["h","hb","H","hB"],FJ:["h","hb","H","hB"],FM:["h","hb","H","hB"],GD:["h","hb","H","hB"],GM:["h","hb","H","hB"],GU:["h","hb","H","hB"],GY:["h","hb","H","hB"],JM:["h","hb","H","hB"],KI:["h","hb","H","hB"],KN:["h","hb","H","hB"],KY:["h","hb","H","hB"],LC:["h","hb","H","hB"],LR:["h","hb","H","hB"],MH:["h","hb","H","hB"],MP:["h","hb","H","hB"],MW:["h","hb","H","hB"],NZ:["h","hb","H","hB"],SB:["h","hb","H","hB"],SG:["h","hb","H","hB"],SL:["h","hb","H","hB"],SS:["h","hb","H","hB"],SZ:["h","hb","H","hB"],TC:["h","hb","H","hB"],TT:["h","hb","H","hB"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],VC:["h","hb","H","hB"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],ZM:["h","hb","H","hB"],BO:["H","hB","h","hb"],EC:["H","hB","h","hb"],ES:["H","hB","h","hb"],GQ:["H","hB","h","hb"],PE:["H","hB","h","hb"],AE:["h","hB","hb","H"],"ar-001":["h","hB","hb","H"],BH:["h","hB","hb","H"],DZ:["h","hB","hb","H"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],HK:["h","hB","hb","H"],IQ:["h","hB","hb","H"],JO:["h","hB","hb","H"],KW:["h","hB","hb","H"],LB:["h","hB","hb","H"],LY:["h","hB","hb","H"],MO:["h","hB","hb","H"],MR:["h","hB","hb","H"],OM:["h","hB","hb","H"],PH:["h","hB","hb","H"],PS:["h","hB","hb","H"],QA:["h","hB","hb","H"],SA:["h","hB","hb","H"],SD:["h","hB","hb","H"],SY:["h","hB","hb","H"],TN:["h","hB","hb","H"],YE:["h","hB","hb","H"],AF:["H","hb","hB","h"],LA:["H","hb","hB","h"],CN:["H","hB","hb","h"],LV:["H","hB","hb","h"],TL:["H","hB","hb","h"],"zu-ZA":["H","hB","hb","h"],CD:["hB","H"],IR:["hB","H"],"hi-IN":["hB","h","H"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"te-IN":["hB","h","H"],KH:["hB","h","H","hb"],"ta-IN":["hB","h","hb","H"],BN:["hb","hB","h","H"],MY:["hb","hB","h","H"],ET:["hB","hb","h","H"],"gu-IN":["hB","hb","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],TW:["hB","hb","h","H"],KE:["hB","hb","H","h"],MM:["hB","hb","H","h"],TZ:["hB","hb","H","h"],UG:["hB","hb","H","h"]};function Qt(e){var t=e.hourCycle;if(void 0===t&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n,r=e.language;return"root"!==r&&(n=e.maximize().region),(Jt[n||""]||Jt[r||""]||Jt["".concat(r,"-001")]||Jt["001"])[0]}var en=new RegExp("^".concat(jt.source,"*")),tn=new RegExp("".concat(jt.source,"*$"));function nn(e,t){return{start:e,end:t}}var rn=!!String.prototype.startsWith,on=!!String.fromCodePoint,an=!!Object.fromEntries,sn=!!String.prototype.codePointAt,ln=!!String.prototype.trimStart,un=!!String.prototype.trimEnd,cn=!!Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},dn=!0;try{dn="a"===(null===(Kt=_n("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===Kt?void 0:Kt[0])}catch(nr){dn=!1}var hn,fn=rn?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},pn=on?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r="",i=e.length,o=0;i>o;){if((n=e[o++])>1114111)throw RangeError(n+" is not a valid code point");r+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return r},mn=an?Object.fromEntries:function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],a=i[1];t[o]=a}return t},gn=sn?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var r,i=e.charCodeAt(t);return i<55296||i>56319||t+1===n||(r=e.charCodeAt(t+1))<56320||r>57343?i:r-56320+(i-55296<<10)+65536}},yn=ln?function(e){return e.trimStart()}:function(e){return e.replace(en,"")},vn=un?function(e){return e.trimEnd()}:function(e){return e.replace(tn,"")};function _n(e,t){return new RegExp(e,t)}if(dn){var bn=_n("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");hn=function(e,t){var n;return bn.lastIndex=t,null!==(n=bn.exec(e)[1])&&void 0!==n?n:""}}else hn=function(e,t){for(var n=[];;){var r=gn(e,t);if(void 0===r||En(r)||Sn(r))break;n.push(r),t+=r>=65536?2:1}return pn.apply(void 0,n)};var xn;!function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,n){for(var r=[];!this.isEOF();){var i=this.char();if(123===i){if((o=this.parseArgument(e,n)).err)return o;r.push(o.val)}else{if(125===i&&e>0)break;if(35!==i||"plural"!==t&&"selectordinal"!==t){if(60===i&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(Ot.UNMATCHED_CLOSING_TAG,nn(this.clonePosition(),this.clonePosition()))}if(60===i&&!this.ignoreTag&&wn(this.peek()||0)){if((o=this.parseTag(e,t)).err)return o;r.push(o.val)}else{var o;if((o=this.parseLiteral(e,t)).err)return o;r.push(o.val)}}else{var a=this.clonePosition();this.bump(),r.push({type:It.pound,location:nn(a,this.clonePosition())})}}}return{val:r,err:null}},e.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:It.literal,value:"<".concat(r,"/>"),location:nn(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var i=this.parseMessage(e+1,t,!0);if(i.err)return i;var o=i.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!wn(this.char()))return this.error(Ot.INVALID_TAG,nn(a,this.clonePosition()));var s=this.clonePosition();return r!==this.parseTagName()?this.error(Ot.UNMATCHED_CLOSING_TAG,nn(s,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:It.tag,value:r,children:o,location:nn(n,this.clonePosition())},err:null}:this.error(Ot.INVALID_TAG,nn(a,this.clonePosition())))}return this.error(Ot.UNCLOSED_TAG,nn(n,this.clonePosition()))}return this.error(Ot.INVALID_TAG,nn(n,this.clonePosition()))},e.prototype.parseTagName=function(){var e,t=this.offset();for(this.bump();!this.isEOF()&&(45===(e=this.char())||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039);)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),r="";;){var i=this.tryParseQuote(t);if(i)r+=i;else{var o=this.tryParseUnquoted(e,t);if(o)r+=o;else{var a=this.tryParseLeftAngleBracket();if(!a)break;r+=a}}}var s=nn(n,this.clonePosition());return{val:{type:It.literal,value:r,location:s},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(wn(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(n);this.bump()}return pn.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===t||"selectordinal"===t)||125===n&&e>0?null:(this.bump(),pn(n))},e.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Ot.EXPECT_ARGUMENT_CLOSING_BRACE,nn(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(Ot.EMPTY_ARGUMENT,nn(n,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(Ot.MALFORMED_ARGUMENT,nn(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Ot.EXPECT_ARGUMENT_CLOSING_BRACE,nn(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:It.argument,value:r,location:nn(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Ot.EXPECT_ARGUMENT_CLOSING_BRACE,nn(n,this.clonePosition())):this.parseArgumentOptions(e,t,r,n);default:return this.error(Ot.MALFORMED_ARGUMENT,nn(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=hn(this.message,t),r=t+n.length;return this.bumpTo(r),{value:n,location:nn(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,n,r){var i,a=this.clonePosition(),s=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(s){case"":return this.error(Ot.EXPECT_ARGUMENT_TYPE,nn(a,l));case"number":case"date":case"time":this.bumpSpace();var u=null;if(this.bumpIf(",")){this.bumpSpace();var c=this.clonePosition();if((v=this.parseSimpleArgStyleIfPossible()).err)return v;if(0===(p=vn(v.val)).length)return this.error(Ot.EXPECT_ARGUMENT_STYLE,nn(this.clonePosition(),this.clonePosition()));u={style:p,styleLocation:nn(c,this.clonePosition())}}if((_=this.tryParseArgumentClose(r)).err)return _;var d=nn(r,this.clonePosition());if(u&&fn(null===u||void 0===u?void 0:u.style,"::",0)){var h=yn(u.style.slice(2));if("number"===s)return(v=this.parseNumberSkeletonFromString(h,u.styleLocation)).err?v:{val:{type:It.number,value:n,location:d,style:v.val},err:null};if(0===h.length)return this.error(Ot.EXPECT_DATE_TIME_SKELETON,d);var f=h;this.locale&&(f=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e.charAt(r);if("j"===i){for(var o=0;r+1<e.length&&e.charAt(r+1)===i;)o++,r++;var a=1+(1&o),s=o<2?1:3+(o>>1),l=Qt(t);for("H"!=l&&"k"!=l||(s=0);s-- >0;)n+="a";for(;a-- >0;)n=l+n}else n+="J"===i?"H":i}return n}(h,this.locale));var p={type:Lt.dateTime,pattern:f,location:u.styleLocation,parsedOptions:this.shouldParseSkeletons?Ft(f):{}};return{val:{type:"date"===s?It.date:It.time,value:n,location:d,style:p},err:null}}return{val:{type:"number"===s?It.number:"date"===s?It.date:It.time,value:n,location:d,style:null!==(i=null===u||void 0===u?void 0:u.style)&&void 0!==i?i:null},err:null};case"plural":case"selectordinal":case"select":var m=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Ot.EXPECT_SELECT_ARGUMENT_OPTIONS,nn(m,o({},m)));this.bumpSpace();var g=this.parseIdentifierIfPossible(),y=0;if("select"!==s&&"offset"===g.value){if(!this.bumpIf(":"))return this.error(Ot.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,nn(this.clonePosition(),this.clonePosition()));var v;if(this.bumpSpace(),(v=this.tryParseDecimalInteger(Ot.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Ot.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return v;this.bumpSpace(),g=this.parseIdentifierIfPossible(),y=v.val}var _,b=this.tryParsePluralOrSelectOptions(e,s,t,g);if(b.err)return b;if((_=this.tryParseArgumentClose(r)).err)return _;var x=nn(r,this.clonePosition());return"select"===s?{val:{type:It.select,value:n,options:mn(b.val),location:x},err:null}:{val:{type:It.plural,value:n,options:mn(b.val),offset:y,pluralType:"plural"===s?"cardinal":"ordinal",location:x},err:null};default:return this.error(Ot.INVALID_ARGUMENT_TYPE,nn(a,l))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(Ot.EXPECT_ARGUMENT_CLOSING_BRACE,nn(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Ot.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,nn(n,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],n=0,r=e.split(Ut).filter((function(e){return e.length>0}));n<r.length;n++){var i=r[n].split("/");if(0===i.length)throw new Error("Invalid number skeleton");for(var o=i[0],a=i.slice(1),s=0,l=a;s<l.length;s++)if(0===l[s].length)throw new Error("Invalid number skeleton");t.push({stem:o,options:a})}return t}(e)}catch(r){return this.error(Ot.INVALID_NUMBER_SKELETON,t)}return{val:{type:Lt.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?Yt(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,n,r){for(var i,o=!1,a=[],s=new Set,l=r.value,u=r.location;;){if(0===l.length){var c=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var d=this.tryParseDecimalInteger(Ot.EXPECT_PLURAL_ARGUMENT_SELECTOR,Ot.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;u=nn(c,this.clonePosition()),l=this.message.slice(c.offset,this.offset())}if(s.has(l))return this.error("select"===t?Ot.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Ot.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);"other"===l&&(o=!0),this.bumpSpace();var h=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?Ot.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Ot.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,nn(this.clonePosition(),this.clonePosition()));var f=this.parseMessage(e+1,t,n);if(f.err)return f;var p=this.tryParseArgumentClose(h);if(p.err)return p;a.push([l,{value:f.val,location:nn(h,this.clonePosition())}]),s.add(l),this.bumpSpace(),l=(i=this.parseIdentifierIfPossible()).value,u=i.location}return 0===a.length?this.error("select"===t?Ot.EXPECT_SELECT_ARGUMENT_SELECTOR:Ot.EXPECT_PLURAL_ARGUMENT_SELECTOR,nn(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(Ot.MISSING_OTHER_CLAUSE,nn(this.clonePosition(),this.clonePosition())):{val:a,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var i=!1,o=0;!this.isEOF();){var a=this.char();if(!(a>=48&&a<=57))break;i=!0,o=10*o+(a-48),this.bump()}var s=nn(r,this.clonePosition());return i?cn(o*=n)?{val:o,err:null}:this.error(t,s):this.error(e,s)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=gn(this.message,e);if(void 0===t)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(fn(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&En(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return null!==n&&void 0!==n?n:null}}();function wn(e){return e>=97&&e<=122||e>=65&&e<=90}function En(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function Sn(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function Tn(e){return"function"===typeof e}function Mn(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}function kn(e){return e?Object.keys(e).reduce((function(t,n){var r,i=e[n];return t[n]=Tn(i)?(r=i,function(e){return r(l.Children.toArray(e))}):i,t}),{}):e}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(xn||(xn={}));var Cn=function(e,t,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];var a=kn(r),u=dt.apply(void 0,s([e,t,n,a],i,!1));return Array.isArray(u)?l.Children.toArray(u):u},Pn=function(e,t){var n=e.defaultRichTextElements,r=a(e,["defaultRichTextElements"]),i=kn(n),s=zt(o(o(o({},Ze),r),{defaultRichTextElements:i}),t),l={locale:s.locale,timeZone:s.timeZone,fallbackOnEmptyString:s.fallbackOnEmptyString,formats:s.formats,defaultLocale:s.defaultLocale,defaultFormats:s.defaultFormats,messages:s.messages,onError:s.onError,defaultRichTextElements:i};return o(o({},s),{formatMessage:Cn.bind(null,l,s.formatters),$t:Cn.bind(null,l,s.formatters)})},An=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},t.state={cache:t.cache,intl:Pn(Mn(t.props),t.cache),prevConfig:Mn(t.props)},t}return i(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.prevConfig,r=t.cache,i=Mn(e);return Xe(n,i)?null:{intl:Pn(i,r),prevConfig:i}},t.prototype.render=function(){return We(this.state.intl),l.createElement(et,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=Ze,t}(l.PureComponent),On=An,In=3600;function Ln(e){var t=Math.abs(e);return t<60?"second":t<In?"minute":t<86400?"hour":"day"}function Dn(e){switch(e){case"second":return 1;case"minute":return 60;case"hour":return In;default:return 86400}}var Rn=["second","minute","hour"];function Nn(e){return void 0===e&&(e="second"),Rn.indexOf(e)>-1}var zn=function(e){var t=rt(),n=t.formatRelativeTime,r=t.textComponent,i=e.children,o=n(e.value||0,e.unit,a(e,["children","value","unit"]));return"function"===typeof i?i(o):r?l.createElement(r,null,o):l.createElement(l.Fragment,null,o)},jn=function(e){var t=e.value,n=e.unit,r=e.updateIntervalInSeconds,i=a(e,["value","unit","updateIntervalInSeconds"]);p(!r||!(!r||!Nn(n)),"Cannot schedule update with unit longer than hour");var s,u=l.useState(),c=u[0],d=u[1],h=l.useState(0),f=h[0],m=h[1],g=l.useState(0),y=g[0],v=g[1];n===c&&t===f||(m(t||0),d(n),v(Nn(n)?function(e,t){if(!e)return 0;switch(t){case"second":return e;case"minute":return 60*e;default:return e*In}}(t,n):0)),l.useEffect((function(){function e(){clearTimeout(s)}if(e(),!r||!Nn(n))return e;var t=y-r,i=Ln(t);if("day"===i)return e;var o=Dn(i),a=t-t%o,l=a>=y?a-o:a,u=Math.abs(l-y);return y!==l&&(s=setTimeout((function(){return v(l)}),1e3*u)),e}),[y,r,n]);var _=t||0,b=n;if(Nn(n)&&"number"===typeof y&&r){var x=Dn(b=Ln(y));_=Math.round(y/x)}return l.createElement(zn,o({value:_,unit:b},i))};jn.displayName="FormattedRelativeTime",jn.defaultProps={value:0,unit:"second"};var Bn=jn,Fn=function(e){var t=rt(),n=t.formatPlural,r=t.textComponent,i=e.value,o=e.other,a=e.children,s=e[n(i,e)]||o;return"function"===typeof a?a(s):r?l.createElement(r,null,s):s};Fn.defaultProps={type:"cardinal"},Fn.displayName="FormattedPlural";var Un=Fn;function Gn(e){var t=rt(),n=t.formatMessage,r=t.textComponent,i=void 0===r?l.Fragment:r,o=e.id,a=e.description,s=e.defaultMessage,u=e.values,c=e.children,d=e.tagName,h=void 0===d?i:d,f=n({id:o,description:a,defaultMessage:s},u,{ignoreTag:e.ignoreTag});return"function"===typeof c?c(Array.isArray(f)?f:[f]):h?l.createElement(h,null,l.Children.toArray(f)):l.createElement(l.Fragment,null,f)}Gn.displayName="FormattedMessage";var Hn=l.memo(Gn,(function(e,t){var n=e.values,r=a(e,["values"]),i=t.values,o=a(t,["values"]);return Xe(i,n)&&Xe(r,o)}));Hn.displayName="MemoizedFormattedMessage";var Vn=Hn,qn=function(e){var t=rt(),n=e.from,r=e.to,i=e.children,o=a(e,["from","to","children"]),s=t.formatDateTimeRange(n,r,o);if("function"===typeof i)return i(s);var u=t.textComponent||l.Fragment;return l.createElement(u,null,s)};qn.displayName="FormattedDateTimeRange";var $n=qn;function Wn(e){return e}function Zn(e){return e}var Xn=st("formatDate"),Yn=st("formatTime"),Kn=st("formatNumber"),Jn=st("formatList"),Qn=st("formatDisplayName"),er=at("formatDate"),tr=at("formatTime")},69921:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case o:case s:case a:case f:return e;default:switch(e=e&&e.$$typeof){case u:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function w(e){return x(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||x(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===u},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===a||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===h||e.$$typeof===v||e.$$typeof===_||e.$$typeof===b||e.$$typeof===y)},t.typeOf=x},59864:function(e,t,n){"use strict";e.exports=n(69921)},6526:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});var r=n(67294).createContext(null)},60682:function(e,t,n){"use strict";var r=n(67294),i=(n(45697),n(6526)),o=n(86496),a=n(1881);t.Z=function(e){var t=e.store,n=e.context,s=e.children,l=(0,r.useMemo)((function(){var e=(0,o.X)(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),u=(0,r.useMemo)((function(){return t.getState()}),[t]);(0,a.L)((function(){var e=l.subscription;return e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[l,u]);var c=n||i.E;return r.createElement(c.Provider,{value:l},s)}},26685:function(e,t,n){"use strict";n(8679),n(67294),n(72973),n(86496),n(1881),n(6526)},57034:function(e,t,n){"use strict";n(26685),n(55112),n(11743),n(5532)},55112:function(e,t,n){"use strict";n(63480),n(26343)},11743:function(e,t,n){"use strict";n(26343)},5532:function(e,t,n){"use strict";n(10416)},26343:function(e,t,n){"use strict";function r(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function i(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function o(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=i(e);var o=r(t,n);return"function"===typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=i(o),o=r(t,n)),o},r}}n.d(t,{dX:function(){return r},xv:function(){return o}})},56209:function(e,t,n){"use strict";n.d(t,{v9:function(){return i.v},zt:function(){return r.Z}});var r=n(60682),i=(n(26685),n(6526),n(57034),n(72307),n(59854));n(420)},72307:function(e,t,n){"use strict";n(6526),n(420)},2975:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var r=n(67294),i=n(6526);function o(){return(0,r.useContext)(i.E)}},59854:function(e,t,n){"use strict";n.d(t,{v:function(){return c}});var r=n(67294),i=n(2975),o=n(86496),a=n(1881),s=n(6526),l=function(e,t){return e===t};function u(e){void 0===e&&(e=s.E);var t=e===s.E?i.x:function(){return(0,r.useContext)(e)};return function(e,n){void 0===n&&(n=l);var i=t(),s=function(e,t,n,i){var s,l=(0,r.useReducer)((function(e){return e+1}),0)[1],u=(0,r.useMemo)((function(){return(0,o.X)(n,i)}),[n,i]),c=(0,r.useRef)(),d=(0,r.useRef)(),h=(0,r.useRef)(),f=(0,r.useRef)(),p=n.getState();try{if(e!==d.current||p!==h.current||c.current){var m=e(p);s=void 0!==f.current&&t(m,f.current)?f.current:m}else s=f.current}catch(g){throw c.current&&(g.message+="\nThe error may be correlated with this previous error:\n"+c.current.stack+"\n\n"),g}return(0,a.L)((function(){d.current=e,h.current=p,f.current=s,c.current=void 0})),(0,a.L)((function(){function e(){try{var e=n.getState();if(e===h.current)return;var r=d.current(e);if(t(r,f.current))return;f.current=r,h.current=e}catch(g){c.current=g}l()}return u.onStateChange=e,u.trySubscribe(),e(),function(){return u.tryUnsubscribe()}}),[n,u]),s}(e,n,i.store,i.subscription);return(0,r.useDebugValue)(s),s}}var c=u()},420:function(e,t,n){"use strict";n(67294),n(6526),n(2975)},50533:function(e,t,n){"use strict";n.d(t,{Provider:function(){return r.zt},useSelector:function(){return r.v9}});var r=n(56209),i=n(71679);(0,n(9256).F)(i.m)},86496:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(9256);var i={notify:function(){},get:function(){return[]}};function o(e,t){var n,o=i;function a(){l.onStateChange&&l.onStateChange()}function s(){var i,s,l;n||(n=t?t.addNestedSub(a):e.subscribe(a),i=(0,r.k)(),s=null,l=null,o={clear:function(){s=null,l=null},notify:function(){i((function(){for(var e=s;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],t=s;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,n=l={callback:e,next:null,prev:l};return n.prev?n.prev.next=n:s=n,function(){t&&null!==s&&(t=!1,n.next?n.next.prev=n.prev:l=n.prev,n.prev?n.prev.next=n.next:s=n.next)}}})}var l={addNestedSub:function(e){return s(),o.subscribe(e)},notifyNestedSubs:function(){o.notify()},handleChangeWrapper:a,isSubscribed:function(){return Boolean(n)},trySubscribe:s,tryUnsubscribe:function(){n&&(n(),n=void 0,o.clear(),o=i)},getListeners:function(){return o}};return l}},9256:function(e,t,n){"use strict";n.d(t,{F:function(){return i},k:function(){return o}});var r=function(e){e()},i=function(e){return r=e},o=function(){return r}},63480:function(e,t,n){"use strict";function r(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}n.d(t,{Z:function(){return r}})},71679:function(e,t,n){"use strict";n.d(t,{m:function(){return r.unstable_batchedUpdates}});var r=n(73935)},1881:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var r=n(67294),i="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect},88359:function(e,t){"use strict";var n=60103,r=60106,i=60107,o=60108,a=60114,s=60109,l=60110,u=60112,c=60113,d=60120,h=60115,f=60116,p=60121,m=60122,g=60117,y=60129,v=60131;if("function"===typeof Symbol&&Symbol.for){var _=Symbol.for;n=_("react.element"),r=_("react.portal"),i=_("react.fragment"),o=_("react.strict_mode"),a=_("react.profiler"),s=_("react.provider"),l=_("react.context"),u=_("react.forward_ref"),c=_("react.suspense"),d=_("react.suspense_list"),h=_("react.memo"),f=_("react.lazy"),p=_("react.block"),m=_("react.server.block"),g=_("react.fundamental"),y=_("react.debug_trace_mode"),v=_("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case o:case c:case d:return e;default:switch(e=e&&e.$$typeof){case l:case u:case f:case h:case s:return e;default:return t}}case r:return t}}}},72973:function(e,t,n){"use strict";n(88359)},32675:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.r(t),n.d(t,{BrowserRouter:function(){return Pe},HashRouter:function(){return Ae},Link:function(){return Ne},MemoryRouter:function(){return N},NavLink:function(){return Be},Prompt:function(){return j},Redirect:function(){return G},Route:function(){return $},Router:function(){return R},StaticRouter:function(){return J},Switch:function(){return Q},generatePath:function(){return U},matchPath:function(){return q},useHistory:function(){return ne},useLocation:function(){return re},useParams:function(){return ie},useRouteMatch:function(){return oe},withRouter:function(){return ee}});var o=n(67294),a=n(45697),s=n.n(a);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function u(e){return"/"===e.charAt(0)}function c(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var d=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&u(e),a=t&&u(t),s=o||a;if(e&&u(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var d=0,h=i.length;h>=0;h--){var f=i[h];"."===f?c(i,h):".."===f?(c(i,h),d++):d&&(c(i,h),d--)}if(!s)for(;d--;d)i.unshift("..");!s||""===i[0]||i[0]&&u(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function h(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var f=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=h(t),i=h(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1};function p(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function m(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=l({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=d(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function g(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}"undefined"===typeof window||!window.document||window.document.createElement;function y(e,t,n){return Math.min(Math.max(e,t),n)}function v(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,o=t.initialIndex,a=void 0===o?0:o,s=t.keyLength,u=void 0===s?6:s,c=g();function d(e){l(x,e),x.length=x.entries.length,c.notifyListeners(x.location,x.action)}function h(){return Math.random().toString(36).substr(2,u)}var f=y(a,0,i.length-1),v=i.map((function(e){return m(e,void 0,"string"===typeof e?h():e.key||h())})),_=p;function b(e){var t=y(x.index+e,0,x.entries.length-1),r=x.entries[t];c.confirmTransitionTo(r,"POP",n,(function(e){e?d({action:"POP",location:r,index:t}):d()}))}var x={length:v.length,action:"POP",location:v[f],index:f,entries:v,createHref:_,push:function(e,t){var r="PUSH",i=m(e,t,h(),x.location);c.confirmTransitionTo(i,r,n,(function(e){if(e){var t=x.index+1,n=x.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),d({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=m(e,t,h(),x.location);c.confirmTransitionTo(i,r,n,(function(e){e&&(x.entries[x.index]=i,d({action:r,location:i}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=x.index+e;return t>=0&&t<x.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return x}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_(e,t)}var x=1073741823,w="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function E(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var S=o.createContext||function(e,t){var n,r,i="__create-react-context-"+function(){var e="__global_unique_id__";return w[e]=(w[e]||0)+1}()+"__",a=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=E(t.props.value),t}b(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[i]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(n="function"===typeof t?t(r,i):x,0!==(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(o.Component);a.childContextTypes=((n={})[i]=s().object.isRequired,n);var l=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}b(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?x:t},r.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?x:e},r.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},r.getValue=function(){return this.context[i]?this.context[i].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(o.Component);return l.contextTypes=((r={})[i]=s().object,r),{Provider:a,Consumer:l}},T=S,M=n(2177),k=n(39658),C=n.n(k);n(59864);function P(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var A=n(8679),O=n.n(A),I=function(e){var t=T();return t.displayName=e,t},L=I("Router-History"),D=I("Router"),R=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}i(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return o.createElement(D.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.createElement(L.Provider,{children:this.props.children||null,value:this.props.history}))},t}(o.Component);var N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=v(t.props),t}return i(t,e),t.prototype.render=function(){return o.createElement(R,{history:this.history,children:this.props.children})},t}(o.Component);var z=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(o.Component);function j(e){var t=e.message,n=e.when,r=void 0===n||n;return o.createElement(D.Consumer,null,(function(e){if(e||(0,M.Z)(!1),!r||e.staticContext)return null;var n=e.history.block;return o.createElement(z,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var B={},F=0;function U(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(B[e])return B[e];var t=C().compile(e);return F<1e4&&(B[e]=t,F++),t}(e)(t,{pretty:!0})}function G(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return o.createElement(D.Consumer,null,(function(e){e||(0,M.Z)(!1);var r=e.history,a=e.staticContext,s=i?r.push:r.replace,u=m(t?"string"===typeof n?U(n,t.params):l({},n,{pathname:U(n.pathname,t.params)}):n);return a?(s(u),null):o.createElement(z,{onMount:function(){s(u)},onUpdate:function(e,t){var n,r,i=m(t.to);n=i,r=l({},u,{key:i.key}),n.pathname===r.pathname&&n.search===r.search&&n.hash===r.hash&&n.key===r.key&&f(n.state,r.state)||s(u)},to:n})}))}var H={},V=0;function q(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,l=n.sensitive,u=void 0!==l&&l;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=H[n]||(H[n]={});if(r[e])return r[e];var i=[],o={regexp:C()(e,i,t),keys:i};return V<1e4&&(r[e]=o,V++),o}(n,{end:o,strict:s,sensitive:u}),i=r.regexp,a=r.keys,l=i.exec(e);if(!l)return null;var c=l[0],d=l.slice(1),h=e===c;return o&&!h?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:h,params:a.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}var $=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this;return o.createElement(D.Consumer,null,(function(t){t||(0,M.Z)(!1);var n=e.props.location||t.location,r=l({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?q(n.pathname,e.props):t.match}),i=e.props,a=i.children,s=i.component,u=i.render;return Array.isArray(a)&&function(e){return 0===o.Children.count(e)}(a)&&(a=null),o.createElement(D.Provider,{value:r},r.match?a?"function"===typeof a?a(r):a:s?o.createElement(s,r):u?u(r):null:"function"===typeof a?a(r):null)}))},t}(o.Component);function W(e){return"/"===e.charAt(0)?e:"/"+e}function Z(e,t){if(!e)return t;var n=W(e);return 0!==t.pathname.indexOf(n)?t:l({},t,{pathname:t.pathname.substr(n.length)})}function X(e){return"string"===typeof e?e:p(e)}function Y(e){return function(){(0,M.Z)(!1)}}function K(){}var J=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return K},t.handleBlock=function(){return K},t}i(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,i=void 0===r?"":r,o=n.context,a=void 0===o?{}:o;a.action=t,a.location=function(e,t){return e?l({},t,{pathname:W(e)+t.pathname}):t}(i,m(e)),a.url=X(a.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,i=void 0===r?{}:r,a=e.location,s=void 0===a?"/":a,u=P(e,["basename","context","location"]),c={createHref:function(e){return W(n+X(e))},action:"POP",location:Z(n,m(s)),push:this.handlePush,replace:this.handleReplace,go:Y(),goBack:Y(),goForward:Y(),listen:this.handleListen,block:this.handleBlock};return o.createElement(R,l({},u,{history:c,staticContext:i}))},t}(o.Component);var Q=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this;return o.createElement(D.Consumer,null,(function(t){t||(0,M.Z)(!1);var n,r,i=e.props.location||t.location;return o.Children.forEach(e.props.children,(function(e){if(null==r&&o.isValidElement(e)){n=e;var a=e.props.path||e.props.from;r=a?q(i.pathname,l({},e.props,{path:a})):t.match}})),r?o.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(o.Component);function ee(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=P(t,["wrappedComponentRef"]);return o.createElement(D.Consumer,null,(function(t){return t||(0,M.Z)(!1),o.createElement(e,l({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,O()(n,e)}var te=o.useContext;function ne(){return te(L)}function re(){return te(D).location}function ie(){var e=te(D).match;return e?e.params:{}}function oe(e){var t=re(),n=te(D).match;return e?q(t.pathname,e):n}function ae(e,t){return ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ae(e,t)}function se(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ae(e,t)}function le(){return le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}function ue(e){return"/"===e.charAt(0)?e:"/"+e}function ce(e){return"/"===e.charAt(0)?e.substr(1):e}function de(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function he(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function fe(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function pe(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=le({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=d(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function me(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var ge=!("undefined"===typeof window||!window.document||!window.document.createElement);function ye(e,t){t(window.confirm(e))}var ve="popstate",_e="hashchange";function be(){try{return window.history.state||{}}catch(e){return{}}}function xe(e){void 0===e&&(e={}),ge||(0,M.Z)(!1);var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,l=o.getUserConfirmation,u=void 0===l?ye:l,c=o.keyLength,d=void 0===c?6:c,h=e.basename?he(ue(e.basename)):"";function f(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return h&&(o=de(o,h)),pe(o,r,n)}function p(){return Math.random().toString(36).substr(2,d)}var m=me();function g(e){le(P,e),P.length=n.length,m.notifyListeners(P.location,P.action)}function y(e){(function(e){return void 0===e.state&&-1===("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgent.indexOf("CriOS")})(e)||b(f(e.state))}function v(){b(f(be()))}var _=!1;function b(e){if(_)_=!1,g();else{m.confirmTransitionTo(e,"POP",u,(function(t){t?g({action:"POP",location:e}):function(e){var t=P.location,n=w.indexOf(t.key);-1===n&&(n=0);var r=w.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(_=!0,S(i))}(e)}))}}var x=f(be()),w=[x.key];function E(e){return h+fe(e)}function S(e){n.go(e)}var T=0;function k(e){1===(T+=e)&&1===e?(window.addEventListener(ve,y),i&&window.addEventListener(_e,v)):0===T&&(window.removeEventListener(ve,y),i&&window.removeEventListener(_e,v))}var C=!1;var P={length:n.length,action:"POP",location:x,createHref:E,push:function(e,t){var i="PUSH",o=pe(e,t,p(),P.location);m.confirmTransitionTo(o,i,u,(function(e){if(e){var t=E(o),a=o.key,l=o.state;if(r)if(n.pushState({key:a,state:l},null,t),s)window.location.href=t;else{var u=w.indexOf(P.location.key),c=w.slice(0,u+1);c.push(o.key),w=c,g({action:i,location:o})}else window.location.href=t}}))},replace:function(e,t){var i="REPLACE",o=pe(e,t,p(),P.location);m.confirmTransitionTo(o,i,u,(function(e){if(e){var t=E(o),a=o.key,l=o.state;if(r)if(n.replaceState({key:a,state:l},null,t),s)window.location.replace(t);else{var u=w.indexOf(P.location.key);-1!==u&&(w[u]=o.key),g({action:i,location:o})}else window.location.replace(t)}}))},go:S,goBack:function(){S(-1)},goForward:function(){S(1)},block:function(e){void 0===e&&(e=!1);var t=m.setPrompt(e);return C||(k(1),C=!0),function(){return C&&(C=!1,k(-1)),t()}},listen:function(e){var t=m.appendListener(e);return k(1),function(){k(-1),t()}}};return P}var we="hashchange",Ee={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+ce(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:ce,decodePath:ue},slash:{encodePath:ue,decodePath:ue}};function Se(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function Te(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function Me(e){window.location.replace(Se(window.location.href)+"#"+e)}function ke(e){void 0===e&&(e={}),ge||(0,M.Z)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?ye:r,o=n.hashType,a=void 0===o?"slash":o,s=e.basename?he(ue(e.basename)):"",l=Ee[a],u=l.encodePath,c=l.decodePath;function d(){var e=c(Te());return s&&(e=de(e,s)),pe(e)}var h=me();function f(e){le(T,e),T.length=t.length,h.notifyListeners(T.location,T.action)}var p=!1,m=null;function g(){var e,t,n=Te(),r=u(n);if(n!==r)Me(r);else{var o=d(),a=T.location;if(!p&&(t=o,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(m===fe(o))return;m=null,function(e){if(p)p=!1,f();else{var t="POP";h.confirmTransitionTo(e,t,i,(function(n){n?f({action:t,location:e}):function(e){var t=T.location,n=b.lastIndexOf(fe(t));-1===n&&(n=0);var r=b.lastIndexOf(fe(e));-1===r&&(r=0);var i=n-r;i&&(p=!0,x(i))}(e)}))}}(o)}}var y=Te(),v=u(y);y!==v&&Me(v);var _=d(),b=[fe(_)];function x(e){t.go(e)}var w=0;function E(e){1===(w+=e)&&1===e?window.addEventListener(we,g):0===w&&window.removeEventListener(we,g)}var S=!1;var T={length:t.length,action:"POP",location:_,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=Se(window.location.href)),n+"#"+u(s+fe(e))},push:function(e,t){var n="PUSH",r=pe(e,void 0,void 0,T.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=fe(r),i=u(s+t);if(Te()!==i){m=t,function(e){window.location.hash=e}(i);var o=b.lastIndexOf(fe(T.location)),a=b.slice(0,o+1);a.push(t),b=a,f({action:n,location:r})}else f()}}))},replace:function(e,t){var n="REPLACE",r=pe(e,void 0,void 0,T.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=fe(r),i=u(s+t);Te()!==i&&(m=t,Me(i));var o=b.indexOf(fe(T.location));-1!==o&&(b[o]=t),f({action:n,location:r})}}))},go:x,goBack:function(){x(-1)},goForward:function(){x(1)},block:function(e){void 0===e&&(e=!1);var t=h.setPrompt(e);return S||(E(1),S=!0),function(){return S&&(S=!1,E(-1)),t()}},listen:function(e){var t=h.appendListener(e);return E(1),function(){E(-1),t()}}};return T}function Ce(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Pe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=xe(t.props),t}return se(t,e),t.prototype.render=function(){return o.createElement(R,{history:this.history,children:this.props.children})},t}(o.Component);var Ae=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=ke(t.props),t}return se(t,e),t.prototype.render=function(){return o.createElement(R,{history:this.history,children:this.props.children})},t}(o.Component);var Oe=function(e,t){return"function"===typeof e?e(t):e},Ie=function(e,t){return"string"===typeof e?pe(e,null,null,t):e},Le=function(e){return e},De=o.forwardRef;"undefined"===typeof De&&(De=Le);var Re=De((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,a=Ce(e,["innerRef","navigate","onClick"]),s=a.target,l=le({},a,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=Le!==De&&t||n,o.createElement("a",l)}));var Ne=De((function(e,t){var n=e.component,r=void 0===n?Re:n,i=e.replace,a=e.to,s=e.innerRef,l=Ce(e,["component","replace","to","innerRef"]);return o.createElement(D.Consumer,null,(function(e){e||(0,M.Z)(!1);var n=e.history,u=Ie(Oe(a,e.location),e.location),c=u?n.createHref(u):"",d=le({},l,{href:c,navigate:function(){var t=Oe(a,e.location),r=fe(e.location)===fe(Ie(t));(i||r?n.replace:n.push)(t)}});return Le!==De?d.ref=t||s:d.innerRef=s,o.createElement(r,d)}))})),ze=function(e){return e},je=o.forwardRef;"undefined"===typeof je&&(je=ze);var Be=je((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,a=void 0===i?"active":i,s=e.activeStyle,l=e.className,u=e.exact,c=e.isActive,d=e.location,h=e.sensitive,f=e.strict,p=e.style,m=e.to,g=e.innerRef,y=Ce(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.createElement(D.Consumer,null,(function(e){e||(0,M.Z)(!1);var n=d||e.location,i=Ie(Oe(m,n),n),v=i.pathname,_=v&&v.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=_?q(n.pathname,{path:_,exact:u,sensitive:h,strict:f}):null,x=!!(c?c(b,n):b),w="function"===typeof l?l(x):l,E="function"===typeof p?p(x):p;x&&(w=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(w,a),E=le({},E,s));var S=le({"aria-current":x&&r||null,className:w,style:E,to:i},y);return ze!==je?S.ref=t||g:S.innerRef=g,o.createElement(Ne,S)}))}))},76585:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},39658:function(e,t,n){var r=n(76585);e.exports=f,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",c=t&&t.delimiter||"/";null!=(n=i.exec(e));){var d=n[0],h=n[1],f=n.index;if(s+=e.slice(a,f),a=f+d.length,h)s+=h[1];else{var p=e[a],m=n[2],g=n[3],y=n[4],v=n[5],_=n[6],b=n[7];s&&(r.push(s),s="");var x=null!=m&&null!=p&&p!==m,w="+"===_||"*"===_,E="?"===_||"*"===_,S=n[2]||c,T=y||v;r.push({name:g||o++,prefix:m||"",delimiter:S,optional:E,repeat:w,partial:x,asterisk:!!b,pattern:T?u(T):b?".*":"[^"+l(S)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",d(t)));return function(t,i){for(var o="",s=t||{},l=(i||{}).pretty?a:encodeURIComponent,u=0;u<e.length;u++){var c=e[u];if("string"!==typeof c){var d,h=s[c.name];if(null==h){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(h)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(d=l(h[f]),!n[u].test(d))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(d)+"`");o+=(0===f?c.prefix:c.delimiter)+d}}else{if(d=c.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(h),!n[u].test(d))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+d+'"');o+=c.prefix+d}}else o+=c}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var u=e[s];if("string"===typeof u)a+=l(u);else{var h=l(u.prefix),f="(?:"+u.pattern+")";t.push(u),u.repeat&&(f+="(?:"+h+f+")*"),a+=f=u.optional?u.partial?h+"("+f+")?":"(?:"+h+"("+f+"))?":h+"("+f+")"}}var p=l(n.delimiter||"/"),m=a.slice(-p.length)===p;return i||(a=(m?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+p+"|$)",c(new RegExp("^"+a,d(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return c(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return h(o(e,n),t,n)}(e,t,n)}},75251:function(e,t,n){"use strict";n(27418);var r=n(67294),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},72408:function(e,t,n){"use strict";var r=n(27418),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),o=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),a=d("react.provider"),s=d("react.context"),l=d("react.forward_ref"),t.Suspense=d("react.suspense"),u=d("react.memo"),c=d("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var _=v.prototype=new y;_.constructor=v,r(_,g.prototype),_.isPureReactComponent=!0;var b={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,r)&&!w.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:b.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function k(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case o:l=!0}}if(l)return a=a(l=e),e=""===r?"."+M(l,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),k(a,t,n,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+M(s=e[u],u);l+=k(s,t,n,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=k(s=s.value,t,n,c=r+M(s,u++),a);else if("object"===s)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function C(e,t,n){if(null==e)return e;var r=[],i=0;return k(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function O(){var e=A.current;if(null===e)throw Error(f(321));return e}var I={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var o=r({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=b.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!w.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},67294:function(e,t,n){"use strict";e.exports=n(72408)},85893:function(e,t,n){"use strict";e.exports=n(75251)},29177:function(e,t,n){var r=n(67294),i=n(73935),o=n(97762),a=n(4330),s=n(30123),l=n(37642),u={CLASS_NAME_ATTR:"data-react-class",PROPS_ATTR:"data-react-props",RENDER_ATTR:"data-hydrate",CACHE_ID_ATTR:"data-react-cache-id",TURBOLINKS_PERMANENT_ATTR:"data-turbolinks-permanent",jQuery:"undefined"!==typeof window&&"undefined"!==typeof window.jQuery&&window.jQuery,components:{},findDOMNodes:function(e){var t,n,r=u.CLASS_NAME_ATTR;switch(typeof e){case"undefined":t="["+r+"]",n=document;break;case"object":t="["+r+"]",n=e;break;case"string":t=e+"["+r+"], "+e+" ["+r+"]",n=document}return u.jQuery?u.jQuery(t,n):n.querySelectorAll(t)},getConstructor:s,useContext:function(e){this.getConstructor=l(e)},serverRender:function(e,t,n){var i=this.getConstructor(t),a=r.createElement(i,n);return o[e](a)},mountComponents:function(e){for(var t=u,n=t.findDOMNodes(e),o=0;o<n.length;++o){var a=n[o],s=a.getAttribute(t.CLASS_NAME_ATTR),l=t.getConstructor(s),c=a.getAttribute(t.PROPS_ATTR),d=c&&JSON.parse(c),h=a.getAttribute(t.RENDER_ATTR),f=a.getAttribute(t.CACHE_ID_ATTR),p=a.hasAttribute(t.TURBOLINKS_PERMANENT_ATTR);if(!l){var m="Cannot find component: '"+s+"'";throw console&&console.log&&console.log("%c[react-rails] %c"+m+" for element","font-weight: bold","",a),new Error(m+". Make sure your component is available to render.")}var g=this.components[f];void 0===g&&(g=r.createElement(l,d),p&&(this.components[f]=g)),g=h&&"function"===typeof i.hydrate?i.hydrate(g,a):i.render(g,a)}},unmountComponents:function(e){for(var t=u.findDOMNodes(e),n=0;n<t.length;++n){var r=t[n];i.unmountComponentAtNode(r)}},detectEvents:function(){a(this)},handleMount:function(e){var t=void 0;e&&e.target&&(t=e.target),u.mountComponents(t)},handleUnmount:function(e){var t=void 0;e&&e.target&&(t=e.target),u.unmountComponents(t)}};"undefined"!==typeof window&&u.detectEvents(),self.ReactRailsUJS=u,e.exports=u},4330:function(e,t,n){var r=n(64065),i=n(55827),o=n(79889),a=n(438),s=n(79035);e.exports=function(e){e.handleEvent&&("undefined"!==typeof Turbolinks&&"undefined"!==typeof Turbolinks.EVENTS&&s.teardown(e),o.teardown(e),a.teardown(e),i.teardown(e),r.teardown(e)),"addEventListener"in window?(e.handleEvent=function(e,t){document.addEventListener(e,t)},e.removeEvent=function(e,t){document.removeEventListener(e,t)}):(e.handleEvent=function(e,t){window.attachEvent(e,t)},e.removeEvent=function(e,t){window.detachEvent(e,t)}),"undefined"!==typeof Turbolinks&&Turbolinks.supported?"undefined"!==typeof Turbolinks.EVENTS?s.setup(e):"undefined"!==typeof Turbolinks.controller?o.setup(e):a.setup(e):"undefined"!==typeof $&&"function"===typeof $.pjax?i.setup(e):r.setup(e)}},64065:function(e){e.exports={setup:function(e){"addEventListener"in window?e.handleEvent("DOMContentLoaded",e.handleMount):e.handleEvent("onload",e.handleMount)},teardown:function(e){e.removeEvent("DOMContentLoaded",e.handleMount),e.removeEvent("onload",e.handleMount)}}},55827:function(e){e.exports={setup:function(e){e.handleEvent("ready",e.handleMount),e.handleEvent("pjax:end",e.handleMount),e.handleEvent("pjax:beforeReplace",e.handleUnmount)},teardown:function(e){e.removeEvent("ready",e.handleMount),e.removeEvent("pjax:end",e.handleMount),e.removeEvent("pjax:beforeReplace",e.handleUnmount)}}},79889:function(e){e.exports={setup:function(e){e.handleEvent("turbolinks:load",e.handleMount),e.handleEvent("turbolinks:before-render",e.handleUnmount)},teardown:function(e){e.removeEvent("turbolinks:load",e.handleMount),e.removeEvent("turbolinks:before-render",e.handleUnmount)}}},79035:function(e){e.exports={setup:function(e){e.handleEvent(Turbolinks.EVENTS.CHANGE,e.handleMount),e.handleEvent(Turbolinks.EVENTS.BEFORE_UNLOAD,e.handleUnmount)},teardown:function(e){e.removeEvent(Turbolinks.EVENTS.CHANGE,e.handleMount),e.removeEvent(Turbolinks.EVENTS.BEFORE_UNLOAD,e.handleUnmount)}}},438:function(e){e.exports={setup:function(e){Turbolinks.pagesCached(0),e.handleEvent("page:change",e.handleMount),e.handleEvent("page:receive",e.handleUnmount)},teardown:function(e){e.removeEvent("page:change",e.handleMount),e.removeEvent("page:receive",e.handleUnmount)}}},30123:function(module){var topLevel="undefined"===typeof window?this:window;module.exports=function(className){var constructor;return constructor=topLevel[className],constructor||(constructor=eval(className)),constructor&&constructor.default&&(constructor=constructor.default),constructor}},89181:function(e){e.exports=function(e){return function(t){var n=t.split("."),r=n.shift(),i=n,o=e("./"+r);return i.forEach((function(e){o=o[e]})),o.__esModule&&(o=o.default),o}}},37642:function(e,t,n){var r=n(30123),i=n(89181);e.exports=function(e){var t=i(e);return function(e){var n;try{n=t(e)}catch(i){try{n=r(e)}catch(o){console.error(i),console.error(o)}}return n}}},35666:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(O){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=c(e,t,n);if("normal"===l.type){if(r=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=u;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function y(){}function v(){}var _={};l(_,o,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(P([])));x&&x!==n&&r.call(x,o)&&(_=x);var w=v.prototype=g.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,a,s){var l=c(e[i],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function P(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=v,l(w,"constructor",v),l(v,"constructor",y),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},60053:function(e,t){"use strict";var n,r,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,d=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(n){throw setTimeout(d,0),n}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(d,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,_=0;t.unstable_shouldYield=function(){return t.unstable_now()>=_},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,x=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();_=e+v;try{g(!0,e)?x.postMessage(null):(m=!1,g=null)}catch(n){throw x.postMessage(null),n}}else m=!1},n=function(e){g=e,m||(m=!0,x.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<T(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>T(a,n))void 0!==l&&0>T(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>T(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var M=[],k=[],C=1,P=null,A=3,O=!1,I=!1,L=!1;function D(e){for(var t=E(k);null!==t;){if(null===t.callback)S(k);else{if(!(t.startTime<=e))break;S(k),t.sortIndex=t.expirationTime,w(M,t)}t=E(k)}}function R(e){if(L=!1,D(e),!I)if(null!==E(M))I=!0,n(N);else{var t=E(k);null!==t&&r(R,t.startTime-e)}}function N(e,n){I=!1,L&&(L=!1,i()),O=!0;var o=A;try{for(D(n),P=E(M);null!==P&&(!(P.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=P.callback;if("function"===typeof a){P.callback=null,A=P.priorityLevel;var s=a(P.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?P.callback=s:P===E(M)&&S(M),D(n)}else S(M);P=E(M)}if(null!==P)var l=!0;else{var u=E(k);null!==u&&r(R,u.startTime-n),l=!1}return l}finally{P=null,A=o,O=!1}}var z=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){I||O||(I=!0,n(N))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return E(M)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=z,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:C++,callback:o,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(e.sortIndex=a,w(k,e),null===E(M)&&e===E(k)&&(L?i():L=!0,r(R,a-s))):(e.sortIndex=l,w(M,e),I||O||(I=!0,n(N))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},63840:function(e,t,n){"use strict";e.exports=n(60053)},2177:function(e,t){"use strict";var n="Invariant failed";t.Z=function(e,t){if(!e)throw new Error(n)}},87462:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},16702:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},71834:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(16702);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},10416:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})}},__webpack_module_cache__={},inProgress,loadStylesheet,installedCssChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,n){return __webpack_require__.f[n](e,t),t}),[]))},__webpack_require__.u=function(e){return"js/"+e+"-"+{2813:"69402e9e5f761f4fa1e5",4021:"eea936519758e96910b2",4184:"0357a0f9e49a16a9e7a5",5225:"7f2be5594839b054d47c",5452:"b2b9539d298109d04fdb"}[e]+".chunk.js"},__webpack_require__.miniCssF=function(e){return"css/"+e+"-"+{2813:"d86ae85e",4021:"ae6e8aa2"}[e]+".chunk.css"},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},inProgress={},__webpack_require__.l=function(e,t,n,r){if(inProgress[e])inProgress[e].push(t);else{var i,o;if(void 0!==n)for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var l=a[s];if(l.getAttribute("src")==e){i=l;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.src=e),inProgress[e]=[t];var u=function(t,n){i.onerror=i.onload=null,clearTimeout(c);var r=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(e){return e(n)})),t)return t(n)},c=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),o&&document.head.appendChild(i)}},__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="https://cdn-assets.alltrails.com/assets/packs/",loadStylesheet=function(e){return new Promise((function(t,n){var r=__webpack_require__.miniCssF(e),i=__webpack_require__.p+r;if(function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(a=n[r]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var a;if((i=(a=o[r]).getAttribute("data-href"))===e||i===t)return a}}(r,i))return t();!function(e,t,n,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=function(o){if(i.onerror=i.onload=null,"load"===o.type)n();else{var a=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=s,i.parentNode.removeChild(i),r(l)}},i.href=t,document.head.appendChild(i)}(e,i,t,n)}))},installedCssChunks={263:0,4262:0,2555:0},__webpack_require__.f.miniCss=function(e,t){installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{2813:1,4021:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((function(){installedCssChunks[e]=0}),(function(t){throw delete installedCssChunks[e],t})))},function(){var e={263:0,4262:0,2555:0};__webpack_require__.f.j=function(t,n){var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=e[t]=[n,i]}));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(o,(function(n){if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=function(t,n){var r,i,o=n[0],a=n[1],s=n[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(r in a)__webpack_require__.o(a,r)&&(__webpack_require__.m[r]=a[r]);if(s)s(__webpack_require__)}for(t&&t(n);l<o.length;l++)i=o[l],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=this.webpackChunk=this.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__={};!function(){"use strict";var e=__webpack_require__(21403),t=__webpack_require__(67294),n=__webpack_require__(6158),r=__webpack_require__.n(n);function i(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)t.push({type:"CHAR",index:n,value:e[n++]});else{var i=1,o="";if("?"===e[s=n+1])throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0===--i){s++;break}}else if("("===e[s]&&(i++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at ".concat(s));o+=e[s++]}else o+=e[s++]+e[s++];if(i)throw new TypeError("Unbalanced pattern at ".concat(n));if(!o)throw new TypeError("Missing pattern at ".concat(n));t.push({type:"PATTERN",index:n,value:o}),n=s}else{for(var a="",s=n+1;s<e.length;){var l=e.charCodeAt(s);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;a+=e[s++]}if(!a)throw new TypeError("Missing parameter name at ".concat(n));t.push({type:"NAME",index:n,value:a}),n=s}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),r=t.prefixes,i=void 0===r?"./":r,a="[^".concat(o(t.delimiter||"/#?"),"]+?"),s=[],l=0,u=0,c="",d=function(e){if(u<n.length&&n[u].type===e)return n[u++].value},h=function(e){var t=d(e);if(void 0!==t)return t;var r=n[u],i=r.type,o=r.index;throw new TypeError("Unexpected ".concat(i," at ").concat(o,", expected ").concat(e))},f=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t};u<n.length;){var p=d("CHAR"),m=d("NAME"),g=d("PATTERN");if(m||g){var y=p||"";-1===i.indexOf(y)&&(c+=y,y=""),c&&(s.push(c),c=""),s.push({name:m||l++,prefix:y,suffix:"",pattern:g||a,modifier:d("MODIFIER")||""})}else{var v=p||d("ESCAPED_CHAR");if(v)c+=v;else if(c&&(s.push(c),c=""),d("OPEN")){y=f();var _=d("NAME")||"",b=d("PATTERN")||"",x=f();h("CLOSE"),s.push({name:_||(b?l++:""),pattern:_&&!b?a:b,prefix:y,suffix:x,modifier:d("MODIFIER")||""})}else h("END")}}return s}function o(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function a(e){return e&&e.sensitive?"":"i"}function s(e,t,n){return function(e,t,n){void 0===n&&(n={});for(var r=n.strict,i=void 0!==r&&r,s=n.start,l=void 0===s||s,u=n.end,c=void 0===u||u,d=n.encode,h=void 0===d?function(e){return e}:d,f=n.delimiter,p=void 0===f?"/#?":f,m=n.endsWith,g="[".concat(o(void 0===m?"":m),"]|$"),y="[".concat(o(p),"]"),v=l?"^":"",_=0,b=e;_<b.length;_++){var x=b[_];if("string"===typeof x)v+=o(h(x));else{var w=o(h(x.prefix)),E=o(h(x.suffix));if(x.pattern)if(t&&t.push(x),w||E)if("+"===x.modifier||"*"===x.modifier){var S="*"===x.modifier?"?":"";v+="(?:".concat(w,"((?:").concat(x.pattern,")(?:").concat(E).concat(w,"(?:").concat(x.pattern,"))*)").concat(E,")").concat(S)}else v+="(?:".concat(w,"(").concat(x.pattern,")").concat(E,")").concat(x.modifier);else"+"===x.modifier||"*"===x.modifier?v+="((?:".concat(x.pattern,")").concat(x.modifier,")"):v+="(".concat(x.pattern,")").concat(x.modifier);else v+="(?:".concat(w).concat(E,")").concat(x.modifier)}}if(c)i||(v+="".concat(y,"?")),v+=n.endsWith?"(?=".concat(g,")"):"$";else{var T=e[e.length-1],M="string"===typeof T?y.indexOf(T[T.length-1])>-1:void 0===T;i||(v+="(?:".concat(y,"(?=").concat(g,"))?")),M||(v+="(?=".concat(y,"|").concat(g,")"))}return new RegExp(v,a(n))}(i(e,n),t,n)}function l(e,t,n){return e instanceof RegExp?function(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,i=n.exec(e.source);i;)t.push({name:i[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),i=n.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,n){var r=e.map((function(e){return l(e,t,n).source}));return new RegExp("(?:".concat(r.join("|"),")"),a(n))}(e,t,n):s(e,t,n)}var u=__webpack_require__(55077),c=__webpack_require__(81342),d=__webpack_require__(76129),h=__webpack_require__(67142),f=__webpack_require__.n(h),p=__webpack_require__(70919),m=__webpack_require__.n(p),g=__webpack_require__(17738),y=__webpack_require__.n(g),v=__webpack_require__(44624),_=__webpack_require__(13967),b=__webpack_require__.n(_);__webpack_require__(87792);function x(e,t){if(e&&t!==b().English){var n=new RegExp("^\\/".concat((0,v.getLocale)(t),"\\/(.*)"));if(e.match(n))return e}return(0,v.wrapUrlSafe)(e,t)}var w,E,S,T,M={wrapUrlSafe:x},k=function(e){return e&&e.length>0},C=function(e){var t=e.area_name;return k(t)?t:k(e.park_name)?e.park_name:[k(e.city_name)?e.city_name:"",k(e.state_name)?e.state_name:"",!k(e.country_name)||313===e.country_id||366===e.country_id||e.country_name.includes("United States")||e.country_name.includes("Hawaii")?"":e.country_name].filter(k).join(", ")},P=function(e){return e.park_slug?"parks/".concat(e.park_slug):e.area_slug||e.city_url||""},A=function(e){var t,n,r,i;return[(null===(t=e.user)||void 0===t?void 0:t.firstName)||(null===(n=e.user)||void 0===n?void 0:n.first_name),(null===(r=e.user)||void 0===r?void 0:r.lastName)||(null===(i=e.user)||void 0===i?void 0:i.last_name)].filter((function(e){return e&&e.length>0})).join(" ")},O=function(e,t){var n,r;return{id:e.ID,slug:e.slug,name:e.name,minutes:t,meters:e.length||e.distance,user:{id:null===(n=e.user)||void 0===n?void 0:n.id,name:A(e),slug:null===(r=e.user)||void 0===r?void 0:r.slug},hasPhotos:e.photo_count>0,locationName:C(e),locationSlug:P(e)}},I=function(e,t){var n,r,i;return{id:e.ID,slug:e.slug,name:e.name,minutes:t,meters:e.length||e.distance,elevationGain:e.elevation_gain,activityType:(null===(n=e.activities)||void 0===n?void 0:n.length)?e.activities[0]:"",user:{id:null===(r=e.user)||void 0===r?void 0:r.id,name:A(e),slug:null===(i=e.user)||void 0===i?void 0:i.slug},createdAt:"string"===typeof e.created_at?e.created_at:e.created_at.toUTCString(),hasPhotos:e.photo_count>0}},L=function(e,t){return{id:e.ID,slug:(n=e.slug,n.startsWith("trail/")?n.slice(6):n),name:e.name,description:e.description,minutes:t,meters:e.length,reviewCount:e.num_reviews,rating:e.avg_rating,difficulty:Number(e.difficulty_rating),locationName:C(e),locationSlug:P(e),hasProfilePhoto:e.has_profile_photo||Boolean(e.profile_photo_data)};var n},D=__webpack_require__(85893),R=(0,t.createContext)({filters:{}});!function(e){e.ADA="ada",e.DOGS="dogs",e.DOGS_LEASH="dogs-leash",e.KIDS="kids",e.PARTIALLY_PAVED="partially-paved",e.PAVED="paved",e.STROLLERS="strollers"}(w||(w={})),function(e){e.BACKPACKING="backpacking",e.BIKE_TOURING="bike-touring",e.BIRDING="birding",e.CAMPING="camping",e.CROSS_COUNTRY_SKIING="cross-country-skiing",e.FISHING="fishing",e.HIKING="hiking",e.HORSEBACK_RIDING="horseback-riding",e.MOUNTAIN_BIKING="mountain-biking",e.NATURE_TRIPS="nature-trips",e.OFF_ROAD_DRIVING="off-road-driving",e.PADDLE_SPORTS="paddle-sports",e.ROAD_BIKING="road-biking",e.ROCK_CLIMBING="rock-climbing",e.SCENIC_DRIVING="scenic-driving",e.SKIING="skiing",e.SNOWSHOEING="snowshoeing",e.TRAIL_RUNNING="trail-running",e.VIA_FERRATA="via-ferrata",e.WALKING="walking"}(E||(E={})),function(e){e.ADA="ada",e.BEACH="beach",e.CAVE="cave",e.DOGS="dogs",e.DOGS_LEASH="dogs-leash",e.DOGS_NO="dogs-no",e.EVENT="event",e.FOREST="forest",e.LAKE="lake",e.KIDS="kids",e.HOT_SPRINGS="hot-springs",e.PAVED="paved",e.PARTIALLY_PAVED="partially-paved",e.RAILS_TRAILS="rails-trails",e.RIVER="river",e.STROLLERS="strollers",e.STROLLER_FRIENDLY="stroller-friendly",e.WHEELCHAIR_FRIENDLY="wheelchair-friendly",e.VIEWS="views",e.WATERFALL="waterfall",e.WILD_FLOWERS="wild-flowers",e.WILDLIFE="wildlife",e.BLOWDOWN="blowdown",e.BRIDGE_OUT="bridge-out",e.BUGS="bugs",e.MUDDY="muddy",e.OVER_GROWN="over-grown",e.ROCKY="rocky",e.SCRAMBLE="scramble",e.SNOW="snow",e.WASHED_OUT="washed_out",e.CLOSED="closed",e.OFF_TRAIL="off-trail",e.NO_SHADE="no-shade",e.PRIVATE_PROPERTY="private-property",e.CITY_WALK="city-walk",e.HISTORIC_SITE="historic-site",e.PUB_CRAWL="pub-crawl",e.FEE="fee"}(S||(S={})),function(e){e.Buggy="bugs",e.Muddy="muddy",e.Snowy="snow",e.Icy="icy",e.Slippery="slippery"}(T||(T={}));var N=function(e){var n=(0,t.useContext)(R).filters,r=null===n||void 0===n?void 0:n.activities;return r?function(e,t){switch(t){case E.MOUNTAIN_BIKING:return e.duration_minutes_mountain_biking;case E.ROAD_BIKING:case E.BIKE_TOURING:return e.duration_minutes_cycling;case E.TRAIL_RUNNING:return e.duration_minutes_trail_running;case E.HIKING:case E.WALKING:case E.BACKPACKING:return e.duration_minutes_hiking;default:return e.duration_minutes}}(e,Object.keys(r).find((function(e){var t;return null===(t=r[e])||void 0===t?void 0:t.selected}))):e.duration_minutes};function z(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"===typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U=function(e,n){var r=j((0,t.useState)(e?e.map((function(e){return e.label})):[]),2),i=r[0],o=r[1],a=(0,t.useCallback)((function(e,t){var n=[].concat(z(i.slice(0,e)),[t],z(i.slice(e+1)));o(n)}),[i]),s=(0,t.useCallback)((function(e,t){var r=t.labelInProgress,i=t.labelFailed,o=t.labelSuccess,s=t.handleClick;return r?(a(e,r),Promise.resolve(s()).then((function(){a(e,o||n.formatMessage({id:"xrKHS6",defaultMessage:[{type:0,value:"Success"}]}))})).catch((function(t){a(e,i||n.formatMessage({id:"vXCeIi",defaultMessage:[{type:0,value:"Failed"}]}))}))):s()}),[a]);if(e&&e.length)return e.map((function(e,t){return{label:i[t],onClick:function(){return s(t,e)}}}))},G=__webpack_require__(21030),H=function(e){var t,n,r,i,o,a=e.track,s=e.context,l=e.handleCardClick,c=e.handleFavoriteClick,d=e.isFavorite,h=e.handleMouseEnter,p=e.handleMouseLeave,g=e.bottomButtonsConfig,v=(0,u.useIntl)(),_=y()(),b=N(a),x=U(g,v);return"map"===a.type?(0,D.jsx)(m(),{languageRegionCode:_,onCardClick:l,onCardMouseEnter:h,onCardMouseLeave:p,onFavoriteClick:c,isFavorite:d,variant:"small",map:O(a,b),isFirstParty:(null===s||void 0===s||null===(t=s.currentUser)||void 0===t?void 0:t.id)===(null===(n=a.user)||void 0===n?void 0:n.id),useMetric:null===s||void 0===s?void 0:s.displayMetric,footerCTAs:x&&x.length?x:void 0}):(0,D.jsx)(f(),{languageRegionCode:_,onCardClick:l,onCardMouseEnter:h,onCardMouseLeave:p,onFavoriteClick:c,isFavorite:d,variant:"small",activity:I(a,b),isFirstParty:(null===s||void 0===s||null===(r=s.currentUser)||void 0===r?void 0:r.id)===(null===(i=a.user)||void 0===i?void 0:i.id),useMetric:null===s||void 0===s?void 0:s.displayMetric,footerCTAs:x&&x.length?x:void 0,showActivityType:null===s||void 0===s||null===(o=s.currentUser)||void 0===o?void 0:o.admin})};function V(e){var t=e.track,n=e.context,r=e.handleCardClick,i=e.handleFavoriteClick,o=e.isFavorite,a=e.handleMouseEnter,s=e.handleMouseLeave,l=e.bottomButtonsConfig;return(0,D.jsx)(G.Z,{children:(0,D.jsx)(H,{track:t,context:n,handleCardClick:r,handleFavoriteClick:i,isFavorite:o,handleMouseEnter:a,handleMouseLeave:s,bottomButtonsConfig:l})})}var q=__webpack_require__(12103),W=__webpack_require__.n(q);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=function(e,t){for(var n,r=e.getStyle().layers,i=r.length-1;i>=0;i--){var o=r[i].type;if(!t.includes(o))break;n=r[i].id}return n},J=function(e,t){var n;return e.getLayer(t)&&(n=t),n},Q=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r?n=K(e,r):i?n=J(e,i):"heatmap"===t.type||t.id.toLowerCase().includes("heatmap")?n=K(e,["symbol","circle","line"]):("line"===t.type||t.id.includes("chevron"))&&(n=K(e,["symbol","circle"])),e.getLayer(t.id)||e.addLayer(t,n);var o=e.customStyle.layers,a=e.customStyle.layerEvents,s=o.findIndex((function(e){return e.id===t.id}));s<0&&(o.push(t),a[t.id]=[])},ee=function(e,t,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];n?o&&["click","mouseenter","mouseleave"].includes(r)||e.on(r,t,i):e.on(r,i),e.customStyle.layerEvents[t].push({type:r,listener:i,onLayer:n})},te=function(e,t){var n=e.customStyle.layers,r=e.customStyle.layerEvents,i=n.findIndex((function(e){return e.id===t}));i>=0&&(n.splice(i,1),r[t].forEach((function(n){var r=n.type,i=n.listener,o=n.onLayer;"removed"===r&&i(),o?e.off(r,t,i):e.off(r,i)})),delete r[t]),e.getLayer(t)&&e.removeLayer(t)},ne=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.customStyle.layerEvents[t];i&&(i=i.filter((function(e){return e.type===n}))).forEach((function(e){e.listener(r)}))},re=function(e,t,n,r,i){var o=e.customStyle.layers.find((function(e){return e.id===t}));o&&("layout"===n?(e.setLayoutProperty(t,r,i),o.layout[r]=i):(e.setPaintProperty(t,r,i),o.paint[r]=i))},ie=function(e,t,n){e.getSource(t)||e.addSource(t,n);var r=e.customStyle.sources,i=r.findIndex((function(e){return e.sourceId===t}));i<0&&r.push({sourceId:t,sourceSpec:n})},oe=function(e,t){e.getSource(t)&&e.removeSource(t);var n=e.customStyle.sources,r=n.findIndex((function(e){return e.sourceId===t}));r>=0&&n.splice(r,1)},ae=function(e,t,n,r){return new Promise((function(i,o){e.hasImage(t)?i():e.loadImage(n,(function(a,s){a?o(a):(!function(e,t,n,r,i){i=i||{},e.hasImage(t)||e.addImage(t,n,i);var o=e.customStyle.images;o.findIndex((function(e){return e.imageId===t}))<0&&o.push({imageId:t,image:n,imageSrc:r,opts:i})}(e,t,s,n,r),e.triggerRepaint(),i())}))}))},se="mapbox://fonts/alltrails/{fontstack}/{range}.pbf",le=function(e){var t=e.customStyle,n=t.sources,r=t.layers,i=t.images;n.forEach((function(t){ie(e,t.sourceId,t.sourceSpec)})),i.forEach((function(t){ae(e,t.imageId,t.imageSrc,t.opts)})),r.forEach((function(t){Q(e,t)}))},ue=function(e,t){t?(e.getSource("mapbox-terrain")||e.addSource("mapbox-terrain",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),e.setTerrain({source:"mapbox-terrain",exaggeration:1.5}),e.getLayer("sky")||e.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15,"sky-atmosphere-color":"rgba(85, 151, 210, 0.5)"}}),e.getLayer("contour-line")&&(e.setFilter("contour-line",["!",!0]),e.setFilter("contour-label",["!",!0]))):(e.setTerrain(null).setMaxPitch(60),e.getLayer("contour-line")&&(e.setFilter("contour-line",null),e.setFilter("contour-label",null)))},ce=function(e){var t=Object.keys((null===e||void 0===e?void 0:e.sources)||{});return["[name]: ".concat((null===e||void 0===e?void 0:e.name)||"no name"),"[sources]: ".concat(t.length?t.join("-"):"no sources")].join(", ")},de=function(e,t,n){var r=ce(null===e||void 0===e?void 0:e.getStyle()),i=ce(t);return new Promise((function(o){e.once("styledata",(function(){ue(e,n),le(e),console.debug("[map] swapBaseStyle: changed from '".concat(r,"' to ").concat(i)),o()})),console.debug("[map] swapBaseStyle: changing from '".concat(r,"' to ").concat(i)),e.setStyle(t)}))},he=function(e,t,n,i){return t||(t="en"),new Promise((function(o,a){$.ajax({type:"GET",contentType:"application/json",url:"https://api.mapbox.com/styles/v1/".concat(e),data:{optimize:"en"===t&&!n,access_token:r().accessToken},success:function(e){e=function(e,t,n,r){if((!t||"en"===t)&&!n)return e;var i=JSON.stringify(e).replace(/\["coalesce",\["get","name_en"\],\["get","name"\]\]/g,'["coalesce",["get","name_'.concat(t,'"],["get","name_en"],["get","name"]]')).replace(/n:en/g,"n:".concat(t)).replace(/PRIVATE/g,r.formatMessage({id:"viXE32",defaultMessage:[{type:0,value:"Private"}]}));return n&&(i=i.replace(/elevation_ft/g,"elevation_m").replace(/ ft/g," m").replace(/\["get","l"]/g,'["/",["round",["*",["get","l"],16.1]],10]').replace(/\["\*",\["get","ele"],3\.281]/g,'["get","ele"]').replace(/\["\*",\["get","ele"],3\.28084]/g,'["get","ele"]')),JSON.parse(i)}(e,t,n,i),e=function(e){return e.glyphs=se,e}(e),o(e)},error:function(e){a(e)}})}))},fe=function(e){if(!e||e.length<20)return!1;var t;try{t=new URL(e)}catch(Vw){return!1}return("http:"===t.protocol||"https:"===t.protocol)&&(-1!==e.indexOf("{x}")&&-1!==e.indexOf("{y}")&&-1!==e.indexOf("{z}"))},pe={alltrailsOutdoorsV2:function(e,t,n){return he("alltrails/ck6ihzq4v0e801ipws9d40r9m",e,t,n)},alltrailsSatellite:function(e,t,n){return he("alltrails/cjp90np3z44xz2rofjvdakfbh",e,t,n)},googleSatellite:function(){return Promise.resolve(W()("googleSatellite","https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{attribution:"Map data \xa92023",tileSize:256,maxzoom:19}))},adminBasemap:function(e,t,n,r){return r&&fe(r.basemapSourceUrl)?Promise.resolve(W()("adminBasemap",r.basemapSourceUrl,{tileSize:256,maxzoom:19})):Promise.reject(new Error("invalid data"))},opencycle:function(){return Promise.resolve(W()("opencycle","https://tiles-ocm.alltrails.com/{z}/{x}/{y}.png",{attribution:'\xa9 <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors',tileSize:256,maxzoom:19,minzoom:4}))},openstreet:function(){return Promise.resolve(W()("openstreet","https://tiles-osm.alltrails.com/{z}/{x}/{y}.png",{attribution:'\xa9 <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors',tileSize:256,maxzoom:19,minzoom:4}))},roadmap:function(e,t,n){return he("mapbox/streets-v10",e,t,n)},topo:function(){return Promise.resolve(W()("topo","https://us-topo.alltrails.com/{z}/{x}/{y}.png",{attribution:"\xa9 2020 AllTrails",tileSize:256,maxzoom:16,minzoom:4}))},worldparks:function(e,t,n){return he("alltrails/cjpbskuvg2f622smu19gk59y7",e,t,n)},worldtopo:function(){return Promise.resolve(W()("worldtopo","https://tiles-wtopo.alltrails.com/{z}/{y}/{x}.png",{attribution:"Copyright \xa9 2013 ESRI",tileSize:256,maxzoom:19}))}},me=pe,ge=__webpack_require__(55115),ye=__webpack_require__.n(ge),ve=function(e){var t=e.allowClickingCompletedBadge,n=e.bottomButtonsConfig,r=e.context,i=e.handleCardClick,o=e.handleCompletedBadgeClick,a=e.handleFavoriteClick,s=e.handleMouseEnter,l=e.handleMouseLeave,c=e.isCompleted,d=e.isFavorite,h=e.isVerified,f=e.trail,p=e.trailUrl,m=(0,u.useIntl)(),g=y()(),v=N(f),_=U(n,m);return(0,D.jsx)(ye(),{languageRegionCode:g,onCardClick:i,onCardMouseEnter:s,onCardMouseLeave:l,onFavoriteClick:a,isFavorite:d,variant:"small",trail:L(f,v),useMetric:null===r||void 0===r?void 0:r.displayMetric,footerCTAs:_&&_.length?_:void 0,isCompleted:c,isVerified:h,onCompletionBadgeClick:t?o:void 0,url:p,blockNavigation:!!i,openInNewTab:!0})};function _e(e){var t=e.allowClickingCompletedBadge,n=e.bottomButtonsConfig,r=e.context,i=e.handleCardClick,o=e.handleCompletedBadgeClick,a=e.handleFavoriteClick,s=e.handleMouseEnter,l=e.handleMouseLeave,u=e.isCompleted,c=e.isFavorite,d=e.isVerified,h=e.trail,f=e.trailUrl;return(0,D.jsx)(G.Z,{children:(0,D.jsx)(ve,{allowClickingCompletedBadge:t,bottomButtonsConfig:n,context:r,handleCardClick:i,handleCompletedBadgeClick:o,handleFavoriteClick:a,handleMouseEnter:s,handleMouseLeave:l,isCompleted:u,isFavorite:c,isVerified:d,trail:h,trailUrl:f})})}var be=__webpack_require__(45697),xe=__webpack_require__.n(be),we=__webpack_require__(64372),Ee=__webpack_require__.n(we),Se=__webpack_require__(15663),Te=((0,be.shape)({id:be.number,description:be.string,lineDisplayProperty:(0,be.shape)({color:be.string}),lineGeoStats:(0,be.shape)({distanceTotal:be.string,elevationEnd:be.number,elevationGain:be.number,elevationLoss:be.number,elevationMax:be.number,elevationMin:be.number,elevationStart:be.number}),lineSegments:(0,be.arrayOf)((0,be.shape)({dateTimeStart:(0,be.instanceOf)(Date),dateTime:(0,be.instanceOf)(Date),id:be.number,polyline:(0,be.shape)({elevationData:be.string,indexedElevationData:be.string,pointsData:be.string}),sequence_num:be.number})),location:(0,be.shape)({city:be.string,country:be.string,country_id:be.number,latitude:be.string,longitude:be.string,postalCode:be.string,region:be.string}),name:be.string,rating:be.number,sequence_num:be.number,status:be.string,trailId:be.number}),(0,be.shape)({dragHandleProps:(0,be.shape)({"aria-describedby":be.string,"data-rdb-drag-handle-context-id":be.string,"data-rdb-drag-handle-draggable-id":be.string,draggable:be.bool,onDragStart:be.func,role:be.string,tabIndex:be.number}),draggableProps:(0,be.shape)({"data-rdb-draggable-context-id":be.string,"data-rdb-draggable-id":be.string,onTransitionEnd:be.func,style:(0,be.shape)({transform:be.string,transition:be.string}),innerRef:be.func})}),be.string,be.string,be.object,be.bool,(0,be.instanceOf)(Date),(0,be.shape)({at_map_id:be.number,description:be.string,name:be.string,id:be.number,location:(0,be.shape)({latitude:be.number,longitude:be.number}),order:be.number,waypointDisplayProperty:(0,be.shape)({showTitle:be.bool}),enable_translations:be.bool})),Me=((0,be.shape)({adminOrPendingOwner:be.bool,adminUser:be.bool,currentUser:be.object,displayMetric:be.bool,languageRegionCode:be.string,loggedInUser:be.bool,mobileBrowser:be.bool,proUser:be.bool,shortLocale:be.string,tabletBrowser:be.bool}),(0,be.shape)({currentUser:be.object,adminUser:be.bool,proUser:be.bool,mobileBrowser:be.bool,tabletBrowser:be.bool,displayMetric:be.bool,languageRegionCode:be.string}),__webpack_require__(71450)),ke=__webpack_require__(4112),Ce=__webpack_require__.n(ke),Pe=__webpack_require__(21432),Ae=__webpack_require__.n(Pe),Oe=function(e){var t=e.active,n=e.handleClick,r=(e.eventSource,(0,u.useIntl)()),i=t?r.formatMessage({id:"F2tE1G",defaultMessage:[{type:0,value:"Show original"}]}):r.formatMessage({id:"rqfcFS",defaultMessage:[{type:0,value:"Show translation"}]});return(0,D.jsx)(Ce(),{icon:{Component:Ae()},onClick:function(e){n(e)},testId:i,title:i,variant:t?"primary":"flat"})};Oe.propTypes={active:be.bool,handleClick:be.func.isRequired,eventSource:be.string},Oe.defaultProps={active:!1,eventSource:""};var Ie=Oe,Le=__webpack_require__(84521),De=__webpack_require__.n(Le);function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ze=(0,u.defineMessages)({NEW_WAYPOINT:{id:"uhZsiD",defaultMessage:[{type:0,value:"New waypoint"}]},DRAG:{id:"5Xs9FD",defaultMessage:[{type:0,value:"Drag to desired location"}]},HIDE:{id:"e/r+ZW",defaultMessage:[{type:0,value:"Hide title"}]},SHOW:{id:"ZiR1hl",defaultMessage:[{type:0,value:"Show title"}]}}),je=function(e){var n=e.waypoint,r=e.toggleShowTitle,i=e.addToVRoute,o=e.messagingChannel,a=Re((0,t.useState)(!!n.waypointDisplayProperty&&n.waypointDisplayProperty.showTitle),2),s=a[0],l=a[1],u=Re((0,t.useState)("Add To VRoute"),2),c=u[0],d=u[1],h=Re((0,t.useState)(n.location),2),f=h[0],p=h[1],m=De()(ze).formattedDefaultMessages,g=m.NEW_WAYPOINT,v=m.DRAG,_=m.HIDE,b=m.SHOW,x=y()(),w=(null===n||void 0===n?void 0:n.description_original)||(null===n||void 0===n?void 0:n.description),E=(0,Se.useLocalizedText)(w,null===n||void 0===n?void 0:n.description_lang,x,{table:"waypoints",column:"description",row:null===n||void 0===n?void 0:n.id}),S=E.canBeLocalized,T=E.isLocalized,M=E.toggleText,k=E.text,C=(null===n||void 0===n?void 0:n.name_original)||(null===n||void 0===n?void 0:n.name),P=(0,Se.useLocalizedText)(C,null===n||void 0===n?void 0:n.name_lang,x,{table:"waypoints",column:"name",row:null===n||void 0===n?void 0:n.id}),A=P.canBeLocalized,O=P.isLocalized,I=P.toggleText,L=P.text,R=function(e){var t=e.location,n=t.latitude,r={longitude:t.longitude.toFixed(5),latitude:n.toFixed(5)};p(r)};(0,t.useEffect)((function(){o&&o.subscribe("waypoint.dragged.with_location",R)}),[]);var N=(0,t.useMemo)((function(){var e=f.latitude,t=f.longitude;return"".concat(parseFloat(e).toFixed(5),", ").concat(parseFloat(t).toFixed(5))}),[f]),z=function(){return"Added"===c||"Failed"===c};return(0,t.useMemo)((function(){if(null===n.id)return[g,v]}),[n]),(0,D.jsxs)("div",{className:"styles-module__container____fhPo",children:[(0,D.jsxs)("div",{className:"styles-module__nameAndDescription___c3PpX",children:[(0,D.jsx)("div",{className:"styles-module__title___aaDpf",children:L}),(0,D.jsx)("div",{className:"styles-module__description___NYCmm",children:k})]}),(0,D.jsxs)("div",{className:"styles-module__coordinates___ZrOM2",children:[n.date&&(0,D.jsx)("div",{children:(0,Me.dateString)(n.date,n.timezone)}),(0,D.jsx)("div",{children:N})]}),n.name&&(0,D.jsxs)("div",{className:"styles-module__controlBtns___WqEfD",children:[(0,D.jsxs)("div",{className:"styles-module__linkBtnContainer___KVza4",children:[r&&(0,D.jsx)(Ee(),{text:s?_:b,onClick:function(){l((function(e){return!e})),r()},size:"sm",testId:"waypoint-popup-show-hide-title",width:"full"}),(i||z())&&(0,D.jsx)(Ee(),{text:c,onClick:function(){!z()&&i&&i().then((function(e){d(e)})).catch((function(e){d(e)}))},disabled:!i&&z(),size:"sm",testId:c,width:"full"})]}),(S||A)&&(0,D.jsx)(Ie,{active:T||O,handleClick:function(){M(),I()},eventSource:"Waypoint Popup"})]})]})};je.propTypes={toggleShowTitle:be.func,waypoint:Te.isRequired},je.defaultProps={toggleShowTitle:null,messagingChannel:null};var Be=je,Fe=6371008.8,Ue={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*Fe,kilometers:6371.0088,kilometres:6371.0088,meters:Fe,metres:Fe,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:Fe/1852,radians:1,yards:6967335.223679999};function Ge(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function He(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ye(e[0])||!Ye(e[1]))throw new Error("coordinates must contain numbers");return Ge({type:"Point",coordinates:e},t,n)}function Ve(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return Ge({type:"LineString",coordinates:e},t,n)}function qe(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function $e(e,t){void 0===t&&(t="kilometers");var n=Ue[t];if(!n)throw new Error(t+" units is invalid");return e*n}function We(e,t){void 0===t&&(t="kilometers");var n=Ue[t];if(!n)throw new Error(t+" units is invalid");return e/n}function Ze(e){return 180*(e%(2*Math.PI))/Math.PI}function Xe(e){return e%360*Math.PI/180}function Ye(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function Ke(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Je(e,t,n){if(void 0===n&&(n={}),!0===n.final)return function(e,t){var n=Je(t,e);return n=(n+180)%360}(e,t);var r=Ke(e),i=Ke(t),o=Xe(r[0]),a=Xe(i[0]),s=Xe(r[1]),l=Xe(i[1]),u=Math.sin(a-o)*Math.cos(l),c=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(a-o);return Ze(Math.atan2(u,c))}function Qe(e,t,n,r){void 0===r&&(r={});var i=Ke(e),o=Xe(i[0]),a=Xe(i[1]),s=Xe(n),l=We(t,r.units),u=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(s));return He([Ze(o+Math.atan2(Math.sin(s)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(u))),Ze(u)],r.properties)}var et=function(e,t,n){void 0===n&&(n={});var r=Ke(e),i=Ke(t),o=Xe(i[1]-r[1]),a=Xe(i[0]-r[0]),s=Xe(r[1]),l=Xe(i[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(l);return $e(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)};function tt(e,t,n){void 0===n&&(n={});for(var r,i=("Feature"===(r=e).type?r.geometry:r).coordinates,o=0,a=0;a<i.length&&!(t>=o&&a===i.length-1);a++){if(o>=t){var s=t-o;if(s){var l=Je(i[a],i[a-1])-180;return Qe(i[a],s,l,n)}return He(i[a])}o+=et(i[a],i[a+1],n)}return He(i[i.length-1])}var nt=__webpack_require__(18754);var rt=function(e,t,n){void 0===n&&(n={});var r=Ke(e),i=Ke(t),o=Xe(i[1]-r[1]),a=Xe(i[0]-r[0]),s=Xe(r[1]),l=Xe(i[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(l);return $e(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="es-ES"===t?"de-DE":t;return Number(e).toLocaleString(r,{minimumFractionDigits:n,maximumFractionDigits:n})};var ot=621371e-9,at=3.28084,st=function(e,t){return void 0===t&&(t=5),Math.round(ot*e*Math.pow(10,t))/Math.pow(10,t)},lt=function(e,t){return e||0===e?t?e:e*at:null},ut=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"en-US";if(e||0===e){var i="".concat(it(e,r,t));return n&&(i="".concat(i," ").concat(n)),i}return n?"0 ".concat(n):""};function ct(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}1===(dt=ct).length&&(ht=dt,dt=function(e,t){return ct(ht(e),t)});var dt,ht,ft=Array.prototype;ft.slice,ft.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var pt=Array.prototype.slice;function mt(e){return e}var gt=1e-6;function yt(e){return"translate("+(e+.5)+",0)"}function vt(e){return"translate(0,"+(e+.5)+")"}function _t(e){return function(t){return+e(t)}}function bt(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function xt(){return!this.__axis}function wt(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,l=1===e||4===e?-1:1,u=4===e||2===e?"x":"y",c=1===e||3===e?yt:vt;function d(d){var h=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,f=null==i?t.tickFormat?t.tickFormat.apply(t,n):mt:i,p=Math.max(o,0)+s,m=t.range(),g=+m[0]+.5,y=+m[m.length-1]+.5,v=(t.bandwidth?bt:_t)(t.copy()),_=d.selection?d.selection():d,b=_.selectAll(".domain").data([null]),x=_.selectAll(".tick").data(h,t).order(),w=x.exit(),E=x.enter().append("g").attr("class","tick"),S=x.select("line"),T=x.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),x=x.merge(E),S=S.merge(E.append("line").attr("stroke","#000").attr(u+"2",l*o)),T=T.merge(E.append("text").attr("fill","#000").attr(u,l*p).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),d!==_&&(b=b.transition(d),x=x.transition(d),S=S.transition(d),T=T.transition(d),w=w.transition(d).attr("opacity",gt).attr("transform",(function(e){return isFinite(e=v(e))?c(e):this.getAttribute("transform")})),E.attr("opacity",gt).attr("transform",(function(e){var t=this.parentNode.__axis;return c(t&&isFinite(t=t(e))?t:v(e))}))),w.remove(),b.attr("d",4===e||2==e?"M"+l*a+","+g+"H0.5V"+y+"H"+l*a:"M"+g+","+l*a+"V0.5H"+y+"V"+l*a),x.attr("opacity",1).attr("transform",(function(e){return c(v(e))})),S.attr(u+"2",l*o),T.attr(u,l*p).text(f),_.filter(xt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),_.each((function(){this.__axis=v}))}return d.scale=function(e){return arguments.length?(t=e,d):t},d.ticks=function(){return n=pt.call(arguments),d},d.tickArguments=function(e){return arguments.length?(n=null==e?[]:pt.call(e),d):n.slice()},d.tickValues=function(e){return arguments.length?(r=null==e?null:pt.call(e),d):r&&r.slice()},d.tickFormat=function(e){return arguments.length?(i=e,d):i},d.tickSize=function(e){return arguments.length?(o=a=+e,d):o},d.tickSizeInner=function(e){return arguments.length?(o=+e,d):o},d.tickSizeOuter=function(e){return arguments.length?(a=+e,d):a},d.tickPadding=function(e){return arguments.length?(s=+e,d):s},d}function Et(){}function St(e){return null==e?Et:function(){return this.querySelector(e)}}function Tt(){return[]}function Mt(e){return null==e?Tt:function(){return this.querySelectorAll(e)}}function kt(e){return function(){return this.matches(e)}}function Ct(e){return new Array(e.length)}function Pt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Pt.prototype={constructor:Pt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function At(e,t,n,r,i,o){for(var a,s=0,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Pt(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function Ot(e,t,n,r,i,o,a){var s,l,u,c={},d=t.length,h=o.length,f=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=u="$"+a.call(l,l.__data__,s,t),u in c?i[s]=l:c[u]=l);for(s=0;s<h;++s)(l=c[u="$"+a.call(e,o[s],s,o)])?(r[s]=l,l.__data__=o[s],c[u]=null):n[s]=new Pt(e,o[s]);for(s=0;s<d;++s)(l=t[s])&&c[f[s]]===l&&(i[s]=l)}function It(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var Lt="http://www.w3.org/1999/xhtml",Dt={svg:"http://www.w3.org/2000/svg",xhtml:Lt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Rt(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Dt.hasOwnProperty(t)?{space:Dt[t],local:e}:e}function Nt(e){return function(){this.removeAttribute(e)}}function zt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jt(e,t){return function(){this.setAttribute(e,t)}}function Bt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ft(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Ut(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Gt(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ht(e){return function(){this.style.removeProperty(e)}}function Vt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function qt(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function $t(e,t){return e.style.getPropertyValue(t)||Gt(e).getComputedStyle(e,null).getPropertyValue(t)}function Wt(e){return function(){delete this[e]}}function Zt(e,t){return function(){this[e]=t}}function Xt(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Yt(e){return e.trim().split(/^|\s+/)}function Kt(e){return e.classList||new Jt(e)}function Jt(e){this._node=e,this._names=Yt(e.getAttribute("class")||"")}function Qt(e,t){for(var n=Kt(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function en(e,t){for(var n=Kt(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function tn(e){return function(){Qt(this,e)}}function nn(e){return function(){en(this,e)}}function rn(e,t){return function(){(t.apply(this,arguments)?Qt:en)(this,e)}}function on(){this.textContent=""}function an(e){return function(){this.textContent=e}}function sn(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ln(){this.innerHTML=""}function un(e){return function(){this.innerHTML=e}}function cn(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function dn(){this.nextSibling&&this.parentNode.appendChild(this)}function hn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fn(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Lt&&t.documentElement.namespaceURI===Lt?t.createElement(e):t.createElementNS(n,e)}}function pn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function mn(e){var t=Rt(e);return(t.local?pn:fn)(t)}function gn(){return null}function yn(){var e=this.parentNode;e&&e.removeChild(this)}function vn(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _n(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}Jt.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var bn={},xn=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(bn={mouseenter:"mouseover",mouseleave:"mouseout"}));function wn(e,t,n){return e=En(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function En(e,t,n){return function(r){var i=xn;xn=r;try{e.call(this,this.__data__,t,n)}finally{xn=i}}}function Sn(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Tn(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function Mn(e,t,n){var r=bn.hasOwnProperty(e.type)?wn:En;return function(i,o,a){var s,l=this.__on,u=r(t,o,a);if(l)for(var c=0,d=l.length;c<d;++c)if((s=l[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=t);this.addEventListener(e.type,u,n),s={type:e.type,name:e.name,value:t,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function kn(e,t,n){var r=Gt(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Cn(e,t){return function(){return kn(this,e,t)}}function Pn(e,t){return function(){return kn(this,e,t.apply(this,arguments))}}var An=[null];function On(e,t){this._groups=e,this._parents=t}function In(){return new On([[document.documentElement]],An)}On.prototype=In.prototype={constructor:On,select:function(e){"function"!==typeof e&&(e=St(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new On(r,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=Mt(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),i.push(a));return new On(r,i)},filter:function(e){"function"!==typeof e&&(e=kt(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new On(r,this._parents)},data:function(e,t){if(!e)return f=new Array(this.size()),u=-1,this.each((function(e){f[++u]=e})),f;var n=t?Ot:At,r=this._parents,i=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],d=i[u],h=d.length,f=e.call(c,c&&c.__data__,u,r),p=f.length,m=s[u]=new Array(p),g=a[u]=new Array(p);n(c,d,m,g,l[u]=new Array(h),f,t);for(var y,v,_=0,b=0;_<p;++_)if(y=m[_]){for(_>=b&&(b=_+1);!(v=g[b])&&++b<p;);y._next=v||null}}return(a=new On(a,r))._enter=s,a._exit=l,a},enter:function(){return new On(this._enter||this._groups.map(Ct),this._parents)},exit:function(){return new On(this._exit||this._groups.map(Ct),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"===typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=t[s],c=n[s],d=u.length,h=a[s]=new Array(d),f=0;f<d;++f)(l=u[f]||c[f])&&(h[f]=l);for(;s<r;++s)a[s]=t[s];return new On(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=It);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new On(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=Rt(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?zt:Nt:"function"===typeof t?n.local?Ut:Ft:n.local?Bt:jt)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Ht:"function"===typeof t?qt:Vt)(e,t,null==n?"":n)):$t(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Wt:"function"===typeof t?Xt:Zt)(e,t)):this.node()[e]},classed:function(e,t){var n=Yt(e+"");if(arguments.length<2){for(var r=Kt(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?rn:t?tn:nn)(n,t))},text:function(e){return arguments.length?this.each(null==e?on:("function"===typeof e?sn:an)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ln:("function"===typeof e?cn:un)(e)):this.node().innerHTML},raise:function(){return this.each(dn)},lower:function(){return this.each(hn)},append:function(e){var t="function"===typeof e?e:mn(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:mn(e),r=null==t?gn:"function"===typeof t?t:St(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(yn)},clone:function(e){return this.select(e?_n:vn)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=Sn(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?Mn:Tn,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?Pn:Cn)(e,t))}};var Ln=In,Dn={value:function(){}};function Rn(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Nn(r)}function Nn(e){this._=e}function zn(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function jn(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Bn(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Dn,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Nn.prototype=Rn.prototype={constructor:Nn,on:function(e,t){var n,r=this._,i=zn(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=Bn(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Bn(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=jn(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Nn(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var Fn,Un,Gn=Rn,Hn=0,Vn=0,qn=0,$n=0,Wn=0,Zn=0,Xn="object"===typeof performance&&performance.now?performance:Date,Yn="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Kn(){return Wn||(Yn(Jn),Wn=Xn.now()+Zn)}function Jn(){Wn=0}function Qn(){this._call=this._time=this._next=null}function er(e,t,n){var r=new Qn;return r.restart(e,t,n),r}function tr(){Wn=($n=Xn.now())+Zn,Hn=Vn=0;try{!function(){Kn(),++Hn;for(var e,t=Fn;t;)(e=Wn-t._time)>=0&&t._call.call(null,e),t=t._next;--Hn}()}finally{Hn=0,function(){var e,t,n=Fn,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Fn=t);Un=e,rr(r)}(),Wn=0}}function nr(){var e=Xn.now(),t=e-$n;t>1e3&&(Zn-=t,$n=e)}function rr(e){Hn||(Vn&&(Vn=clearTimeout(Vn)),e-Wn>24?(e<1/0&&(Vn=setTimeout(tr,e-Xn.now()-Zn)),qn&&(qn=clearInterval(qn))):(qn||($n=Xn.now(),qn=setInterval(nr,1e3)),Hn=1,Yn(tr)))}function ir(e,t,n){var r=new Qn;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}Qn.prototype=er.prototype={constructor:Qn,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?Kn():+n)+(null==t?0:+t),this._next||Un===this||(Un?Un._next=this:Fn=this,Un=this),this._call=e,this._time=n,rr()},stop:function(){this._call&&(this._call=null,this._time=1/0,rr())}};var or=Gn("start","end","cancel","interrupt"),ar=[];function sr(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var u,c,d,h;if(1!==n.state)return l();for(u in i)if((h=i[u]).name===n.name){if(3===h.state)return ir(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[u]):+u<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[u])}if(ir((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),u=0,c=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=er(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:or,tween:ar,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function lr(e,t){var n=cr(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function ur(e,t){var n=cr(e,t);if(n.state>3)throw new Error("too late; already running");return n}function cr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function dr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var hr,fr,pr,mr,gr=180/Math.PI,yr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vr(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*gr,skewX:Math.atan(l)*gr,scaleX:a,scaleY:s}}function _r(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:dr(e,i)},{i:l-2,x:dr(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:dr(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:dr(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:dr(e,n)},{i:s-2,x:dr(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var br=_r((function(e){return"none"===e?yr:(hr||(hr=document.createElement("DIV"),fr=document.documentElement,pr=document.defaultView),hr.style.transform=e,e=pr.getComputedStyle(fr.appendChild(hr),null).getPropertyValue("transform"),fr.removeChild(hr),vr(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),xr=_r((function(e){return null==e?yr:(mr||(mr=document.createElementNS("http://www.w3.org/2000/svg","g")),mr.setAttribute("transform",e),(e=mr.transform.baseVal.consolidate())?vr((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):yr)}),", ",")",")");function wr(e,t){var n,r;return function(){var i=ur(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function Er(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=ur(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function Sr(e,t,n){var r=e._id;return e.each((function(){var e=ur(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return cr(e,r).value[t]}}function Tr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Mr(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kr(){}var Cr=.7,Pr=1/Cr,Ar="\\s*([+-]?\\d+)\\s*",Or="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ir="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Lr=/^#([0-9a-f]{3,8})$/,Dr=new RegExp("^rgb\\("+[Ar,Ar,Ar]+"\\)$"),Rr=new RegExp("^rgb\\("+[Ir,Ir,Ir]+"\\)$"),Nr=new RegExp("^rgba\\("+[Ar,Ar,Ar,Or]+"\\)$"),zr=new RegExp("^rgba\\("+[Ir,Ir,Ir,Or]+"\\)$"),jr=new RegExp("^hsl\\("+[Or,Ir,Ir]+"\\)$"),Br=new RegExp("^hsla\\("+[Or,Ir,Ir,Or]+"\\)$"),Fr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ur(){return this.rgb().formatHex()}function Gr(){return this.rgb().formatRgb()}function Hr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Lr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Vr(t):3===n?new Zr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?qr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?qr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Dr.exec(e))?new Zr(t[1],t[2],t[3],1):(t=Rr.exec(e))?new Zr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Nr.exec(e))?qr(t[1],t[2],t[3],t[4]):(t=zr.exec(e))?qr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=jr.exec(e))?Jr(t[1],t[2]/100,t[3]/100,1):(t=Br.exec(e))?Jr(t[1],t[2]/100,t[3]/100,t[4]):Fr.hasOwnProperty(e)?Vr(Fr[e]):"transparent"===e?new Zr(NaN,NaN,NaN,0):null}function Vr(e){return new Zr(e>>16&255,e>>8&255,255&e,1)}function qr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Zr(e,t,n,r)}function $r(e){return e instanceof kr||(e=Hr(e)),e?new Zr((e=e.rgb()).r,e.g,e.b,e.opacity):new Zr}function Wr(e,t,n,r){return 1===arguments.length?$r(e):new Zr(e,t,n,null==r?1:r)}function Zr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Xr(){return"#"+Kr(this.r)+Kr(this.g)+Kr(this.b)}function Yr(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Kr(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Jr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ei(e,t,n,r)}function Qr(e){if(e instanceof ei)return new ei(e.h,e.s,e.l,e.opacity);if(e instanceof kr||(e=Hr(e)),!e)return new ei;if(e instanceof ei)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new ei(a,s,l,e.opacity)}function ei(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ti(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function ni(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function ri(e){return function(){return e}}function ii(e,t){return function(n){return e+n*t}}function oi(e){return 1===(e=+e)?ai:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):ri(isNaN(t)?n:t)}}function ai(e,t){var n=t-e;return n?ii(e,n):ri(isNaN(e)?t:e)}Tr(kr,Hr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Ur,formatHex:Ur,formatHsl:function(){return Qr(this).formatHsl()},formatRgb:Gr,toString:Gr}),Tr(Zr,Wr,Mr(kr,{brighter:function(e){return e=null==e?Pr:Math.pow(Pr,e),new Zr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Cr:Math.pow(Cr,e),new Zr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xr,formatHex:Xr,formatRgb:Yr,toString:Yr})),Tr(ei,(function(e,t,n,r){return 1===arguments.length?Qr(e):new ei(e,t,n,null==r?1:r)}),Mr(kr,{brighter:function(e){return e=null==e?Pr:Math.pow(Pr,e),new ei(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Cr:Math.pow(Cr,e),new ei(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Zr(ti(e>=240?e-240:e+120,i,r),ti(e,i,r),ti(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var si=function e(t){var n=oi(t);function r(e,t){var r=n((e=Wr(e)).r,(t=Wr(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=ai(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function li(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Wr(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}li((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return ni((n-r/t)*t,a,i,o,s)}})),li((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return ni((n-r/t)*t,i,o,a,s)}}));var ui=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ci=new RegExp(ui.source,"g");function di(e,t){var n,r,i,o=ui.lastIndex=ci.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=ui.exec(e))&&(r=ci.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:dr(n,r)})),o=ci.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function hi(e,t){var n;return("number"===typeof t?dr:t instanceof Hr?si:(n=Hr(t))?(t=n,si):di)(e,t)}function fi(e){return function(){this.removeAttribute(e)}}function pi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mi(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function gi(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function yi(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttribute(e)}}function vi(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function _i(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function bi(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function xi(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&bi(e,i)),n}return i._value=t,i}function wi(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&_i(e,i)),n}return i._value=t,i}function Ei(e,t){return function(){lr(this,e).delay=+t.apply(this,arguments)}}function Si(e,t){return t=+t,function(){lr(this,e).delay=t}}function Ti(e,t){return function(){ur(this,e).duration=+t.apply(this,arguments)}}function Mi(e,t){return t=+t,function(){ur(this,e).duration=t}}function ki(e,t){if("function"!==typeof t)throw new Error;return function(){ur(this,e).ease=t}}function Ci(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?lr:ur;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}var Pi=Ln.prototype.constructor;function Ai(e){return function(){this.style.removeProperty(e)}}function Oi(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ii(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Oi(e,o,n)),r}return o._value=t,o}function Li(e){return function(t){this.textContent=e.call(this,t)}}function Di(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Li(r)),t}return r._value=e,r}var Ri=0;function Ni(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zi(){return++Ri}var ji=Ln.prototype;Ni.prototype=function(e){return Ln().transition(e)}.prototype={constructor:Ni,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=St(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,u=r[a],c=u.length,d=o[a]=new Array(c),h=0;h<c;++h)(s=u[h])&&(l=e.call(s,s.__data__,h,u))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,sr(d[h],t,n,h,d,cr(s,n)));return new Ni(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Mt(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var h,f=e.call(l,l.__data__,d,u),p=cr(l,n),m=0,g=f.length;m<g;++m)(h=f[m])&&sr(h,t,n,m,f,p);o.push(f),a.push(l)}return new Ni(o,a,t,n)},filter:function(e){"function"!==typeof e&&(e=kt(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new Ni(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=t[s],c=n[s],d=u.length,h=a[s]=new Array(d),f=0;f<d;++f)(l=u[f]||c[f])&&(h[f]=l);for(;s<r;++s)a[s]=t[s];return new Ni(a,this._parents,this._name,this._id)},selection:function(){return new Pi(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=zi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=cr(a,t);sr(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ni(r,this._parents,e,n)},call:ji.call,nodes:ji.nodes,node:ji.node,size:ji.size,empty:ji.empty,each:ji.each,on:function(e,t){var n=this._id;return arguments.length<2?cr(this.node(),n).on.on(e):this.each(Ci(n,e,t))},attr:function(e,t){var n=Rt(e),r="transform"===n?xr:hi;return this.attrTween(e,"function"===typeof t?(n.local?vi:yi)(n,r,Sr(this,"attr."+e,t)):null==t?(n.local?pi:fi)(n):(n.local?gi:mi)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=Rt(e);return this.tween(n,(r.local?xi:wi)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?br:hi;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=$t(this,e),a=(this.style.removeProperty(e),$t(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,Ai(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=$t(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=$t(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,Sr(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=ur(this,e),u=l.on,c=null==l.value[a]?o||(o=Ai(t)):void 0;u===n&&i===c||(r=(n=u).copy()).on(s,i=c),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=$t(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,Ii(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Sr(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,Di(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=cr(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?wr:Er)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Ei:Si)(t,e)):cr(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Ti:Mi)(t,e)):cr(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(ki(t,e)):cr(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each((function(){var n=ur(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}))}))}};var Bi={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Fi(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return Bi.time=Kn(),Bi;return n}Ln.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}(this,e)}))},Ln.prototype.transition=function(e){var t,n;e instanceof Ni?(t=e._id,e=e._name):(t=zi(),(n=Bi).time=Kn(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)(a=s[u])&&sr(a,e,t,u,s,n||Fi(a,t));return new Ni(r,this._parents,e,t)};["e","w"].map(Ui),["n","s"].map(Ui),["n","e","s","w","nw","ne","se","sw"].map(Ui);function Ui(e){return{type:e}}function Gi(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var Hi=function(e){return 1===e.length&&(e=function(e){return function(t,n){return Gi(e(t),n)}}(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}(Gi),Vi=Hi.right,qi=(Hi.left,Vi),$i=Array.prototype,Wi=($i.slice,$i.map,Math.sqrt(50)),Zi=Math.sqrt(10),Xi=Math.sqrt(2);function Yi(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Wi?10:o>=Zi?5:o>=Xi?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Wi?10:o>=Zi?5:o>=Xi?2:1)}Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice;var Ki="$";function Ji(){}function Qi(e,t){var n=new Ji;if(e instanceof Ji)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}function eo(){}Ji.prototype=Qi.prototype={constructor:Ji,has:function(e){return Ki+e in this},get:function(e){return this[Ki+e]},set:function(e,t){return this[Ki+e]=t,this},remove:function(e){var t=Ki+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Ki&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Ki&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Ki&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Ki&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Ki&&++e;return e},empty:function(){for(var e in this)if(e[0]===Ki)return!1;return!0},each:function(e){for(var t in this)t[0]===Ki&&e(this[t],t.slice(1),this)}};var to=Qi.prototype;function no(e,t){var n=new eo;if(e instanceof eo)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}eo.prototype=no.prototype={constructor:eo,has:to.has,add:function(e){return this[Ki+(e+="")]=e,this},remove:to.remove,clear:to.clear,values:to.keys,size:to.size,empty:to.empty,each:to.each};function ro(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function io(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function oo(){}var ao=.7,so=1/ao,lo="\\s*([+-]?\\d+)\\s*",uo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",co="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ho=/^#([0-9a-f]{3})$/,fo=/^#([0-9a-f]{6})$/,po=new RegExp("^rgb\\("+[lo,lo,lo]+"\\)$"),mo=new RegExp("^rgb\\("+[co,co,co]+"\\)$"),go=new RegExp("^rgba\\("+[lo,lo,lo,uo]+"\\)$"),yo=new RegExp("^rgba\\("+[co,co,co,uo]+"\\)$"),vo=new RegExp("^hsl\\("+[uo,co,co]+"\\)$"),_o=new RegExp("^hsla\\("+[uo,co,co,uo]+"\\)$"),bo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function xo(e){var t;return e=(e+"").trim().toLowerCase(),(t=ho.exec(e))?new To((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=fo.exec(e))?wo(parseInt(t[1],16)):(t=po.exec(e))?new To(t[1],t[2],t[3],1):(t=mo.exec(e))?new To(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=go.exec(e))?Eo(t[1],t[2],t[3],t[4]):(t=yo.exec(e))?Eo(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=vo.exec(e))?Mo(t[1],t[2]/100,t[3]/100,1):(t=_o.exec(e))?Mo(t[1],t[2]/100,t[3]/100,t[4]):bo.hasOwnProperty(e)?wo(bo[e]):"transparent"===e?new To(NaN,NaN,NaN,0):null}function wo(e){return new To(e>>16&255,e>>8&255,255&e,1)}function Eo(e,t,n,r){return r<=0&&(e=t=n=NaN),new To(e,t,n,r)}function So(e){return e instanceof oo||(e=xo(e)),e?new To((e=e.rgb()).r,e.g,e.b,e.opacity):new To}function To(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Mo(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Co(e,t,n,r)}function ko(e){if(e instanceof Co)return new Co(e.h,e.s,e.l,e.opacity);if(e instanceof oo||(e=xo(e)),!e)return new Co;if(e instanceof Co)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Co(a,s,l,e.opacity)}function Co(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Po(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}ro(oo,xo,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),ro(To,(function(e,t,n,r){return 1===arguments.length?So(e):new To(e,t,n,null==r?1:r)}),io(oo,{brighter:function(e){return e=null==e?so:Math.pow(so,e),new To(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?ao:Math.pow(ao,e),new To(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),ro(Co,(function(e,t,n,r){return 1===arguments.length?ko(e):new Co(e,t,n,null==r?1:r)}),io(oo,{brighter:function(e){return e=null==e?so:Math.pow(so,e),new Co(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?ao:Math.pow(ao,e),new Co(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new To(Po(e>=240?e-240:e+120,i,r),Po(e,i,r),Po(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Ao=Math.PI/180,Oo=180/Math.PI,Io=.95047,Lo=1.08883,Do=4/29,Ro=6/29,No=3*Ro*Ro;function zo(e){if(e instanceof jo)return new jo(e.l,e.a,e.b,e.opacity);if(e instanceof Vo){var t=e.h*Ao;return new jo(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof To||(e=So(e));var n=Go(e.r),r=Go(e.g),i=Go(e.b),o=Bo((.4124564*n+.3575761*r+.1804375*i)/Io),a=Bo((.2126729*n+.7151522*r+.072175*i)/1);return new jo(116*a-16,500*(o-a),200*(a-Bo((.0193339*n+.119192*r+.9503041*i)/Lo)),e.opacity)}function jo(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Bo(e){return e>.008856451679035631?Math.pow(e,1/3):e/No+Do}function Fo(e){return e>Ro?e*e*e:No*(e-Do)}function Uo(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Go(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ho(e){if(e instanceof Vo)return new Vo(e.h,e.c,e.l,e.opacity);e instanceof jo||(e=zo(e));var t=Math.atan2(e.b,e.a)*Oo;return new Vo(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Vo(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}ro(jo,(function(e,t,n,r){return 1===arguments.length?zo(e):new jo(e,t,n,null==r?1:r)}),io(oo,{brighter:function(e){return new jo(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new jo(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=1*Fo(e),new To(Uo(3.2404542*(t=Io*Fo(t))-1.5371385*e-.4985314*(n=Lo*Fo(n))),Uo(-.969266*t+1.8760108*e+.041556*n),Uo(.0556434*t-.2040259*e+1.0572252*n),this.opacity)}})),ro(Vo,(function(e,t,n,r){return 1===arguments.length?Ho(e):new Vo(e,t,n,null==r?1:r)}),io(oo,{brighter:function(e){return new Vo(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Vo(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return zo(this).rgb()}}));var qo=-.14861,$o=1.78277,Wo=-.29227,Zo=-.90649,Xo=1.97294,Yo=Xo*Zo,Ko=Xo*$o,Jo=$o*Wo-Zo*qo;function Qo(e){if(e instanceof ea)return new ea(e.h,e.s,e.l,e.opacity);e instanceof To||(e=So(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Jo*r+Yo*t-Ko*n)/(Jo+Yo-Ko),o=r-i,a=(Xo*(n-i)-Wo*o)/Zo,s=Math.sqrt(a*a+o*o)/(Xo*i*(1-i)),l=s?Math.atan2(a,o)*Oo-120:NaN;return new ea(l<0?l+360:l,s,i,e.opacity)}function ea(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ro(ea,(function(e,t,n,r){return 1===arguments.length?Qo(e):new ea(e,t,n,null==r?1:r)}),io(oo,{brighter:function(e){return e=null==e?so:Math.pow(so,e),new ea(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?ao:Math.pow(ao,e),new ea(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Ao,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new To(255*(t+n*(qo*r+$o*i)),255*(t+n*(Wo*r+Zo*i)),255*(t+n*(Xo*r)),this.opacity)}}));var ta={value:function(){}};function na(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new ra(r)}function ra(e){this._=e}function ia(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function oa(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function aa(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ta,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}ra.prototype=na.prototype={constructor:ra,on:function(e,t){var n,r=this._,i=ia(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=aa(r[n],e.name,t);else if(null==t)for(n in r)r[n]=aa(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=oa(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ra(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var sa={},la={};function ua(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}")}function ca(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,l=o<=0,u=!1;function c(){if(l)return la;if(u)return u=!1,sa;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?l=!0:10===(r=e.charCodeAt(a++))?u=!0:13===r&&(u=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))u=!0;else if(13===r)u=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return l=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=c())!==la;){for(var d=[];r!==sa&&r!==la;)d.push(r),r=c();t&&null==(d=t(d,s++))||i.push(d)}return i}function i(t){return t.map(o).join(e)}function o(e){return null==e?"":t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=ua(e);return function(r,i){return t(n(r),i,e)}}(e,t):ua(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=function(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}(t)),[n.map(o).join(e)].concat(t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))).join("\n")},formatRows:function(e){return e.map(i).join("\n")}}}var da=ca(","),ha=(da.parse,da.parseRows,da.format,da.formatRows,ca("\t"));ha.parse,ha.parseRows,ha.format,ha.formatRows,function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),Math.PI;var fa=1.70158,pa=(function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n}(fa),function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(fa),function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(fa),2*Math.PI),ma=(function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=pa);function i(e){return t*Math.pow(2,10*--e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*pa)},i.period=function(n){return e(t,n)},i}(1,.3),function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=pa);function i(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*pa)},i.period=function(n){return e(t,n)},i}(1,.3),function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=pa);function i(e){return((e=2*e-1)<0?t*Math.pow(2,10*e)*Math.sin((r-e)/n):2-t*Math.pow(2,-10*e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*pa)},i.period=function(n){return e(t,n)},i}(1,.3),"$");function ga(){}function ya(e,t){var n=new ga;if(e instanceof ga)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}ga.prototype=ya.prototype={constructor:ga,has:function(e){return ma+e in this},get:function(e){return this[ma+e]},set:function(e,t){return this[ma+e]=t,this},remove:function(e){var t=ma+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===ma&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===ma&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===ma&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===ma&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===ma&&++e;return e},empty:function(){for(var e in this)if(e[0]===ma)return!1;return!0},each:function(e){for(var t in this)t[0]===ma&&e(this[t],t.slice(1),this)}};var va=ya;function _a(){}var ba=va.prototype;function xa(e,t){var n=new _a;if(e instanceof _a)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}_a.prototype=xa.prototype={constructor:_a,has:ba.has,add:function(e){return this[ma+(e+="")]=e,this},remove:ba.remove,clear:ba.clear,values:ba.keys,size:ba.size,empty:ba.empty,each:ba.each};var wa;Math.PI,Math.sqrt(5);function Ea(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Sa(e,t){var n=Ea(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var Ta={"":function(e,t){e:for(var n,r=(e=e.toPrecision(t)).length,i=1,o=-1;i<r;++i)switch(e[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break e;default:o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(n+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Sa(100*e,t)},r:Sa,s:function(e,t){var n=Ea(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(wa=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ea(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},Ma=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function ka(e){return new Ca(e)}function Ca(e){if(!(t=Ma.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",o=t[4]||"",a=!!t[5],s=t[6]&&+t[6],l=!!t[7],u=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(l=!0,c="g"):Ta[c]||(c=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=l,this.precision=u,this.type=c}function Pa(e){return e}ka.prototype=Ca.prototype,Ca.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Aa,Oa,Ia=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function La(e){var t,n,r=e.grouping&&e.thousands?(t=e.grouping,n=e.thousands,function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}):Pa,i=e.currency,o=e.decimal,a=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(e.numerals):Pa,s=e.percent||"%";function l(e){var t=(e=ka(e)).fill,n=e.align,l=e.sign,u=e.symbol,c=e.zero,d=e.width,h=e.comma,f=e.precision,p=e.type,m="$"===u?i[0]:"#"===u&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",g="$"===u?i[1]:/[%p]/.test(p)?s:"",y=Ta[p],v=!p||/[defgprs%]/.test(p);function _(e){var i,s,u,_=m,b=g;if("c"===p)b=y(e)+b,e="";else{var x=(e=+e)<0;if(e=y(Math.abs(e),f),x&&0===+e&&(x=!1),_=(x?"("===l?l:"-":"-"===l||"("===l?"":l)+_,b=b+("s"===p?Ia[8+wa/3]:"")+(x&&"("===l?")":""),v)for(i=-1,s=e.length;++i<s;)if(48>(u=e.charCodeAt(i))||u>57){b=(46===u?o+e.slice(i+1):e.slice(i))+b,e=e.slice(0,i);break}}h&&!c&&(e=r(e,1/0));var w=_.length+e.length+b.length,E=w<d?new Array(d-w+1).join(t):"";switch(h&&c&&(e=r(E+e,E.length?d-b.length:1/0),E=""),n){case"<":e=_+e+b+E;break;case"=":e=_+E+e+b;break;case"^":e=E.slice(0,w=E.length>>1)+_+e+b+E.slice(w);break;default:e=E+_+e+b}return a(e)}return f=null==f?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),_.toString=function(){return e+""},_}return{format:l,formatPrefix:function(e,t){var n=l(((e=ka(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(function(e){return(e=Ea(Math.abs(e)))?e[1]:NaN}(t)/3))),i=Math.pow(10,-r),o=Ia[8+r/3];return function(e){return n(i*e)+o}}}}function Da(){return new Ra}function Ra(){this.reset()}Aa=La({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Oa=Aa.format,Aa.formatPrefix,Ra.prototype={constructor:Ra,reset:function(){this.s=this.t=0},add:function(e){za(Na,e,this.t),za(this,Na.s,this.s),this.s?this.t+=Na.t:this.s=Na.t},valueOf:function(){return this.s}};var Na=new Ra;function za(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var ja=1e-6,Ba=Math.PI,Fa=Ba/2,Ua=Ba/4,Ga=2*Ba,Ha=Ba/180,Va=Math.abs,qa=Math.atan,$a=Math.atan2,Wa=Math.cos,Za=(Math.ceil,Math.exp),Xa=(Math.floor,Math.log),Ya=(Math.pow,Math.sin),Ka=(Math.sign,Math.sqrt),Ja=Math.tan;function Qa(e){return e>1?Fa:e<-1?-Fa:Math.asin(e)}function es(){}Da(),Da();function ts(e){var t=e[0],n=e[1],r=Wa(n);return[r*Wa(t),r*Ya(t),Ya(n)]}function ns(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function rs(e){var t=Ka(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Da();function is(e,t){return[e>Ba?e-Ga:e<-Ba?e+Ga:e,t]}function os(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function as(e,t,n,r,i){var o,a,s=[],l=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(function(e,t){return Va(e[0]-t[0])<ja&&Va(e[1]-t[1])<ja}(r,a)){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);i.lineEnd()}else s.push(n=new os(r,e,null,!0)),l.push(n.o=new os(r,null,n,!1)),s.push(n=new os(a,e,null,!1)),l.push(n.o=new os(a,null,n,!0))}})),s.length){for(l.sort(t),ss(s),ss(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,c,d=s[0];;){for(var h=d,f=!0;h.v;)if((h=h.n)===d)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(o=0,a=u.length;o<a;++o)i.point((c=u[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(f)for(u=h.p.z,o=u.length-1;o>=0;--o)i.point((c=u[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}u=(h=h.o).z,f=!f}while(!h.v);i.lineEnd()}}}function ss(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}is.invert=is;var ls=Da();function us(e,t){var n=t[0],r=t[1],i=[Ya(n),-Wa(n),0],o=0,a=0;ls.reset();for(var s=0,l=e.length;s<l;++s)if(c=(u=e[s]).length)for(var u,c,d=u[c-1],h=d[0],f=d[1]/2+Ua,p=Ya(f),m=Wa(f),g=0;g<c;++g,h=v,p=b,m=x,d=y){var y=u[g],v=y[0],_=y[1]/2+Ua,b=Ya(_),x=Wa(_),w=v-h,E=w>=0?1:-1,S=E*w,T=S>Ba,M=p*b;if(ls.add($a(M*E*Ya(S),m*x+M*Wa(S))),o+=T?w+E*Ga:w,T^h>=n^v>=n){var k=ns(ts(d),ts(y));rs(k);var C=ns(i,k);rs(C);var P=(T^w>=0?-1:1)*Qa(C[2]);(r>P||r===P&&(k[0]||k[1]))&&(a+=T^w>=0?1:-1)}}return(o<-1e-6||o<ja&&ls<-1e-6)^1&a}function cs(e){return e.length>1}function ds(e,t){return((e=e.x)[0]<0?e[1]-Fa-ja:Fa-e[1])-((t=t.x)[0]<0?t[1]-Fa-ja:Fa-t[1])}Da();Da(),Da();Da();function hs(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function fs(e){return function(t){var n=new ps;for(var r in e)n[r]=e[r];return n.stream=t,n}}function ps(){}hs(4.5),ps.prototype={constructor:ps,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Wa(30*Ha);fs({point:function(e,t){this.stream.point(e*Ha,t*Ha)}});function ms(e){return function(t,n){var r=Wa(t),i=Wa(n),o=e(r*i);return[o*i*Ya(t),o*Ya(n)]}}function gs(e){return function(t,n){var r=Ka(t*t+n*n),i=e(r),o=Ya(i),a=Wa(i);return[$a(t*o,r*a),Qa(r&&n*o/r)]}}var ys=ms((function(e){return Ka(2/(1+e))}));ys.invert=gs((function(e){return 2*Qa(e/2)}));var vs=ms((function(e){return(e=function(e){return e>1?0:e<-1?Ba:Math.acos(e)}(e))&&e/Ya(e)}));function _s(e,t){return[e,Xa(Ja((Fa+t)/2))]}function bs(e,t){return[e,t]}function xs(e,t){var n=Wa(t),r=Wa(e)*n;return[n*Ya(e)/r,Ya(t)/r]}function ws(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Es(e,t){return[Wa(t)*Ya(e),Ya(t)]}function Ss(e,t){var n=Wa(t),r=1+Wa(e)*n;return[n*Ya(e)/r,Ya(t)/r]}function Ts(e,t){return[Xa(Ja((Fa+t)/2)),-e]}function Ms(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function ks(e,t){var n,r,i,o,a,s=new Os(e),l=+e.value&&(s.value=e.value),u=[s];for(null==t&&(t=Cs);n=u.pop();)if(l&&(n.value=+n.data.value),(i=t(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)u.push(r=n.children[o]=new Os(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(As)}function Cs(e){return e.children}function Ps(e){e.data=e.data.data}function As(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Os(e){this.data=e,this.depth=this.height=0,this.parent=null}vs.invert=gs((function(e){return e})),_s.invert=function(e,t){return[e,2*qa(Za(t))-Fa]},bs.invert=bs,xs.invert=gs(qa),ws.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Va(n)>ja&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Es.invert=gs(Qa),Ss.invert=gs((function(e){return 2*qa(e)})),Ts.invert=function(e,t){return[-t,2*qa(Za(e))-Fa]},Os.prototype=ks.prototype={constructor:Os,count:function(){return this.eachAfter(Ms)},each:function(e){var t,n,r,i,o=this,a=[o];do{for(t=a.reverse(),a=[];o=t.pop();)if(e(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(e){for(var t,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n]);for(;i=a.pop();)e(i);return this},eachBefore:function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return ks(this).eachBefore(Ps)}};Array.prototype.slice;function Is(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Ls(e,t,n,r,i){for(var o,a=e.children,s=-1,l=a.length,u=e.value&&(r-t)/e.value;++s<l;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function Ds(e,t,n,r,i){for(var o,a=e.children,s=-1,l=a.length,u=e.value&&(i-n)/e.value;++s<l;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}Is.prototype=Object.create(Os.prototype);var Rs=(1+Math.sqrt(5))/2;function Ns(e,t,n,r,i,o){for(var a,s,l,u,c,d,h,f,p,m,g,y=[],v=t.children,_=0,b=0,x=v.length,w=t.value;_<x;){l=i-n,u=o-r;do{c=v[b++].value}while(!c&&b<x);for(d=h=c,g=c*c*(m=Math.max(u/l,l/u)/(w*e)),p=Math.max(h/g,g/d);b<x;++b){if(c+=s=v[b].value,s<d&&(d=s),s>h&&(h=s),g=c*c*m,(f=Math.max(h/g,g/d))>p){c-=s;break}p=f}y.push(a={value:c,dice:l<u,children:v.slice(_,b)}),a.dice?Ls(a,n,r,i,w?r+=u*c/w:o):Ds(a,n,r,w?n+=l*c/w:i,o),w-=c,_=b}return y}(function e(t){function n(e,n,r,i,o){Ns(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n})(Rs);(function e(t){function n(e,n,r,i,o){if((a=e._squarify)&&a.ratio===t)for(var a,s,l,u,c,d=-1,h=a.length,f=e.value;++d<h;){for(l=(s=a[d]).children,u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;s.dice?Ls(s,n,r,i,r+=(o-r)*s.value/f):Ds(s,n,r,n+=(i-n)*s.value/f,o),f-=s.value}else e._squarify=a=Ns(t,e,n,r,i,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n})(Rs);function zs(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function js(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Bs(){}var Fs=.7,Us=1.4285714285714286,Gs="\\s*([+-]?\\d+)\\s*",Hs="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vs="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qs=/^#([0-9a-f]{3,8})$/,$s=new RegExp("^rgb\\("+[Gs,Gs,Gs]+"\\)$"),Ws=new RegExp("^rgb\\("+[Vs,Vs,Vs]+"\\)$"),Zs=new RegExp("^rgba\\("+[Gs,Gs,Gs,Hs]+"\\)$"),Xs=new RegExp("^rgba\\("+[Vs,Vs,Vs,Hs]+"\\)$"),Ys=new RegExp("^hsl\\("+[Hs,Vs,Vs]+"\\)$"),Ks=new RegExp("^hsla\\("+[Hs,Vs,Vs,Hs]+"\\)$"),Js={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Qs(){return this.rgb().formatHex()}function el(){return this.rgb().formatRgb()}function tl(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=qs.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?nl(t):3===n?new al(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?rl(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?rl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=$s.exec(e))?new al(t[1],t[2],t[3],1):(t=Ws.exec(e))?new al(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Zs.exec(e))?rl(t[1],t[2],t[3],t[4]):(t=Xs.exec(e))?rl(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Ys.exec(e))?cl(t[1],t[2]/100,t[3]/100,1):(t=Ks.exec(e))?cl(t[1],t[2]/100,t[3]/100,t[4]):Js.hasOwnProperty(e)?nl(Js[e]):"transparent"===e?new al(NaN,NaN,NaN,0):null}function nl(e){return new al(e>>16&255,e>>8&255,255&e,1)}function rl(e,t,n,r){return r<=0&&(e=t=n=NaN),new al(e,t,n,r)}function il(e){return e instanceof Bs||(e=tl(e)),e?new al((e=e.rgb()).r,e.g,e.b,e.opacity):new al}function ol(e,t,n,r){return 1===arguments.length?il(e):new al(e,t,n,null==r?1:r)}function al(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function sl(){return"#"+ul(this.r)+ul(this.g)+ul(this.b)}function ll(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function ul(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function cl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fl(e,t,n,r)}function dl(e){if(e instanceof fl)return new fl(e.h,e.s,e.l,e.opacity);if(e instanceof Bs||(e=tl(e)),!e)return new fl;if(e instanceof fl)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new fl(a,s,l,e.opacity)}function hl(e,t,n,r){return 1===arguments.length?dl(e):new fl(e,t,n,null==r?1:r)}function fl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function pl(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function ml(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function gl(e){return function(){return e}}function yl(e,t){return function(n){return e+n*t}}function vl(e,t){var n=t-e;return n?yl(e,n>180||n<-180?n-360*Math.round(n/360):n):gl(isNaN(e)?t:e)}function _l(e){return 1===(e=+e)?bl:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):gl(isNaN(t)?n:t)}}function bl(e,t){var n=t-e;return n?yl(e,n):gl(isNaN(e)?t:e)}zs(Bs,tl,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Qs,formatHex:Qs,formatHsl:function(){return dl(this).formatHsl()},formatRgb:el,toString:el}),zs(al,ol,js(Bs,{brighter:function(e){return e=null==e?Us:Math.pow(Us,e),new al(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Fs:Math.pow(Fs,e),new al(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sl,formatHex:sl,formatRgb:ll,toString:ll})),zs(fl,hl,js(Bs,{brighter:function(e){return e=null==e?Us:Math.pow(Us,e),new fl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Fs:Math.pow(Fs,e),new fl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new al(pl(e>=240?e-240:e+120,i,r),pl(e,i,r),pl(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));(function e(t){var n=_l(t);function r(e,t){var r=n((e=ol(e)).r,(t=ol(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=bl(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r})(1);function xl(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=ol(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}xl((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return ml((n-r/t)*t,a,i,o,s)}})),xl((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return ml((n-r/t)*t,i,o,a,s)}}));var wl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;new RegExp(wl.source,"g");function El(e,t){return t-=e=+e,function(n){return e+t*n}}var Sl,Tl,Ml,kl,Cl=180/Math.PI,Pl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Al(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Cl,skewX:Math.atan(l)*Cl,scaleX:a,scaleY:s}}function Ol(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:El(e,i)},{i:l-2,x:El(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:El(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:El(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:El(e,n)},{i:s-2,x:El(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}Ol((function(e){return"none"===e?Pl:(Sl||(Sl=document.createElement("DIV"),Tl=document.documentElement,Ml=document.defaultView),Sl.style.transform=e,e=Ml.getComputedStyle(Tl.appendChild(Sl),null).getPropertyValue("transform"),Tl.removeChild(Sl),Al(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),Ol((function(e){return null==e?Pl:(kl||(kl=document.createElementNS("http://www.w3.org/2000/svg","g")),kl.setAttribute("transform",e),(e=kl.transform.baseVal.consolidate())?Al((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Pl)}),", ",")",")"),Math.SQRT2;function Il(e){return function(t,n){var r=e((t=hl(t)).h,(n=hl(n)).h),i=bl(t.s,n.s),o=bl(t.l,n.l),a=bl(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=o(e),t.opacity=a(e),t+""}}}Il(vl),Il(bl);var Ll=Math.PI/180,Dl=180/Math.PI,Rl=.96422,Nl=.82521,zl=4/29,jl=6/29,Bl=3*jl*jl;function Fl(e){if(e instanceof Ul)return new Ul(e.l,e.a,e.b,e.opacity);if(e instanceof Zl)return Xl(e);e instanceof al||(e=il(e));var t,n,r=ql(e.r),i=ql(e.g),o=ql(e.b),a=Gl((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?t=n=a:(t=Gl((.4360747*r+.3850649*i+.1430804*o)/Rl),n=Gl((.0139322*r+.0971045*i+.7141733*o)/Nl)),new Ul(116*a-16,500*(t-a),200*(a-n),e.opacity)}function Ul(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Gl(e){return e>.008856451679035631?Math.pow(e,1/3):e/Bl+zl}function Hl(e){return e>jl?e*e*e:Bl*(e-zl)}function Vl(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ql(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function $l(e){if(e instanceof Zl)return new Zl(e.h,e.c,e.l,e.opacity);if(e instanceof Ul||(e=Fl(e)),0===e.a&&0===e.b)return new Zl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Dl;return new Zl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Wl(e,t,n,r){return 1===arguments.length?$l(e):new Zl(e,t,n,null==r?1:r)}function Zl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Xl(e){if(isNaN(e.h))return new Ul(e.l,0,0,e.opacity);var t=e.h*Ll;return new Ul(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function Yl(e){return function(t,n){var r=e((t=Wl(t)).h,(n=Wl(n)).h),i=bl(t.c,n.c),o=bl(t.l,n.l),a=bl(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=o(e),t.opacity=a(e),t+""}}}zs(Ul,(function(e,t,n,r){return 1===arguments.length?Fl(e):new Ul(e,t,n,null==r?1:r)}),js(Bs,{brighter:function(e){return new Ul(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Ul(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new al(Vl(3.1338561*(t=Rl*Hl(t))-1.6168667*(e=1*Hl(e))-.4906146*(n=Nl*Hl(n))),Vl(-.9787684*t+1.9161415*e+.033454*n),Vl(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),zs(Zl,Wl,js(Bs,{brighter:function(e){return new Zl(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Zl(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Xl(this).rgb()}}));Yl(vl),Yl(bl);var Kl=-.14861,Jl=1.78277,Ql=-.29227,eu=-.90649,tu=1.97294,nu=-1.7884503806,ru=3.5172982438,iu=-.6557636667999999;function ou(e){if(e instanceof su)return new su(e.h,e.s,e.l,e.opacity);e instanceof al||(e=il(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(iu*r+nu*t-ru*n)/-5.9615122912,o=r-i,a=(tu*(n-i)-Ql*o)/eu,s=Math.sqrt(a*a+o*o)/(tu*i*(1-i)),l=s?Math.atan2(a,o)*Dl-120:NaN;return new su(l<0?l+360:l,s,i,e.opacity)}function au(e,t,n,r){return 1===arguments.length?ou(e):new su(e,t,n,null==r?1:r)}function su(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function lu(e){return function t(n){function r(t,r){var i=e((t=au(t)).h,(r=au(r)).h),o=bl(t.s,r.s),a=bl(t.l,r.l),s=bl(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}zs(su,au,js(Bs,{brighter:function(e){return e=null==e?Us:Math.pow(Us,e),new su(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Fs:Math.pow(Fs,e),new su(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Ll,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new al(255*(t+n*(Kl*r+Jl*i)),255*(t+n*(Ql*r+eu*i)),255*(t+n*(tu*r)),this.opacity)}}));lu(vl),lu(bl);var uu=Math.PI,cu=2*uu,du=1e-6,hu=cu-du;function fu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function pu(){return new fu}fu.prototype=pu.prototype={constructor:fu,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,l=r-t,u=o-e,c=a-t,d=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>du)if(Math.abs(c*s-l*u)>du&&i){var h=n-o,f=r-a,p=s*s+l*l,m=h*h+f*f,g=Math.sqrt(p),y=Math.sqrt(d),v=i*Math.tan((uu-Math.acos((p+d-m)/(2*g*y)))/2),_=v/y,b=v/g;Math.abs(_-1)>du&&(this._+="L"+(e+_*u)+","+(t+_*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>u*f)+","+(this._x1=e+b*s)+","+(this._y1=t+b*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+a,u=t+s,c=1^o,d=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>du||Math.abs(this._y1-u)>du)&&(this._+="L"+l+","+u),n&&(d<0&&(d=d%cu+cu),d>hu?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):d>du&&(this._+="A"+n+","+n+",0,"+ +(d>=uu)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function mu(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,l,u,c,d,h,f=e._root,p={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((u=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a,i=f,!(f=f[d=c<<1|u]))return i[d]=p,e;if(s=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===s&&n===l)return p.next=f,i?i[d]=p:e._root=p,e;do{i=i?i[d]=new Array(4):e._root=new Array(4),(u=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a}while((d=c<<1|u)===(h=(l>=a)<<1|s>=o));return i[h]=f,i[d]=p,e}function gu(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function yu(e){return e[0]}function vu(e){return e[1]}function _u(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function bu(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var xu=function(e,t,n){var r=new _u(null==t?yu:t,null==n?vu:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}.prototype=_u.prototype;xu.copy=function(){var e,t,n=new _u(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=bu(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=bu(t));return n},xu.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return mu(this.cover(t,n),t,n,e)},xu.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>d&&(d=i));for(c<l&&(l=this._x0,c=this._x1),d<u&&(u=this._y0,d=this._y1),this.cover(l,u).cover(c,d),n=0;n<o;++n)mu(this,a[n],s[n],e[n]);return this},xu.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{if(!(n>e||e>i||r>t||t>o))return this;var a,s,l=i-n,u=this._root;switch(s=(t<(r+o)/2)<<1|e<(n+i)/2){case 0:do{(a=new Array(4))[s]=u,u=a}while(o=r+(l*=2),e>(i=n+l)||t>o);break;case 1:do{(a=new Array(4))[s]=u,u=a}while(o=r+(l*=2),(n=i-l)>e||t>o);break;case 2:do{(a=new Array(4))[s]=u,u=a}while(r=o-(l*=2),e>(i=n+l)||r>t);break;case 3:do{(a=new Array(4))[s]=u,u=a}while(r=o-(l*=2),(n=i-l)>e||r>t)}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},xu.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},xu.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},xu.find=function(e,t,n){var r,i,o,a,s,l,u,c=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new gu(m,c,d,h,f)),null==n?n=1/0:(c=e-n,d=t-n,h=e+n,f=t+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(i=l.x0)>h||(o=l.y0)>f||(a=l.x1)<c||(s=l.y1)<d))if(m.length){var g=(i+a)/2,y=(o+s)/2;p.push(new gu(m[3],g,y,a,s),new gu(m[2],i,y,g,s),new gu(m[1],g,o,a,y),new gu(m[0],i,o,g,y)),(u=(t>=y)<<1|e>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var v=e-+this._x.call(null,m.data),_=t-+this._y.call(null,m.data),b=v*v+_*_;if(b<n){var x=Math.sqrt(n=b);c=e-x,d=t-x,h=e+x,f=t+x,r=m.data}}return r},xu.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,l,u,c,d,h,f=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!f)return this;if(f.length)for(;;){if((u=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(l=(m+y)/2))?m=l:y=l,t=f,!(f=f[d=c<<1|u]))return this;if(!f.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,h=d)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):t?(i?t[d]=i:delete t[d],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[h]=f:this._root=f),this):(this._root=i,this)},xu.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},xu.root=function(){return this._root},xu.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},xu.visit=function(e){var t,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new gu(l,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&l.length){var u=(r+o)/2,c=(i+a)/2;(n=l[3])&&s.push(new gu(n,u,c,o,a)),(n=l[2])&&s.push(new gu(n,r,c,u,a)),(n=l[1])&&s.push(new gu(n,u,i,o,c)),(n=l[0])&&s.push(new gu(n,r,i,u,c))}return this},xu.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new gu(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,l=t.x1,u=t.y1,c=(a+l)/2,d=(s+u)/2;(o=i[0])&&n.push(new gu(o,a,s,c,d)),(o=i[1])&&n.push(new gu(o,c,s,l,d)),(o=i[2])&&n.push(new gu(o,a,d,c,u)),(o=i[3])&&n.push(new gu(o,c,d,l,u))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},xu.x=function(e){return arguments.length?(this._x=e,this):this._x},xu.y=function(e){return arguments.length?(this._y=e,this):this._y};var wu=[].slice,Eu={};function Su(e){this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Tu(e){if(!e._start)try{!function(e){for(;e._start=e._waiting&&e._active<e._size;){var t=e._ended+e._active,n=e._tasks[t],r=n.length-1,i=n[r];n[r]=Mu(e,t),--e._waiting,++e._active,n=i.apply(null,n),e._tasks[t]&&(e._tasks[t]=n||Eu)}}(e)}catch(t){if(e._tasks[e._ended+e._active-1])ku(e,t);else if(!e._data)throw t}}function Mu(e,t){return function(n,r){e._tasks[t]&&(--e._active,++e._ended,e._tasks[t]=null,null==e._error&&(null!=n?ku(e,n):(e._data[t]=r,e._waiting?Tu(e):Cu(e))))}}function ku(e,t){var n,r=e._tasks.length;for(e._error=t,e._data=void 0,e._waiting=NaN;--r>=0;)if((n=e._tasks[r])&&(e._tasks[r]=null,n.abort))try{n.abort()}catch(t){}e._active=NaN,Cu(e)}function Cu(e){if(!e._active&&e._call){var t=e._data;e._data=void 0,e._call(e._error,t)}}function Pu(){return Math.random()}Su.prototype=function(e){if(null==e)e=1/0;else if(!((e=+e)>=1))throw new Error("invalid concurrency");return new Su(e)}.prototype={constructor:Su,defer:function(e){if("function"!==typeof e)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var t=wu.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),Tu(this),this},abort:function(){return null==this._error&&ku(this,new Error("abort")),this},await:function(e){if("function"!==typeof e)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(t,n){e.apply(null,[t].concat(n))},Cu(this),this},awaitAll:function(e){if("function"!==typeof e)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=e,Cu(this),this}};(function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n})(Pu);var Au=function e(t){function n(e,n){var r,i;return e=null==e?0:+e,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*t()-1,o=2*t()-1,i=r*r+o*o}while(!i||i>1);return e+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=e,n}(Pu),Ou=(function e(t){function n(){var e=Au.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}(Pu),function e(t){function n(e){return function(){for(var n=0,r=0;r<e;++r)n+=t();return n}}return n.source=e,n}(Pu));(function e(t){function n(e){var n=Ou.source(t)(e);return function(){return n()/e}}return n.source=e,n})(Pu),function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}(Pu);function Iu(e,t){var n,r,i,o,a=Gn("beforesend","progress","load","error"),s=va(),l=new XMLHttpRequest,u=null,c=null,d=0;function h(e){var t,r=l.status;if(!r&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(l)||r>=200&&r<300||304===r){if(i)try{t=i.call(n,l)}catch(o){return void a.call("error",n,o)}else t=l;a.call("load",n,t)}else a.call("error",n,e)}if("undefined"!==typeof XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=h:l.onreadystatechange=function(e){l.readyState>3&&h(e)},l.onprogress=function(e){a.call("progress",n,e)},n={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s.get(e):(null==t?s.remove(e):s.set(e,t+""),n)},mimeType:function(e){return arguments.length?(r=null==e?null:e+"",n):r},responseType:function(e){return arguments.length?(o=e,n):o},timeout:function(e){return arguments.length?(d=+e,n):d},user:function(e){return arguments.length<1?u:(u=null==e?null:e+"",n)},password:function(e){return arguments.length<1?c:(c=null==e?null:e+"",n)},response:function(e){return i=e,n},get:function(e,t){return n.send("GET",e,t)},post:function(e,t){return n.send("POST",e,t)},send:function(t,i,h){return l.open(t,e,!0,u,c),null==r||s.has("accept")||s.set("accept",r+",*/*"),l.setRequestHeader&&s.each((function(e,t){l.setRequestHeader(t,e)})),null!=r&&l.overrideMimeType&&l.overrideMimeType(r),null!=o&&(l.responseType=o),d>0&&(l.timeout=d),null==h&&"function"===typeof i&&(h=i,i=null),null!=h&&1===h.length&&(h=function(e){return function(t,n){e(null==t?n:null)}}(h)),null!=h&&n.on("error",h).on("load",(function(e){h(null,e)})),a.call("beforesend",n,l),l.send(null==i?null:i),n},abort:function(){return l.abort(),n},on:function(){var e=a.on.apply(a,arguments);return e===a?n:e}},null!=t){if("function"!==typeof t)throw new Error("invalid callback: "+t);return n.get(t)}return n}function Lu(e,t){return function(n,r){var i=Iu(n).mimeType(e).response(t);if(null!=r){if("function"!==typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}}Lu("text/html",(function(e){return document.createRange().createContextualFragment(e.responseText)})),Lu("application/json",(function(e){return JSON.parse(e.responseText)})),Lu("text/plain",(function(e){return e.responseText})),Lu("application/xml",(function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t}));var Du={},Ru={};function Nu(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function zu(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function ju(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Bu(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+ju(-e,6):e>9999?"+"+ju(e,6):ju(e,4)}(e.getUTCFullYear())+"-"+ju(e.getUTCMonth()+1,2)+"-"+ju(e.getUTCDate(),2)+(i?"T"+ju(t,2)+":"+ju(n,2)+":"+ju(r,2)+"."+ju(i,3)+"Z":r?"T"+ju(t,2)+":"+ju(n,2)+":"+ju(r,2)+"Z":n||t?"T"+ju(t,2)+":"+ju(n,2)+"Z":"")}function Fu(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,l=o<=0,u=!1;function c(){if(l)return Ru;if(u)return u=!1,Du;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?l=!0:10===(r=e.charCodeAt(a++))?u=!0:13===r&&(u=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))u=!0;else if(13===r)u=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return l=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=c())!==Ru;){for(var d=[];r!==Du&&r!==Ru;)d.push(r),r=c();t&&null==(d=t(d,s++))||i.push(d)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?Bu(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=Nu(e);return function(r,i){return t(n(r),i,e)}}(e,t):Nu(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=zu(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=zu(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}}var Uu=Fu(","),Gu=Uu.parse;Uu.parseRows,Uu.format,Uu.formatBody,Uu.formatRows,Uu.formatRow,Uu.formatValue;function Hu(e,t){return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=Iu(n).mimeType(e);return o.row=function(e){return arguments.length?o.response(Vu(t,r=e)):r},o.row(r),i?o.get(i):o}}function Vu(e,t){return function(n){return e(n.responseText,t)}}Hu("text/csv",Gu);var qu=Fu("\t"),$u=qu.parse,Wu=(qu.parseRows,qu.format,qu.formatBody,qu.formatRows,qu.formatRow,qu.formatValue,Hu("text/tab-separated-values",$u),Array.prototype),Zu=Wu.map,Xu=Wu.slice;function Yu(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=ec(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function Ku(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ju(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=ec(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function Qu(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function ec(e,t){var n,r=typeof t;return null==t||"boolean"===r?ri(t):("number"===r?dr:"string"===r?(n=Hr(t))?(t=n,si):di:t instanceof Hr?si:t instanceof Date?Ku:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Qu:Array.isArray(t)?Yu:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Ju:dr)(e,t)}function tc(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function nc(e){return+e}var rc=[0,1];function ic(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(t)}function oc(e,t,n,r){var i=e[0],o=e[1],a=t[0],s=t[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(e){return a(i(e))}}function ac(e,t,n,r){var i=Math.min(e.length,t.length)-1,o=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)o[s]=n(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(t){var n=qi(e,t,1,i)-1;return a[n](o[n](t))}}var sc,lc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uc(e){if(!(t=lc.exec(e)))throw new Error("invalid format: "+e);var t;return new cc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function cc(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function dc(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function hc(e){return(e=dc(Math.abs(e)))?e[1]:NaN}function fc(e,t){var n=dc(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}uc.prototype=cc.prototype,cc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var pc={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return fc(100*e,t)},r:fc,s:function(e,t){var n=dc(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(sc=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+dc(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function mc(e){return e}var gc,yc,vc,_c=Array.prototype.map,bc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function xc(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?mc:(t=_c.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?mc:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(_c.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"-":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=uc(e)).fill,n=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):pc[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var _="$"===h?i:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===h?o:/[%p]/.test(v)?l:"",x=pc[v],w=/[defgprs%]/.test(v);function E(e){var i,o,l,h=_,E=b;if("c"===v)E=x(e)+E,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:x(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==d&&(S=!1),h=(S?"("===d?d:u:"-"===d||"("===d?"":d)+h,E=("s"===v?bc[8+sc/3]:"")+E+(S&&"("===d?")":""),w)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){E=(46===l?a+e.slice(i+1):e.slice(i))+E,e=e.slice(0,i);break}}m&&!f&&(e=r(e,1/0));var T=h.length+e.length+E.length,M=T<p?new Array(p-T+1).join(t):"";switch(m&&f&&(e=r(M+e,M.length?p-E.length:1/0),M=""),n){case"<":e=h+e+E+M;break;case"=":e=h+M+e+E;break;case"^":e=M.slice(0,T=M.length>>1)+h+e+E+M.slice(T);break;default:e=M+h+e+E}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),E.toString=function(){return e+""},E}return{format:d,formatPrefix:function(e,t){var n=d(((e=uc(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(hc(t)/3))),i=Math.pow(10,-r),o=bc[8+r/3];return function(e){return n(i*e)+o}}}}function wc(e,t,n){var r,i=e[0],o=e[e.length-1],a=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Wi?i*=10:o>=Zi?i*=5:o>=Xi&&(i*=2),t<e?-i:i}(i,o,null==t?10:t);switch((n=uc(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(hc(t)/3)))-hc(Math.abs(e)))}(a,s))||(n.precision=r),vc(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,hc(t)-hc(e))+1}(a,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(e){return Math.max(0,-hc(Math.abs(e)))}(a))||(n.precision=r-2*("%"===n.type))}return yc(n)}function Ec(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=Yi(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return wc(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),o=0,a=i.length-1,s=i[o],l=i[a];return l<s&&(r=s,s=l,l=r,r=o,o=a,a=r),(r=Yi(s,l,n))>0?r=Yi(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,n):r<0&&(r=Yi(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(l/r)*r,t(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(l*r)/r,t(i)),e},e}function Sc(){var e=function(e,t){var n,r,i,o=rc,a=rc,s=ec,l=!1;function u(){return n=Math.min(o.length,a.length)>2?ac:oc,r=i=null,c}function c(t){return(r||(r=n(o,a,l?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}(e):e,s)))(+t)}return c.invert=function(e){return(i||(i=n(a,o,ic,l?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}(t):t)))(+e)},c.domain=function(e){return arguments.length?(o=Zu.call(e,nc),u()):o.slice()},c.range=function(e){return arguments.length?(a=Xu.call(e),u()):a.slice()},c.rangeRound=function(e){return a=Xu.call(e),s=tc,u()},c.clamp=function(e){return arguments.length?(l=!!e,u()):l},c.interpolate=function(e){return arguments.length?(s=e,u()):s},u()}(ic,dr);return e.copy=function(){return t=e,Sc().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp());var t},Ec(e)}!function(e){gc=xc(e),yc=gc.format,vc=gc.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Tc(e){return e.match(/.{6}/g).map((function(e){return"#"+e}))}Tc("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Tc("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Tc("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Tc("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var Mc=Math.PI/180,kc=180/Math.PI,Cc=-.14861,Pc=1.78277,Ac=-.29227,Oc=-.90649,Ic=1.97294,Lc=-1.7884503806,Dc=3.5172982438,Rc=-.6557636667999999;function Nc(e){if(e instanceof jc)return new jc(e.h,e.s,e.l,e.opacity);e instanceof Zr||(e=$r(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Rc*r+Lc*t-Dc*n)/-5.9615122912,o=r-i,a=(Ic*(n-i)-Ac*o)/Oc,s=Math.sqrt(a*a+o*o)/(Ic*i*(1-i)),l=s?Math.atan2(a,o)*kc-120:NaN;return new jc(l<0?l+360:l,s,i,e.opacity)}function zc(e,t,n,r){return 1===arguments.length?Nc(e):new jc(e,t,n,null==r?1:r)}function jc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Bc(e){return function t(n){function r(t,r){var i=e((t=zc(t)).h,(r=zc(r)).h),o=ai(t.s,r.s),a=ai(t.l,r.l),s=ai(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}Tr(jc,zc,Mr(kr,{brighter:function(e){return e=null==e?Pr:Math.pow(Pr,e),new jc(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Cr:Math.pow(Cr,e),new jc(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Mc,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Zr(255*(t+n*(Cc*r+Pc*i)),255*(t+n*(Ac*r+Oc*i)),255*(t+n*(Ic*r)),this.opacity)}}));Bc((function(e,t){var n=t-e;return n?ii(e,n>180||n<-180?n-360*Math.round(n/360):n):ri(isNaN(e)?t:e)}));var Fc=Bc(ai);Fc(zc(300,.5,0),zc(-240,.5,1)),Fc(zc(-100,.75,.35),zc(80,1.5,.8)),Fc(zc(260,.75,.35),zc(80,1.5,.8)),zc();function Uc(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}Uc(Tc("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Uc(Tc("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Uc(Tc("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Uc(Tc("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Gc="http://www.w3.org/1999/xhtml",Hc={svg:"http://www.w3.org/2000/svg",xhtml:Gc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vc(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Hc.hasOwnProperty(t)?{space:Hc[t],local:e}:e}function qc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Gc&&t.documentElement.namespaceURI===Gc?t.createElement(e):t.createElementNS(n,e)}}function $c(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Wc(e){var t=Vc(e);return(t.local?$c:qc)(t)}var Zc=0;function Xc(){this._="@"+(++Zc).toString(36)}Xc.prototype=function(){return new Xc}.prototype={constructor:Xc,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var Yc=function(e){return function(){return this.matches(e)}};if("undefined"!==typeof document){var Kc=document.documentElement;if(!Kc.matches){var Jc=Kc.webkitMatchesSelector||Kc.msMatchesSelector||Kc.mozMatchesSelector||Kc.oMatchesSelector;Yc=function(e){return function(){return Jc.call(this,e)}}}}var Qc=Yc,ed={},td=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(ed={mouseenter:"mouseover",mouseleave:"mouseout"}));function nd(e,t,n){return e=rd(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function rd(e,t,n){return function(r){var i=td;td=r;try{e.call(this,this.__data__,t,n)}finally{td=i}}}function id(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function od(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function ad(e,t,n){var r=ed.hasOwnProperty(e.type)?nd:rd;return function(i,o,a){var s,l=this.__on,u=r(t,o,a);if(l)for(var c=0,d=l.length;c<d;++c)if((s=l[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=t);this.addEventListener(e.type,u,n),s={type:e.type,name:e.name,value:t,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function sd(){for(var e,t=td;e=t.sourceEvent;)t=e;return t}function ld(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function ud(e){var t=sd();return t.changedTouches&&(t=t.changedTouches[0]),ld(e,t)}function cd(){}function dd(e){return null==e?cd:function(){return this.querySelector(e)}}function hd(){return[]}function fd(e){return new Array(e.length)}function pd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}pd.prototype={constructor:pd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function md(e,t,n,r,i,o){for(var a,s=0,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new pd(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function gd(e,t,n,r,i,o,a){var s,l,u,c={},d=t.length,h=o.length,f=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=u="$"+a.call(l,l.__data__,s,t),u in c?i[s]=l:c[u]=l);for(s=0;s<h;++s)(l=c[u="$"+a.call(e,o[s],s,o)])?(r[s]=l,l.__data__=o[s],c[u]=null):n[s]=new pd(e,o[s]);for(s=0;s<d;++s)(l=t[s])&&c[f[s]]===l&&(i[s]=l)}function yd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vd(e){return function(){this.removeAttribute(e)}}function _d(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bd(e,t){return function(){this.setAttribute(e,t)}}function xd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wd(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Ed(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Sd(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Td(e){return function(){this.style.removeProperty(e)}}function Md(e,t,n){return function(){this.style.setProperty(e,t,n)}}function kd(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Cd(e,t){return e.style.getPropertyValue(t)||Sd(e).getComputedStyle(e,null).getPropertyValue(t)}function Pd(e){return function(){delete this[e]}}function Ad(e,t){return function(){this[e]=t}}function Od(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Id(e){return e.trim().split(/^|\s+/)}function Ld(e){return e.classList||new Dd(e)}function Dd(e){this._node=e,this._names=Id(e.getAttribute("class")||"")}function Rd(e,t){for(var n=Ld(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Nd(e,t){for(var n=Ld(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function zd(e){return function(){Rd(this,e)}}function jd(e){return function(){Nd(this,e)}}function Bd(e,t){return function(){(t.apply(this,arguments)?Rd:Nd)(this,e)}}function Fd(){this.textContent=""}function Ud(e){return function(){this.textContent=e}}function Gd(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Hd(){this.innerHTML=""}function Vd(e){return function(){this.innerHTML=e}}function qd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function $d(){this.nextSibling&&this.parentNode.appendChild(this)}function Wd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zd(){return null}function Xd(){var e=this.parentNode;e&&e.removeChild(this)}function Yd(e,t,n){var r=Sd(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Kd(e,t){return function(){return Yd(this,e,t)}}function Jd(e,t){return function(){return Yd(this,e,t.apply(this,arguments))}}Dd.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Qd=[null];function eh(e,t){this._groups=e,this._parents=t}function th(){return new eh([[document.documentElement]],Qd)}eh.prototype=th.prototype={constructor:eh,select:function(e){"function"!==typeof e&&(e=dd(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new eh(r,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=function(e){return null==e?hd:function(){return this.querySelectorAll(e)}}(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),i.push(a));return new eh(r,i)},filter:function(e){"function"!==typeof e&&(e=Qc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new eh(r,this._parents)},data:function(e,t){if(!e)return f=new Array(this.size()),u=-1,this.each((function(e){f[++u]=e})),f;var n=t?gd:md,r=this._parents,i=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],d=i[u],h=d.length,f=e.call(c,c&&c.__data__,u,r),p=f.length,m=s[u]=new Array(p),g=a[u]=new Array(p);n(c,d,m,g,l[u]=new Array(h),f,t);for(var y,v,_=0,b=0;_<p;++_)if(y=m[_]){for(_>=b&&(b=_+1);!(v=g[b])&&++b<p;);y._next=v||null}}return(a=new eh(a,r))._enter=s,a._exit=l,a},enter:function(){return new eh(this._enter||this._groups.map(fd),this._parents)},exit:function(){return new eh(this._exit||this._groups.map(fd),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=t[s],c=n[s],d=u.length,h=a[s]=new Array(d),f=0;f<d;++f)(l=u[f]||c[f])&&(h[f]=l);for(;s<r;++s)a[s]=t[s];return new eh(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=yd);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new eh(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=Vc(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?_d:vd:"function"===typeof t?n.local?Ed:wd:n.local?xd:bd)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Td:"function"===typeof t?kd:Md)(e,t,null==n?"":n)):Cd(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Pd:"function"===typeof t?Od:Ad)(e,t)):this.node()[e]},classed:function(e,t){var n=Id(e+"");if(arguments.length<2){for(var r=Ld(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?Bd:t?zd:jd)(n,t))},text:function(e){return arguments.length?this.each(null==e?Fd:("function"===typeof e?Gd:Ud)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Hd:("function"===typeof e?qd:Vd)(e)):this.node().innerHTML},raise:function(){return this.each($d)},lower:function(){return this.each(Wd)},append:function(e){var t="function"===typeof e?e:Wc(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:Wc(e),r=null==t?Zd:"function"===typeof t?t:dd(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Xd)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=id(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?ad:od,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?Jd:Kd)(e,t))}};function nh(e){return"string"===typeof e?new eh([[document.querySelector(e)]],[document.documentElement]):new eh([[e]],Qd)}function rh(e,t){null==t&&(t=sd().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=ld(e,t[n]);return i}Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt;var ih=Math.PI,oh=2*ih;var ah=Math.PI,sh=2*ah,lh=1e-6,uh=sh-lh;function ch(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function dh(){return new ch}ch.prototype=dh.prototype={constructor:ch,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,l=r-t,u=o-e,c=a-t,d=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>lh)if(Math.abs(c*s-l*u)>lh&&i){var h=n-o,f=r-a,p=s*s+l*l,m=h*h+f*f,g=Math.sqrt(p),y=Math.sqrt(d),v=i*Math.tan((ah-Math.acos((p+d-m)/(2*g*y)))/2),_=v/y,b=v/g;Math.abs(_-1)>lh&&(this._+="L"+(e+_*u)+","+(t+_*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>u*f)+","+(this._x1=e+b*s)+","+(this._y1=t+b*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+a,u=t+s,c=1^o,d=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>lh||Math.abs(this._y1-u)>lh)&&(this._+="L"+l+","+u),n&&(d<0&&(d=d%sh+sh),d>uh?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):d>lh&&(this._+="A"+n+","+n+",0,"+ +(d>=ah)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var hh=dh;function fh(e){return function(){return e}}function ph(e){this._context=e}function mh(e){return new ph(e)}function gh(e){return e[0]}function yh(e){return e[1]}function vh(){var e=gh,t=yh,n=fh(!0),r=null,i=mh,o=null;function a(a){var s,l,u,c=a.length,d=!1;for(null==r&&(o=i(u=hh())),s=0;s<=c;++s)!(s<c&&n(l=a[s],s,a))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(l,s,a),+t(l,s,a));if(u)return o=null,u+""||null}return a.x=function(t){return arguments.length?(e="function"===typeof t?t:fh(+t),a):e},a.y=function(e){return arguments.length?(t="function"===typeof e?e:fh(+e),a):t},a.defined=function(e){return arguments.length?(n="function"===typeof e?e:fh(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a}ph.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};!function(e){function t(t){return new _h(e(t))}t._curve=e}(mh);function _h(e){this._curve=e}_h.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};Array.prototype.slice;Math.sqrt(1/3);var bh=Math.sin(ih/10)/Math.sin(7*ih/10);Math.sin(oh/10),Math.cos(oh/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);function xh(){}function wh(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Eh(e){this._context=e}function Sh(e){return new Eh(e)}function Th(e){this._context=e}function Mh(e){this._context=e}function kh(e,t){this._basis=new Eh(e),this._beta=t}Eh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wh(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Th.prototype={areaStart:xh,areaEnd:xh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:wh(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Mh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:wh(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},kh.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+r*a),this._beta*t[l]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};(function e(t){function n(e){return 1===t?new Eh(e):new kh(e,t)}return n.beta=function(t){return e(+t)},n})(.85);function Ch(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Ph(e,t){this._context=e,this._k=(1-t)/6}Ph.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ch(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ch(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(e){return new Ph(e,t)}return n.tension=function(t){return e(+t)},n})(0);function Ah(e,t){this._context=e,this._k=(1-t)/6}Ah.prototype={areaStart:xh,areaEnd:xh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ch(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(e){return new Ah(e,t)}return n.tension=function(t){return e(+t)},n})(0);function Oh(e,t){this._context=e,this._k=(1-t)/6}Oh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ch(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(e){return new Oh(e,t)}return n.tension=function(t){return e(+t)},n})(0);function Ih(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>1e-12){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>1e-12){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function Lh(e,t){this._context=e,this._alpha=t}Lh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Ih(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(e){return t?new Lh(e,t):new Ph(e,0)}return n.alpha=function(t){return e(+t)},n})(.5);function Dh(e,t){this._context=e,this._alpha=t}Dh.prototype={areaStart:xh,areaEnd:xh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ih(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(e){return t?new Dh(e,t):new Ah(e,0)}return n.alpha=function(t){return e(+t)},n})(.5);function Rh(e,t){this._context=e,this._alpha=t}Rh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ih(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(e){return t?new Rh(e,t):new Oh(e,0)}return n.alpha=function(t){return e(+t)},n})(.5);function Nh(e){this._context=e}function zh(e){return e<0?-1:1}function jh(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(zh(o)+zh(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Bh(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Fh(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function Uh(e){this._context=e}function Gh(e){this._context=new Hh(e)}function Hh(e){this._context=e}function Vh(e){this._context=e}function qh(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function $h(e,t){this._context=e,this._t=t}Nh.prototype={areaStart:xh,areaEnd:xh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Uh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fh(this,this._t0,Bh(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Fh(this,Bh(this,n=jh(this,e,t)),n);break;default:Fh(this,this._t0,n=jh(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Gh.prototype=Object.create(Uh.prototype)).point=function(e,t){Uh.prototype.point.call(this,t,e)},Hh.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},Vh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=qh(e),i=qh(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},$h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Wh=new Date,Zh=new Date;function Xh(e,t,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return Xh((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return Wh.setTime(+t),Zh.setTime(+r),e(Wh),e(Zh),Math.floor(n(Wh,Zh))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e===0}:function(t){return i.count(0,t)%e===0}):i:null}),i}var Yh=Xh((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Yh.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Xh((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Yh:null};Yh.range;var Kh=1e3,Jh=6e4,Qh=36e5,ef=864e5,tf=6048e5,nf=Xh((function(e){e.setTime(Math.floor(e/Kh)*Kh)}),(function(e,t){e.setTime(+e+t*Kh)}),(function(e,t){return(t-e)/Kh}),(function(e){return e.getUTCSeconds()})),rf=(nf.range,Xh((function(e){e.setTime(Math.floor(e/Jh)*Jh)}),(function(e,t){e.setTime(+e+t*Jh)}),(function(e,t){return(t-e)/Jh}),(function(e){return e.getMinutes()}))),of=(rf.range,Xh((function(e){var t=e.getTimezoneOffset()*Jh%Qh;t<0&&(t+=Qh),e.setTime(Math.floor((+e-t)/Qh)*Qh+t)}),(function(e,t){e.setTime(+e+t*Qh)}),(function(e,t){return(t-e)/Qh}),(function(e){return e.getHours()}))),af=(of.range,Xh((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jh)/ef}),(function(e){return e.getDate()-1})));af.range;function sf(e){return Xh((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jh)/tf}))}var lf=sf(0),uf=sf(1),cf=sf(2),df=sf(3),hf=sf(4),ff=sf(5),pf=sf(6),mf=(lf.range,uf.range,cf.range,df.range,hf.range,ff.range,pf.range,Xh((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),gf=(mf.range,Xh((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));gf.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Xh((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};gf.range;var yf=Xh((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Jh)}),(function(e,t){return(t-e)/Jh}),(function(e){return e.getUTCMinutes()})),vf=(yf.range,Xh((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Qh)}),(function(e,t){return(t-e)/Qh}),(function(e){return e.getUTCHours()}))),_f=(vf.range,Xh((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/ef}),(function(e){return e.getUTCDate()-1})));_f.range;function bf(e){return Xh((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/tf}))}var xf=bf(0),wf=bf(1),Ef=bf(2),Sf=bf(3),Tf=bf(4),Mf=bf(5),kf=bf(6),Cf=(xf.range,wf.range,Ef.range,Sf.range,Tf.range,Mf.range,kf.range,Xh((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),Pf=(Cf.range,Xh((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));Pf.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Xh((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};Pf.range;var Af=new Date,Of=new Date;function If(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return If((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return Af.setTime(+t),Of.setTime(+r),e(Af),e(Of),Math.floor(n(Af,Of))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e===0}:function(t){return i.count(0,t)%e===0}):i:null}),i}var Lf=864e5,Df=6048e5;function Rf(e){return If((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Df}))}var Nf=Rf(0),zf=Rf(1),jf=Rf(2),Bf=Rf(3),Ff=Rf(4),Uf=Rf(5),Gf=Rf(6),Hf=(Nf.range,zf.range,jf.range,Bf.range,Ff.range,Uf.range,Gf.range,If((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Lf}),(function(e){return e.getUTCDate()-1}))),Vf=Hf;Hf.range;function qf(e){return If((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/Df}))}var $f=qf(0),Wf=qf(1),Zf=qf(2),Xf=qf(3),Yf=qf(4),Kf=qf(5),Jf=qf(6),Qf=($f.range,Wf.range,Zf.range,Xf.range,Yf.range,Kf.range,Jf.range,If((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/Lf}),(function(e){return e.getDate()-1}))),ep=Qf,tp=(Qf.range,If((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));tp.every=function(e){return isFinite(e=Math.floor(e))&&e>0?If((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var np=tp,rp=(tp.range,If((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));rp.every=function(e){return isFinite(e=Math.floor(e))&&e>0?If((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var ip=rp;rp.range;function op(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ap(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sp(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}var lp,up,cp,dp={"-":"",_:" ",0:"0"},hp=/^\s*\d+/,fp=/^%/,pp=/[\\^$*+?|[\]().{}]/g;function mp(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function gp(e){return e.replace(pp,"\\$&")}function yp(e){return new RegExp("^(?:"+e.map(gp).join("|")+")","i")}function vp(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function _p(e,t,n){var r=hp.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function bp(e,t,n){var r=hp.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function xp(e,t,n){var r=hp.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function wp(e,t,n){var r=hp.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ep(e,t,n){var r=hp.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Sp(e,t,n){var r=hp.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Tp(e,t,n){var r=hp.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Mp(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function kp(e,t,n){var r=hp.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Cp(e,t,n){var r=hp.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Pp(e,t,n){var r=hp.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Ap(e,t,n){var r=hp.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Op(e,t,n){var r=hp.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Ip(e,t,n){var r=hp.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Lp(e,t,n){var r=hp.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Dp(e,t,n){var r=hp.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Rp(e,t,n){var r=fp.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Np(e,t,n){var r=hp.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function zp(e,t,n){var r=hp.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function jp(e,t){return mp(e.getDate(),t,2)}function Bp(e,t){return mp(e.getHours(),t,2)}function Fp(e,t){return mp(e.getHours()%12||12,t,2)}function Up(e,t){return mp(1+ep.count(np(e),e),t,3)}function Gp(e,t){return mp(e.getMilliseconds(),t,3)}function Hp(e,t){return Gp(e,t)+"000"}function Vp(e,t){return mp(e.getMonth()+1,t,2)}function qp(e,t){return mp(e.getMinutes(),t,2)}function $p(e,t){return mp(e.getSeconds(),t,2)}function Wp(e){var t=e.getDay();return 0===t?7:t}function Zp(e,t){return mp($f.count(np(e),e),t,2)}function Xp(e,t){var n=e.getDay();return e=n>=4||0===n?Yf(e):Yf.ceil(e),mp(Yf.count(np(e),e)+(4===np(e).getDay()),t,2)}function Yp(e){return e.getDay()}function Kp(e,t){return mp(Wf.count(np(e),e),t,2)}function Jp(e,t){return mp(e.getFullYear()%100,t,2)}function Qp(e,t){return mp(e.getFullYear()%1e4,t,4)}function em(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mp(t/60|0,"0",2)+mp(t%60,"0",2)}function tm(e,t){return mp(e.getUTCDate(),t,2)}function nm(e,t){return mp(e.getUTCHours(),t,2)}function rm(e,t){return mp(e.getUTCHours()%12||12,t,2)}function im(e,t){return mp(1+Vf.count(ip(e),e),t,3)}function om(e,t){return mp(e.getUTCMilliseconds(),t,3)}function am(e,t){return om(e,t)+"000"}function sm(e,t){return mp(e.getUTCMonth()+1,t,2)}function lm(e,t){return mp(e.getUTCMinutes(),t,2)}function um(e,t){return mp(e.getUTCSeconds(),t,2)}function cm(e){var t=e.getUTCDay();return 0===t?7:t}function dm(e,t){return mp(Nf.count(ip(e),e),t,2)}function hm(e,t){var n=e.getUTCDay();return e=n>=4||0===n?Ff(e):Ff.ceil(e),mp(Ff.count(ip(e),e)+(4===ip(e).getUTCDay()),t,2)}function fm(e){return e.getUTCDay()}function pm(e,t){return mp(zf.count(ip(e),e),t,2)}function mm(e,t){return mp(e.getUTCFullYear()%100,t,2)}function gm(e,t){return mp(e.getUTCFullYear()%1e4,t,4)}function ym(){return"+0000"}function vm(){return"%"}function _m(e){return+e}function bm(e){return Math.floor(+e/1e3)}!function(e){lp=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=yp(i),c=vp(i),d=yp(o),h=vp(o),f=yp(a),p=vp(a),m=yp(s),g=vp(s),y=yp(l),v=vp(l),_={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:jp,e:jp,f:Hp,H:Bp,I:Fp,j:Up,L:Gp,m:Vp,M:qp,p:function(e){return i[+(e.getHours()>=12)]},Q:_m,s:bm,S:$p,u:Wp,U:Zp,V:Xp,w:Yp,W:Kp,x:null,X:null,y:Jp,Y:Qp,Z:em,"%":vm},b={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:tm,e:tm,f:am,H:nm,I:rm,j:im,L:om,m:sm,M:lm,p:function(e){return i[+(e.getUTCHours()>=12)]},Q:_m,s:bm,S:um,u:cm,U:dm,V:hm,w:fm,W:pm,x:null,X:null,y:mm,Y:gm,Z:ym,"%":vm},x={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:Cp,e:Cp,f:Dp,H:Ap,I:Ap,j:Pp,L:Lp,m:kp,M:Op,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=c[r[0].toLowerCase()],n+r[0].length):-1},Q:Np,s:zp,S:Ip,u:bp,U:xp,V:wp,w:_p,W:Ep,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:Tp,Y:Sp,Z:Mp,"%":Rp};function w(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=dp[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function E(e,t){return function(n){var r,i,o=sp(1900);if(S(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=ap(sp(o.y))).getUTCDay(),r=i>4||0===i?zf.ceil(r):zf(r),r=Vf.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=t(sp(o.y))).getDay(),r=i>4||0===i?Wf.ceil(r):Wf(r),r=ep.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?ap(sp(o.y)).getUTCDay():t(sp(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,ap(o)):t(o)}}function S(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=x[i in dp?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=w(n,_),_.X=w(r,_),_.c=w(t,_),b.x=w(n,b),b.X=w(r,b),b.c=w(t,b),{format:function(e){var t=w(e+="",_);return t.toString=function(){return e},t},parse:function(e){var t=E(e+="",op);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=E(e,ap);return t.toString=function(){return e},t}}}(e),lp.format,lp.parse,up=lp.utcFormat,cp=lp.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var xm="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||up(xm);+new Date("2000-01-01T00:00:00.000Z")||cp(xm);var wm,Em,Sm=0,Tm=0,Mm=0,km=0,Cm=0,Pm=0,Am="object"===typeof performance&&performance.now?performance:Date,Om="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Im(){return Cm||(Om(Lm),Cm=Am.now()+Pm)}function Lm(){Cm=0}function Dm(){this._call=this._time=this._next=null}function Rm(){Cm=(km=Am.now())+Pm,Sm=Tm=0;try{!function(){Im(),++Sm;for(var e,t=wm;t;)(e=Cm-t._time)>=0&&t._call.call(null,e),t=t._next;--Sm}()}finally{Sm=0,function(){var e,t,n=wm,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:wm=t);Em=e,zm(r)}(),Cm=0}}function Nm(){var e=Am.now(),t=e-km;t>1e3&&(Pm-=t,km=e)}function zm(e){Sm||(Tm&&(Tm=clearTimeout(Tm)),e-Cm>24?(e<1/0&&(Tm=setTimeout(Rm,e-Am.now()-Pm)),Mm&&(Mm=clearInterval(Mm))):(Mm||(km=Am.now(),Mm=setInterval(Nm,1e3)),Sm=1,Om(Rm)))}function jm(){}function Bm(e){return null==e?jm:function(){return this.querySelector(e)}}function Fm(){return[]}function Um(e){return null==e?Fm:function(){return this.querySelectorAll(e)}}function Gm(e){return function(){return this.matches(e)}}function Hm(e){return new Array(e.length)}function Vm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Dm.prototype=function(e,t,n){var r=new Dm;return r.restart(e,t,n),r}.prototype={constructor:Dm,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?Im():+n)+(null==t?0:+t),this._next||Em===this||(Em?Em._next=this:wm=this,Em=this),this._call=e,this._time=n,zm()},stop:function(){this._call&&(this._call=null,this._time=1/0,zm())}},Vm.prototype={constructor:Vm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qm(e,t,n,r,i,o){for(var a,s=0,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Vm(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function $m(e,t,n,r,i,o,a){var s,l,u,c={},d=t.length,h=o.length,f=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=u="$"+a.call(l,l.__data__,s,t),u in c?i[s]=l:c[u]=l);for(s=0;s<h;++s)(l=c[u="$"+a.call(e,o[s],s,o)])?(r[s]=l,l.__data__=o[s],c[u]=null):n[s]=new Vm(e,o[s]);for(s=0;s<d;++s)(l=t[s])&&c[f[s]]===l&&(i[s]=l)}function Wm(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var Zm="http://www.w3.org/1999/xhtml",Xm={svg:"http://www.w3.org/2000/svg",xhtml:Zm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ym(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Xm.hasOwnProperty(t)?{space:Xm[t],local:e}:e}function Km(e){return function(){this.removeAttribute(e)}}function Jm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qm(e,t){return function(){this.setAttribute(e,t)}}function eg(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function tg(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function ng(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function rg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ig(e){return function(){this.style.removeProperty(e)}}function og(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ag(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function sg(e,t){return e.style.getPropertyValue(t)||rg(e).getComputedStyle(e,null).getPropertyValue(t)}function lg(e){return function(){delete this[e]}}function ug(e,t){return function(){this[e]=t}}function cg(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function dg(e){return e.trim().split(/^|\s+/)}function hg(e){return e.classList||new fg(e)}function fg(e){this._node=e,this._names=dg(e.getAttribute("class")||"")}function pg(e,t){for(var n=hg(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function mg(e,t){for(var n=hg(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function gg(e){return function(){pg(this,e)}}function yg(e){return function(){mg(this,e)}}function vg(e,t){return function(){(t.apply(this,arguments)?pg:mg)(this,e)}}function _g(){this.textContent=""}function bg(e){return function(){this.textContent=e}}function xg(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function wg(){this.innerHTML=""}function Eg(e){return function(){this.innerHTML=e}}function Sg(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Tg(){this.nextSibling&&this.parentNode.appendChild(this)}function Mg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kg(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Zm&&t.documentElement.namespaceURI===Zm?t.createElement(e):t.createElementNS(n,e)}}function Cg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Pg(e){var t=Ym(e);return(t.local?Cg:kg)(t)}function Ag(){return null}function Og(){var e=this.parentNode;e&&e.removeChild(this)}function Ig(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lg(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}fg.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Dg={},Rg=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(Dg={mouseenter:"mouseover",mouseleave:"mouseout"}));function Ng(e,t,n){return e=zg(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function zg(e,t,n){return function(r){var i=Rg;Rg=r;try{e.call(this,this.__data__,t,n)}finally{Rg=i}}}function jg(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Bg(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function Fg(e,t,n){var r=Dg.hasOwnProperty(e.type)?Ng:zg;return function(i,o,a){var s,l=this.__on,u=r(t,o,a);if(l)for(var c=0,d=l.length;c<d;++c)if((s=l[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=t);this.addEventListener(e.type,u,n),s={type:e.type,name:e.name,value:t,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function Ug(e,t,n){var r=rg(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Gg(e,t){return function(){return Ug(this,e,t)}}function Hg(e,t){return function(){return Ug(this,e,t.apply(this,arguments))}}var Vg=[null];function qg(e,t){this._groups=e,this._parents=t}function $g(){return new qg([[document.documentElement]],Vg)}qg.prototype=$g.prototype={constructor:qg,select:function(e){"function"!==typeof e&&(e=Bm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new qg(r,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=Um(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),i.push(a));return new qg(r,i)},filter:function(e){"function"!==typeof e&&(e=Gm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new qg(r,this._parents)},data:function(e,t){if(!e)return f=new Array(this.size()),u=-1,this.each((function(e){f[++u]=e})),f;var n=t?$m:qm,r=this._parents,i=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],d=i[u],h=d.length,f=e.call(c,c&&c.__data__,u,r),p=f.length,m=s[u]=new Array(p),g=a[u]=new Array(p);n(c,d,m,g,l[u]=new Array(h),f,t);for(var y,v,_=0,b=0;_<p;++_)if(y=m[_]){for(_>=b&&(b=_+1);!(v=g[b])&&++b<p;);y._next=v||null}}return(a=new qg(a,r))._enter=s,a._exit=l,a},enter:function(){return new qg(this._enter||this._groups.map(Hm),this._parents)},exit:function(){return new qg(this._exit||this._groups.map(Hm),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"===typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=t[s],c=n[s],d=u.length,h=a[s]=new Array(d),f=0;f<d;++f)(l=u[f]||c[f])&&(h[f]=l);for(;s<r;++s)a[s]=t[s];return new qg(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Wm);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new qg(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=Ym(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Jm:Km:"function"===typeof t?n.local?ng:tg:n.local?eg:Qm)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ig:"function"===typeof t?ag:og)(e,t,null==n?"":n)):sg(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?lg:"function"===typeof t?cg:ug)(e,t)):this.node()[e]},classed:function(e,t){var n=dg(e+"");if(arguments.length<2){for(var r=hg(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?vg:t?gg:yg)(n,t))},text:function(e){return arguments.length?this.each(null==e?_g:("function"===typeof e?xg:bg)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?wg:("function"===typeof e?Sg:Eg)(e)):this.node().innerHTML},raise:function(){return this.each(Tg)},lower:function(){return this.each(Mg)},append:function(e){var t="function"===typeof e?e:Pg(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:Pg(e),r=null==t?Ag:"function"===typeof t?t:Bm(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Og)},clone:function(e){return this.select(e?Lg:Ig)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=jg(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?Fg:Bg,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?Hg:Gg)(e,t))}};var Wg=$g,Zg={value:function(){}};function Xg(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Yg(r)}function Yg(e){this._=e}function Kg(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Jg(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Qg(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Zg,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Yg.prototype=Xg.prototype={constructor:Yg,on:function(e,t){var n,r=this._,i=Kg(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=Qg(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Qg(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=Jg(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Yg(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var ey,ty,ny=Xg,ry=0,iy=0,oy=0,ay=0,sy=0,ly=0,uy="object"===typeof performance&&performance.now?performance:Date,cy="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function dy(){return sy||(cy(hy),sy=uy.now()+ly)}function hy(){sy=0}function fy(){this._call=this._time=this._next=null}function py(e,t,n){var r=new fy;return r.restart(e,t,n),r}function my(){sy=(ay=uy.now())+ly,ry=iy=0;try{!function(){dy(),++ry;for(var e,t=ey;t;)(e=sy-t._time)>=0&&t._call.call(null,e),t=t._next;--ry}()}finally{ry=0,function(){var e,t,n=ey,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ey=t);ty=e,yy(r)}(),sy=0}}function gy(){var e=uy.now(),t=e-ay;t>1e3&&(ly-=t,ay=e)}function yy(e){ry||(iy&&(iy=clearTimeout(iy)),e-sy>24?(e<1/0&&(iy=setTimeout(my,e-uy.now()-ly)),oy&&(oy=clearInterval(oy))):(oy||(ay=uy.now(),oy=setInterval(gy,1e3)),ry=1,cy(my)))}function vy(e,t,n){var r=new fy;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}fy.prototype=py.prototype={constructor:fy,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?dy():+n)+(null==t?0:+t),this._next||ty===this||(ty?ty._next=this:ey=this,ty=this),this._call=e,this._time=n,yy()},stop:function(){this._call&&(this._call=null,this._time=1/0,yy())}};var _y=ny("start","end","interrupt"),by=[];function xy(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var u,c,d,h;if(1!==n.state)return l();for(u in i)if((h=i[u]).name===n.name){if(3===h.state)return vy(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[u]):+u<t&&(h.state=6,h.timer.stop(),delete i[u])}if(vy((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),u=0,c=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(null,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=py(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:_y,tween:by,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function wy(e,t){var n=Sy(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Ey(e,t){var n=Sy(e,t);if(n.state>2)throw new Error("too late; already started");return n}function Sy(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ty(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var My,ky,Cy,Py,Ay=180/Math.PI,Oy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Iy(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Ay,skewX:Math.atan(l)*Ay,scaleX:a,scaleY:s}}function Ly(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:Ty(e,i)},{i:l-2,x:Ty(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Ty(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Ty(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Ty(e,n)},{i:s-2,x:Ty(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var Dy=Ly((function(e){return"none"===e?Oy:(My||(My=document.createElement("DIV"),ky=document.documentElement,Cy=document.defaultView),My.style.transform=e,e=Cy.getComputedStyle(ky.appendChild(My),null).getPropertyValue("transform"),ky.removeChild(My),Iy(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),Ry=Ly((function(e){return null==e?Oy:(Py||(Py=document.createElementNS("http://www.w3.org/2000/svg","g")),Py.setAttribute("transform",e),(e=Py.transform.baseVal.consolidate())?Iy((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Oy)}),", ",")",")");function Ny(e,t){var n,r;return function(){var i=Ey(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function zy(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=Ey(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function jy(e,t,n){var r=e._id;return e.each((function(){var e=Ey(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Sy(e,r).value[t]}}function By(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Uy(){}var Gy=.7,Hy=1.4285714285714286,Vy="\\s*([+-]?\\d+)\\s*",qy="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",$y="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wy=/^#([0-9a-f]{3,8})$/,Zy=new RegExp("^rgb\\("+[Vy,Vy,Vy]+"\\)$"),Xy=new RegExp("^rgb\\("+[$y,$y,$y]+"\\)$"),Yy=new RegExp("^rgba\\("+[Vy,Vy,Vy,qy]+"\\)$"),Ky=new RegExp("^rgba\\("+[$y,$y,$y,qy]+"\\)$"),Jy=new RegExp("^hsl\\("+[qy,$y,$y]+"\\)$"),Qy=new RegExp("^hsla\\("+[qy,$y,$y,qy]+"\\)$"),ev={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function tv(){return this.rgb().formatHex()}function nv(){return this.rgb().formatRgb()}function rv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wy.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?iv(t):3===n?new lv(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ov(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ov(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Zy.exec(e))?new lv(t[1],t[2],t[3],1):(t=Xy.exec(e))?new lv(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Yy.exec(e))?ov(t[1],t[2],t[3],t[4]):(t=Ky.exec(e))?ov(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Jy.exec(e))?hv(t[1],t[2]/100,t[3]/100,1):(t=Qy.exec(e))?hv(t[1],t[2]/100,t[3]/100,t[4]):ev.hasOwnProperty(e)?iv(ev[e]):"transparent"===e?new lv(NaN,NaN,NaN,0):null}function iv(e){return new lv(e>>16&255,e>>8&255,255&e,1)}function ov(e,t,n,r){return r<=0&&(e=t=n=NaN),new lv(e,t,n,r)}function av(e){return e instanceof Uy||(e=rv(e)),e?new lv((e=e.rgb()).r,e.g,e.b,e.opacity):new lv}function sv(e,t,n,r){return 1===arguments.length?av(e):new lv(e,t,n,null==r?1:r)}function lv(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function uv(){return"#"+dv(this.r)+dv(this.g)+dv(this.b)}function cv(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function dv(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function hv(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pv(e,t,n,r)}function fv(e){if(e instanceof pv)return new pv(e.h,e.s,e.l,e.opacity);if(e instanceof Uy||(e=rv(e)),!e)return new pv;if(e instanceof pv)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new pv(a,s,l,e.opacity)}function pv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function mv(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function gv(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function yv(e){return function(){return e}}function vv(e,t){return function(n){return e+n*t}}function _v(e){return 1===(e=+e)?bv:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):yv(isNaN(t)?n:t)}}function bv(e,t){var n=t-e;return n?vv(e,n):yv(isNaN(e)?t:e)}By(Uy,rv,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:tv,formatHex:tv,formatHsl:function(){return fv(this).formatHsl()},formatRgb:nv,toString:nv}),By(lv,sv,Fy(Uy,{brighter:function(e){return e=null==e?Hy:Math.pow(Hy,e),new lv(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Gy:Math.pow(Gy,e),new lv(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uv,formatHex:uv,formatRgb:cv,toString:cv})),By(pv,(function(e,t,n,r){return 1===arguments.length?fv(e):new pv(e,t,n,null==r?1:r)}),Fy(Uy,{brighter:function(e){return e=null==e?Hy:Math.pow(Hy,e),new pv(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Gy:Math.pow(Gy,e),new pv(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new lv(mv(e>=240?e-240:e+120,i,r),mv(e,i,r),mv(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var xv=function e(t){var n=_v(t);function r(e,t){var r=n((e=sv(e)).r,(t=sv(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=bv(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function wv(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=sv(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}wv((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return gv((n-r/t)*t,a,i,o,s)}})),wv((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return gv((n-r/t)*t,i,o,a,s)}}));var Ev=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sv=new RegExp(Ev.source,"g");function Tv(e,t){var n,r,i,o=Ev.lastIndex=Sv.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=Ev.exec(e))&&(r=Sv.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Ty(n,r)})),o=Sv.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function Mv(e,t){var n;return("number"===typeof t?Ty:t instanceof rv?xv:(n=rv(t))?(t=n,xv):Tv)(e,t)}function kv(e){return function(){this.removeAttribute(e)}}function Cv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Pv(e,t,n){var r,i;return function(){var o=this.getAttribute(e);return o===n?null:o===r?i:i=t(r=o,n)}}function Av(e,t,n){var r,i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===n?null:o===r?i:i=t(r=o,n)}}function Ov(e,t,n){var r,i,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttribute(e))===s?null:a===r&&s===i?o:o=t(r=a,i=s);this.removeAttribute(e)}}function Iv(e,t,n){var r,i,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttributeNS(e.space,e.local))===s?null:a===r&&s===i?o:o=t(r=a,i=s);this.removeAttributeNS(e.space,e.local)}}function Lv(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttributeNS(e.space,e.local,r(t))}}return n._value=t,n}function Dv(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttribute(e,r(t))}}return n._value=t,n}function Rv(e,t){return function(){wy(this,e).delay=+t.apply(this,arguments)}}function Nv(e,t){return t=+t,function(){wy(this,e).delay=t}}function zv(e,t){return function(){Ey(this,e).duration=+t.apply(this,arguments)}}function jv(e,t){return t=+t,function(){Ey(this,e).duration=t}}function Bv(e,t){if("function"!==typeof t)throw new Error;return function(){Ey(this,e).ease=t}}function Fv(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?wy:Ey;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}var Uv=Wg.prototype.constructor;function Gv(e,t,n){function r(){var r=this,i=t.apply(r,arguments);return i&&function(t){r.style.setProperty(e,i(t),n)}}return r._value=t,r}var Hv=0;function Vv(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function qv(){return++Hv}var $v=Wg.prototype;Vv.prototype=function(e){return Wg().transition(e)}.prototype={constructor:Vv,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Bm(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,u=r[a],c=u.length,d=o[a]=new Array(c),h=0;h<c;++h)(s=u[h])&&(l=e.call(s,s.__data__,h,u))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,xy(d[h],t,n,h,d,Sy(s,n)));return new Vv(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Um(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var h,f=e.call(l,l.__data__,d,u),p=Sy(l,n),m=0,g=f.length;m<g;++m)(h=f[m])&&xy(h,t,n,m,f,p);o.push(f),a.push(l)}return new Vv(o,a,t,n)},filter:function(e){"function"!==typeof e&&(e=Gm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new Vv(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=t[s],c=n[s],d=u.length,h=a[s]=new Array(d),f=0;f<d;++f)(l=u[f]||c[f])&&(h[f]=l);for(;s<r;++s)a[s]=t[s];return new Vv(a,this._parents,this._name,this._id)},selection:function(){return new Uv(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=qv(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=Sy(a,t);xy(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Vv(r,this._parents,e,n)},call:$v.call,nodes:$v.nodes,node:$v.node,size:$v.size,empty:$v.empty,each:$v.each,on:function(e,t){var n=this._id;return arguments.length<2?Sy(this.node(),n).on.on(e):this.each(Fv(n,e,t))},attr:function(e,t){var n=Ym(e),r="transform"===n?Ry:Mv;return this.attrTween(e,"function"===typeof t?(n.local?Iv:Ov)(n,r,jy(this,"attr."+e,t)):null==t?(n.local?Cv:kv)(n):(n.local?Av:Pv)(n,r,t+""))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=Ym(e);return this.tween(n,(r.local?Lv:Dv)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?Dy:Mv;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=sg(this,e),a=(this.style.removeProperty(e),sg(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,function(e){return function(){this.style.removeProperty(e)}}(e)):this.styleTween(e,"function"===typeof t?function(e,t,n){var r,i,o;return function(){var a=sg(this,e),s=n(this);return null==s&&(this.style.removeProperty(e),s=sg(this,e)),a===s?null:a===r&&s===i?o:o=t(r=a,i=s)}}(e,r,jy(this,"style."+e,t)):function(e,t,n){var r,i;return function(){var o=sg(this,e);return o===n?null:o===r?i:i=t(r=o,n)}}(e,r,t+""),n)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,Gv(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(jy(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Sy(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Ny:zy)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Rv:Nv)(t,e)):Sy(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?zv:jv)(t,e)):Sy(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(Bv(t,e)):Sy(this.node(),t).ease}};var Wv={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Zv(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return Wv.time=dy(),Wv;return n}Wg.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),r&&n.on.call("interrupt",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}(this,e)}))},Wg.prototype.transition=function(e){var t,n;e instanceof Vv?(t=e._id,e=e._name):(t=qv(),(n=Wv).time=dy(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)(a=s[u])&&xy(a,e,t,u,s,n||Zv(a,t));return new Vv(r,this._parents,e,t)};function Xv(){this._=null}function Yv(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Kv(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Jv(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Qv(e){for(;e.L;)e=e.L;return e}Xv.prototype={constructor:Xv,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Qv(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Kv(this,n),n=(e=n).U),n.C=!1,r.C=!0,Jv(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Jv(this,n),n=(e=n).U),n.C=!1,r.C=!0,Kv(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?Qv(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,Kv(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Jv(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Kv(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Jv(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Kv(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Jv(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var e_=Xv;function t_(e,t,n,r){var i=[null,null],o=T_.push(i)-1;return i.left=e,i.right=t,n&&r_(i,e,t,n),r&&r_(i,t,e,r),E_[e.index].halfedges.push(o),E_[t.index].halfedges.push(o),i}function n_(e,t,n){var r=[t,n];return r.left=e,r}function r_(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function i_(e,t,n,r,i){var o,a=e[0],s=e[1],l=a[0],u=a[1],c=0,d=1,h=s[0]-l,f=s[1]-u;if(o=t-l,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>c&&(c=o)}if(o=r-l,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<d&&(d=o)}if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<d&&(d=o)}else if(f>0){if(o>d)return;o>c&&(c=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>d)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<d&&(d=o)}return!(c>0||d<1)||(c>0&&(e[0]=[l+c*h,u+c*f]),d<1&&(e[1]=[l+d*h,u+d*f]),!0)}}}}}function o_(e,t,n,r,i){var o=e[1];if(o)return!0;var a,s,l=e[0],u=e.left,c=e.right,d=u[0],h=u[1],f=c[0],p=c[1],m=(d+f)/2,g=(h+p)/2;if(p===h){if(m<t||m>=r)return;if(d>f){if(l){if(l[1]>=i)return}else l=[m,n];o=[m,i]}else{if(l){if(l[1]<n)return}else l=[m,i];o=[m,n]}}else if(s=g-(a=(d-f)/(p-h))*m,a<-1||a>1)if(d>f){if(l){if(l[1]>=i)return}else l=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/a,i];o=[(n-s)/a,n]}else if(h<p){if(l){if(l[0]>=r)return}else l=[t,a*t+s];o=[r,a*r+s]}else{if(l){if(l[0]<t)return}else l=[r,a*r+s];o=[t,a*t+s]}return e[0]=l,e[1]=o,!0}function a_(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function s_(e,t){return t[+(t.left!==e.site)]}function l_(e,t){return t[+(t.left===e.site)]}var u_,c_=[];function d_(){Yv(this),this.x=this.y=this.arc=this.site=this.cy=null}function h_(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i[0],s=i[1],l=r[0]-a,u=r[1]-s,c=o[0]-a,d=o[1]-s,h=2*(l*d-u*c);if(!(h>=-k_)){var f=l*l+u*u,p=c*c+d*d,m=(d*f-u*p)/h,g=(l*p-c*f)/h,y=c_.pop()||new d_;y.arc=e,y.site=i,y.x=m+a,y.y=(y.cy=g+s)+Math.sqrt(m*m+g*g),e.circle=y;for(var v=null,_=S_._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}S_.insert(v,y),v||(u_=y)}}}}function f_(e){var t=e.circle;t&&(t.P||(u_=t.N),S_.remove(t),c_.push(t),Yv(t),e.circle=null)}var p_=[];function m_(){Yv(this),this.edge=this.site=this.circle=null}function g_(e){var t=p_.pop()||new m_;return t.site=e,t}function y_(e){f_(e),w_.remove(e),p_.push(e),Yv(e)}function v_(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],o=e.P,a=e.N,s=[e];y_(e);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<M_&&Math.abs(r-l.circle.cy)<M_;)o=l.P,s.unshift(l),y_(l),l=o;s.unshift(l),f_(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<M_&&Math.abs(r-u.circle.cy)<M_;)a=u.N,s.push(u),y_(u),u=a;s.push(u),f_(u);var c,d=s.length;for(c=1;c<d;++c)u=s[c],l=s[c-1],r_(u.edge,l.site,u.site,i);l=s[0],(u=s[d-1]).edge=t_(l.site,u.site,null,i),h_(l),h_(u)}function __(e){for(var t,n,r,i,o=e[0],a=e[1],s=w_._;s;)if((r=b_(s,a)-o)>M_)s=s.L;else{if(!((i=o-x_(s,a))>M_)){r>-M_?(t=s.P,n=s):i>-M_?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}!function(e){E_[e.index]={site:e,halfedges:[]}}(e);var l=g_(e);if(w_.insert(t,l),t||n){if(t===n)return f_(t),n=g_(t.site),w_.insert(l,n),l.edge=n.edge=t_(t.site,l.site),h_(t),void h_(n);if(n){f_(t),f_(n);var u=t.site,c=u[0],d=u[1],h=e[0]-c,f=e[1]-d,p=n.site,m=p[0]-c,g=p[1]-d,y=2*(h*g-f*m),v=h*h+f*f,_=m*m+g*g,b=[(g*v-f*_)/y+c,(h*_-m*v)/y+d];r_(n.edge,u,p,b),l.edge=t_(u,e,null,b),n.edge=t_(e,p,null,b),h_(t),h_(n)}else l.edge=t_(t.site,l.site)}}function b_(e,t){var n=e.site,r=n[0],i=n[1],o=i-t;if(!o)return r;var a=e.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],u=l-t;if(!u)return s;var c=s-r,d=1/o-1/u,h=c/u;return d?(-h+Math.sqrt(h*h-2*d*(c*c/(-2*u)-l+u/2+i-o/2)))/d+r:(r+s)/2}function x_(e,t){var n=e.N;if(n)return b_(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var w_,E_,S_,T_,M_=1e-6,k_=1e-12;function C_(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function P_(e,t){return t[1]-e[1]||t[0]-e[0]}function A_(e,t){var n,r,i,o=e.sort(P_).pop();for(T_=[],E_=new Array(e.length),w_=new e_,S_=new e_;;)if(i=u_,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(__(o),n=o[0],r=o[1]),o=e.pop();else{if(!i)break;v_(i.arc)}if(function(){for(var e,t,n,r,i=0,o=E_.length;i<o;++i)if((e=E_[i])&&(r=(t=e.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=a_(e,T_[t[n]]);for(a.sort((function(e,t){return s[t]-s[e]})),n=0;n<r;++n)s[n]=t[a[n]];for(n=0;n<r;++n)t[n]=s[n]}}(),t){var a=+t[0][0],s=+t[0][1],l=+t[1][0],u=+t[1][1];!function(e,t,n,r){for(var i,o=T_.length;o--;)o_(i=T_[o],e,t,n,r)&&i_(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>M_||Math.abs(i[0][1]-i[1][1])>M_)||delete T_[o]}(a,s,l,u),function(e,t,n,r){var i,o,a,s,l,u,c,d,h,f,p,m,g=E_.length,y=!0;for(i=0;i<g;++i)if(o=E_[i]){for(a=o.site,s=(l=o.halfedges).length;s--;)T_[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)p=(f=l_(o,T_[l[s]]))[0],m=f[1],d=(c=s_(o,T_[l[++s%u]]))[0],h=c[1],(Math.abs(p-d)>M_||Math.abs(m-h)>M_)&&(l.splice(s,0,T_.push(n_(a,f,Math.abs(p-e)<M_&&r-m>M_?[e,Math.abs(d-e)<M_?h:r]:Math.abs(m-r)<M_&&n-p>M_?[Math.abs(h-r)<M_?d:n,r]:Math.abs(p-n)<M_&&m-t>M_?[n,Math.abs(d-n)<M_?h:t]:Math.abs(m-t)<M_&&p-e>M_?[Math.abs(h-t)<M_?d:e,t]:null))-1),++u);u&&(y=!1)}if(y){var v,_,b,x=1/0;for(i=0,y=null;i<g;++i)(o=E_[i])&&(b=(v=(a=o.site)[0]-e)*v+(_=a[1]-t)*_)<x&&(x=b,y=o);if(y){var w=[e,t],E=[e,r],S=[n,r],T=[n,t];y.halfedges.push(T_.push(n_(a=y.site,w,E))-1,T_.push(n_(a,E,S))-1,T_.push(n_(a,S,T))-1,T_.push(n_(a,T,w))-1)}}for(i=0;i<g;++i)(o=E_[i])&&(o.halfedges.length||delete E_[i])}(a,s,l,u)}this.edges=T_,this.cells=E_,w_=S_=T_=E_=null}function O_(e,t,n){this.k=e,this.x=t,this.y=n}A_.prototype={constructor:A_,polygons:function(){var e=this.edges;return this.cells.map((function(t){var n=t.halfedges.map((function(n){return s_(t,e[n])}));return n.data=t.site.data,n}))},triangles:function(){var e=[],t=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,l=-1,u=t[i[o-1]],c=u.left===s?u.right:u.left;++l<o;)a=c,c=(u=t[i[l]]).left===s?u.right:u.left,a&&c&&r<a.index&&r<c.index&&C_(s,a,c)<0&&e.push([s.data,a.data,c.data])})),e},links:function(){return this.edges.filter((function(e){return e.right})).map((function(e){return{source:e.left.data,target:e.right.data}}))},find:function(e,t,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var l=e-i.site[0],u=t-i.site[1],c=l*l+u*u;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var l=e-s[0],u=t-s[1],d=l*l+u*u;d<c&&(c=d,a=s.index)}}))}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}},O_.prototype={constructor:O_,scale:function(e){return 1===e?this:new O_(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new O_(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new O_(1,0,0);O_.prototype;var I_="UP",L_="DOWN",D_="FLAT",R_="HARD",N_="MODERATE",z_="EASY",j_={backgroundColor:"rgba(255, 255, 255, 0.9)",lineColor:"#FF0000",hoverLineColor:"#219AD8",areaColor:"#595952",tickColor:"#CCCCCC",textColor:"rgba(55, 55, 50, 0.85)",axisTextColor:nt.COLOR_TEXT_PRIMARY,endLineColor:"rgba(55, 55, 50, 0.4)"},B_=function(e){return e>3?I_:e<-3?L_:D_},F_=function(e,t,n){return function(e,t,n){for(var r=n%2===0?n+1:n,i=r/2,o=0,a=0,s=0;s<r;s++){var l=t+(s<i?-1*(s+1):s===i?0:r-s),u=l-1;if(!(l<0||l>=e.length)&&!(u<0||l>=e.length)){var c=e[l],d=e[u],h=c.gradePct,f=c.x-d.x;o+=h*f,a+=f}}return 0===a?0:o/a}(t,e,n)},U_=function(e){return e>11?R_:e>6?N_:z_},G_=function(e,t,n,r){var i=n.findIndex((function(t){return t.x===e})),o=n.findIndex((function(e){return e.x===t}));return n.slice(i,o).map((function(e){return{x:e.x/(r?1e3:5280),y:e.y}}))},H_=function(e,t){var n=e.displayMetric,r=void 0!==n&&n,i=e.dom,o=e.elevationConfig,a=void 0===o?{}:o,s=e.handleMouseOver,l=e.height,u=void 0===l?130:l,c=e.paddingWidth,h=void 0===c?0:c,f=e.pointByPointSegmented,p=void 0===f?[]:f,m=e.colorsSegmented,g=void 0===m?[]:m,y=e.showStatsGroup,v=void 0!==y&&y,_=e.totalDistance,b=void 0===_?0:_,x=e.width,w=e.languageRegionCode,E=void 0===w?"en-US":w,S=e.isPrintMap,T=!p&&!b||0===p.length,M=p.flat(),k=[];p.forEach((function(e,t){t>0&&k.push(e[0])})),x=r?x+20||(null===i||void 0===i?void 0:i.clientWidth)+20:x||(null===i||void 0===i?void 0:i.clientWidth);var C=Object.assign(j_,a,{}),P=C.lineColor,A=C.hoverLineColor,O=C.tickColor,I=C.textColor,L=C.axisTextColor,D=r?"km":t.formatMessage({id:"fw1hEa",defaultMessage:[{type:0,value:"mi"}]}),R=x,N=r?"m":t.formatMessage({id:"MZCGK+",defaultMessage:[{type:0,value:"ft"}]}),z=S?"#414141":L,j=S?u+20:u;nh(i).html("");var B=nh(i).append("svg:svg").attr("width",x+h).attr("height",j),F=null,U=null;T&&(B.append("svg:text").attr("x",x/2-90).attr("y",u/2).attr("font-size","20px").attr("fill",I).text(t.formatMessage({id:"6IwK51",defaultMessage:[{type:0,value:"No elevation data"}]})),F=10,U=1e3,b=1);var G=B.append("svg:g").attr("pointer-events","none");F||(F=function(e,t){var n,r,i=e.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<i;)null!=(n=e[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<i;)null!=(n=t(e[o],o,e))&&r>n&&(r=n);return r}(M,(function(e){return e[1]}))),U||(U=function(e,t){var n,r,i=e.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<i;)null!=(n=e[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<i;)null!=(n=t(e[o],o,e))&&n>r&&(r=n);return r}(M,(function(e){return e[1]})));var H,V,q=U-F,$=Math.min(.05*q,2*q),W=r?30.84:100;q<W?(H=U+($=(W-q)/2),V=F-$):(H=U+$+$/4,V=F-$-$/4);var Z=H-V,X=b;X=b<1?X.toFixed(2):b<50?X.toFixed(1):Math.floor(X);var Y=S?u-5:u-25,K=Sc().domain([0,X]).range([0,x]),J=Sc().domain([H,V]).rangeRound([20,Y]),Q=Oa(",.0f"),ee=S?"#e6e6e6":O;G.append("svg:text").attr("text-anchor","end").attr("font-size",11).attr("x",R).attr("y",J(U+$)+10).attr("fill",z).text(ut(H,0,N,E)),G.append("svg:line").attr("x1",0).attr("x2",x).attr("y1",Math.round(J(U+$))).attr("y2",J(U+$)).attr("stroke",ee),G.append("svg:text").attr("text-anchor","end").attr("font-size",11).attr("x",R).attr("y",J(F-$)-13).attr("fill",z).text(ut(V,0,N,E)),0===Z?(G.append("svg:line").attr("x1",0).attr("x2",x).attr("y1",J(F-$)+90).attr("y2",J(F-$)+90).attr("stroke",ee),G.append("svg:line").attr("x1",0).attr("x2",x).attr("y1",J(V)+67.5).attr("y2",J(V)+67.5).attr("stroke",ee).attr("fill","none").style("stroke-dasharray","3, 3"),G.append("svg:line").attr("x1",0).attr("x2",x).attr("y1",J(V)+45).attr("y2",J(V)+45).attr("stroke",ee).attr("fill","none").style("stroke-dasharray","3, 3"),G.append("svg:line").attr("x1",0).attr("x2",x).attr("y1",J(V)+22.5).attr("y2",J(V)+22.5).attr("stroke",ee).attr("fill","none").style("stroke-dasharray","3, 3")):(G.append("svg:line").attr("x1",0).attr("x2",x).attr("y1",J(F-$)).attr("y2",J(F-$)).attr("stroke",ee),G.append("svg:line").attr("x1",0).attr("x2",x).attr("y1",J(.25*Z+V)).attr("y2",J(.25*Z+V)).attr("stroke",ee).attr("fill","none").style("stroke-dasharray","3, 3"),G.append("svg:line").attr("x1",0).attr("x2",x).attr("y1",J(.5*Z+V)).attr("y2",J(.5*Z+V)).attr("stroke",ee).attr("fill","none").style("stroke-dasharray","3, 3"),G.append("svg:line").attr("x1",0).attr("x2",x).attr("y1",J(.75*Z+V)).attr("y2",J(.75*Z+V)).attr("stroke",ee).attr("fill","none").style("stroke-dasharray","3, 3"));var te,ne=b<1?5:4,re=b/ne,ie=wt(3,te).scale(K).tickSize(4,0).tickFormat((function(e,t,n){var r=Number("".concat(Math.round("".concat(e,"e3")),"e-3")),i=0;if(r%1===0&&b<50?i=1:b<1&&(i=2),n[t].__data__&&n[t+1]&&n[t+1].__data__){var o=n[t].__data__;if(n[t+1].__data__-o<re/2)return""}return n[t+1]||(r=X),ut(r,i,D,E)}));ie.tickValues(K.ticks(ne).concat(X));var oe="translate(5,".concat(S?u-5:u-30,")");if(G.append("svg").attr("text-anchor","middle").attr("class","xAxisBottom").append("g").attr("transform",oe).call((function(e){var t=e.selection?e.selection():e;e.call(ie),e.select(".domain").remove(),t.selectAll(".tick text").attr("fill",L).style("font-size","11px"),t.selectAll(".tick line").attr("x1",-4).attr("x2",-4)})),!T){for(var ae=0;ae<k.length;ae++)G.append("svg:line").attr("x1",K(k[ae][0])+1).attr("x2",K(k[ae][0])+1).attr("y1",J(F-$)).attr("y2",J(U+$)).attr("stroke",O).attr("stroke-width","2").style("stroke-dasharray","4, 3");var se,le=Sh;se=0===Z?vh().x((function(e){return K(e[0])})).y((function(e){return J(e[1])+45})).curve(le):vh().x((function(e){return K(e[0])})).y((function(e){return J(e[1])})).curve(le);for(var ue,ce=B.append("svg:g").attr("pointer-events","none"),de=0;de<p.length;de++){var he=S?"#414141":g[de]||P;ce.append("svg:path").datum(p[de]).attr("d",se(p[de])).attr("stroke-width","2").attr("stroke",he).attr("fill","none")}if(S)for(var fe=B.append("svg:g").attr("pointer-events","none"),pe=function(e,t){var n=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r][0]*(t?1e3:5280),o=e[r][1],a=0;r>0&&(a=(e[r][1]-e[r-1][1])/(e[r][0]-e[r-1][0])*(t?1e3:5280)*100),n.push({x:i,y:o,gradePct:a})}return n}(e,t),r=[];if(n.length<=1)return r;for(var i=n[0],o=n[1],a=i.x,s=i.y,l=B_(o.gradePct),u=n[n.length-1].x,c=Math.max(.001*u,1),d=1;d<n.length;d++){var h=n[d],f=F_(d,n,parseInt(c)),p=B_(f);if(l!==p||d===n.length-1){var m=h.x,g=h.y,y=U_((g-s)/(m-a)*100),v=a/(t?1e3:5280),_=m/(t?1e3:5280),b=G_(a,m,n,t);r.push({x0:v,x1:_,y0:s,y1:g,difficultyEstimate:y,betweenPoints:b}),a=m,s=g,l=p,b=[]}}return r}(M,r),me=function(){var e=gh,t=null,n=fh(0),r=yh,i=fh(!0),o=null,a=mh,s=null;function l(l){var u,c,d,h,f,p=l.length,m=!1,g=new Array(p),y=new Array(p);for(null==o&&(s=a(f=hh())),u=0;u<=p;++u){if(!(u<p&&i(h=l[u],u,l))===m)if(m=!m)c=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=u-1;d>=c;--d)s.point(g[d],y[d]);s.lineEnd(),s.areaEnd()}m&&(g[u]=+e(h,u,l),y[u]=+n(h,u,l),s.point(t?+t(h,u,l):g[u],r?+r(h,u,l):y[u]))}if(f)return s=null,f+""||null}function u(){return vh().defined(i).curve(a).context(o)}return l.x=function(n){return arguments.length?(e="function"===typeof n?n:fh(+n),t=null,l):e},l.x0=function(t){return arguments.length?(e="function"===typeof t?t:fh(+t),l):e},l.x1=function(e){return arguments.length?(t=null==e?null:"function"===typeof e?e:fh(+e),l):t},l.y=function(e){return arguments.length?(n="function"===typeof e?e:fh(+e),r=null,l):n},l.y0=function(e){return arguments.length?(n="function"===typeof e?e:fh(+e),l):n},l.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:fh(+e),l):r},l.lineX0=l.lineY0=function(){return u().x(e).y(n)},l.lineY1=function(){return u().x(e).y(r)},l.lineX1=function(){return u().x(t).y(n)},l.defined=function(e){return arguments.length?(i="function"===typeof e?e:fh(!!e),l):i},l.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),l):a},l.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),l):o},l}().x((function(e){return K(e.x)})).y0(u-5).y1((function(e){return J(e.y)})).curve(le),ge=0;ge<pe.length;ge++){var ye=pe[ge].x1-pe[ge].x0;if("EASY"!==pe[ge].difficultyEstimate||ye<.01){var ve=[];ve.push({x:pe[ge].x0,y:pe[ge].y0},{x:pe[ge].x1,y:pe[ge].y1});for(var _e=0;_e<pe[ge].betweenPoints.length;_e++)ve.push({x:pe[ge].betweenPoints[_e].x,y:pe[ge].betweenPoints[_e].y});fe.append("svg:path").attr("d",me(ve)).attr("fill","HARD"===(ue=pe[ge].difficultyEstimate)?"rgba(224, 32, 32, 0.24)":"MODERATE"===ue?"rgba(255, 204, 0, 0.24)":"none")}}var be,xe,we=B.append("svg:g").attr("pointer-events","none");if(we.append("svg:line").attr("id","hoverline").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke",A).attr("stroke-width","2").attr("visibility","hidden"),v){var Ee=Math.max(t.formatMessage({id:"P8JC58",defaultMessage:[{type:0,value:"Distance"}]}).length,t.formatMessage({id:"Rl5++U",defaultMessage:[{type:0,value:"Elevation"}]}).length,t.formatMessage({id:"qXTiEd",defaultMessage:[{type:0,value:"Grade"}]}).length);xe=6*Ee+80;var Se=S?190:76;(be=B.append("svg:g").attr("visibility","hidden").attr("pointer-events","none").attr("font-size","13px").attr("font-weight",500)).append("svg:rect").attr("x",0).attr("y",J(U+$)+8).attr("fill","black").attr("height",Se).attr("width",xe).attr("rx",4).attr("ry",4).attr("id","statsBoxShadow").attr("filter","url(#stats-filter)"),be.append("svg:rect").attr("x",0).attr("y",J(U+$)+8).attr("fill","white").attr("height",Se).attr("width",xe).attr("rx",4).attr("ry",4).attr("id","statsBox"),be.append("svg:text").attr("x",0).attr("y",J(U+$)+32).attr("fill",I).attr("id","currDist").text(""),be.append("svg:text").attr("x",0).attr("y",J(U+$)+51).attr("fill",I).attr("id","currElev").text(""),be.append("svg:text").attr("x",0).attr("y",J(U+$)+70).attr("fill",I).attr("id","currGrd").text("");var Te=be.append("svg:defs").append("svg:filter").attr("id","stats-filter");Te.append("svg:feColorMatrix").attr("result","colorOut").attr("in","SourceGraphic").attr("type","matrix").attr("values","0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0"),Te.append("svg:feGaussianBlur").attr("result","blurOut").attr("in","colorOut").attr("stdDeviation",2)}var Me=function(){s&&s(null),we.select("#hoverline").attr("visibility","hidden"),be&&be.attr("visibility","hidden")},ke=function(e){var n=e[0];if(n<0||n>x)Me();else{we.select("#hoverline").attr("visibility","visible").attr("x1",n).attr("y1",J(F-$)).attr("x2",n).attr("y2",J(U+$)+(0===Z?90:0));for(var i=K.invert(n),o=-1,a=1;a<M.length;a++)if(M[a][0]>i){o=a-1;break}if(o<0&&(o=M.length-1),s&&o>=0&&o<M.length-1){var l=Ve([(0,d.reverseCoord)(M[o][2]),(0,d.reverseCoord)(M[o+1][2])]),u=i-M[o][0],c=tt(l,r?u:1.60394*u).geometry.coordinates;s(c)}if(be){be.select("#currDist").text("".concat(t.formatMessage({id:"P8JC58",defaultMessage:[{type:0,value:"Distance"}]}),": ").concat(ut(i,1,D,E))),be.select("#currElev").text("".concat(t.formatMessage({id:"Rl5++U",defaultMessage:[{type:0,value:"Elevation"}]}),": ").concat(ut(M[o][1],0,N,E)));var h,f,p=be.select("#currGrd");if(M.length>=3&&o>=0&&o<M.length-1){var m=function(e,t,n){for(var r=100/(n?1e3:1609.34),i=e[t][0],o=0,a=0,s=0,l=0,u=0,c=!0,d=t;d!=e.length;){var h=e[d][0]-i;if(c){if(-h>r&&d!=t-1){c=!1,d=t+1;continue}}else if(h>r&&d!=t+1)break;var f=e[d][0]*(n?1e3:5280);o+=f,a+=e[d][1],l+=f*f,s+=f*e[d][1],u+=1,c?-1==(d-=1)&&(c=!1,d=t+1):d+=1}return u>1&&u*l-o*o!=0?(u*s-o*a)/(u*l-o*o)*100:0}(M,o,r);p.text("".concat(t.formatMessage({id:"qXTiEd",defaultMessage:[{type:0,value:"Grade"}]}),": ").concat(Q(m),"%"))}else p.text("");window.innerWidth<=767?(h=xe+60,f=40):(h=xe+20,f=0);var g=e[0]+10,y=g<h?f:-h;be.selectAll("rect").attr("x",g+y),be.selectAll("text").attr("x",g+y+10),be.attr("visibility","visible")}}};B.on("mouseover",(function(){td.preventDefault();var e=ud(this);ke(e)})).on("mousemove",(function(){td.preventDefault();var e=ud(this);ke(e)})).on("mouseout",(function(){td.preventDefault(),Me()})),B.on("touchstart",(function(){var e=rh(this)[0];ke(e)})).on("touchmove",(function(){var e=rh(this)[0];ke(e)})).on("touchend",(function(){Me()}))}};function V_(e,t,n){if(null!==e)for(var r,i,o,a,s,l,u,c,d=0,h=0,f=e.type,p="FeatureCollection"===f,m="Feature"===f,g=p?e.features.length:1,y=0;y<g;y++){s=(c=!!(u=p?e.features[y].geometry:m?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<s;v++){var _=0,b=0;if(null!==(a=c?u.geometries[v]:u)){l=a.coordinates;var x=a.type;switch(d=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===t(l,h,y,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===t(l[r],h,y,_,b))return!1;h++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(!1===t(l[r][i],h,y,_,b))return!1;h++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-d;o++){if(!1===t(l[r][i][o],h,y,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===V_(a.geometries[r],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function q_(e){var t=[1/0,1/0,-1/0,-1/0];return V_(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}q_.default=q_;__webpack_require__(32676);var $_=function(e){if(!e||!e.polyline)return[];var t=e.polyline.indexedElevationData;return t?function(e){return(0,d.decodedObjectsFromPolyline)(e,[2,5])}(t):[]},W_=function(e){var t=e.getBounds();return[t.getNorth(),t.getWest(),t.getSouth(),t.getEast()].join(",")},Z_=function(e,t,n){var r=[e[0],e[1]],i=lt(e[2],n);if(!t)return{distFromLast:0,elevGainFromLast:0,convertedElev:i,currLatLng:r};var o=r.slice().reverse(),a=[t[1],t[0]],s=rt(a,o),l=n?Math.round(s*Math.pow(10,5))/Math.pow(10,5):st(1e3*s,5),u=e[2],c=t[2],d=0;return u>c&&(d=u-c),{distFromLast:l,elevGainFromLast:d,convertedElev:i,currLatLng:r}},X_=function(e,t){var n=[],r=0,i=0;return e.forEach((function(e){var o=[];e.segments.forEach((function(e){var n=(0,d.decodeSegmentLatLng)(e),a=function(e){var t={};return $_(e).forEach((function(e){t[e[0]]=e[1]})),t}(e);n.forEach((function(e,s){var l,u=[e[0],e[1],a[s]||0];if(s>0){var c=n[s-1];l=[c[0],c[1],a[s-1]||0]}var d=Z_(u,l,t),h=d.distFromLast,f=d.elevGainFromLast,p=d.convertedElev,m=d.currLatLng,g=[r,p,m];o.push(g),r+=h,i+=f}))})),n.push(o)})),{pointByPointSegmented:n,totalDistance:r,elevationGain:i}};function Y_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y_(Object(n),!0).forEach((function(t){J_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q_=__webpack_require__(72555)({displayName:"BaseMapElevationPaneWidget",componentDidMount:function(){this._isMounted=!0,this.pointByPointSegmented=null,this.totalDistance=null,this.colorsSegmented=null,this.createElevationGraph(),window.addEventListener("resize",this.handleResize),window.addEventListener("orientationchange",this.handleResize)},componentWillUnmount:function(){this._isMounted=!1,window.removeEventListener("resize",this.handleResize),window.removeEventListener("orientationchange",this.handleResize)},handleResize:function(){this.redrawElevationGraph()},redrawElevationGraph:function(){this.pointByPointSegmented&&this.drawElevationGraph(this.pointByPointSegmented,this.colorsSegmented,this.totalDistance)},drawElevationGraph:function(e,t,n){if(this._isMounted){this.pointByPointSegmented=e,this.colorsSegmented=t,this.totalDistance=n;var r=this.props,i=r.displayMetric,o=r.elevationConfig,a=r.handleMouseOver,s=r.height,l=r.showStatsGroup,u=r.width,c=r.languageRegionCode;H_({colorsSegmented:t,displayMetric:i,dom:this.refs.elevChart,elevationConfig:o,handleMouseOver:a,height:s,paddingWidth:14,pointByPointSegmented:e,showStatsGroup:l,totalDistance:n,width:u,languageRegionCode:c},this.props.intl)}},createElevationGraph:function(){var e=function(e){if(!e)return[];var t="track"===e.presentationType,n=[];return(0,d.getLines)(e).forEach((function(e){var r=(0,d.getLineColor)(e),i=(0,d.getSegments)(e).map((function(e){return t&&n.push({segments:[e],color:r}),e}));!t&&i.length>0&&n.push({segments:i,color:r})})),n}(this.props.map),t=e.map((function(e){return e.segments})).flat(),n=e.map((function(e){return e.color}));if(t.length<1)this.drawElevationGraph([],0,[]);else{var r=X_(e,this.props.displayMetric),i=r.pointByPointSegmented,o=r.totalDistance;this.drawElevationGraph(i,n,o)}},render:function(){return(0,D.jsx)("div",{id:"elevation-box",className:"unselectable",children:(0,D.jsx)("div",{id:"elevation-chart",ref:"elevChart"})},"elevBox")}}),eb=function(e){var t=(0,u.useIntl)();return(0,D.jsx)(Q_,K_(K_({},e),{},{intl:t}))},tb=function(e){return(0,D.jsx)(G.Z,{children:(0,D.jsx)(eb,K_({},e))})};tb.defaultProps={elevationConfig:{},showStatsGroup:!1};var nb=__webpack_require__(66031);function rb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ib(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rb(Object(n),!0).forEach((function(t){ob(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ob(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ab=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.getSource(t);if(i)i.setData(n),e.customStyle.sources.some((function(e){return e.sourceId===t&&(e.sourceSpec.data=n,!0)}));else{var o=ib({type:"geojson",data:n},r);ie(e,t,o)}},sb=__webpack_require__(73935),lb=function(e,t){var n=[];return function(e,t){if(e)for(var n=0;n<e;n++)t(n)}(e,(function(e){n.push(t(e))})),n},ub=function(e,t,n){return[e[0]+(t||0),e[1]+(n||0)]},cb=2*Math.PI;function db(e,t){var n=function(){},i={animate:!1,animationSpeed:0,customPin:!1,initializeLeg:n,onClick:n,circleSpiralSwitchover:9,circleFootSeparation:25,spiralFootSeparation:28,spiralLengthStart:15,spiralLengthFactor:4},o=[];function a(e){return e>=i.circleSpiralSwitchover?function(e){var t=i.spiralLengthStart,n=0;return lb(e,(function(e){n+=i.spiralFootSeparation/t+5e-4*e;var r={x:t*Math.cos(n),y:t*Math.sin(n),angle:n,legLength:t,index:e};return t+=cb*i.spiralLengthFactor/n,r}))}(e):function(e){var t=i.circleFootSeparation*(2+e)/cb,n=cb/e;return lb(e,(function(e){var r=e*n;return{x:t*Math.cos(r),y:t*Math.sin(r),angle:r,legLength:t,index:e}}))}(e)}function s(){o.reverse().forEach((function(e,t){i.animate?(e.elements.container.style.transitionDelay="".concat(i.animationSpeed/1e3/o.length*t,"s"),e.elements.container.className+=" exit",setTimeout((function(){e.mapboxMarker.remove()}),i.animationSpeed+100)):e.mapboxMarker.remove()})),o=[]}Object.keys(t).forEach((function(e){i[e]=t[e]})),this.spiderfy=function(t,n){var l=a(n.length);s();var u=n.map((function(e,n){var o=l[n],a=function(e){var t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return t.className="spider-leg-container".concat(i.animate?" animate initial ":" "),r.className="spider-leg-line",n.className="spider-leg-pin".concat(i.customPin?"":" default-spider-pin"),t.appendChild(r),t.appendChild(n),t.style["margin-left"]="".concat(e.x,"px"),t.style["margin-top"]="".concat(e.y,"px"),r.style.height="".concat(e.legLength,"px"),r.style.transform="rotate(".concat(e.angle-Math.PI/2,"rad)"),{container:t,line:r,pin:n}}(o),s={feature:e,elements:a,mapboxMarker:new(r().Marker)({element:a.container}).setLngLat(t),param:o};return i.initializeLeg(s),a.container.onclick=function(e){i.onClick(e,s)},s})),c=u.reverse();c.forEach((function(t){t.mapboxMarker.addTo(e)})),i.animate&&c.forEach((function(e,t){e.elements.container.className=(e.elements.container.className||"").replace("initial",""),e.elements.container.style.transitionDelay="".concat(i.animationSpeed/1e3/u.length*t,"s")})),o=u},this.unspiderfy=s,this.spiderLegs=o}db.popupOffsetForSpiderLeg=function(e,t){var n=e.param.x,r=e.param.y;return{top:ub([0,t=t||0],n,r),"top-left":ub([t,t],n,r),"top-right":ub([-t,t],n,r),bottom:ub([0,-t],n,r),"bottom-left":ub([t,-t],n,r),"bottom-right":ub([-t,-t],n,r),left:ub([t,-t],n,r),right:ub([-t,-t],n,r)}};var hb=db,fb=function(e){var t=document.createElement("div");return sb.render(e,t),t},pb=function(e){sb.unmountComponentAtNode(e),e.remove()},mb=function(e,t,n,r){t.isOpen()||!r?(e.originalEvent&&(e=e.originalEvent),$(e.relatedTarget).closest(".mapboxgl-popup")[0]===t.getElement()||n()):r()},gb=function(e,t){var n=t.geometry;if("Point"!==n.type)return e;for(var r=n.coordinates;Math.abs(e.lng-r[0])>180;)r[0]+=e.lng>r[0]?360:-360;return r},yb=function(e){var t=e.getElement();if(!t)return null;var n=t.querySelector(".mapboxgl-popup-content");return n?n.children[0]:null},vb=function(e){try{e=JSON.parse(e)}catch(t){if(!(t instanceof SyntaxError))throw t}return e},_b=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=new(r().Popup)({closeButton:!1,closeOnClick:!1,maxWidth:"none",focusAfterOpen:!1}),u=function(){if(l.isOpen()){l.remove();var e=yb(l);e&&pb(e),o&&o()}},c=function(t){u();var r=t.lngLat,o=t.features[0],s=o.properties;if(i&&i(t,s),!e.shiftKeyDown){var c=gb(r,o);e.getBounds().contains(c)||e.jumpTo({center:c});var d=fb(n(s));d.onmouseleave=function(){u()},l.options.offset=vb(s.popupOffset)||a.offset,l.setLngLat(c).setDOMContent(d).addTo(e)}},d=function(e){mb(e,l,u,o)};return s||e.context&&e.context.mobileBrowser?(ee(e,t,!0,"click",c),ee(e,t,!0,"unclick",u)):(ee(e,t,!0,"mouseenter",c),ee(e,t,!0,"mouseleave",d),ee(e,t,!1,"click",u)),ee(e,t,!0,"removed",u),ee(e,t,!1,"moveend",(function(){l.isOpen()&&!e.getBounds().contains(l.getLngLat())&&u()})),{popup:l,closePopup:u}},bb=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=function(a){var s=n.feature;if(o&&o(a,s),!e.shiftKeyDown){var l=fb(r(s));n.mapboxMarker.setPopup(t),t.options.offset=hb.popupOffsetForSpiderLeg(n),t.setDOMContent(l).addTo(e),t.getElement().onmouseleave=i}},l=function(e){mb(e,t,i,a)},u=n.elements.pin;e.context&&e.context.mobileBrowser?u.onclick=function(e){window.setTimeout((function(){return s(e)}),50)}:u.onmouseenter=s,u.onmouseleave=l},xb=[-1,0,1,0],wb=function(e,t){return e+t},Eb=function(e,t,n){var r,i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6?arguments[6]:void 0;if(a=a||{},ab(e,t,n,o),!e.getLayer(t)){var u=null===(r=__AT_DATA__.store)||void 0===r||null===(i=r.user)||void 0===i?void 0:i.admin,c=!u;void 0!==l&&c&&!l?xb.forEach((function(n,r){Q(e,{id:wb(t,r),type:"line",source:t,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":a["line-color"]?a["line-color"]:3===r?nt.COLOR_UI_HIGHLIGHT:nt.COLOR_GREEN_700,"line-width":3===r?4:2,"line-offset":3*n}},s,"osm-alltrails-lines-public")})):Q(e,{id:t,type:"line",source:t,paint:{"line-color":a["line-color"]?a["line-color"]:["coalesce",["get","color"],"red"],"line-width":a["line-width"]||5}},s),a&&a.renderPopup&&(ee(e,t,!0,"mouseenter",(function(){e.getCanvas().style.cursor="pointer"})),ee(e,t,!0,"mouseleave",(function(){e.getCanvas().style.cursor=e.customStyle.cursor})),_b(e,t,a.renderPopup))}},Sb=function(e,t){var n,r;(null===(n=__AT_DATA__.store)||void 0===n||null===(r=n.user)||void 0===r?void 0:r.admin)?te(e,t):xb.forEach((function(n,r){te(e,wb(t,r))})),oe(e,t)},Tb="chevron",Mb=function(e,t,n){e.getLayer(t)||(ae(e,Tb,"https://cdn-assets.alltrails.com/assets/icons/maps/chevron@2x.png",{pixelRatio:2}),Q(e,{id:t,type:"symbol",source:n,layout:{"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":["image",Tb],"icon-rotate":90,"symbol-placement":"line","symbol-spacing":50},paint:{}}))},kb="start",Cb="end",Pb="current",Ab="start-end",Ob="yellow",Ib="red",Lb=function(e){var t=e.name,n=e.latitude,r=e.longitude,i=e.dateString;return(0,D.jsxs)("div",{className:"styles-module__container___pvj1k",children:[(0,D.jsx)("div",{className:"styles-module__title____HtJs",children:t}),(0,D.jsxs)("div",{className:"styles-module__coordinates___GvjJc",children:[i&&(0,D.jsx)("div",{children:i}),n&&r&&(0,D.jsxs)("div",{children:[n,", ",r]})]})]})};Lb.propTypes={name:be.string.isRequired,latitude:be.number,longitude:be.number,dateString:be.string},Lb.defaultProps={dateString:null,latitude:null,longitude:null};var Db=Lb,Rb=__webpack_require__.p+"955706646d08e0f91949.png",Nb=__webpack_require__.p+"caba4355dc2e006a4442.png",zb=__webpack_require__.p+"c543acd58c8551327dfe.png",jb=__webpack_require__.p+"9bd2b733dd75c2af72b0.png",Bb=__webpack_require__.p+"dd5e1ce69705d01540db.png",Fb=__webpack_require__.p+"6103f26b597c1fb4de89.png",Ub=__webpack_require__.p+"3ac232154ec90cef35bd.png",Gb=__webpack_require__.p+"0065aab08d662ff66a71.png",Hb=__webpack_require__.p+"73449b5323f3d7ecc23b.png",Vb=__webpack_require__.p+"907be383a5514030a006.png",qb=__webpack_require__.p+"b725675039bf566a2b77.png",$b=__webpack_require__.p+"5424510dbcf5cfbaa9c9.png",Wb=function(e){return"map-marker-".concat(e)};function Zb(e){switch(e){case Pb:return Rb;case kb:return Nb;case Cb:return zb;case Ab:return jb;case"node":return Bb;case"plus":return Fb;case Ob:return Ub;case Ib:return Gb;case"purple":return Hb;case"msg-green":return Vb;case"msg-red":return qb;case"msg-yellow":return $b;default:throw Error("missing marker src for id '".concat(e,"'"))}}var Xb=function(e){var t=function(e){var t=document.createElement("div");return t.style.backgroundImage='url("'.concat(Zb(e),'")'),t.style.backgroundSize="contain",[kb,Cb].includes(e)?(t.style.height="40px",t.style.width="40px"):(t.style.height="30px",t.style.width="30px"),t}(e);return new n.Marker({element:t,draggable:!0})},Yb=function(e,t){var n=Wb(t),r=Zb(t);return ae(e,n,r,{pixelRatio:2})},Kb=function(e,t,n){return{id:e,type:"symbol",source:t,layout:{"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-anchor":["coalesce",["get","iconAnchor"],"center"],"icon-image":["image",["coalesce",["get","iconImage"],Wb(n)]],"symbol-z-order":"source"},paint:{"icon-opacity":1}}},Jb=function(e){var t=e.text;return(0,D.jsx)("div",{className:"styles-module__tooltip___PlkqZ",children:t})},Qb=function(e,t){var n=new(r().Popup)({closeButton:!1,closeOnClick:!1,maxWidth:"none",focusAfterOpen:!1,anchor:"left",offset:15}),i=function(){if(n.isOpen()){n.remove();var e=function(e){var t=e.getElement();if(!t)return null;var n=t.querySelector(".mapboxgl-popup-content");return n?n.children[0]:null}(n);e&&function(e){sb.unmountComponentAtNode(e),e.remove()}(e)}};return ee(e,t,!0,"mouseenter",(function(t){var r=t.lngLat,o=t.features[0],a=o.properties.positionMessage;if(a&&(i(),!e.shiftKeyDown)){var s,l,u=function(e,t){var n=t.geometry;if("Point"!==n.type)return e;for(var r=n.coordinates.slice();Math.abs(e.lng-r[0])>180;)r[0]+=e.lng>r[0]?360:-360;return r}(r,o),c=(s=(0,D.jsx)(Jb,{text:a}),l=document.createElement("div"),sb.render(s,l),l);c.onmouseleave=function(){i()},n.setLngLat(u).setDOMContent(c).addTo(e)}})),ee(e,t,!0,"mouseleave",(function(e){i()})),{tooltip:n,closeTooltip:i}},ex="map-marker-label",tx=function(e){return ae(e,ex,"https://cdn-assets.alltrails.com/assets/icons/maps/markers/map-marker-label@2x.png",{pixelRatio:2})},nx=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i={id:e,type:"symbol",source:t,layout:{"icon-anchor":"bottom","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":["image",ex],"icon-text-fit":"both","icon-text-fit-padding":[8,12,8,12],"icon-offset":[0,0],"text-anchor":"bottom","text-field":["get",n],"text-font":["Manrope Bold"],"text-offset":[0,-1.7],"text-size":13}};return r&&(i.filter=r),i};function rx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ix(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rx(Object(n),!0).forEach((function(t){ox(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ox(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ax="trailPlannerMap-nodes-drag-labels",sx=function(e){return"".concat(e,"-drag")},lx=function(e,t){var n=sx(t.id),r=n,i=n,o=qe([]);if(ab(e,r,o),!e.getLayer(i)){var a=null,s=null;Q(e,ix(ix({},t),{},{id:n,source:r}));var l=function(n){e.getCanvas().style.cursor="grabbing",e.dragging=!0,a.geometry.coordinates=n.lngLat.toArray(),ab(e,r,a),n.draggingFeature=a,ne(e,t.id,"draglayer",n)},u=function(n){e.getCanvas().style.cursor="pointer",e.off("mousemove",l),e.dragging=!1,ab(e,r,qe([]));var i=e.getSource(t.source);i._data.features.push(a);var o=e.project(s),u=n.point;Math.abs(Math.sqrt(Math.pow(u.x-o.x,2)+Math.pow(u.y-o.y,2)))>8?(i.setData(i._data),n.draggingFeature=a,ne(e,t.id,"draglayerend",n),e.dragLayerEnd=!0):(a.geometry.coordinates=s,i.setData(i._data)),a=null};ee(e,t.id,!0,"mousedown",(function(n){if(!e.shiftKeyDown){e.dragging=!0,te(e,ax),n.preventDefault(),e.getCanvas().style.cursor="grabbing",e.on("mousemove",l),e.once("mouseup",u),a=n.features[0],s=a.geometry.coordinates,ab(e,r,a);var i=e.getSource(t.source);i._data.features=i._data.features.filter((function(e){return e.id!==a.id})),i.setData(i._data),n.draggingFeature=a,ne(e,t.id,"draglayerstart",n)}})),ee(e,t.id,!0,"mouseenter",(function(t){var r=t.features[0];if(r.properties.labelMessage){var i=sx(n);ab(e,i,r),Q(e,nx("".concat(i,"-labels"),i,"labelMessage",!0))}})),ee(e,t.id,!0,"mouseleave",(function(t){te(e,"".concat(sx(n),"-labels"))}))}},ux=function(e,t){var n=sx(t);te(e,ax),te(e,n),oe(e,n)},cx=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=t,u=t,c=(0,d.pointItemsToGeojson)(n);if(ab(e,l,c),e.getLayer(u))a&&lx(e,{id:t});else{o&&c.features.forEach((function(e){o.extend(e.geometry.coordinates)}));var h=[];Array.isArray(r)?r=(h=r)[0]:h.push(r),h.map((function(t){return Yb(e,t)}));var f=Kb(u,l,r);Q(e,f),ee(e,u,!0,"mouseenter",(function(){e.getCanvas().style.cursor="pointer"})),ee(e,u,!0,"mouseleave",(function(){e.getCanvas().style.cursor=e.customStyle.cursor})),i&&_b(e,u,i),s&&Qb(e,u),a&&lx(e,f)}},dx=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n&&ux(e,t),te(e,t),oe(e,t)};function hx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var px=__webpack_require__(66881),mx="https://appleid.apple.com/auth/authorize",gx="?response_type=code%20id_token&response_mode=form_post",yx="com.alltrails.AllTrails.web",vx="name email",_x="/users/auth/apple/callback";function bx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bx(Object(n),!0).forEach((function(t){wx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ex={apiKey:"3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i",defaultAuthHeaders:function(){var e,t=(0,px.Z)().getState();return{"X-AT-KEY":Ex.apiKey,"X-CSRF-TOKEN":t.formAuthenticityToken||(null===(e=document.querySelector('meta[name="csrf-token"]'))||void 0===e?void 0:e.content)}},getApiEndpoint:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s={headers:xx(xx({},this.defaultAuthHeaders()),o),type:"GET",url:e,data:t,success:function(e,t,r){n(e,t,r)},error:function(e,t,n){r(e,t,n)},complete:function(e,t){i(e,t)}};return a&&(s.dataType=a),$.ajax(s)},loadMoreContent:function(e,t,n,r,i,o,a,s,l){var u,c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=arguments.length>10?arguments[10]:void 0,h=arguments.length>11?arguments[11]:void 0,f=arguments.length>12?arguments[12]:void 0,p={};if("trails"===n){var m="tracks"===e?"maps":e;u="/api/alltrails/v2/".concat(n,"/").concat(r,"/").concat(m)}else u="users"===n?"/api/alltrails/users/".concat(r,"/").concat(e):"lists"===n?"/api/alltrails/v2/lists/".concat(r,"/").concat(e):"/api/alltrails/locations/".concat(n,"/").concat(r,"/").concat(e);"tracks"===e||"maps"===e?(p={page:i,per_page:o,detail:"shallow",presentation_type:"track"},d&&(p.sort_option=d)):"reviews"===e||"photos"===e?(p={page:i,per_page:o},d&&(p.sort_option=d)):"trails"===e||"nearby_trails"===e?p={page:i,per_page:o,algolia_formatted:!0}:("items"===e||"completed"===e)&&(p={page:i,per_page:o,include_obj:!0}),"cities"!==n&&"states"!==n||(p.country_id=t),s&&(["easy","moderate","hard"].includes(s)?p.difficulty=s:["short","long"].includes(s)?p.length=s:p.attribute=s),c&&(p.only_with_parks=!0),h&&(p.park_type=h);var g={};f&&(g={"X-Language-Locale":f}),this.getApiEndpoint(u,p,(function(e){l(e)}),(function(){}),(function(){}),g)},putApiEndpoint:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s={headers:xx(xx({},this.defaultAuthHeaders()),o),type:"PUT",url:e,contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:function(e,t,r){n(e,t,r)},error:function(e,t,n){r(e,t,n)},complete:function(e,t){i(e,t)}};return a&&(s.dataType=a),$.ajax(s)},postApiEndpoint:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return $.ajax({headers:xx(xx({},this.defaultAuthHeaders()),o),type:"POST",url:e,contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:function(e,t,r){n(e,t,r)},error:function(e,t,n){r(e,t,n)},complete:function(e,t){i(e,t)}})},deleteApiEndpoint:function(e,t,n,r,i){$.ajax({headers:xx({},this.defaultAuthHeaders()),type:"DELETE",url:e,contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:function(e,t,r){n(e,t,r)},error:function(e,t,n){r(e,t,n)},complete:function(e,t){i(e,t)}})},initGoogle:function(e){window&&window.gapi&&window.gapi.load("auth2",(function(){window.gapi.auth2.init({client_id:"127587500781-rjpk7g3rhiobeeqq33fis0a35olspsi0.apps.googleusercontent.com",cookie_policy:"single_host_origin",scope:"profile email"}).then((function(t){t.signOut();for(var n=document.getElementsByClassName("google"),r=0;r<n.length;r++)t.attachClickHandler(n[r],{},e,(function(e){console.error(JSON.stringify(e,void 0,2))}))})).catch((function(e){console.error(e)}))}))},initApple:function(e){for(var t=document.getElementsByClassName("apple"),n="".concat(window.location.protocol,"//").concat(window.location.hostname).concat(window.location.port?":".concat(window.location.port):"").concat(_x),r="".concat(mx+gx,"&client_id=").concat(yx,"&redirect_uri=").concat(encodeURIComponent(n),"&scope=").concat(encodeURIComponent(vx),"&auth_state=").concat(e),i=function(){window.location=r},o=0;o<t.length;o++)t[o].onclick=i},usersPath:function(e){return"/members/".concat(e.slug)},signupPath:function(e){return e?"/signup?ref=".concat(e):"/signup"}};function Sx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sx(Object(n),!0).forEach((function(t){Mx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kx=function(e){return e.type&&"GET"!==e.type&&!e.contentType&&(e.contentType="application/json; charset=utf-8","string"!==typeof e.data&&(e.data=JSON.stringify(e.data))),e.headers||(e.headers={}),e.headers=Tx(Tx({},e.headers),Ex.defaultAuthHeaders()),r=(t=e).resReducer,(i=new Promise((function(e,i){n=$j.ajax(Tx(Tx({},t),{},{success:function(t){r&&(t=r(t)),e(t)},error:function(e){i(e)},finally:function(){n=void 0}}))}))).abort=function(){n&&n.abort()},i;var t,n,r,i},Cx=function(e){return kx({url:"/api/alltrails/v2/trails/".concat(e,"/photos"),data:{with_location:"Y"},resReducer:function(e){return e.photos}})},Px=function(e){return kx({url:"/api/alltrails/v2/trails/".concat(e,"/waypoints"),resReducer:function(e){return e.waypoints}})},Ax=__webpack_require__.p+"77cea2c535110203d54f.png",Ox="waypoint-icon";function Ix(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ix(Object(n),!0).forEach((function(t){Dx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ix(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rx=function(e,t,n,i,o,a){var s=new(r().Popup)({closeButton:!1,closeOnMove:!1}).setDOMContent(fb(o(i))),l=i.location,u=l.longitude,c=l.latitude,d=Xb(t).setLngLat([u,c]).addTo(n).setPopup(s).togglePopup();d.on("dragend",(function(){var e=d.getLngLat(),t=e.lng,n=e.lat;a&&a.publish({topic:"waypoint.dragged.with_location",data:{waypointId:i.id,location:{latitude:n,longitude:t}}})}));return a.subscribe("removeDraggableMarker",(function(){d&&d.remove()})),d},Nx=function(e,t,n,r,i){var o=t,a=t,s=(0,d.pointItemsToGeojson)(n);if(ab(e,o,s),i&&s.features.forEach((function(e){i.extend(e.geometry.coordinates)})),!e.getLayer(a)){ae(e,Ox,Ax,{pixelRatio:2});var l=function(e,t){return{id:e,type:"symbol",source:t,layout:{"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":["image",Ox],"icon-offset":[0,1],"icon-size":1,"text-field":["get","order"],"text-font":["Manrope Bold"],"text-size":13},paint:{"text-color":nt.COLOR_NEUTRAL_800}}}(a,o);Q(e,l),ee(e,a,!0,"mouseenter",(function(){e.getCanvas().style.cursor="pointer"})),ee(e,a,!0,"mouseleave",(function(){e.getCanvas().style.cursor=e.customStyle.cursor})),r&&_b(e,a,r)}},zx=__webpack_require__(49343),jx=__webpack_require__.n(zx),Bx=__webpack_require__(6961),Fx=__webpack_require__(48731),Ux=function(e){if(e)return function(t){return t.stopPropagation(),t.preventDefault(),e(t)}};function Gx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Hx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vx=function(e){var n=e.handleClick,r=e.imageSize,i=e.photo,o=Gx((0,t.useState)(""),2),a=o[0],s=o[1],l=i.title||"",u="/api/alltrails/photos/".concat(i.id,"/image?size=").concat(r,"&api_key=").concat(Ex.apiKey);return(0,t.useEffect)((function(){var e=i.id,t=i.photoHash;s(t&&e?(0,Fx.getPhotoUrl)({id:e,photoHash:t},r):u)}),[i,r]),(0,D.jsx)("div",{className:"styles-module__photoPopup___FE25G",onClick:Ux(n),children:""===a?(0,D.jsx)(jx(),{className:"styles-module__shimmerWrapper___dBnZY",children:(0,D.jsx)("div",{className:"styles-module__shimmer___gJoJz"})}):(0,D.jsx)("img",{alt:l,title:l,src:a,onError:function(){a!==u&&s(u)}})},i)};Vx.defaultProps={handleClick:null,imageSize:Bx.PhotoSize.MediumSquare},Vx.propTypes={handleClick:xe().func,imageSize:xe().string,photo:xe().object.isRequired};var qx=Vx,$x=__webpack_require__.p+"0c6e528962dbe842d71c.png",Wx=__webpack_require__.p+"ae84e78b6d41a5999590.png",Zx=__webpack_require__.p+"389040180fc004a5796c.png",Xx=__webpack_require__.p+"1db36d9c220017974ab9.png",Yx=__webpack_require__.p+"a8759ee2c35f967b5c17.png",Kx=__webpack_require__.p+"1270f60f2c604d6092e4.png",Jx=__webpack_require__.p+"e1d6a1af074b5461b37b.png",Qx=__webpack_require__.p+"cb18b07c11a78cc13248.png",ew=__webpack_require__.p+"0ce660584ff521bbf85b.png",tw=__webpack_require__.p+"f49c31ee7f1940414d4e.png",nw=__webpack_require__.p+"ee4285131eded2a18042.png",rw=__webpack_require__.p+"8a5325d44c1d0d92fa35.png",iw=__webpack_require__.p+"eaa305e5f844e0705470.png",ow=__webpack_require__.p+"eaa305e5f844e0705470.png",aw="blue",sw="brown",lw="gray",uw="green",cw="red",dw="teal",hw="debugger";function fw(e){switch(e){case uw:return{notHover:$x,hover:Wx};case lw:return{notHover:Zx,hover:Xx};case cw:return{notHover:Yx,hover:Kx};case aw:return{notHover:Jx,hover:Qx};case sw:return{notHover:ew,hover:tw};case dw:return{notHover:nw,hover:rw};case hw:return{notHover:iw,hover:ow};default:throw Error("missing pin srcs for color '".concat(e,"'"))}}var pw=function(e){return"map-pin-".concat(e)},mw=function(e,t){var n=document.createElement("img");n.alt="pin",n.crossOrigin="anonymous",n.className="pins-module__pin___CD9rp",t&&(n.style.opacity=t);var r=fw(e);return n.onmouseover=function(){n.src=r.hover},n.onmouseout=function(){n.src=r.notHover},n.src=r.notHover,n},gw=[0,-20],yw=function(e,t){var n=fw(t),r=pw(t);return ae(e,r,n.notHover,{pixelRatio:2})},vw=function(e,t){var n=fw(t),r=pw("".concat(t,"-hover"));return ae(e,r,n.hover,{pixelRatio:2})},_w=function(e,t,n,r){return{id:e,type:"symbol",source:t,filter:["!",["has","point_count"]],layout:{"icon-allow-overlap":!0,"icon-anchor":"bottom","icon-offset":[uw,dw].includes(n)?[0,7]:[0,0],"icon-ignore-placement":!0,"icon-image":["image",pw(n)]},paint:{"icon-opacity":r||1}}},bw=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=function(e){var t=r?function(){return r(e.id,n)}:void 0;return(0,D.jsx)(qx,{photo:e,handleClick:t})};cx(e,t,n,Ib,o,i)},xw=function(e,t,n){var r=t.findIndex((function(e){return e.id==n.id}));-1!=r&&(yw(e,Ib),t[r].iconAnchor="bottom",t[r].iconImage=pw(Ib),t[r].popupOffset=gw,t.push(t.splice(r,1)[0]))},ww="current-location",Ew="atMap",Sw=function(e){var t,n=e.map,r=e.atMap,i=e.renderWaypointPopup,o=e.handlePhotoClick,a=e.bounds,s=e.withWaypointLabels,l=void 0===s||s,u=e.messagingChannel,c=e.polylineOpts,h=e.isMapCreatorPage;if(r){var f=(0,d.atMapsToGeojson)([r]),p=f.features.map((function(e){var t=e.geometry.coordinates.flat();return a&&t.forEach((function(e){return a.extend(e)})),t})),m=r.waypoints,g=r.mapPhotos,y=null!==(t=null===g||void 0===g?void 0:g.map((function(e){return e.photo})))&&void 0!==t?t:[];Eb(n,"".concat(Ew,"-polylines"),f,{},c,null,h),Mb(n,"".concat(Ew,"-chevrons"),"".concat(Ew,"-polylines")),function(e,t,n){var r,i=[];n.forEach((function(e){if(!(e.length<1)){var t=hx(e[0],2),n=t[0],r=t[1],o=hx(e[e.length-1],2),a=o[0],s=o[1];n===a&&r===s?i.push({name:"Start / End",location:{latitude:r,longitude:n},iconImage:"map-marker-start-end"}):(i.push({name:"Start",location:{latitude:r,longitude:n},iconImage:"map-marker-start"}),i.push({name:"End",location:{latitude:s,longitude:a},iconImage:"map-marker-end"}))}})),e.context&&e.context.adminUser||(r=function(e){var t=JSON.parse(e.location);return(0,D.jsx)(Db,{name:e.name,latitude:t.latitude,longitude:t.longitude})}),cx(e,t,i,[Ab,kb,Cb],r)}(n,"".concat(Ew,"-start-end"),p),function(e){cx(e,ww,[],Pb,null)}(n),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];if(n){var l=n.sort((function(e,t){return e.order-t.order})).map((function(e,t){return Lx(Lx({},e),{},{order:t+1})})),u=[],c=[];if(l.forEach((function(e){e.id===a?u.push(e):c.push(e)})),Nx(e,t,c,r,i),u.length>0){var d=u[0];Rx(0,Ob,e,d,r,o)}if(s){tx(e);var h=["==",["get","showTitle",["object",["get","waypointDisplayProperty"]]],!0];Q(e,nx("".concat(t,"-labels"),t,"name",h))}}}(n,"".concat(Ew,"-waypoints"),m,i,a,u,r.editWaypointId,l),bw(n,"".concat(Ew,"-photos"),y,o,a)}};var Tw=function(e,t){var n=(0,d.pointItemToLngLat)(t);n&&e.extend(n)},Mw=__webpack_require__(24955),kw=__webpack_require__.n(Mw);function Cw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pw=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.credentials=Dw(t),this.algoliaClient=kw()(this.credentials.applicationId,this.credentials.apiKey),this.algoliaIndex=this.algoliaClient.initIndex(t),this.languageRegionCode=n||b().English,this.indexId=t}var t,n,r;return t=e,(n=[{key:"search",value:function(e,t){return this.algoliaIndex.search(e,this.optimizeQuery(e,t))}},{key:"batchSearch",value:function(e){var t=this,n=e.map((function(e){return{indexName:t.algoliaIndex.indexName,query:"",params:t.optimizeQuery("",e)}}));return this.algoliaClient.multipleQueries(n)}},{key:"clearCache",value:function(){this.algoliaClient.clearCache()}},{key:"optimizeQuery",value:function(e,t){var n=JSON.parse(JSON.stringify(t));return e?n.attributesToHighlight||(n.attributesToHighlight=["name"]):n.attributesToHighlight=[],n.responseFields||(n.responseFields=["hits","hitsPerPage","nbHits"]),n}}])&&Cw(t.prototype,n),r&&Cw(t,r),e}(),Aw=[],Ow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e||Lw("primaryIndex"),r=t;r||(r=b().English);var i=[n,r].join("-");return Aw[i]||(Aw[i]=new Pw(n,r)),Aw[i]},Iw=function(){return __webpack_require__.g.__AT_DATA__.algoliaConfig},Lw=function(e){var t;return null===(t=Iw().indexes[e])||void 0===t?void 0:t.id},Dw=function(e){var t=Object.values(Iw().indexes).find((function(t){return t.id==e}));return t?Iw().applications[t.application]:{}},Rw=function(){return Ow(Lw("mapsIndex"))},Nw="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},zw=Array.prototype,jw=Object.prototype,Bw=("undefined"!==typeof Symbol&&Symbol.prototype,zw.push,zw.slice,jw.toString),Fw=(jw.hasOwnProperty,"undefined"!==typeof ArrayBuffer),Uw="undefined"!==typeof DataView,Gw=(Array.isArray,Object.keys,Object.create,Fw&&ArrayBuffer.isView),Hw=(isNaN,isFinite,{toString:null}.propertyIsEnumerable("toString"),Math.pow(2,53)-1);function Vw(e){return e instanceof Vw?e:this instanceof Vw?void(this._wrapped=e):new Vw(e)}Vw.VERSION="1.13.6",Vw.prototype.value=function(){return this._wrapped},Vw.prototype.valueOf=Vw.prototype.toJSON=Vw.prototype.value,Vw.prototype.toString=function(){return String(this._wrapped)};var qw,$w=(qw="byteLength",function(e){return null==e?void 0:e[qw]});function Ww(e){var t="[object "+e+"]";return function(e){return Bw.call(e)===t}}var Zw=Ww("Function"),Xw=Nw.document&&Nw.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof Xw&&(Zw=function(e){return"function"==typeof e||!1});var Yw=Zw,Kw=Ww("ArrayBuffer"),Jw=Ww("Object"),Qw=Uw&&Jw(new DataView(new ArrayBuffer(8))),eE=("undefined"!==typeof Map&&Jw(new Map),Ww("DataView"));var tE=Qw?function(e){return null!=e&&Yw(e.getInt8)&&Kw(e.buffer)}:eE;var nE,rE=(nE=$w,function(e){var t=nE(e);return"number"==typeof t&&t>=0&&t<=Hw}),iE=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var oE;__webpack_require__(30824),__webpack_require__(30142);!function(e){e.BEST_MATCH="best-match",e.MOST_POPULAR="most-popular",e.CLOSEST="closest",e.LIST_ORDER="list-order",e.DATE="date",e.NAME="name",e.NEWLY_ADDED="newly-added",e.RECENTLY_ADDED="recently-added"}(oE||(oE={}));(0,u.defineMessages)({ADA:{id:"/GOmxn",defaultMessage:[{type:0,value:"Wheelchair friendly"}]},WHEELCHAIR_FRIENDLY:{id:"/GOmxn",defaultMessage:[{type:0,value:"Wheelchair friendly"}]},DOGS:{id:"jPVGPq",defaultMessage:[{type:0,value:"Dog friendly"}]},DOGS_LEASH:{id:"12nVMk",defaultMessage:[{type:0,value:"Dogs on leash"}]},DOGS_ON_LEASH:{id:"12nVMk",defaultMessage:[{type:0,value:"Dogs on leash"}]},KIDS:{id:"gryGFG",defaultMessage:[{type:0,value:"Kid friendly"}]},KID_FRIENDLY:{id:"gryGFG",defaultMessage:[{type:0,value:"Kid friendly"}]},NO_DOGS:{id:"o5d+Ca",defaultMessage:[{type:0,value:"No dogs"}]},DOGS_NO:{id:"o5d+Ca",defaultMessage:[{type:0,value:"No dogs"}]},PARTIALLY_PAVED:{id:"LYiRGN",defaultMessage:[{type:0,value:"Partially paved"}]},PAVED:{id:"RM0Zno",defaultMessage:[{type:0,value:"Paved"}]},STROLLERS:{id:"r1TN+9",defaultMessage:[{type:0,value:"Stroller friendly"}]},STROLLER_FRIENDLY:{id:"r1TN+9",defaultMessage:[{type:0,value:"Stroller friendly"}]}}),(0,u.defineMessages)({BACKPACKING:{id:"xXZGmj",defaultMessage:[{type:0,value:"Backpacking"}]},BIKE_TOURING:{id:"M5TOMz",defaultMessage:[{type:0,value:"Bike touring"}]},BIRDING:{id:"9qzrpX",defaultMessage:[{type:0,value:"Bird watching"}]},CAMPING:{id:"XjJcVS",defaultMessage:[{type:0,value:"Camping"}]},CROSS_COUNTRY_SKIING:{id:"u9HJIU",defaultMessage:[{type:0,value:"Cross-country skiing"}]},FISHING:{id:"oo+gUt",defaultMessage:[{type:0,value:"Fishing"}]},HIKING:{id:"yP9SR1",defaultMessage:[{type:0,value:"Hiking"}]},HORSEBACK_RIDING:{id:"t45Jzl",defaultMessage:[{type:0,value:"Horseback riding"}]},MOUNTAIN_BIKING:{id:"Mrpw7R",defaultMessage:[{type:0,value:"Mountain biking"}]},OFF_ROAD_DRIVING:{id:"ZU/M7P",defaultMessage:[{type:0,value:"OHV/Off-road driving"}]},PADDLE_SPORTS:{id:"3bDB/A",defaultMessage:[{type:0,value:"Paddle sports"}]},ROAD_BIKING:{id:"YvPE7L",defaultMessage:[{type:0,value:"Road biking"}]},ROCK_CLIMBING:{id:"B2nDRs",defaultMessage:[{type:0,value:"Rock climbing"}]},SCENIC_DRIVING:{id:"oDo4CB",defaultMessage:[{type:0,value:"Scenic driving"}]},SKIING:{id:"zMggtP",defaultMessage:[{type:0,value:"Skiing"}]},SNOWSHOEING:{id:"WfJM+3",defaultMessage:[{type:0,value:"Snowshoeing"}]},SURFING:{id:"Y/Rz9c",defaultMessage:[{type:0,value:"Surfing"}]},TRAIL_RUNNING:{id:"nDyaq/",defaultMessage:[{type:0,value:"Running"}]},RUNNING:{id:"nDyaq/",defaultMessage:[{type:0,value:"Running"}]},VIA_FERRATA:{id:"7WZTTn",defaultMessage:[{type:0,value:"Via ferrata"}]},WALKING:{id:"+8XF1s",defaultMessage:[{type:0,value:"Walking"}]},NATURE_TRIPS:{id:"P50G2A",defaultMessage:[{type:0,value:"Nature trips"}]},BIRD_WATCHING:{id:"9qzrpX",defaultMessage:[{type:0,value:"Bird watching"}]}}),(0,u.defineMessages)({EASY:{id:"6n4LpX",defaultMessage:[{type:0,value:"Easy"}]},MODERATE:{id:"PLFP30",defaultMessage:[{type:0,value:"Moderately challenging"}]},HARD:{id:"b6PG0r",defaultMessage:[{type:0,value:"Challenging"}]}}),(0,u.defineMessages)({BEACH:{id:"0tZ5qK",defaultMessage:[{type:0,value:"Beach"}]},CAVE:{id:"C+qheK",defaultMessage:[{type:0,value:"Cave"}]},CITY_WALK:{id:"WkFp1q",defaultMessage:[{type:0,value:"City walk"}]},EVENT:{id:"m1czzY",defaultMessage:[{type:0,value:"Event"}]},FOREST:{id:"huDDge",defaultMessage:[{type:0,value:"Forest"}]},HISTORIC_SITE:{id:"6sGSt3",defaultMessage:[{type:0,value:"Historic site"}]},HOT_SPRINGS:{id:"Uh4lbS",defaultMessage:[{type:0,value:"Hot springs"}]},LAKE:{id:"Pp866L",defaultMessage:[{type:0,value:"Lake"}]},PUB_WALK:{id:"r50rUj",defaultMessage:[{type:0,value:"Pub walk"}]},PUB_CRAWL:{id:"r50rUj",defaultMessage:[{type:0,value:"Pub walk"}]},RAILS_TRAILS:{id:"ks+ck1",defaultMessage:[{type:0,value:"Rails trails"}]},RIVER:{id:"W/oZ+0",defaultMessage:[{type:0,value:"River"}]},VIEWS:{id:"akF0Ly",defaultMessage:[{type:0,value:"Views"}]},WATERFALL:{id:"R6zFR+",defaultMessage:[{type:0,value:"Waterfall"}]},WILD_FLOWERS:{id:"QyazrP",defaultMessage:[{type:0,value:"Wildflowers"}]},WILDLIFE:{id:"uFbmVl",defaultMessage:[{type:0,value:"Wildlife"}]}}),(0,u.defineMessages)({SHORT:{id:"juU558",defaultMessage:[{type:0,value:"Short"}]},LONG:{id:"KtEZXn",defaultMessage:[{type:0,value:"Long"}]}}),(0,u.defineMessages)({BLOWDOWN:{id:"d0GZYu",defaultMessage:[{type:0,value:"Blowdown"}]},BRIDGE_OUT:{id:"VBexip",defaultMessage:[{type:0,value:"Bridge out"}]},BUGS:{id:"HsbcVQ",defaultMessage:[{type:0,value:"Bugs"}]},CLOSED:{id:"Fv1ZSz",defaultMessage:[{type:0,value:"Closed"}]},FEE:{id:"uT4OlP",defaultMessage:[{type:0,value:"Fee"}]},FLOODED:{id:"b+JkCL",defaultMessage:[{type:0,value:"Flooded"}]},GREAT:{id:"o3wmFH",defaultMessage:[{type:0,value:"Great!"}]},ICY:{id:"oDYswu",defaultMessage:[{type:0,value:"Icy"}]},MUDDY:{id:"xOIGaN",defaultMessage:[{type:0,value:"Muddy"}]},NO_SHADE:{id:"6E8T+t",defaultMessage:[{type:0,value:"No shade"}]},OFF_TRAIL:{id:"mWQQ0e",defaultMessage:[{type:0,value:"Off trail"}]},OVER_GROWN:{id:"zIf6l0",defaultMessage:[{type:0,value:"Over grown"}]},PRIVATE_PROPERTY:{id:"gN0skv",defaultMessage:[{type:0,value:"Private property"}]},ROCKY:{id:"0MmXtU",defaultMessage:[{type:0,value:"Rocky"}]},SCRAMBLE:{id:"K8/gwT",defaultMessage:[{type:0,value:"Scramble"}]},SNOW:{id:"MvTG+H",defaultMessage:[{type:0,value:"Snow"}]},WASHED_OUT:{id:"NZyKgH",defaultMessage:[{type:0,value:"Washed out"}]}}),(0,u.defineMessages)({LOOP:{id:"9XiW3x",defaultMessage:[{type:0,value:"Loop"}]},OUT_AND_BACK:{id:"/dfahw",defaultMessage:[{type:0,value:"Out & back"}]},POINT_TO_POINT:{id:"ZDSFvd",defaultMessage:[{type:0,value:"Point to point"}]}}),(0,u.defineMessages)({BEST_MATCH:{id:"V3Ir0c",defaultMessage:[{type:0,value:"Best match"}]},MOST_POPULAR:{id:"dC3u7Z",defaultMessage:[{type:0,value:"Most popular"}]},NEWLY_ADDED:{id:"5hzUOY",defaultMessage:[{type:0,value:"Newly added"}]},CLOSEST:{id:"JBrnRg",defaultMessage:[{type:0,value:"Closest"}]},LIST_ORDER:{id:"B+DA/N",defaultMessage:[{type:0,value:"List order"}]},DATE:{id:"P7PLVj",defaultMessage:[{type:0,value:"Date"}]},NAME:{id:"HAlOn1",defaultMessage:[{type:0,value:"Name"}]},RECENTLY_ADDED:{id:"SzZeQP",defaultMessage:[{type:0,value:"Recently added"}]}}),(0,u.defineMessages)({LIGHT:{id:"3cc4Ct",defaultMessage:[{type:0,value:"Light"}]},MODERATE:{id:"usage.Moderate",defaultMessage:[{type:0,value:"Moderate"}]},HEAVY:{id:"lYVVhp",defaultMessage:[{type:0,value:"Heavy"}]},EXTRA_HEAVY:{id:"ybcwTj",defaultMessage:[{type:0,value:"Extra heavy"}]}}),(0,u.defineMessages)({MORE_FILTERS:{id:"vdJRZj",defaultMessage:[{type:0,value:"More filters"}]},TRAIL_LINKED:{id:"iYaB/W",defaultMessage:[{type:0,value:"Linked to trail"}]},TRAIL_UNLINKED:{id:"ML2dcn",defaultMessage:[{type:0,value:"Not linked to trail"}]},TRAIL_COMPLETION:{id:"PS2Lwa",defaultMessage:[{type:0,value:"Trail completion"}]},DIFFICULTY:{id:"rGmxAI",defaultMessage:[{type:0,value:"Difficulty"}]},ACTIVITY:{id:"PVF3BE",defaultMessage:[{type:0,value:"What to do"}]},ACTIVITY_LABEL:{id:"ZmlNQ3",defaultMessage:[{type:0,value:"Activity"}]},FEATURES:{id:"ItKyMx",defaultMessage:[{type:0,value:"What to see"}]},FEATURES_LABEL:{id:"6fzv5c",defaultMessage:[{type:0,value:"Attractions"}]},SUITABILITY:{id:"X3bdeZ",defaultMessage:[{type:0,value:"Suitability"}]},PARK:{id:"7aKBDo",defaultMessage:[{type:0,value:"Park"}]},CITY:{id:"TE4fIS",defaultMessage:[{type:0,value:"City"}]},STATE:{id:"ku+mDU",defaultMessage:[{type:0,value:"State"}]},COUNTRY:{id:"vONi+O",defaultMessage:[{type:0,value:"Country"}]},ELEV_GAIN:{id:"Ru4HPF",defaultMessage:[{type:0,value:"Elevation gain"}]},HIGHEST_POINT:{id:"AaviZ+",defaultMessage:[{type:0,value:"Highest point"}]},LENGTH:{id:"BACCkG",defaultMessage:[{type:0,value:"Length"}]},TIME:{id:"ug01Mk",defaultMessage:[{type:0,value:"Time"}]},EST:{id:"owDSk8",defaultMessage:[{type:0,value:"Est."}]},ROUTE_TYPE:{id:"1MaxxL",defaultMessage:[{type:0,value:"Route type"}]},TRAIL_TRAFFIC:{id:"ZiQjMv",defaultMessage:[{type:0,value:"Trail traffic"}]},RATING:{id:"ETRyBL",defaultMessage:[{type:0,value:"Rating"}]},SORT:{id:"hDI+JM",defaultMessage:[{type:0,value:"Sort by"}]},SORT_LABEL:{id:"25oM9Q",defaultMessage:[{type:0,value:"Sort"}]},DISTANCE_AWAY:{id:"Z7Gwou",defaultMessage:[{type:0,value:"Distance away"}]},AND_UP:{id:"v2L0Kd",defaultMessage:[{type:0,value:"& up"}]},COMPLETED:{id:"95stPq",defaultMessage:[{type:0,value:"Completed"}]},NOT_COMPLETED:{id:"4o5CAP",defaultMessage:[{type:0,value:"Not completed"}]},VERIFIED_COMPLETED:{id:"Wmu9zK",defaultMessage:[{type:0,value:"Verified completed"}]},OPEN:{id:"JfG49w",defaultMessage:[{type:0,value:"Open"}]}});(0,u.defineMessages)({ada:{id:"/GOmxn",defaultMessage:[{type:0,value:"Wheelchair friendly"}]},"wheelchair-friendly":{id:"/GOmxn",defaultMessage:[{type:0,value:"Wheelchair friendly"}]},dogs:{id:"jPVGPq",defaultMessage:[{type:0,value:"Dog friendly"}]},"dogs-leash":{id:"12nVMk",defaultMessage:[{type:0,value:"Dogs on leash"}]},kids:{id:"gryGFG",defaultMessage:[{type:0,value:"Kid friendly"}]},"kids-friendly":{id:"gryGFG",defaultMessage:[{type:0,value:"Kid friendly"}]},"no-dogs":{id:"o5d+Ca",defaultMessage:[{type:0,value:"No dogs"}]},"dogs-no":{id:"o5d+Ca",defaultMessage:[{type:0,value:"No dogs"}]},paved:{id:"RM0Zno",defaultMessage:[{type:0,value:"Paved"}]},"partially-paved":{id:"LYiRGN",defaultMessage:[{type:0,value:"Partially paved"}]},strollers:{id:"r1TN+9",defaultMessage:[{type:0,value:"Stroller friendly"}]},"stroller-friendly":{id:"r1TN+9",defaultMessage:[{type:0,value:"Stroller friendly"}]}}),(0,u.defineMessages)({not_completed:{id:"4o5CAP",defaultMessage:[{type:0,value:"Not completed"}]},completed:{id:"95stPq",defaultMessage:[{type:0,value:"Completed"}]},verified_completed:{id:"Wmu9zK",defaultMessage:[{type:0,value:"Verified completed"}]}}),(0,u.defineMessages)({beach:{id:"0tZ5qK",defaultMessage:[{type:0,value:"Beach"}]},cave:{id:"C+qheK",defaultMessage:[{type:0,value:"Cave"}]},"city-walk":{id:"WkFp1q",defaultMessage:[{type:0,value:"City walk"}]},event:{id:"m1czzY",defaultMessage:[{type:0,value:"Event"}]},forest:{id:"huDDge",defaultMessage:[{type:0,value:"Forest"}]},"historic-site":{id:"6sGSt3",defaultMessage:[{type:0,value:"Historic site"}]},"hot-springs":{id:"Uh4lbS",defaultMessage:[{type:0,value:"Hot springs"}]},lake:{id:"Pp866L",defaultMessage:[{type:0,value:"Lake"}]},"pub-crawl":{id:"r50rUj",defaultMessage:[{type:0,value:"Pub walk"}]},"rails-trails":{id:"ks+ck1",defaultMessage:[{type:0,value:"Rails trails"}]},river:{id:"W/oZ+0",defaultMessage:[{type:0,value:"River"}]},views:{id:"akF0Ly",defaultMessage:[{type:0,value:"Views"}]},waterfall:{id:"R6zFR+",defaultMessage:[{type:0,value:"Waterfall"}]},"wild-flowers":{id:"QyazrP",defaultMessage:[{type:0,value:"Wildflowers"}]},wildlife:{id:"uFbmVl",defaultMessage:[{type:0,value:"Wildlife"}]}});var aE=["ID","_cluster_geoloc","_geoloc","activities","area_id","area_name","area_slug","avg_rating","city_id","city_name","country_id","country_name","created_at","difficulty_rating","duration_minutes","duration_minutes_cycling","duration_minutes_hiking","duration_minutes_mountain_biking","duration_minutes_trail_running","elevation_gain","filters","has_profile_photo","is_closed","is_private_property","length","name","num_photos","num_reviews","photo_count","popularity","profile_photo_data","route_type","slug","state_id","state_name","type","units","user","verified_map_id","visitor_usage"],sE=function(e){return{hitsPerPage:5e3,insideBoundingBox:W_(e),facetFilters:["type:trail"],attributesToRetrieve:aE}},lE=function(e){var t,n=e.ID;return"trail"===e.type?kx({resReducer:function(e){return e.trails[0].defaultMap},url:"/api/alltrails/trails/".concat(n,"?detail=offline&include_pending=true")}):(t="deep",kx({resReducer:function(e){return e.maps[0]},url:"/api/alltrails/maps/".concat(n,"?detail=").concat(t)}))},uE="preview-lines",cE="preview-chevrons",dE=function(e){if(!e.getSource(uE)){var t=qe([]);Eb(e,uE,t,{},{},null,!1),Mb(e,cE,uE)}},hE=function(e){!function(e,t){te(e,t)}(e,cE),Sb(e,uE)},fE=function(e,t){return e.getLayer(uE)||dE(e),t?lE(t).then((function(t){var n=(0,d.atMapsToGeojson)([t]);ab(e,uE,n),ab(e,cE,n)})).catch((function(e){console.error(e)})):Promise.resolve(null)},pE=function(e){var t=e.getSource(uE);t&&t.setData(qe([]))},mE=__webpack_require__(87757),gE=__webpack_require__.n(mE),yE=__webpack_require__.p+"ab3aea6cfd539dbac4aa.png",vE=__webpack_require__.p+"01d0e3c31b36b9e003fb.png",_E=__webpack_require__.p+"3aaeb96e60babd315708.png",bE=__webpack_require__.p+"09decdc37654c85bb8f2.png",xE=__webpack_require__.p+"9d3dab05c5f34ebdc4dc.png",wE=__webpack_require__.p+"6ddb5f46d47d63f292d6.png",EE=__webpack_require__.p+"5be96eb55cf5413a8723.png",SE=__webpack_require__.p+"d3fe9e9eb837326d5bb3.png",TE=function(e){return"map-cluster-".concat(e)};var ME=function(e,t){var n=TE(t),r=function(e){switch(e){case aw:return yE;case sw:return vE;case lw:return _E;case"purple":return xE;case uw:return bE;case cw:return wE;case dw:return EE;case hw:return SE;default:throw Error("missing cluster src for color '".concat(e,"'"))}}(t);return ae(e,n,r,{pixelRatio:2})},kE=function(e,t,n,r){return{id:e,type:"symbol",source:t,filter:["has","point_count"],layout:{"text-allow-overlap":!0,"icon-allow-overlap":!0,"icon-offset":[uw,dw].includes(n)?[0,2]:[0,0],"icon-ignore-placement":!0,"icon-image":["image",TE(n)],"icon-size":1,"text-field":"{point_count_abbreviated}","text-font":["Manrope Bold"],"text-size":13},paint:{"text-color":"white","icon-opacity":r||1}}},CE=function(e,t,n){ee(e,t,!0,"click",(function(t){if(!(e.getZoom()>=12)){var r=t.features[0],i=r.properties.cluster_id;e.getSource(n).getClusterExpansionZoom(i,(function(t,n){t?console.error(t):e.easeTo({center:r.geometry.coordinates,zoom:n})}))}}))},PE=function(e,t,n,r){var i=null,o=new hb(e,{animate:!0,customPin:!0,initializeLeg:r}),a=function(){o.unspiderfy(),i=null,hE(e)},s=function(t){e.getCanvas().style.cursor="pointer";var r=t.features[0],a=r.properties,s=a.cluster_id,l=a.point_count;s!==i&&(e.getZoom()<12&&l>20||(i=s,e.getSource(n).getClusterLeaves(s,1e3,0,(function(e,t){if(e)console.error(e);else{var n=t.map((function(e){return e.properties}));o.spiderfy(r.geometry.coordinates,n)}}))))};e.context&&e.context.mobileBrowser?(ee(e,t,!0,"click",s),ee(e,t,!0,"unclick",a)):(ee(e,t,!0,"mouseenter",s),ee(e,t,!0,"mouseleave",(function(){e.getCanvas().style.cursor=e.customStyle.cursor})),ee(e,t,!1,"click",a)),ee(e,t,!0,"removed",a),ee(e,t,!1,"moveend",a),ee(e,t,!1,"zoom",a)},AE="explore-remote-pin",OE=AE,IE=function(e){e.getSource(AE)&&(pE(e),te(e,OE),oe(e,AE))};function LE(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}var DE=function(){var e,t=(e=gE().mark((function e(t,n,r,i,o,a){var s,l,u,c,h,f,p,m,g,y,v,_,b,x;return gE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n,l=n,u=t.getSource(s),c=(0,d.pointItemsToGeojson)(r),ab(t,s,c,{cluster:!0}),!u){e.next=7;break}return e.abrupt("return");case 7:return h="".concat(n,"-pins"),f="".concat(l,"-clusters"),p=function(e,n){IE(t),t.getCanvas().style.cursor="pointer",t.setLayoutProperty(h,"icon-image",["image",["match",["get","ID"],n.ID,pw("".concat(i,"-hover")),pw("".concat(i))]]),fE(t,n)},m=function(){t.getCanvas().style.cursor=t.customStyle.cursor,t.setLayoutProperty(h,"icon-image",["image",pw("".concat(i))]),pE(t)},e.next=13,Promise.all([yw(t,i),vw(t,i)]);case 13:return e.next=15,ME(t,i);case 15:g=_w(h,s,i,a),y=kE(f,s,i,a),v=null,"results-trails"!==l&&((v=J(t,"results-trails-pins"))||"nearbyTrails"===l||(v="nearbyTrails-pins")),[g,y].forEach((function(e){return Q(t,e,null,v)})),_=_b(t,h,o,p,m,{offset:gw}),b=_.popup,x=_.closePopup,CE(t,f,s),PE(t,f,s,(function(e){e.elements.pin.append(mw(i,a)),bb(t,b,e,o,x,p,m)}));case 23:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){LE(o,r,i,a,s,"next",e)}function s(e){LE(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e,n,r,i,o,a){return t.apply(this,arguments)}}(),RE=function(e,t){te(e,"".concat(t,"-clusters")),te(e,"".concat(t,"-pins")),oe(e,t)},NE=__webpack_require__(2754),zE=__webpack_require__.n(NE),jE=function(e,t){var n=function(e){var t,n;return e?(t=1,n="km"):(t=1/.621371,n="mi"),{unitInKm:t,unitsLabel:n}}(t),r=n.unitInKm,i=n.unitsLabel,o=e.features.map((function(e){var t=e.geometry.coordinates;return function(e,t,n){var r=[],i=0;return e.forEach((function(o,a){if(0!=a){var s=e[a-1],l=Math.floor(i/t),u=i+rt(s,o),c=Math.floor(u/t);if(c>=l+1)for(var d=c-l,h=1;h<=d;h++){var f=(l+h)*t-i,p=tt(Ve([s,o]),f);p.properties={label:"".concat(c," ").concat(n)},r.push(p)}i=u}})),r}(t="MultiLineString"===e.geometry.type?t.flat():t,r,i)})).flat();return qe(o)},BE="map-marker-distance",FE="distance-markers",UE=function(e,t){var n=FE,r=FE,i=t?jE(t,e.context.displayMetric):t([]);ab(e,n,i),e.getLayer(r)||(!function(e){ae(e,"map-marker-distance","https://cdn-assets.alltrails.com/assets/icons/maps/markers/map-marker-distance@2x.png",{stretchX:[[36,68]],pixelRatio:2})}(e),Q(e,function(e,t){return{id:e,type:"symbol",source:t,layout:{"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":["image",BE],"icon-text-fit":"both","icon-text-fit-padding":[10,14,14,14],"text-field":["get","label"],"text-font":["Manrope Bold"],"text-size":11}}}(r,n)))};function GE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GE(Object(n),!0).forEach((function(t){VE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qE={},$E={},WE=function(e){return"".concat(e,"-heatmap-polylines")},ZE=function(e){return"".concat(e,"-heatmap-points")},XE=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?.1:.5/(1+.5*Math.log10(e||0))},YE=function(e){var t=$E[e];t.length>0&&(t.forEach((function(e){return e.abort()})),t.length=0)},KE=function(e,t){$E[e]=t,Promise.allSettled(t).finally((function(){t.length=0}))},JE=function(e,t){var n,r,i=(null===(n=__AT_DATA__.store)||void 0===n||null===(r=n.user)||void 0===r?void 0:r.admin)?.3:.1;$E[t]={};var o=WE(t),a=ZE(t);return!e.getLayer(o)&&(ab(e,o,qe([])),ab(e,a,qe([])),Q(e,{id:o,type:"line",source:o,paint:{"line-color":(0,nb.colorWithOpacityExpression)(["coalesce",["get","color"],"red"],.5),"line-width":12}}),Q(e,{id:a,type:"heatmap",source:a,paint:{"heatmap-intensity":.8,"heatmap-opacity":i}}),dE(e),!0)},QE=function(e,t){var n=e.map((function(e){var t=e.created_at;return!t&&e.metadata&&(t=e.metadata.created),HE(HE({},e),{},{date:new Date(t)})}));if(t.includes("after")){var r=(new Date).getTime(),i=new Date(r-5184e6);n=n.filter((function(e){return e.date>i}))}if(t.includes("limit")){n=n.sort((function(e,t){return t.date-e.date})).slice(0,50)}return n},eS=function(e,t,n,r,i){var o,a,s=!(null===(o=__AT_DATA__.store)||void 0===o||null===(a=o.user)||void 0===a?void 0:a.admin),l=JE(e,t),u=WE(t);if(l){_b(e,u,i,(function(t,n){fE(e,n)}),(function(){pE(e)}),{},!0),ee(e,u,!0,"mouseenter",(function(){e.getCanvas().style.cursor="pointer"})),ee(e,u,!0,"mouseleave",(function(){e.getCanvas().style.cursor=""}))}YE(t);var c=function(e,t){return kx({url:"/api/alltrails/trails/".concat(e,"/public_tracks"),data:t,resReducer:function(t){return t.maps.map((function(t){return t.trailId=e,t}))}})}(n);KE(t,[c]),c.then((function(t){t=QE(t,r),ab(e,u,(0,d.atMapsToGeojson)(t,!0));var n=XE(t.length,s);re(e,u,"paint","line-color",(0,nb.colorWithOpacityExpression)(["coalesce",["get","color"],"red"],n)),s&&re(e,u,"paint","line-color",(0,nb.colorWithOpacityExpression)(nt.COLOR_BLUE_700,n))}))},tS=function(e){var t,n,r=e.map,i=e.id,o=e.heatMapResults,a=e.renderHoverCard,s=e.lineOpts,l=void 0===s?{}:s,u=o||[];qE[i]=u;var c=JE(r,i),h=WE(i);c&&(ee(r,h,!0,"click",(function(e){var t=e.features[0].properties,n=t.isVerifiedMap?t.trailId:t.ID,o=qE[i].find((function(e){return e.ID===n}));o&&function(e,t,n){dE(e),IE(e);var r=(0,d.pointItemsToGeojson)([t]),i=r.features,o=i[0].geometry.coordinates;ab(e,AE,r,{cluster:!1});var a="trail"===t.type?uw:lw;vw(e,a);var s=_w(OE,AE,"".concat(a,"-hover"));Q(e,s),fE(e,t);var l=function(){return IE(e)};_b(e,OE,n,null,l,{offset:gw}),ne(e,OE,"mouseenter",{features:i,lngLat:o}),e.once("click",l)}(r,o,a)})),ee(r,h,!0,"mouseenter",(function(){r.getCanvas().style.cursor="pointer"})),ee(r,h,!0,"mouseleave",(function(){r.getCanvas().style.cursor=""}))),YE(i);var f=!(null===(t=__AT_DATA__.store)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.admin),p=ZE(i),m=[],g=[];u.forEach((function(e){"trail"===e.type?m.push(e.ID):g.push(e.ID)}));var y=[];if(m.length>0||g.length>0){var v=kx({type:"POST",url:"/api/alltrails/maps/heatmap",data:{trail_ids:m,map_ids:g},resReducer:function(e){return e.maps}});y.push(v),v.then((function(e){ab(r,h,(0,d.atMapsToGeojson)(e,!0));var t=XE(e.length,f),n=l["line-color"]||(f?nt.COLOR_BLUE_700:["coalesce",["get","color"],"red"]);re(r,h,"paint","line-color",(0,nb.colorWithOpacityExpression)(n,t)),f&&re(r,h,"paint","line-width",5)}))}KE(i,y),ab(r,p,(0,d.pointItemsToGeojson)(u))},nS=function(e,t){delete qE[t],delete $E[t];var n=WE(t),r=ZE(t);te(e,n),te(e,r),oe(e,n),oe(e,r)},rS=function(e){return"".concat(e,"Heatmap")},iS=function(e,t,n,r,i,o){return Ow(Lw("pendingIndex")).search("",sE(e)).then((function(a){var s=a.hits.filter((function(e){if(t&&e.ID==t)return!1;var n=1046===e.source;return"clusterTrails"===r?n:!n}));s.forEach((function(e){e.name+=" (Pending)"})),dE(e),DE(e,r,s,i,n,.6),"pendingTrails"===r&&o.includes(rS(r))&&tS({map:e,id:r,heatMapResults:s,renderHoverCard:n})}))},oS=function(e,t){RE(e,t)},aS="nearbyTrails",sS="nearbyTrailsClosed",lS=function(e,t,n,r,i){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Ow(Lw("primaryIndex"),e)}().search("",sE(e)).then((function(o){var a=o.hits;t&&(a=a.filter((function(e){return e.ID!==t})));var s=[],l=[];a.forEach((function(e){e.is_closed&&i?l.push(e):s.push(e)})),dE(e),DE(e,aS,s,uw,n),DE(e,sS,l,lw,n),r.includes(rS(aS))&&tS({map:e,id:aS,heatMapResults:s,renderHoverCard:n})}))};function uS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uS(Object(n),!0).forEach((function(t){dS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hS=function(e,t,n){var i=null,o="trail_id=0 AND hidden=0 AND missing_polyline=0";if(n&&""!=n&&(o="".concat(o," AND activities:").concat(n)),t.indexOf("All")>-1){var a=e.getCenter(),s=e.getBounds(),l=new(r().LngLat)(s.getWest(),a.lat),u=a.distanceTo(l);i={hitsPerPage:500,facetFilters:[t.indexOf("recordings")>-1?"type:track":"type:map"],aroundLatLng:"".concat(a.lat,",").concat(a.lng),aroundRadius:parseInt(u),filters:o}}else i={hitsPerPage:500,facetFilters:[t.indexOf("recordings")>-1?"type:track":"type:map"],insideBoundingBox:W_(e),filters:"".concat(o," AND (rating>0 OR photo_count>0)")};return i},fS=function(e,t){return e.map((function(e){return t[e.ID]?cS(cS({},e),t[e.ID]):e}))},pS=function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};return Rw().search("",hS(e,n,i)).then((function(i){dE(e);var s=QE(i.hits,r);o&&(s=fS(s,o));var l=n.indexOf("recordings")>-1?"blue":"brown";DE(e,n,s,l,t),r.includes(rS(n))&&tS({map:e,id:n,heatMapResults:s,renderHoverCard:t,lineOpts:a})}))},mS=function(e,t){RE(e,t)},gS="contribs",yS=function(e,t){(function(e){return kx({url:"/api/alltrails/edits/trails/admin/contrib-vrs/",data:{trail_id:e},resReducer:function(e){return e.maps}})})(t).then((function(t){Eb(e,gS,(0,d.atMapsToGeojson)(t),{},{"line-color":"rgba(0, 187, 0, 0.3)","line-width":12},["circle","symbol","line"])}))},vS="#51aec8";function _S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return bS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xS="pk.eyJ1IjoiYWxsdHJhaWxzIiwiYSI6IkZGaGhGLWsifQ.Fl0FrDM8-xonRV6x2HFqcw",wS=function(e,t,n){var r=n.sources[t],i=n.layers[0];ie(e,t,r),Q(e,i)},ES=function(e,t){te(e,t),oe(e,t)},SS=function(e,t){MS(e,t,"filterable")},TS={after:{add:SS,remove:SS},airQuality:{add:function(e){return wS(e,"airQuality",zE()({styleId:"airQuality",mapboxAccessToken:xS}))},remove:function(e){return ES(e,"airQuality")}},clusterTrails:{add:function(e,t){var n=t.trailId,r=t.renderHoverCard,i=t.enabledOverlays;return iS(e,n,r,"clusterTrails",cw,i)},remove:function(e){return oS(e,"clusterTrails")}},contribs:{add:function(e,t){var n=t.trailId;return yS(e,n)},remove:function(e){return function(e){Sb(e,gS)}(e)}},distanceMarkers:{add:function(e,t){var n=t.exploreMap,r=t.plannerMap;return UE(e,(0,d.atMapsToGeojson)([r||n]))},remove:function(e){return function(e){te(e,FE),oe(e,FE)}(e)}},heatmap:{add:function(e,t){var n=t.trailId,r=t.results,i=t.enabledOverlays,o=t.renderHoverCard;n?eS(e,"default",n,i,o):tS({map:e,id:"default",heatMapResults:r,renderHoverCard:o})},remove:function(e){return nS(e,"default")}},lightPollution:{add:function(e){return wS(e,"lightPollution",zE()({styleId:"lightPollution",mapboxAccessToken:xS}))},remove:function(e){return ES(e,"lightPollution")}},limit:{add:SS,remove:SS},mapsAll:{add:function(e,t){var n=t.renderHoverCard,r=t.enabledOverlays;return pS(e,n,"mapsAll",r)},remove:function(e){return mS(e,"mapsAll")}},nearbyTrails:{add:function(e,t){var n=t.trailId,r=t.renderHoverCard,i=t.enabledOverlays,o=t.adminUser;return lS(e,n,r,i,o)},remove:function(e){return function(e){RE(e,aS),RE(e,sS)}(e)}},pendingTrails:{add:function(e,t){var n=t.trailId,r=t.renderHoverCard,i=t.enabledOverlays;return iS(e,n,r,"pendingTrails",uw,i)},remove:function(e){return oS(e,"pendingTrails")}},photos:{add:function(e,t){return function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Cx(n.trailId).then((function(s){var l=n.mapPhotos.map((function(e){return e.photo.id}));s=s.filter((function(e){return!l.includes(e.id)})),r&&o&&xw(e,s,r),bw(e,t,s,i,a)}))}(e,"community-photos",t.exploreMap,t.profilePhoto,t.handlePhotoClick,t.adminUser)},remove:function(e){return function(e,t){dx(e,t)}(e,"community-photos")}},pollen:{add:function(e){return wS(e,"pollen",zE()({styleId:"pollen",mapboxAccessToken:xS}))},remove:function(e){return ES(e,"pollen")}},recordingsAll:{add:function(e,t){var n=t.renderHoverCard,r=t.enabledOverlays,i=t.selectedFilterActivity,o=t.resultsDataOverrides;return pS(e,n,"recordingsAll",r,i,o,{"line-color":vS})},remove:function(e){return mS(e,"recordingsAll")}},recordingsPop:{add:function(e,t){var n=t.renderHoverCard,r=t.enabledOverlays,i=t.selectedFilterActivity,o=t.resultsDataOverrides;return pS(e,n,"recordingsPop",r,i,o,{"line-color":vS})},remove:function(e){return mS(e,"recordingsPop")}},adminOverlay:{add:function(e,t){var n=t.adminCustomizationSettings;fe(n.overlaySourceUrl)&&wS(e,"admin-overlay",W()("admin-overlay",n.overlaySourceUrl,{tileSize:256},{paint:{"raster-opacity":.5}}))},remove:function(e){return ES(e,"admin-overlay")}},waymarkedCycling:{add:function(e){return wS(e,"waymarkedCycling",zE()({styleId:"waymarkedCycling",mapboxAccessToken:xS}))},remove:function(e){return ES(e,"waymarkedCycling")}},waymarkedHiking:{add:function(e){return wS(e,"waymarkedHiking",zE()({styleId:"waymarkedHiking",mapboxAccessToken:xS}))},remove:function(e){return ES(e,"waymarkedHiking")}},waymarkedMTB:{add:function(e){return wS(e,"waymarkedMTB",zE()({styleId:"waymarkedMTB",mapboxAccessToken:xS}))},remove:function(e){return ES(e,"waymarkedMTB")}},waypoints:{add:function(e,t){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Px(n.trailId).then((function(o){var a=n.waypoints.map((function(e){return e.id}));o=o.filter((function(e){return!a.includes(e.id)})),cx(e,t,o,Ob,(function(e){return r(e,!0)}),i)}))}(e,"community-waypoints",t.exploreMap,t.renderWaypointPopup)},remove:function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;te(e,"".concat(t,"-labels")),dx(e,t),n&&n.publish({topic:"removeDraggableMarker"})}(e,"community-waypoints")}},weather:{add:function(e){return wS(e,"weather",zE()({styleId:"weather",mapboxAccessToken:xS}))},remove:function(e){return ES(e,"weather")}}};Object.entries(c.additionalStyleCardConfigs).forEach((function(e){var t=_S(e,2),n=t[0];t[1].hasHeatmap&&(TS["".concat(n,"Heatmap")]={add:TS[n].add,remove:function(e){return nS(e,n)}})}));var MS=function(e,t,n){t.enabledOverlays.forEach((function(r){var i=c.additionalStyleCardConfigs[r],o=TS[r];i[n]&&o.add(e,t)}))};function kS(e){return kS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kS(e)}function CS(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function PS(e){var t=function(e,t){if("object"!==kS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==kS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===kS(t)?t:String(t)}function AS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AS(Object(n),!0).forEach((function(t){IS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function IS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return DS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var RS=function(e){var n=e.alltrailsLink,i=e.atMap,o=e.context,a=e.links,s=e.list,h=e.mapboxToken,f=e.mapLayerDefault,p=e.mapLayers,m=e.mapLayersTitle,g=e.mapOverlays,y=e.mapOverlaysTitle,v=e.scrollWheelZoom,_=e.showElevationChart,b=e.trail,x=(0,t.useRef)(null),w=LS((0,t.useState)(f),2),E=w[0],S=w[1],T=LS((0,t.useState)(!1),2),k=T[0],C=T[1],P=LS((0,t.useState)({}),2),A=P[0],O=P[1],I=(0,u.useIntl)();var L=(0,t.useCallback)((function(e){var t=function(){window.open(M.wrapUrlSafe("/".concat(e.slug),o.languageRegionCode))};return(0,D.jsx)(_e,{context:o,handleCardClick:t,handleFavoriteClick:t,trail:e})}),[o]),R=(0,t.useCallback)((function(e){var t=e.user;"string"===typeof t&&((e=OS({},e)).user=JSON.parse(t));var n=function(){var t="/explore/".concat("track"===e.type?"recording":"map","/").concat(e.slug);window.open(M.wrapUrlSafe(t,o.languageRegionCode))};return(0,D.jsx)(V,{context:o,handleCardClick:n,handleFavoriteClick:n,track:e})}),[o]),N=(0,t.useCallback)((function(e){return"trail"===e.type?L(e):"track"===e.type||"map"===e.type?R(e):null}),[R,L]),z=(0,t.useCallback)((function(){if(r().supported()){r().accessToken=h;var e=(0,d.pointItemToLngLat)(b||i)||void 0,t=new(r().Map)({center:e,container:"map",fadeDuration:0,style:{layers:[],sources:{},glyphs:se,version:8},zoom:14});t.context=o,function(e){e.customStyle={cursor:"",sources:[],layers:[],layerEvents:{},images:[]}}(t),function(e){var t,n=function(t){return e.queryRenderedFeatures(t.point)[0]},r=function(e,t){return e&&t&&e.layer.id===t.layer.id&&e.id===t.id},i=function(t,n,r){t&&ne(e,t.layer.id,n,X(X({},r),{},{features:[t]}))},o=null;e.on("click",(function(e){if("CANVAS"===e.originalEvent.target.nodeName){var t=n(e);r(o,t)||i(o,"unclick",e),i(t,"click",e),o=t}})),e.context&&e.context.mobileBrowser||(e.on("mousemove",(function(e){if("CANVAS"===e.originalEvent.target.nodeName){var o=n(e);r(t,o)||(i(t,"mouseleave",e),i(o,"mouseenter",e),t=o)}})),e.on("mouseout",(function(){t=null})))}(t),x.current=t,v||x.current.scrollZoom.disable(),x.current.once("load",(function(){(0,me[f])(o.locale,o.displayMetric,I).then((function(e){de(t,e,!1).then((function(){var e=new(r().LngLatBounds);if(s)!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n){var a=[],s=[],l=[];n.forEach((function(e){i&&Tw(i,e),"trail"===e.type?e.is_closed&&o?s.push(e):a.push(e):l.push(e)})),dE(e),DE(e,"".concat(t,"-trails"),a,uw,r),DE(e,"".concat(t,"-trails-closed"),s,lw,r),DE(e,"".concat(t,"-activities"),l,dw,r)}}(t,"list",s,(function(e){return N(e)}),e);else if(i){var n,o,a=l("/:locale?/widget/map/:map").test(null===(n=window)||void 0===n||null===(o=n.location)||void 0===o?void 0:o.pathname);Sw({atMap:i,bounds:e,handlePhotoClick:void 0,map:t,messagingChannel:void 0,renderWaypointPopup:function(e){return function(e){return"string"===typeof e.location&&(e.location=JSON.parse(e.location)),(0,D.jsx)(G.Z,{children:(0,D.jsx)(Be,{waypoint:e,addToVRoute:null})})}(e)},polylineOpts:void 0,withWaypointLabels:!1,isMapCreatorPage:a})}!function(e,t){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i={duration:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,padding:arguments.length>2&&void 0!==arguments[2]?arguments[2]:20};t.isEmpty()?r&&e.setZoom(0):n?e.cameraForBounds(t,i):e.fitBounds(t,i)}(t,e)}))}))})),t.addControl(new(r().ScaleControl)({maxWidth:80,unit:o.displayMetric?"metric":"imperial"}),"bottom-right")}else alert(I.formatMessage({id:"nS3hGF",defaultMessage:[{type:0,value:"It appears that your browser does not support MapboxGL, a library that is required to render maps on AllTrails.com. Please upgrade or change browsers before reloading the page. See https://docs.mapbox.com/help/troubleshooting/mapbox-browser-support/ for more details. Contact customer support with details about your device and browser if issue persists."}]}))}),[i,o,I,s,f,h,N,v,b]);function j(e,t,n,r){if(t.length<1)return null;var i=t.map((function(e){return(0,D.jsxs)("li",{children:[r(e),(0,D.jsx)("label",{htmlFor:"menu-item-".concat(e),children:n[e].displayName})]},"menu-item-li-".concat(e))}));return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"menu-title",children:e}),(0,D.jsx)("ul",{className:"control",children:i})]})}return(0,t.useEffect)((function(){z()}),[z]),(0,D.jsxs)("div",{id:"static-map",children:[(0,D.jsxs)("div",{id:"controls",children:[(0,D.jsxs)("div",{id:"titleBar",children:[(0,D.jsx)("a",{className:"logo",href:n,target:"_blank",rel:"noopener noreferrer",children:(0,D.jsx)("img",{alt:"AllTrails",src:"https://cdn-assets.alltrails.com/assets/shared/alltrails_logo_widget.png"})}),(0,D.jsx)("div",{className:"info-bar xlate-none",children:a.flatMap((function(e,t){return[t>0?(0,D.jsxs)("span",{className:"delimiter",children:[" ","|"," "]},"".concat(e.text," - delimiter")):null,(0,D.jsx)("span",{className:"info",children:(0,D.jsx)("a",{href:e.path,target:"_blank",rel:"noopener noreferrer",children:e.text})},e.text)]}))})]}),(0,D.jsxs)("div",{id:"map-controls",children:[_&&(0,D.jsx)("div",{id:"elevation",children:(0,D.jsx)(tb,{collapsed:!1,displayMetric:o.displayMetric,languageRegionCode:o.languageRegionCode,elevationConfig:{areaColor:"white",axisTextColor:"gray",backgroundColor:"white",endLineColor:"blue",hoverLineColor:"#219AD8",lineColor:"red",textColor:"gray",tickColor:"gray"},handleMouseOver:function(e){x.current&&function(e,t){var n;n=t?He(t):qe([]);var r=e.getSource(ww);r&&r.setData(n)}(x.current,e)},height:85,map:i,showStatsGroup:!1,width:255})}),(0,D.jsxs)("div",{className:"left zoom-group",children:[(0,D.jsx)("button",{id:"zoom-in",className:"zoom control",onClick:function(){return x.current.zoomIn()},type:"button",children:(0,D.jsx)("span",{children:(0,D.jsx)("img",{alt:"Zoom In",src:"//cdn-assets.alltrails.com/assets/icons/maps/zoom-darkgreen.png"})})}),(0,D.jsx)("button",{id:"zoom-out",className:"zoom control",onClick:function(){return x.current.zoomOut()},type:"button",children:(0,D.jsx)("span",{children:(0,D.jsx)("img",{alt:"Zoom Out",src:"//cdn-assets.alltrails.com/assets/icons/maps/unzoom-darkgreen.png"})})})]}),(0,D.jsx)("div",{className:"right control-group",children:(0,D.jsxs)("div",{className:"map-control-container",children:[(0,D.jsx)("button",{className:"flyout-button-container control",onClick:function(){C(!k)},type:"button",children:(0,D.jsx)("img",{alt:"Map Options",className:"layer-image",src:"//cdn-assets.alltrails.com/assets/icons/trail/map-layers-dark-green.png"})}),(0,D.jsxs)("div",{className:"".concat(k?"":"hidden"," menu map-controls-menu"),children:[j(m,p,c.baseStyleCardConfigs,(function(e){var t=E===e;return(0,D.jsx)("input",{className:"control",defaultChecked:t,id:"menu-item-".concat(e),name:"map-layers",onClick:function(){return function(e){(0,me[e])(o.locale,o.displayMetric,I).then((function(e){de(x.current,e,!1)})),S(e)}(e)},type:"radio",value:e})})),j(y,g,c.additionalStyleCardConfigs,(function(e){return(0,D.jsx)("input",{className:"control styled-checkbox",id:"menu-item-".concat(e),name:"map-overlays",onClick:function(){return function(e){var t=TS[e],n=A[e],r=CS(A,[e].map(PS));n?(t.remove(x.current),O(r)):(t.add(x.current,{exploreMap:i}),r[e]=!0,O(r))}(e)},type:"checkbox",value:e})}))]})]})})]})]}),(0,D.jsx)("div",{id:"map",onClick:function(){return C(!1)}})]})},NS=function(e){return(0,D.jsx)(G.Z,{children:(0,D.jsx)(RS,OS({},e))})};var zS=__webpack_require__(7905),jS=__webpack_require__.n(zS),BS=__webpack_require__(37254),FS=__webpack_require__.n(BS),US=__webpack_require__(26490),GS=__webpack_require__(71721),HS=__webpack_require__.n(GS),VS=__webpack_require__(47562),qS=__webpack_require__.n(VS),$S=__webpack_require__(22302),WS=__webpack_require__.n($S),ZS=__webpack_require__(26466),XS=__webpack_require__.n(ZS),YS=__webpack_require__(22338),KS=function(e,t){var n=e.is_sign_up,r=e.user;if(n){var i;if((0,YS.getAmplitudeInstance)().setUserId(null===r||void 0===r?void 0:r.id),WS()({authentication_type:t}),"undefined"!==typeof gtag)gtag("config",window.ga4_measure_id,{user_id:r.id}),i=t===FS().Email?"/":t===FS().GoogleOneTap?"/google/":"/".concat(t,"/"),gtag("event","page_view",{page_path:"/register".concat(i,"success")}),gtag("event","sign_up",{method:t});"undefined"!==typeof fbq&&(fbq("init",window.fb_pixel_id,{external_id:r.id}),fbq("track","CompleteRegistration",{content_name:"signup - ".concat(t)}))}else(0,YS.getAmplitudeInstance)().setUserId(null===r||void 0===r?void 0:r.id),XS()({authentication_type:t})};function JS(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function QS(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){JS(o,r,i,a,s,"next",e)}function s(e){JS(o,r,i,a,s,"throw",e)}a(void 0)}))}}function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eT(Object(n),!0).forEach((function(t){nT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rT(e,t,n,r){return iT.apply(this,arguments)}function iT(){return iT=QS(gE().mark((function e(t,n,r,i){var o,a,s,l;return gE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="string"===typeof t?t:t.getAuthResponse().id_token,a=tT(tT({google_token:o,create_session:!0},r&&{referral_code:r}),i&&{one_tap:i}),e.prev=2,e.next=5,(0,US.post)("/api/alltrails/google/login",a);case 5:s=e.sent,KS(s,i?FS().GoogleOneTap:FS().Google),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),l=e.t0 instanceof US.ApiError&&(null===e.t0||void 0===e.t0?void 0:e.t0.statusText)?e.t0.statusText:"unknown","signup"===n?qS()({authentication_type:i?FS().GoogleOneTap:FS().Google,failure_type:l}):HS()({authentication_type:i?FS().GoogleOneTap:FS().Google,failure_type:l});case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,null,[[2,9]])}))),iT.apply(this,arguments)}var oT=__webpack_require__(50533).useSelector;function aT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var sT=function e(t,n){function r(e,r,i){if("undefined"!==typeof document){"number"===typeof(i=aT({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+o}}return Object.create({set:r,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=t.read(a,s),e===s)break}catch(l){}}return e?r[e]:r}},remove:function(e,t){r(e,"",aT({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,aT({},this.attributes,t))},withConverter:function(t){return e(aT({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),lT=sT;var uT=function(){var e=x("/plus?k=savenow",y()()),n=(0,t.useCallback)((function(e){e&&($.colorbox({html:e.innerHTML,fixed:!0,scrolling:!1,open:!0,speed:300,transition:"fade",width:"630",height:"465",className:"launch-pro-modal"}),$("#cboxContent #no-thanks-upsell-button").click((function(){$.colorbox.close()})))}),[]);return(0,D.jsx)("div",{ref:n,className:"LegacyUpsell-module__container___W6pAn",children:(0,D.jsxs)("div",{className:"funnel-modal",id:"discount-popup-modal",children:[(0,D.jsx)("div",{className:"logo-container",children:(0,D.jsx)("img",{alt:"",className:"at-logo",src:"https://cdn-assets.alltrails.com/assets/images/plus/logo_plus.png"})}),(0,D.jsxs)("div",{className:"text-container",children:[(0,D.jsx)("h3",{className:"discount-percent",children:(0,D.jsx)(u.FormattedMessage,{id:"uIIXik",defaultMessage:[{type:0,value:"20% OFF"}]})}),(0,D.jsx)("div",{className:"list-container",children:(0,D.jsx)(u.FormattedMessage,{id:"8ViQA5",defaultMessage:[{type:0,value:"This is your chance - take this one-time offer to get 20% off your first year of AllTrails+"}]})})]}),(0,D.jsxs)("div",{className:"button-container",children:[(0,D.jsx)("div",{children:(0,D.jsx)("a",{className:"btn pro-btn",href:e,children:(0,D.jsx)("span",{children:(0,D.jsx)(u.FormattedMessage,{id:"TdTXXf",defaultMessage:[{type:0,value:"Learn more"}]})})})}),(0,D.jsx)("button",{id:"no-thanks-upsell-button",className:"btn no-thanks-btn",children:(0,D.jsx)(u.FormattedMessage,{id:"c+JYNI",defaultMessage:[{type:0,value:"No thanks"}]})})]})]})})};var cT=function(){return(0,D.jsx)(uT,{})},dT=__webpack_require__(99434),hT=__webpack_require__(63457);function fT(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function pT(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){fT(o,r,i,a,s,"next",e)}function s(e){fT(o,r,i,a,s,"throw",e)}a(void 0)}))}}function mT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yT=(0,t.lazy)((function(){return Promise.all([__webpack_require__.e(5225),__webpack_require__.e(4021)]).then(__webpack_require__.bind(__webpack_require__,1716))})),vT=(0,t.lazy)((function(){return Promise.all([__webpack_require__.e(5452),__webpack_require__.e(2813)]).then(__webpack_require__.bind(__webpack_require__,82813))})),_T=(0,t.lazy)((function(){return __webpack_require__.e(4184).then(__webpack_require__.bind(__webpack_require__,84184))})),bT=function(e){var n,r=e.showUpsell,i=e.signupModalIsOpen,o=e.flashes,a=__webpack_require__.g.__AT_DATA__.features.includes("community"),s=y()(),l=oT((function(e){return e.user})),u=__webpack_require__.g.__AT_DATA__.googleClientId,c=mT((0,t.useState)(null),2),d=c[0],h=c[1],f=n?!(0,hT.Z)("(min-width:".concat(n,"px)")):!(0,hT.Z)("(min-width:".concat(768,"px)")),p=0,m=function e(){if(l&&!(p>3))if(window.pendo)try{var t,n={id:l.id,country:l.location.country,first_name:l.firstName,preferred_language:l.marketingLangPreference,pro:l.pro,pro_conversion_dt:null===(t=l.subscription)||void 0===t?void 0:t.startDate,account_create_dt:l.created,is_subscribed:!l.email_none,is_community_beta_enabled:a};window.pendo.initialize({visitor:n})}catch(r){(0,dT.Z)(r)}else p+=1,setTimeout(e,750)};(0,t.useEffect)((function(){m()}),[]),(0,t.useEffect)((function(){var e;(e=new URLSearchParams(window.location.search)).has("navigator_desktop")&&h((0,D.jsx)(t.Suspense,{fallback:null,children:(0,D.jsx)(yT,{isOpen:!0,onRequestClose:function(){return h(null)}})})),e.has("appinstall_desktop")&&h((0,D.jsx)(t.Suspense,{fallback:null,children:(0,D.jsx)(vT,{})}))}),[]),(0,t.useEffect)((function(){function e(e){return t.apply(this,arguments)}function t(){return(t=pT(gE().mark((function e(t){var n,r,i;return gE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rT(t.credential,"login",null,!0);case 2:(n=e.sent).welcome_notice?((r=new URLSearchParams(window.location.search)).set("welcome",n.welcome_notice),i=r.toString(),window.location.replace(window.location.href+(""!==i?"?".concat(i):""))):window.location.replace(window.location.href);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(!l&&!f&&!["/about","/careers","/plus","/pro","/signup","/login"].some((function(e){return M.wrapUrlSafe(e,s)===window.location.pathname}))){var n=document.createElement("script");n.src="https://accounts.google.com/gsi/client",n.async=!0,n.defer=!0,n.onload=function(){return window.google.accounts.id.initialize({callback:e,cancel_on_tap_outside:!1,client_id:u,prompt_parent_id:"g_one_tap"}),void(i||window.google.accounts.id.prompt((function(e){e.isDisplayMoment()&&e.isDisplayed()&&jS()()})))},n.onerror=function(){(0,dT.Z)("Failed to load Google one-tap script")},document.body.appendChild(n)}}),[l,u,f,s]),(0,t.useEffect)((function(){l&&function(e){var t=new URLSearchParams(window.location.search),n=t.get("apple_oauth");if(n){KS({is_sign_up:"signup"===n,user:e},FS().Apple);var r=t.toString();window.history.replaceState(null,null,window.location.pathname+(""!==r?"?".concat(r):""))}}(l)}),[l]);var g="true"!==lT.get("cx_savetoday_shown");return g&&lT.set("cx_savetoday_shown","true",{expires:365}),(0,D.jsxs)(D.Fragment,{children:[r&&!g&&(0,D.jsx)(cT,{}),(0,D.jsx)(t.Suspense,{fallback:null,children:(0,D.jsx)(_T,{flashes:o})}),d]})};var xT=function(e){var t=e.showUpsell,n=e.signupModalIsOpen,r=e.flashes;return(0,D.jsx)(G.Z,{children:(0,D.jsx)(bT,{showUpsell:t,signupModalIsOpen:n,flashes:r})})};__webpack_require__(61019);var wT=__webpack_require__(29177);(0,e.Q)();var ET={MapWidget:NS,OriginalLanguageButton:Ie,WaypointPopup:Be,PhotoPopup:qx,TrailHoverCard:_e,ActivityHoverCard:V,GlobalActions:xT};wT.getConstructor=function(e){return ET[e]}}()})();
//# sourceMappingURL=widget-f5399e684790b9387e54.js.map